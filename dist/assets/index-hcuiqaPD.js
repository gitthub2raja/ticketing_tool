function fW(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $_={exports:{}},Lg={},q_={exports:{}},jn={};var wR;function hW(){if(wR)return jn;wR=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function x(X,te,ce){this.props=X,this.context=te,this.refs=w,this.updater=ce||y}x.prototype.isReactComponent={},x.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},x.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function _(){}_.prototype=x.prototype;function M(X,te,ce){this.props=X,this.context=te,this.refs=w,this.updater=ce||y}var E=M.prototype=new _;E.constructor=M,b(E,x.prototype),E.isPureReactComponent=!0;var A=Array.isArray,R=Object.prototype.hasOwnProperty,O={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function L(X,te,ce){var le,be={},Se=null,Ie=null;if(te!=null)for(le in te.ref!==void 0&&(Ie=te.ref),te.key!==void 0&&(Se=""+te.key),te)R.call(te,le)&&!N.hasOwnProperty(le)&&(be[le]=te[le]);var qe=arguments.length-2;if(qe===1)be.children=ce;else if(1<qe){for(var Pe=Array(qe),Fe=0;Fe<qe;Fe++)Pe[Fe]=arguments[Fe+2];be.children=Pe}if(X&&X.defaultProps)for(le in qe=X.defaultProps,qe)be[le]===void 0&&(be[le]=qe[le]);return{$$typeof:n,type:X,key:Se,ref:Ie,props:be,_owner:O.current}}function T(X,te){return{$$typeof:n,type:X.type,key:te,ref:X.ref,props:X.props,_owner:X._owner}}function j(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function U(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ce){return te[ce]})}var B=/\/+/g;function V(X,te){return typeof X=="object"&&X!==null&&X.key!=null?U(""+X.key):te.toString(36)}function W(X,te,ce,le,be){var Se=typeof X;(Se==="undefined"||Se==="boolean")&&(X=null);var Ie=!1;if(X===null)Ie=!0;else switch(Se){case"string":case"number":Ie=!0;break;case"object":switch(X.$$typeof){case n:case e:Ie=!0}}if(Ie)return Ie=X,be=be(Ie),X=le===""?"."+V(Ie,0):le,A(be)?(ce="",X!=null&&(ce=X.replace(B,"$&/")+"/"),W(be,te,ce,"",function(Fe){return Fe})):be!=null&&(j(be)&&(be=T(be,ce+(!be.key||Ie&&Ie.key===be.key?"":(""+be.key).replace(B,"$&/")+"/")+X)),te.push(be)),1;if(Ie=0,le=le===""?".":le+":",A(X))for(var qe=0;qe<X.length;qe++){Se=X[qe];var Pe=le+V(Se,qe);Ie+=W(Se,te,ce,Pe,be)}else if(Pe=m(X),typeof Pe=="function")for(X=Pe.call(X),qe=0;!(Se=X.next()).done;)Se=Se.value,Pe=le+V(Se,qe++),Ie+=W(Se,te,ce,Pe,be);else if(Se==="object")throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Y(X,te,ce){if(X==null)return X;var le=[],be=0;return W(X,le,"","",function(Se){return te.call(ce,Se,be++)}),le}function Q(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=ce)},function(ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=ce)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var se={current:null},G={transition:null},J={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:G,ReactCurrentOwner:O};function Z(){throw Error("act(...) is not supported in production builds of React.")}return jn.Children={map:Y,forEach:function(X,te,ce){Y(X,function(){te.apply(this,arguments)},ce)},count:function(X){var te=0;return Y(X,function(){te++}),te},toArray:function(X){return Y(X,function(te){return te})||[]},only:function(X){if(!j(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},jn.Component=x,jn.Fragment=t,jn.Profiler=i,jn.PureComponent=M,jn.StrictMode=r,jn.Suspense=l,jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,jn.act=Z,jn.cloneElement=function(X,te,ce){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var le=b({},X.props),be=X.key,Se=X.ref,Ie=X._owner;if(te!=null){if(te.ref!==void 0&&(Se=te.ref,Ie=O.current),te.key!==void 0&&(be=""+te.key),X.type&&X.type.defaultProps)var qe=X.type.defaultProps;for(Pe in te)R.call(te,Pe)&&!N.hasOwnProperty(Pe)&&(le[Pe]=te[Pe]===void 0&&qe!==void 0?qe[Pe]:te[Pe])}var Pe=arguments.length-2;if(Pe===1)le.children=ce;else if(1<Pe){qe=Array(Pe);for(var Fe=0;Fe<Pe;Fe++)qe[Fe]=arguments[Fe+2];le.children=qe}return{$$typeof:n,type:X.type,key:be,ref:Se,props:le,_owner:Ie}},jn.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:a,_context:X},X.Consumer=X},jn.createElement=L,jn.createFactory=function(X){var te=L.bind(null,X);return te.type=X,te},jn.createRef=function(){return{current:null}},jn.forwardRef=function(X){return{$$typeof:o,render:X}},jn.isValidElement=j,jn.lazy=function(X){return{$$typeof:f,_payload:{_status:-1,_result:X},_init:Q}},jn.memo=function(X,te){return{$$typeof:u,type:X,compare:te===void 0?null:te}},jn.startTransition=function(X){var te=G.transition;G.transition={};try{X()}finally{G.transition=te}},jn.unstable_act=Z,jn.useCallback=function(X,te){return se.current.useCallback(X,te)},jn.useContext=function(X){return se.current.useContext(X)},jn.useDebugValue=function(){},jn.useDeferredValue=function(X){return se.current.useDeferredValue(X)},jn.useEffect=function(X,te){return se.current.useEffect(X,te)},jn.useId=function(){return se.current.useId()},jn.useImperativeHandle=function(X,te,ce){return se.current.useImperativeHandle(X,te,ce)},jn.useInsertionEffect=function(X,te){return se.current.useInsertionEffect(X,te)},jn.useLayoutEffect=function(X,te){return se.current.useLayoutEffect(X,te)},jn.useMemo=function(X,te){return se.current.useMemo(X,te)},jn.useReducer=function(X,te,ce){return se.current.useReducer(X,te,ce)},jn.useRef=function(X){return se.current.useRef(X)},jn.useState=function(X){return se.current.useState(X)},jn.useSyncExternalStore=function(X,te,ce){return se.current.useSyncExternalStore(X,te,ce)},jn.useTransition=function(){return se.current.useTransition()},jn.version="18.3.1",jn}var _R;function Z1(){return _R||(_R=1,q_.exports=hW()),q_.exports}var SR;function pW(){if(SR)return Lg;SR=1;var n=Z1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var f,h={},m=null,y=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(y=l.ref);for(f in l)r.call(l,f)&&!a.hasOwnProperty(f)&&(h[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)h[f]===void 0&&(h[f]=l[f]);return{$$typeof:e,type:o,key:m,ref:y,props:h,_owner:i.current}}return Lg.Fragment=t,Lg.jsx=s,Lg.jsxs=s,Lg}var MR;function mW(){return MR||(MR=1,$_.exports=pW()),$_.exports}var d=mW(),z=Z1();const ye=Kn(z),gW=fW({__proto__:null,default:ye},[z]);var lx={},X_={exports:{}},Ja={},Y_={exports:{}},K_={};var ER;function vW(){return ER||(ER=1,(function(n){function e(G,J){var Z=G.length;G.push(J);e:for(;0<Z;){var X=Z-1>>>1,te=G[X];if(0<i(te,J))G[X]=J,G[Z]=te,Z=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Z=G.pop();if(Z!==J){G[0]=Z;e:for(var X=0,te=G.length,ce=te>>>1;X<ce;){var le=2*(X+1)-1,be=G[le],Se=le+1,Ie=G[Se];if(0>i(be,Z))Se<te&&0>i(Ie,be)?(G[X]=Ie,G[Se]=Z,X=Se):(G[X]=be,G[le]=Z,X=le);else if(Se<te&&0>i(Ie,Z))G[X]=Ie,G[Se]=Z,X=Se;else break e}}return J}function i(G,J){var Z=G.sortIndex-J.sortIndex;return Z!==0?Z:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var J=t(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=G)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(G){if(w=!1,E(G),!b)if(t(l)!==null)b=!0,Q(R);else{var J=t(u);J!==null&&se(A,J.startTime-G)}}function R(G,J){b=!1,w&&(w=!1,_(L),L=-1),y=!0;var Z=m;try{for(E(J),h=t(l);h!==null&&(!(h.expirationTime>J)||G&&!U());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var te=X(h.expirationTime<=J);J=n.unstable_now(),typeof te=="function"?h.callback=te:h===t(l)&&r(l),E(J)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var le=t(u);le!==null&&se(A,le.startTime-J),ce=!1}return ce}finally{h=null,m=Z,y=!1}}var O=!1,N=null,L=-1,T=5,j=-1;function U(){return!(n.unstable_now()-j<T)}function B(){if(N!==null){var G=n.unstable_now();j=G;var J=!0;try{J=N(!0,G)}finally{J?V():(O=!1,N=null)}}else O=!1}var V;if(typeof M=="function")V=function(){M(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=B,V=function(){Y.postMessage(null)}}else V=function(){x(B,0)};function Q(G){N=G,O||(O=!0,V())}function se(G,J){L=x(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){b||y||(b=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var Z=m;m=J;try{return G()}finally{m=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=m;m=G;try{return J()}finally{m=Z}},n.unstable_scheduleCallback=function(G,J,Z){var X=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,G={id:f++,callback:J,priorityLevel:G,startTime:Z,expirationTime:te,sortIndex:-1},Z>X?(G.sortIndex=Z,e(u,G),t(l)===null&&G===t(u)&&(w?(_(L),L=-1):w=!0,se(A,Z-X))):(G.sortIndex=te,e(l,G),b||y||(b=!0,Q(R))),G},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(G){var J=m;return function(){var Z=m;m=J;try{return G.apply(this,arguments)}finally{m=Z}}}})(K_)),K_}var TR;function yW(){return TR||(TR=1,Y_.exports=vW()),Y_.exports}var AR;function xW(){if(AR)return Ja;AR=1;var n=Z1(),e=yW();function t(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(c,p){s(c,p),s(c+"Capture",p)}function s(c,p){for(i[c]=p,c=0;c<p.length;c++)r.add(p[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(c){return l.call(h,c)?!0:l.call(f,c)?!1:u.test(c)?h[c]=!0:(f[c]=!0,!1)}function y(c,p,S,P){if(S!==null&&S.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return P?!1:S!==null?!S.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function b(c,p,S,P){if(p===null||typeof p>"u"||y(c,p,S,P))return!0;if(P)return!1;if(S!==null)switch(S.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function w(c,p,S,P,I,F,K){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=P,this.attributeNamespace=I,this.mustUseProperty=S,this.propertyName=c,this.type=p,this.sanitizeURL=F,this.removeEmptyString=K}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){x[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];x[p]=new w(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){x[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){x[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){x[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){x[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){x[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){x[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){x[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function M(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace(_,M);x[p]=new w(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace(_,M);x[p]=new w(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace(_,M);x[p]=new w(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){x[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){x[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function E(c,p,S,P){var I=x.hasOwnProperty(p)?x[p]:null;(I!==null?I.type!==0:P||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(b(p,S,I,P)&&(S=null),P||I===null?m(p)&&(S===null?c.removeAttribute(p):c.setAttribute(p,""+S)):I.mustUseProperty?c[I.propertyName]=S===null?I.type===3?!1:"":S:(p=I.attributeName,P=I.attributeNamespace,S===null?c.removeAttribute(p):(I=I.type,S=I===3||I===4&&S===!0?"":""+S,P?c.setAttributeNS(P,p,S):c.setAttribute(p,S))))}var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),O=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),G=Symbol.iterator;function J(c){return c===null||typeof c!="object"?null:(c=G&&c[G]||c["@@iterator"],typeof c=="function"?c:null)}var Z=Object.assign,X;function te(c){if(X===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);X=p&&p[1]||""}return`
`+X+c}var ce=!1;function le(c,p){if(!c||ce)return"";ce=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Le){var P=Le}Reflect.construct(c,[],p)}else{try{p.call()}catch(Le){P=Le}c.call(p.prototype)}else{try{throw Error()}catch(Le){P=Le}c()}}catch(Le){if(Le&&P&&typeof Le.stack=="string"){for(var I=Le.stack.split(`
`),F=P.stack.split(`
`),K=I.length-1,fe=F.length-1;1<=K&&0<=fe&&I[K]!==F[fe];)fe--;for(;1<=K&&0<=fe;K--,fe--)if(I[K]!==F[fe]){if(K!==1||fe!==1)do if(K--,fe--,0>fe||I[K]!==F[fe]){var we=`
`+I[K].replace(" at new "," at ");return c.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",c.displayName)),we}while(1<=K&&0<=fe);break}}}finally{ce=!1,Error.prepareStackTrace=S}return(c=c?c.displayName||c.name:"")?te(c):""}function be(c){switch(c.tag){case 5:return te(c.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return c=le(c.type,!1),c;case 11:return c=le(c.type.render,!1),c;case 1:return c=le(c.type,!0),c;default:return""}}function Se(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case O:return"Portal";case T:return"Profiler";case L:return"StrictMode";case V:return"Suspense";case W:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case U:return(c.displayName||"Context")+".Consumer";case j:return(c._context.displayName||"Context")+".Provider";case B:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Y:return p=c.displayName||null,p!==null?p:Se(c.type)||"Memo";case Q:p=c._payload,c=c._init;try{return Se(c(p))}catch{}}return null}function Ie(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(p);case 8:return p===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function qe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Pe(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Fe(c){var p=Pe(c)?"checked":"value",S=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),P=""+c[p];if(!c.hasOwnProperty(p)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,F=S.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return I.call(this)},set:function(K){P=""+K,F.call(this,K)}}),Object.defineProperty(c,p,{enumerable:S.enumerable}),{getValue:function(){return P},setValue:function(K){P=""+K},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function $e(c){c._valueTracker||(c._valueTracker=Fe(c))}function ne(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var S=p.getValue(),P="";return c&&(P=Pe(c)?c.checked?"true":"false":c.value),c=P,c!==S?(p.setValue(c),!0):!1}function Ve(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ne(c,p){var S=p.checked;return Z({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??c._wrapperState.initialChecked})}function Ke(c,p){var S=p.defaultValue==null?"":p.defaultValue,P=p.checked!=null?p.checked:p.defaultChecked;S=qe(p.value!=null?p.value:S),c._wrapperState={initialChecked:P,initialValue:S,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function De(c,p){p=p.checked,p!=null&&E(c,"checked",p,!1)}function vt(c,p){De(c,p);var S=qe(p.value),P=p.type;if(S!=null)P==="number"?(S===0&&c.value===""||c.value!=S)&&(c.value=""+S):c.value!==""+S&&(c.value=""+S);else if(P==="submit"||P==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?ie(c,p.type,S):p.hasOwnProperty("defaultValue")&&ie(c,p.type,qe(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function dt(c,p,S){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var P=p.type;if(!(P!=="submit"&&P!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,S||p===c.value||(c.value=p),c.defaultValue=p}S=c.name,S!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,S!==""&&(c.name=S)}function ie(c,p,S){(p!=="number"||Ve(c.ownerDocument)!==c)&&(S==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+S&&(c.defaultValue=""+S))}var ee=Array.isArray;function Te(c,p,S,P){if(c=c.options,p){p={};for(var I=0;I<S.length;I++)p["$"+S[I]]=!0;for(S=0;S<c.length;S++)I=p.hasOwnProperty("$"+c[S].value),c[S].selected!==I&&(c[S].selected=I),I&&P&&(c[S].defaultSelected=!0)}else{for(S=""+qe(S),p=null,I=0;I<c.length;I++){if(c[I].value===S){c[I].selected=!0,P&&(c[I].defaultSelected=!0);return}p!==null||c[I].disabled||(p=c[I])}p!==null&&(p.selected=!0)}}function Ze(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Je(c,p){var S=p.value;if(S==null){if(S=p.children,p=p.defaultValue,S!=null){if(p!=null)throw Error(t(92));if(ee(S)){if(1<S.length)throw Error(t(93));S=S[0]}p=S}p==null&&(p=""),S=p}c._wrapperState={initialValue:qe(S)}}function Ye(c,p){var S=qe(p.value),P=qe(p.defaultValue);S!=null&&(S=""+S,S!==c.value&&(c.value=S),p.defaultValue==null&&c.defaultValue!==S&&(c.defaultValue=S)),P!=null&&(c.defaultValue=""+P)}function Tt(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function pt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?pt(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Ut,Yt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,S,P,I){MSApp.execUnsafeLocalFunction(function(){return c(p,S,P,I)})}:c})(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(Ut=Ut||document.createElement("div"),Ut.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Ut.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Qe(c,p){if(p){var S=c.firstChild;if(S&&S===c.lastChild&&S.nodeType===3){S.nodeValue=p;return}}c.textContent=p}var mn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hn=["Webkit","ms","Moz","O"];Object.keys(mn).forEach(function(c){hn.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),mn[p]=mn[c]})});function $t(c,p,S){return p==null||typeof p=="boolean"||p===""?"":S||typeof p!="number"||p===0||mn.hasOwnProperty(c)&&mn[c]?(""+p).trim():p+"px"}function Mt(c,p){c=c.style;for(var S in p)if(p.hasOwnProperty(S)){var P=S.indexOf("--")===0,I=$t(S,p[S],P);S==="float"&&(S="cssFloat"),P?c.setProperty(S,I):c[S]=I}}var At=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(c,p){if(p){if(At[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function We(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lt=null;function wt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ae=null,ge=null,ot=null;function gt(c){if(c=co(c)){if(typeof Ae!="function")throw Error(t(280));var p=c.stateNode;p&&(p=Nh(p),Ae(c.stateNode,c.type,p))}}function Gt(c){ge?ot?ot.push(c):ot=[c]:ge=c}function kt(){if(ge){var c=ge,p=ot;if(ot=ge=null,gt(c),p)for(c=0;c<p.length;c++)gt(p[c])}}function xn(c,p){return c(p)}function Pn(){}var Bn=!1;function nr(c,p,S){if(Bn)return c(p,S);Bn=!0;try{return xn(c,p,S)}finally{Bn=!1,(ge!==null||ot!==null)&&(Pn(),kt())}}function Mn(c,p){var S=c.stateNode;if(S===null)return null;var P=Nh(S);if(P===null)return null;S=P[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(c=c.type,P=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!P;break e;default:c=!1}if(c)return null;if(S&&typeof S!="function")throw Error(t(231,p,typeof S));return S}var zr=!1;if(o)try{var si={};Object.defineProperty(si,"passive",{get:function(){zr=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{zr=!1}function ks(c,p,S,P,I,F,K,fe,we){var Le=Array.prototype.slice.call(arguments,3);try{p.apply(S,Le)}catch(at){this.onError(at)}}var ss=!1,$i=null,yi=!1,cn=null,yl={onError:function(c){ss=!0,$i=c}};function Rc(c,p,S,P,I,F,K,fe,we){ss=!1,$i=null,ks.apply(yl,arguments)}function q(c,p,S,P,I,F,K,fe,we){if(Rc.apply(this,arguments),ss){if(ss){var Le=$i;ss=!1,$i=null}else throw Error(t(198));yi||(yi=!0,cn=Le)}}function re(c){var p=c,S=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,(p.flags&4098)!==0&&(S=p.return),c=p.return;while(c)}return p.tag===3?S:null}function xe(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function $(c){if(re(c)!==c)throw Error(t(188))}function ae(c){var p=c.alternate;if(!p){if(p=re(c),p===null)throw Error(t(188));return p!==c?null:c}for(var S=c,P=p;;){var I=S.return;if(I===null)break;var F=I.alternate;if(F===null){if(P=I.return,P!==null){S=P;continue}break}if(I.child===F.child){for(F=I.child;F;){if(F===S)return $(I),c;if(F===P)return $(I),p;F=F.sibling}throw Error(t(188))}if(S.return!==P.return)S=I,P=F;else{for(var K=!1,fe=I.child;fe;){if(fe===S){K=!0,S=I,P=F;break}if(fe===P){K=!0,P=I,S=F;break}fe=fe.sibling}if(!K){for(fe=F.child;fe;){if(fe===S){K=!0,S=F,P=I;break}if(fe===P){K=!0,P=F,S=I;break}fe=fe.sibling}if(!K)throw Error(t(189))}}if(S.alternate!==P)throw Error(t(190))}if(S.tag!==3)throw Error(t(188));return S.stateNode.current===S?c:p}function ue(c){return c=ae(c),c!==null?pe(c):null}function pe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=pe(c);if(p!==null)return p;c=c.sibling}return null}var he=e.unstable_scheduleCallback,je=e.unstable_cancelCallback,Ue=e.unstable_shouldYield,Be=e.unstable_requestPaint,Re=e.unstable_now,Ct=e.unstable_getCurrentPriorityLevel,et=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,Pt=e.unstable_NormalPriority,Vt=e.unstable_LowPriority,qt=e.unstable_IdlePriority,nn=null,yt=null;function mt(c){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(nn,c,void 0,(c.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Yn,Kt=Math.log,rn=Math.LN2;function Yn(c){return c>>>=0,c===0?32:31-(Kt(c)/rn|0)|0}var vr=64,rr=4194304;function Nn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function bn(c,p){var S=c.pendingLanes;if(S===0)return 0;var P=0,I=c.suspendedLanes,F=c.pingedLanes,K=S&268435455;if(K!==0){var fe=K&~I;fe!==0?P=Nn(fe):(F&=K,F!==0&&(P=Nn(F)))}else K=S&~I,K!==0?P=Nn(K):F!==0&&(P=Nn(F));if(P===0)return 0;if(p!==0&&p!==P&&(p&I)===0&&(I=P&-P,F=p&-p,I>=F||I===16&&(F&4194240)!==0))return p;if((P&4)!==0&&(P|=S&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=P;0<p;)S=31-tn(p),I=1<<S,P|=c[S],p&=~I;return P}function Pr(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(c,p){for(var S=c.suspendedLanes,P=c.pingedLanes,I=c.expirationTimes,F=c.pendingLanes;0<F;){var K=31-tn(F),fe=1<<K,we=I[K];we===-1?((fe&S)===0||(fe&P)!==0)&&(I[K]=Pr(fe,p)):we<=p&&(c.expiredLanes|=fe),F&=~fe}}function On(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ir(){var c=vr;return vr<<=1,(vr&4194240)===0&&(vr=64),c}function ra(c){for(var p=[],S=0;31>S;S++)p.push(c);return p}function Jr(c,p,S){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-tn(p),c[p]=S}function js(c,p){var S=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var P=c.eventTimes;for(c=c.expirationTimes;0<S;){var I=31-tn(S),F=1<<I;p[I]=0,P[I]=-1,c[I]=-1,S&=~F}}function kc(c,p){var S=c.entangledLanes|=p;for(c=c.entanglements;S;){var P=31-tn(S),I=1<<P;I&p|c[P]&p&&(c[P]|=p),S&=~I}}var Fn=0;function jc(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Ju,Hm,m0,Jf,Qf,xl=!1,eh=[],Is=null,En=null,to=null,bl=new Map,Ic=new Map,Vo=[],v_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qr(c,p){switch(c){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":bl.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(p.pointerId)}}function wl(c,p,S,P,I,F){return c===null||c.nativeEvent!==F?(c={blockedOn:p,domEventName:S,eventSystemFlags:P,nativeEvent:F,targetContainers:[I]},p!==null&&(p=co(p),p!==null&&Hm(p)),c):(c.eventSystemFlags|=P,p=c.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),c)}function y_(c,p,S,P,I){switch(p){case"focusin":return Is=wl(Is,c,p,S,P,I),!0;case"dragenter":return En=wl(En,c,p,S,P,I),!0;case"mouseover":return to=wl(to,c,p,S,P,I),!0;case"pointerover":var F=I.pointerId;return bl.set(F,wl(bl.get(F)||null,c,p,S,P,I)),!0;case"gotpointercapture":return F=I.pointerId,Ic.set(F,wl(Ic.get(F)||null,c,p,S,P,I)),!0}return!1}function th(c){var p=Ko(c.target);if(p!==null){var S=re(p);if(S!==null){if(p=S.tag,p===13){if(p=xe(S),p!==null){c.blockedOn=p,Qf(c.priority,function(){m0(S)});return}}else if(p===3&&S.stateNode.current.memoizedState.isDehydrated){c.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}c.blockedOn=null}function nh(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var S=Ha(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(S===null){S=c.nativeEvent;var P=new S.constructor(S.type,S);lt=P,S.target.dispatchEvent(P),lt=null}else return p=co(S),p!==null&&Hm(p),c.blockedOn=S,!1;p.shift()}return!0}function Qu(c,p,S){nh(c)&&S.delete(p)}function Ls(){xl=!1,Is!==null&&nh(Is)&&(Is=null),En!==null&&nh(En)&&(En=null),to!==null&&nh(to)&&(to=null),bl.forEach(Qu),Ic.forEach(Qu)}function ed(c,p){c.blockedOn===p&&(c.blockedOn=null,xl||(xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ls)))}function td(c){function p(I){return ed(I,c)}if(0<eh.length){ed(eh[0],c);for(var S=1;S<eh.length;S++){var P=eh[S];P.blockedOn===c&&(P.blockedOn=null)}}for(Is!==null&&ed(Is,c),En!==null&&ed(En,c),to!==null&&ed(to,c),bl.forEach(p),Ic.forEach(p),S=0;S<Vo.length;S++)P=Vo[S],P.blockedOn===c&&(P.blockedOn=null);for(;0<Vo.length&&(S=Vo[0],S.blockedOn===null);)th(S),S.blockedOn===null&&Vo.shift()}var qi=A.ReactCurrentBatchConfig,Ba=!0;function rh(c,p,S,P){var I=Fn,F=qi.transition;qi.transition=null;try{Fn=1,ih(c,p,S,P)}finally{Fn=I,qi.transition=F}}function Vm(c,p,S,P){var I=Fn,F=qi.transition;qi.transition=null;try{Fn=4,ih(c,p,S,P)}finally{Fn=I,qi.transition=F}}function ih(c,p,S,P){if(Ba){var I=Ha(c,p,S,P);if(I===null)Mh(c,p,P,ah,S),Qr(c,P);else if(y_(I,c,p,S,P))P.stopPropagation();else if(Qr(c,P),p&4&&-1<v_.indexOf(c)){for(;I!==null;){var F=co(I);if(F!==null&&Ju(F),F=Ha(c,p,S,P),F===null&&Mh(c,p,P,ah,S),F===I)break;I=F}I!==null&&P.stopPropagation()}else Mh(c,p,P,null,S)}}var ah=null;function Ha(c,p,S,P){if(ah=null,c=wt(P),c=Ko(c),c!==null)if(p=re(c),p===null)c=null;else if(S=p.tag,S===13){if(c=xe(p),c!==null)return c;c=null}else if(S===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return ah=c,null}function g0(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ct()){case et:return 1;case it:return 4;case Pt:case Vt:return 16;case qt:return 536870912;default:return 16}default:return 16}}var os=null,Wm=null,ia=null;function nd(){if(ia)return ia;var c,p=Wm,S=p.length,P,I="value"in os?os.value:os.textContent,F=I.length;for(c=0;c<S&&p[c]===I[c];c++);var K=S-c;for(P=1;P<=K&&p[S-P]===I[F-P];P++);return ia=I.slice(c,1<P?1-P:void 0)}function _l(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function no(){return!0}function sh(){return!1}function Xi(c){function p(S,P,I,F,K){this._reactName=S,this._targetInst=I,this.type=P,this.nativeEvent=F,this.target=K,this.currentTarget=null;for(var fe in c)c.hasOwnProperty(fe)&&(S=c[fe],this[fe]=S?S(F):F[fe]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?no:sh,this.isPropagationStopped=sh,this}return Z(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),p}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rd=Xi(Sl),Ml=Z({},Sl,{view:0,detail:0}),Lc=Xi(Ml),aa,Va,Wa,Dc=Z({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Wa&&(Wa&&c.type==="mousemove"?(aa=c.screenX-Wa.screenX,Va=c.screenY-Wa.screenY):Va=aa=0,Wa=c),aa)},movementY:function(c){return"movementY"in c?c.movementY:Va}}),Gm=Xi(Dc),ro=Z({},Dc,{dataTransfer:0}),Wo=Xi(ro),oh=Z({},Ml,{relatedTarget:0}),lh=Xi(oh),ch=Z({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),v0=Xi(ch),y0=Z({},Sl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),$m=Xi(y0),uh=Z({},Sl,{data:0}),qm=Xi(uh),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uc(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=Xm[c])?!!p[c]:!1}function Go(){return Uc}var dh=Z({},Ml,{key:function(c){if(c.key){var p=x0[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=_l(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?b0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(c){return c.type==="keypress"?_l(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?_l(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),fh=Xi(dh),Ga=Z({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ba=Xi(Ga),El=Z({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),io=Xi(El),ao=Z({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tl=Xi(ao),w0=Z({},Dc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ym=Xi(w0),Km=[9,13,27,32],Yi=o&&"CompositionEvent"in window,xi=null;o&&"documentMode"in document&&(xi=document.documentMode);var _r=o&&"TextEvent"in window&&!xi,Fc=o&&(!Yi||xi&&8<xi&&11>=xi),$a=" ",Zm=!1;function Jm(c,p){switch(c){case"keyup":return Km.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var $o=!1;function _0(c,p){switch(c){case"compositionend":return hh(p);case"keypress":return p.which!==32?null:(Zm=!0,$a);case"textInput":return c=p.data,c===$a&&Zm?null:c;default:return null}}function id(c,p){if($o)return c==="compositionend"||!Yi&&Jm(c,p)?(c=nd(),ia=Wm=os=null,$o=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Fc&&p.locale!=="ko"?null:p.data;default:return null}}var zc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ph(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!zc[c.type]:p==="textarea"}function Bc(c,p,S,P){Gt(P),p=Eh(p,"onChange"),0<p.length&&(S=new rd("onChange","change",null,S,P),c.push({event:S,listeners:p}))}var qo=null,Hc=null;function S0(c){$c(c,0)}function so(c){var p=Br(c);if(ne(p))return c}function M0(c,p){if(c==="change")return p}var Vc=!1;if(o){var sa;if(o){var Al="oninput"in document;if(!Al){var Cl=document.createElement("div");Cl.setAttribute("oninput","return;"),Al=typeof Cl.oninput=="function"}sa=Al}else sa=!1;Vc=sa&&(!document.documentMode||9<document.documentMode)}function ls(){qo&&(qo.detachEvent("onpropertychange",mh),Hc=qo=null)}function mh(c){if(c.propertyName==="value"&&so(Hc)){var p=[];Bc(p,Hc,c,wt(c)),nr(S0,p)}}function Wc(c,p,S){c==="focusin"?(ls(),qo=p,Hc=S,qo.attachEvent("onpropertychange",mh)):c==="focusout"&&ls()}function E0(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return so(Hc)}function Qm(c,p){if(c==="click")return so(p)}function Nr(c,p){if(c==="input"||c==="change")return so(p)}function gh(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var wa=typeof Object.is=="function"?Object.is:gh;function Pl(c,p){if(wa(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var S=Object.keys(c),P=Object.keys(p);if(S.length!==P.length)return!1;for(P=0;P<S.length;P++){var I=S[P];if(!l.call(p,I)||!wa(c[I],p[I]))return!1}return!0}function ad(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function _a(c,p){var S=ad(c);c=0;for(var P;S;){if(S.nodeType===3){if(P=c+S.textContent.length,c<=p&&P>=p)return{node:S,offset:p-c};c=P}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=ad(S)}}function Nl(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Nl(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Or(){for(var c=window,p=Ve();p instanceof c.HTMLIFrameElement;){try{var S=typeof p.contentWindow.location.href=="string"}catch{S=!1}if(S)c=p.contentWindow;else break;p=Ve(c.document)}return p}function oi(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function li(c){var p=Or(),S=c.focusedElem,P=c.selectionRange;if(p!==S&&S&&S.ownerDocument&&Nl(S.ownerDocument.documentElement,S)){if(P!==null&&oi(S)){if(p=P.start,c=P.end,c===void 0&&(c=p),"selectionStart"in S)S.selectionStart=p,S.selectionEnd=Math.min(c,S.value.length);else if(c=(p=S.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var I=S.textContent.length,F=Math.min(P.start,I);P=P.end===void 0?F:Math.min(P.end,I),!c.extend&&F>P&&(I=P,P=F,F=I),I=_a(S,F);var K=_a(S,P);I&&K&&(c.rangeCount!==1||c.anchorNode!==I.node||c.anchorOffset!==I.offset||c.focusNode!==K.node||c.focusOffset!==K.offset)&&(p=p.createRange(),p.setStart(I.node,I.offset),c.removeAllRanges(),F>P?(c.addRange(p),c.extend(K.node,K.offset)):(p.setEnd(K.node,K.offset),c.addRange(p)))}}for(p=[],c=S;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<p.length;S++)c=p[S],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var vh=o&&"documentMode"in document&&11>=document.documentMode,Ds=null,Ol=null,sd=null,ci=!1;function yh(c,p,S){var P=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ci||Ds==null||Ds!==Ve(P)||(P=Ds,"selectionStart"in P&&oi(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),sd&&Pl(sd,P)||(sd=P,P=Eh(Ol,"onSelect"),0<P.length&&(p=new rd("onSelect","select",null,p,S),c.push({event:p,listeners:P}),p.target=Ds)))}function Gc(c,p){var S={};return S[c.toLowerCase()]=p.toLowerCase(),S["Webkit"+c]="webkit"+p,S["Moz"+c]="moz"+p,S}var Xo={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},cs={},us={};o&&(us=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Us(c){if(cs[c])return cs[c];if(!Xo[c])return c;var p=Xo[c],S;for(S in p)if(p.hasOwnProperty(S)&&S in us)return cs[c]=p[S];return c}var od=Us("animationend"),ld=Us("animationiteration"),eg=Us("animationstart"),tg=Us("transitionend"),ng=new Map,rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(c,p){ng.set(c,p),a(p,[c])}for(var xh=0;xh<rg.length;xh++){var cd=rg[xh],ud=cd.toLowerCase(),T0=cd[0].toUpperCase()+cd.slice(1);oo(ud,"on"+T0)}oo(od,"onAnimationEnd"),oo(ld,"onAnimationIteration"),oo(eg,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(tg,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function wh(c,p,S){var P=c.type||"unknown-event";c.currentTarget=S,q(P,p,void 0,c),c.currentTarget=null}function $c(c,p){p=(p&4)!==0;for(var S=0;S<c.length;S++){var P=c[S],I=P.event;P=P.listeners;e:{var F=void 0;if(p)for(var K=P.length-1;0<=K;K--){var fe=P[K],we=fe.instance,Le=fe.currentTarget;if(fe=fe.listener,we!==F&&I.isPropagationStopped())break e;wh(I,fe,Le),F=we}else for(K=0;K<P.length;K++){if(fe=P[K],we=fe.instance,Le=fe.currentTarget,fe=fe.listener,we!==F&&I.isPropagationStopped())break e;wh(I,fe,Le),F=we}}}if(yi)throw c=cn,yi=!1,cn=null,c}function dr(c,p){var S=p[jl];S===void 0&&(S=p[jl]=new Set);var P=c+"__bubble";S.has(P)||(Sh(p,c,2,!1),S.add(P))}function _h(c,p,S){var P=0;p&&(P|=4),Sh(S,c,P,p)}var dd="_reactListening"+Math.random().toString(36).slice(2);function qc(c){if(!c[dd]){c[dd]=!0,r.forEach(function(S){S!=="selectionchange"&&(bh.has(S)||_h(S,!1,c),_h(S,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[dd]||(p[dd]=!0,_h("selectionchange",!1,p))}}function Sh(c,p,S,P){switch(g0(p)){case 1:var I=rh;break;case 4:I=Vm;break;default:I=ih}S=I.bind(null,p,S,c),I=void 0,!zr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),P?I!==void 0?c.addEventListener(p,S,{capture:!0,passive:I}):c.addEventListener(p,S,!0):I!==void 0?c.addEventListener(p,S,{passive:I}):c.addEventListener(p,S,!1)}function Mh(c,p,S,P,I){var F=P;if((p&1)===0&&(p&2)===0&&P!==null)e:for(;;){if(P===null)return;var K=P.tag;if(K===3||K===4){var fe=P.stateNode.containerInfo;if(fe===I||fe.nodeType===8&&fe.parentNode===I)break;if(K===4)for(K=P.return;K!==null;){var we=K.tag;if((we===3||we===4)&&(we=K.stateNode.containerInfo,we===I||we.nodeType===8&&we.parentNode===I))return;K=K.return}for(;fe!==null;){if(K=Ko(fe),K===null)return;if(we=K.tag,we===5||we===6){P=F=K;continue e}fe=fe.parentNode}}P=P.return}nr(function(){var Le=F,at=wt(S),st=[];e:{var rt=ng.get(c);if(rt!==void 0){var Nt=rd,Dt=c;switch(c){case"keypress":if(_l(S)===0)break e;case"keydown":case"keyup":Nt=fh;break;case"focusin":Dt="focus",Nt=lh;break;case"focusout":Dt="blur",Nt=lh;break;case"beforeblur":case"afterblur":Nt=lh;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=Wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=io;break;case od:case ld:case eg:Nt=v0;break;case tg:Nt=Tl;break;case"scroll":Nt=Lc;break;case"wheel":Nt=Ym;break;case"copy":case"cut":case"paste":Nt=$m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=ba}var Ft=(p&4)!==0,ti=!Ft&&c==="scroll",Ce=Ft?rt!==null?rt+"Capture":null:rt;Ft=[];for(var _e=Le,Oe;_e!==null;){Oe=_e;var ut=Oe.stateNode;if(Oe.tag===5&&ut!==null&&(Oe=ut,Ce!==null&&(ut=Mn(_e,Ce),ut!=null&&Ft.push(Xc(_e,ut,Oe)))),ti)break;_e=_e.return}0<Ft.length&&(rt=new Nt(rt,Dt,null,S,at),st.push({event:rt,listeners:Ft}))}}if((p&7)===0){e:{if(rt=c==="mouseover"||c==="pointerover",Nt=c==="mouseout"||c==="pointerout",rt&&S!==lt&&(Dt=S.relatedTarget||S.fromElement)&&(Ko(Dt)||Dt[Sa]))break e;if((Nt||rt)&&(rt=at.window===at?at:(rt=at.ownerDocument)?rt.defaultView||rt.parentWindow:window,Nt?(Dt=S.relatedTarget||S.toElement,Nt=Le,Dt=Dt?Ko(Dt):null,Dt!==null&&(ti=re(Dt),Dt!==ti||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):(Nt=null,Dt=Le),Nt!==Dt)){if(Ft=Gm,ut="onMouseLeave",Ce="onMouseEnter",_e="mouse",(c==="pointerout"||c==="pointerover")&&(Ft=ba,ut="onPointerLeave",Ce="onPointerEnter",_e="pointer"),ti=Nt==null?rt:Br(Nt),Oe=Dt==null?rt:Br(Dt),rt=new Ft(ut,_e+"leave",Nt,S,at),rt.target=ti,rt.relatedTarget=Oe,ut=null,Ko(at)===Le&&(Ft=new Ft(Ce,_e+"enter",Dt,S,at),Ft.target=Oe,Ft.relatedTarget=ti,ut=Ft),ti=ut,Nt&&Dt)t:{for(Ft=Nt,Ce=Dt,_e=0,Oe=Ft;Oe;Oe=Rl(Oe))_e++;for(Oe=0,ut=Ce;ut;ut=Rl(ut))Oe++;for(;0<_e-Oe;)Ft=Rl(Ft),_e--;for(;0<Oe-_e;)Ce=Rl(Ce),Oe--;for(;_e--;){if(Ft===Ce||Ce!==null&&Ft===Ce.alternate)break t;Ft=Rl(Ft),Ce=Rl(Ce)}Ft=null}else Ft=null;Nt!==null&&A0(st,rt,Nt,Ft,!1),Dt!==null&&ti!==null&&A0(st,ti,Dt,Ft,!0)}}e:{if(rt=Le?Br(Le):window,Nt=rt.nodeName&&rt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&rt.type==="file")var Ht=M0;else if(ph(rt))if(Vc)Ht=Nr;else{Ht=E0;var Zt=Wc}else(Nt=rt.nodeName)&&Nt.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Ht=Qm);if(Ht&&(Ht=Ht(c,Le))){Bc(st,Ht,S,at);break e}Zt&&Zt(c,rt,Le),c==="focusout"&&(Zt=rt._wrapperState)&&Zt.controlled&&rt.type==="number"&&ie(rt,"number",rt.value)}switch(Zt=Le?Br(Le):window,c){case"focusin":(ph(Zt)||Zt.contentEditable==="true")&&(Ds=Zt,Ol=Le,sd=null);break;case"focusout":sd=Ol=Ds=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,yh(st,S,at);break;case"selectionchange":if(vh)break;case"keydown":case"keyup":yh(st,S,at)}var Jt;if(Yi)e:{switch(c){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else $o?Jm(c,S)&&(sn="onCompositionEnd"):c==="keydown"&&S.keyCode===229&&(sn="onCompositionStart");sn&&(Fc&&S.locale!=="ko"&&($o||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&$o&&(Jt=nd()):(os=at,Wm="value"in os?os.value:os.textContent,$o=!0)),Zt=Eh(Le,sn),0<Zt.length&&(sn=new qm(sn,c,null,S,at),st.push({event:sn,listeners:Zt}),Jt?sn.data=Jt:(Jt=hh(S),Jt!==null&&(sn.data=Jt)))),(Jt=_r?_0(c,S):id(c,S))&&(Le=Eh(Le,"onBeforeInput"),0<Le.length&&(at=new qm("onBeforeInput","beforeinput",null,S,at),st.push({event:at,listeners:Le}),at.data=Jt))}$c(st,p)})}function Xc(c,p,S){return{instance:c,listener:p,currentTarget:S}}function Eh(c,p){for(var S=p+"Capture",P=[];c!==null;){var I=c,F=I.stateNode;I.tag===5&&F!==null&&(I=F,F=Mn(c,S),F!=null&&P.unshift(Xc(c,F,I)),F=Mn(c,p),F!=null&&P.push(Xc(c,F,I))),c=c.return}return P}function Rl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function A0(c,p,S,P,I){for(var F=p._reactName,K=[];S!==null&&S!==P;){var fe=S,we=fe.alternate,Le=fe.stateNode;if(we!==null&&we===P)break;fe.tag===5&&Le!==null&&(fe=Le,I?(we=Mn(S,F),we!=null&&K.unshift(Xc(S,we,fe))):I||(we=Mn(S,F),we!=null&&K.push(Xc(S,we,fe)))),S=S.return}K.length!==0&&c.push({event:p,listeners:K})}var x_=/\r\n?/g,C0=/\u0000|\uFFFD/g;function ig(c){return(typeof c=="string"?c:""+c).replace(x_,`
`).replace(C0,"")}function fd(c,p,S){if(p=ig(p),ig(c)!==p&&S)throw Error(t(425))}function hd(){}var Yc=null,ag=null;function sg(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var og=typeof setTimeout=="function"?setTimeout:void 0,lg=typeof clearTimeout=="function"?clearTimeout:void 0,Th=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof Th<"u"?function(c){return Th.resolve(null).then(c).catch(P0)}:og;function P0(c){setTimeout(function(){throw c})}function Ah(c,p){var S=p,P=0;do{var I=S.nextSibling;if(c.removeChild(S),I&&I.nodeType===8)if(S=I.data,S==="/$"){if(P===0){c.removeChild(I),td(p);return}P--}else S!=="$"&&S!=="$?"&&S!=="$!"||P++;S=I}while(S);td(p)}function lo(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function cg(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var S=c.data;if(S==="$"||S==="$!"||S==="$?"){if(p===0)return c;p--}else S==="/$"&&p++}c=c.previousSibling}return null}var kl=Math.random().toString(36).slice(2),ei="__reactFiber$"+kl,Kc="__reactProps$"+kl,Sa="__reactContainer$"+kl,jl="__reactEvents$"+kl,Ch="__reactListeners$"+kl,Ph="__reactHandles$"+kl;function Ko(c){var p=c[ei];if(p)return p;for(var S=c.parentNode;S;){if(p=S[Sa]||S[ei]){if(S=p.alternate,p.child!==null||S!==null&&S.child!==null)for(c=cg(c);c!==null;){if(S=c[ei])return S;c=cg(c)}return p}c=S,S=c.parentNode}return null}function co(c){return c=c[ei]||c[Sa],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Br(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Nh(c){return c[Kc]||null}var ug=[],ui=-1;function jr(c){return{current:c}}function fr(c){0>ui||(c.current=ug[ui],ug[ui]=null,ui--)}function ar(c,p){ui++,ug[ui]=c.current,c.current=p}var uo={},bi=jr(uo),Ki=jr(!1),fo=uo;function Il(c,p){var S=c.type.contextTypes;if(!S)return uo;var P=c.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var I={},F;for(F in S)I[F]=p[F];return P&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=I),I}function Ii(c){return c=c.childContextTypes,c!=null}function pd(){fr(Ki),fr(bi)}function dg(c,p,S){if(bi.current!==uo)throw Error(t(168));ar(bi,p),ar(Ki,S)}function md(c,p,S){var P=c.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return S;P=P.getChildContext();for(var I in P)if(!(I in p))throw Error(t(108,Ie(c)||"Unknown",I));return Z({},S,P)}function Ll(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||uo,fo=bi.current,ar(bi,c),ar(Ki,Ki.current),!0}function fg(c,p,S){var P=c.stateNode;if(!P)throw Error(t(169));S?(c=md(c,p,fo),P.__reactInternalMemoizedMergedChildContext=c,fr(Ki),fr(bi),ar(bi,c)):fr(Ki),ar(Ki,S)}var ds=null,gd=!1,Oh=!1;function vd(c){ds===null?ds=[c]:ds.push(c)}function N0(c){gd=!0,vd(c)}function Fs(){if(!Oh&&ds!==null){Oh=!0;var c=0,p=Fn;try{var S=ds;for(Fn=1;c<S.length;c++){var P=S[c];do P=P(!0);while(P!==null)}ds=null,gd=!1}catch(I){throw ds!==null&&(ds=ds.slice(c+1)),he(et,Fs),I}finally{Fn=p,Oh=!1}}return null}var Dl=[],oa=0,Rh=null,kh=0,Zi=[],di=0,Ul=null,ht=1,qa="";function ho(c,p){Dl[oa++]=kh,Dl[oa++]=Rh,Rh=c,kh=p}function hg(c,p,S){Zi[di++]=ht,Zi[di++]=qa,Zi[di++]=Ul,Ul=c;var P=ht;c=qa;var I=32-tn(P)-1;P&=~(1<<I),S+=1;var F=32-tn(p)+I;if(30<F){var K=I-I%5;F=(P&(1<<K)-1).toString(32),P>>=K,I-=K,ht=1<<32-tn(p)+I|S<<I|P,qa=F+c}else ht=1<<F|S<<I|P,qa=c}function pg(c){c.return!==null&&(ho(c,1),hg(c,1,0))}function po(c){for(;c===Rh;)Rh=Dl[--oa],Dl[oa]=null,kh=Dl[--oa],Dl[oa]=null;for(;c===Ul;)Ul=Zi[--di],Zi[di]=null,qa=Zi[--di],Zi[di]=null,ht=Zi[--di],Zi[di]=null}var wi=null,Ji=null,yr=!1,Xa=null;function mg(c,p){var S=Ws(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=c,p=c.deletions,p===null?(c.deletions=[S],c.flags|=16):p.push(S)}function gg(c,p){switch(c.tag){case 5:var S=c.type;return p=p.nodeType!==1||S.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,wi=c,Ji=lo(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,wi=c,Ji=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(S=Ul!==null?{id:ht,overflow:qa}:null,c.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=Ws(18,null,null,0),S.stateNode=p,S.return=c,c.child=S,wi=c,Ji=null,!0):!1;default:return!1}}function jh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Ih(c){if(yr){var p=Ji;if(p){var S=p;if(!gg(c,p)){if(jh(c))throw Error(t(418));p=lo(S.nextSibling);var P=wi;p&&gg(c,p)?mg(P,S):(c.flags=c.flags&-4097|2,yr=!1,wi=c)}}else{if(jh(c))throw Error(t(418));c.flags=c.flags&-4097|2,yr=!1,wi=c}}}function Lh(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;wi=c}function Zc(c){if(c!==wi)return!1;if(!yr)return Lh(c),yr=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!sg(c.type,c.memoizedProps)),p&&(p=Ji)){if(jh(c))throw vg(),Error(t(418));for(;p;)mg(c,p),p=lo(p.nextSibling)}if(Lh(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var S=c.data;if(S==="/$"){if(p===0){Ji=lo(c.nextSibling);break e}p--}else S!=="$"&&S!=="$!"&&S!=="$?"||p++}c=c.nextSibling}Ji=null}}else Ji=wi?lo(c.stateNode.nextSibling):null;return!0}function vg(){for(var c=Ji;c;)c=lo(c.nextSibling)}function Zo(){Ji=wi=null,yr=!1}function Jc(c){Xa===null?Xa=[c]:Xa.push(c)}var w_=A.ReactCurrentBatchConfig;function yd(c,p,S){if(c=S.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(t(309));var P=S.stateNode}if(!P)throw Error(t(147,c));var I=P,F=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(K){var fe=I.refs;K===null?delete fe[F]:fe[F]=K},p._stringRef=F,p)}if(typeof c!="string")throw Error(t(284));if(!S._owner)throw Error(t(290,c))}return c}function xd(c,p){throw c=Object.prototype.toString.call(p),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function yg(c){var p=c._init;return p(c._payload)}function xg(c){function p(Ce,_e){if(c){var Oe=Ce.deletions;Oe===null?(Ce.deletions=[_e],Ce.flags|=16):Oe.push(_e)}}function S(Ce,_e){if(!c)return null;for(;_e!==null;)p(Ce,_e),_e=_e.sibling;return null}function P(Ce,_e){for(Ce=new Map;_e!==null;)_e.key!==null?Ce.set(_e.key,_e):Ce.set(_e.index,_e),_e=_e.sibling;return Ce}function I(Ce,_e){return Ce=cu(Ce,_e),Ce.index=0,Ce.sibling=null,Ce}function F(Ce,_e,Oe){return Ce.index=Oe,c?(Oe=Ce.alternate,Oe!==null?(Oe=Oe.index,Oe<_e?(Ce.flags|=2,_e):Oe):(Ce.flags|=2,_e)):(Ce.flags|=1048576,_e)}function K(Ce){return c&&Ce.alternate===null&&(Ce.flags|=2),Ce}function fe(Ce,_e,Oe,ut){return _e===null||_e.tag!==6?(_e=z_(Oe,Ce.mode,ut),_e.return=Ce,_e):(_e=I(_e,Oe),_e.return=Ce,_e)}function we(Ce,_e,Oe,ut){var Ht=Oe.type;return Ht===N?at(Ce,_e,Oe.props.children,ut,Oe.key):_e!==null&&(_e.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Q&&yg(Ht)===_e.type)?(ut=I(_e,Oe.props),ut.ref=yd(Ce,_e,Oe),ut.return=Ce,ut):(ut=Q0(Oe.type,Oe.key,Oe.props,null,Ce.mode,ut),ut.ref=yd(Ce,_e,Oe),ut.return=Ce,ut)}function Le(Ce,_e,Oe,ut){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Oe.containerInfo||_e.stateNode.implementation!==Oe.implementation?(_e=B_(Oe,Ce.mode,ut),_e.return=Ce,_e):(_e=I(_e,Oe.children||[]),_e.return=Ce,_e)}function at(Ce,_e,Oe,ut,Ht){return _e===null||_e.tag!==7?(_e=Ld(Oe,Ce.mode,ut,Ht),_e.return=Ce,_e):(_e=I(_e,Oe),_e.return=Ce,_e)}function st(Ce,_e,Oe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=z_(""+_e,Ce.mode,Oe),_e.return=Ce,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case R:return Oe=Q0(_e.type,_e.key,_e.props,null,Ce.mode,Oe),Oe.ref=yd(Ce,null,_e),Oe.return=Ce,Oe;case O:return _e=B_(_e,Ce.mode,Oe),_e.return=Ce,_e;case Q:var ut=_e._init;return st(Ce,ut(_e._payload),Oe)}if(ee(_e)||J(_e))return _e=Ld(_e,Ce.mode,Oe,null),_e.return=Ce,_e;xd(Ce,_e)}return null}function rt(Ce,_e,Oe,ut){var Ht=_e!==null?_e.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Ht!==null?null:fe(Ce,_e,""+Oe,ut);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case R:return Oe.key===Ht?we(Ce,_e,Oe,ut):null;case O:return Oe.key===Ht?Le(Ce,_e,Oe,ut):null;case Q:return Ht=Oe._init,rt(Ce,_e,Ht(Oe._payload),ut)}if(ee(Oe)||J(Oe))return Ht!==null?null:at(Ce,_e,Oe,ut,null);xd(Ce,Oe)}return null}function Nt(Ce,_e,Oe,ut,Ht){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Ce=Ce.get(Oe)||null,fe(_e,Ce,""+ut,Ht);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case R:return Ce=Ce.get(ut.key===null?Oe:ut.key)||null,we(_e,Ce,ut,Ht);case O:return Ce=Ce.get(ut.key===null?Oe:ut.key)||null,Le(_e,Ce,ut,Ht);case Q:var Zt=ut._init;return Nt(Ce,_e,Oe,Zt(ut._payload),Ht)}if(ee(ut)||J(ut))return Ce=Ce.get(Oe)||null,at(_e,Ce,ut,Ht,null);xd(_e,ut)}return null}function Dt(Ce,_e,Oe,ut){for(var Ht=null,Zt=null,Jt=_e,sn=_e=0,Fi=null;Jt!==null&&sn<Oe.length;sn++){Jt.index>sn?(Fi=Jt,Jt=null):Fi=Jt.sibling;var Gn=rt(Ce,Jt,Oe[sn],ut);if(Gn===null){Jt===null&&(Jt=Fi);break}c&&Jt&&Gn.alternate===null&&p(Ce,Jt),_e=F(Gn,_e,sn),Zt===null?Ht=Gn:Zt.sibling=Gn,Zt=Gn,Jt=Fi}if(sn===Oe.length)return S(Ce,Jt),yr&&ho(Ce,sn),Ht;if(Jt===null){for(;sn<Oe.length;sn++)Jt=st(Ce,Oe[sn],ut),Jt!==null&&(_e=F(Jt,_e,sn),Zt===null?Ht=Jt:Zt.sibling=Jt,Zt=Jt);return yr&&ho(Ce,sn),Ht}for(Jt=P(Ce,Jt);sn<Oe.length;sn++)Fi=Nt(Jt,Ce,sn,Oe[sn],ut),Fi!==null&&(c&&Fi.alternate!==null&&Jt.delete(Fi.key===null?sn:Fi.key),_e=F(Fi,_e,sn),Zt===null?Ht=Fi:Zt.sibling=Fi,Zt=Fi);return c&&Jt.forEach(function(uu){return p(Ce,uu)}),yr&&ho(Ce,sn),Ht}function Ft(Ce,_e,Oe,ut){var Ht=J(Oe);if(typeof Ht!="function")throw Error(t(150));if(Oe=Ht.call(Oe),Oe==null)throw Error(t(151));for(var Zt=Ht=null,Jt=_e,sn=_e=0,Fi=null,Gn=Oe.next();Jt!==null&&!Gn.done;sn++,Gn=Oe.next()){Jt.index>sn?(Fi=Jt,Jt=null):Fi=Jt.sibling;var uu=rt(Ce,Jt,Gn.value,ut);if(uu===null){Jt===null&&(Jt=Fi);break}c&&Jt&&uu.alternate===null&&p(Ce,Jt),_e=F(uu,_e,sn),Zt===null?Ht=uu:Zt.sibling=uu,Zt=uu,Jt=Fi}if(Gn.done)return S(Ce,Jt),yr&&ho(Ce,sn),Ht;if(Jt===null){for(;!Gn.done;sn++,Gn=Oe.next())Gn=st(Ce,Gn.value,ut),Gn!==null&&(_e=F(Gn,_e,sn),Zt===null?Ht=Gn:Zt.sibling=Gn,Zt=Gn);return yr&&ho(Ce,sn),Ht}for(Jt=P(Ce,Jt);!Gn.done;sn++,Gn=Oe.next())Gn=Nt(Jt,Ce,sn,Gn.value,ut),Gn!==null&&(c&&Gn.alternate!==null&&Jt.delete(Gn.key===null?sn:Gn.key),_e=F(Gn,_e,sn),Zt===null?Ht=Gn:Zt.sibling=Gn,Zt=Gn);return c&&Jt.forEach(function(dW){return p(Ce,dW)}),yr&&ho(Ce,sn),Ht}function ti(Ce,_e,Oe,ut){if(typeof Oe=="object"&&Oe!==null&&Oe.type===N&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case R:e:{for(var Ht=Oe.key,Zt=_e;Zt!==null;){if(Zt.key===Ht){if(Ht=Oe.type,Ht===N){if(Zt.tag===7){S(Ce,Zt.sibling),_e=I(Zt,Oe.props.children),_e.return=Ce,Ce=_e;break e}}else if(Zt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Q&&yg(Ht)===Zt.type){S(Ce,Zt.sibling),_e=I(Zt,Oe.props),_e.ref=yd(Ce,Zt,Oe),_e.return=Ce,Ce=_e;break e}S(Ce,Zt);break}else p(Ce,Zt);Zt=Zt.sibling}Oe.type===N?(_e=Ld(Oe.props.children,Ce.mode,ut,Oe.key),_e.return=Ce,Ce=_e):(ut=Q0(Oe.type,Oe.key,Oe.props,null,Ce.mode,ut),ut.ref=yd(Ce,_e,Oe),ut.return=Ce,Ce=ut)}return K(Ce);case O:e:{for(Zt=Oe.key;_e!==null;){if(_e.key===Zt)if(_e.tag===4&&_e.stateNode.containerInfo===Oe.containerInfo&&_e.stateNode.implementation===Oe.implementation){S(Ce,_e.sibling),_e=I(_e,Oe.children||[]),_e.return=Ce,Ce=_e;break e}else{S(Ce,_e);break}else p(Ce,_e);_e=_e.sibling}_e=B_(Oe,Ce.mode,ut),_e.return=Ce,Ce=_e}return K(Ce);case Q:return Zt=Oe._init,ti(Ce,_e,Zt(Oe._payload),ut)}if(ee(Oe))return Dt(Ce,_e,Oe,ut);if(J(Oe))return Ft(Ce,_e,Oe,ut);xd(Ce,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,_e!==null&&_e.tag===6?(S(Ce,_e.sibling),_e=I(_e,Oe),_e.return=Ce,Ce=_e):(S(Ce,_e),_e=z_(Oe,Ce.mode,ut),_e.return=Ce,Ce=_e),K(Ce)):S(Ce,_e)}return ti}var Fl=xg(!0),bd=xg(!1),zl=jr(null),Bl=null,mo=null,Qc=null;function Hl(){Qc=mo=Bl=null}function wd(c){var p=zl.current;fr(zl),c._currentValue=p}function _d(c,p,S){for(;c!==null;){var P=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),c===S)break;c=c.return}}function Jo(c,p){Bl=c,Qc=mo=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&p)!==0&&(Sn=!0),c.firstContext=null)}function Ma(c){var p=c._currentValue;if(Qc!==c)if(c={context:c,memoizedValue:p,next:null},mo===null){if(Bl===null)throw Error(t(308));mo=c,Bl.dependencies={lanes:0,firstContext:c}}else mo=mo.next=c;return p}var go=null;function bg(c){go===null?go=[c]:go.push(c)}function Sd(c,p,S,P){var I=p.interleaved;return I===null?(S.next=S,bg(p)):(S.next=I.next,I.next=S),p.interleaved=S,fs(c,P)}function fs(c,p){c.lanes|=p;var S=c.alternate;for(S!==null&&(S.lanes|=p),S=c,c=c.return;c!==null;)c.childLanes|=p,S=c.alternate,S!==null&&(S.childLanes|=p),S=c,c=c.return;return S.tag===3?S.stateNode:null}var Zn=!1;function wn(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hr(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Jn(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function Sr(c,p,S){var P=c.updateQueue;if(P===null)return null;if(P=P.shared,(Hn&2)!==0){var I=P.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),P.pending=p,fs(c,S)}return I=P.interleaved,I===null?(p.next=p,bg(P)):(p.next=I.next,I.next=p),P.interleaved=p,fs(c,S)}function Li(c,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var P=p.lanes;P&=c.pendingLanes,S|=P,p.lanes=S,kc(c,S)}}function Vl(c,p){var S=c.updateQueue,P=c.alternate;if(P!==null&&(P=P.updateQueue,S===P)){var I=null,F=null;if(S=S.firstBaseUpdate,S!==null){do{var K={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};F===null?I=F=K:F=F.next=K,S=S.next}while(S!==null);F===null?I=F=p:F=F.next=p}else I=F=p;S={baseState:P.baseState,firstBaseUpdate:I,lastBaseUpdate:F,shared:P.shared,effects:P.effects},c.updateQueue=S;return}c=S.lastBaseUpdate,c===null?S.firstBaseUpdate=p:c.next=p,S.lastBaseUpdate=p}function Ir(c,p,S,P){var I=c.updateQueue;Zn=!1;var F=I.firstBaseUpdate,K=I.lastBaseUpdate,fe=I.shared.pending;if(fe!==null){I.shared.pending=null;var we=fe,Le=we.next;we.next=null,K===null?F=Le:K.next=Le,K=we;var at=c.alternate;at!==null&&(at=at.updateQueue,fe=at.lastBaseUpdate,fe!==K&&(fe===null?at.firstBaseUpdate=Le:fe.next=Le,at.lastBaseUpdate=we))}if(F!==null){var st=I.baseState;K=0,at=Le=we=null,fe=F;do{var rt=fe.lane,Nt=fe.eventTime;if((P&rt)===rt){at!==null&&(at=at.next={eventTime:Nt,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Dt=c,Ft=fe;switch(rt=p,Nt=S,Ft.tag){case 1:if(Dt=Ft.payload,typeof Dt=="function"){st=Dt.call(Nt,st,rt);break e}st=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Ft.payload,rt=typeof Dt=="function"?Dt.call(Nt,st,rt):Dt,rt==null)break e;st=Z({},st,rt);break e;case 2:Zn=!0}}fe.callback!==null&&fe.lane!==0&&(c.flags|=64,rt=I.effects,rt===null?I.effects=[fe]:rt.push(fe))}else Nt={eventTime:Nt,lane:rt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},at===null?(Le=at=Nt,we=st):at=at.next=Nt,K|=rt;if(fe=fe.next,fe===null){if(fe=I.shared.pending,fe===null)break;rt=fe,fe=rt.next,rt.next=null,I.lastBaseUpdate=rt,I.shared.pending=null}}while(!0);if(at===null&&(we=st),I.baseState=we,I.firstBaseUpdate=Le,I.lastBaseUpdate=at,p=I.shared.interleaved,p!==null){I=p;do K|=I.lane,I=I.next;while(I!==p)}else F===null&&(I.shared.lanes=0);Rd|=K,c.lanes=K,c.memoizedState=st}}function eu(c,p,S){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var P=c[p],I=P.callback;if(I!==null){if(P.callback=null,P=S,typeof I!="function")throw Error(t(191,I));I.call(P)}}}var zs={},Ea=jr(zs),Wl=jr(zs),vo=jr(zs);function Gr(c){if(c===zs)throw Error(t(174));return c}function Md(c,p){switch(ar(vo,p),ar(Wl,c),ar(Ea,zs),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:St(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=St(p,c)}fr(Ea),ar(Ea,p)}function Qo(){fr(Ea),fr(Wl),fr(vo)}function Gl(c){Gr(vo.current);var p=Gr(Ea.current),S=St(p,c.type);p!==S&&(ar(Wl,c),ar(Ea,S))}function tu(c){Wl.current===c&&(fr(Ea),fr(Wl))}var xr=jr(0);function hs(c){for(var p=c;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var nu=[];function Bs(){for(var c=0;c<nu.length;c++)nu[c]._workInProgressVersionPrimary=null;nu.length=0}var $l=A.ReactCurrentDispatcher,ql=A.ReactCurrentBatchConfig,yo=0,hr=null,Lr=null,zn=null,ps=!1,Di=!1,el=0,la=0;function _i(){throw Error(t(321))}function Ed(c,p){if(p===null)return!1;for(var S=0;S<p.length&&S<c.length;S++)if(!wa(c[S],p[S]))return!1;return!0}function Td(c,p,S,P,I,F){if(yo=F,hr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,$l.current=c===null||c.memoizedState===null?D0:U0,c=S(P,I),Di){F=0;do{if(Di=!1,el=0,25<=F)throw Error(t(301));F+=1,zn=Lr=null,p.updateQueue=null,$l.current=F0,c=S(P,I)}while(Di)}if($l.current=Vh,p=Lr!==null&&Lr.next!==null,yo=0,zn=Lr=hr=null,ps=!1,p)throw Error(t(300));return c}function wg(){var c=el!==0;return el=0,c}function Si(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?hr.memoizedState=zn=c:zn=zn.next=c,zn}function Ta(){if(Lr===null){var c=hr.alternate;c=c!==null?c.memoizedState:null}else c=Lr.next;var p=zn===null?hr.memoizedState:zn.next;if(p!==null)zn=p,Lr=c;else{if(c===null)throw Error(t(310));Lr=c,c={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},zn===null?hr.memoizedState=zn=c:zn=zn.next=c}return zn}function ru(c,p){return typeof p=="function"?p(c):p}function Ad(c){var p=Ta(),S=p.queue;if(S===null)throw Error(t(311));S.lastRenderedReducer=c;var P=Lr,I=P.baseQueue,F=S.pending;if(F!==null){if(I!==null){var K=I.next;I.next=F.next,F.next=K}P.baseQueue=I=F,S.pending=null}if(I!==null){F=I.next,P=P.baseState;var fe=K=null,we=null,Le=F;do{var at=Le.lane;if((yo&at)===at)we!==null&&(we=we.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),P=Le.hasEagerState?Le.eagerState:c(P,Le.action);else{var st={lane:at,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};we===null?(fe=we=st,K=P):we=we.next=st,hr.lanes|=at,Rd|=at}Le=Le.next}while(Le!==null&&Le!==F);we===null?K=P:we.next=fe,wa(P,p.memoizedState)||(Sn=!0),p.memoizedState=P,p.baseState=K,p.baseQueue=we,S.lastRenderedState=P}if(c=S.interleaved,c!==null){I=c;do F=I.lane,hr.lanes|=F,Rd|=F,I=I.next;while(I!==c)}else I===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function xo(c){var p=Ta(),S=p.queue;if(S===null)throw Error(t(311));S.lastRenderedReducer=c;var P=S.dispatch,I=S.pending,F=p.memoizedState;if(I!==null){S.pending=null;var K=I=I.next;do F=c(F,K.action),K=K.next;while(K!==I);wa(F,p.memoizedState)||(Sn=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),S.lastRenderedState=F}return[F,P]}function _g(){}function Sg(c,p){var S=hr,P=Ta(),I=p(),F=!wa(P.memoizedState,I);if(F&&(P.memoizedState=I,Sn=!0),P=P.queue,Tg(O0.bind(null,S,P,c),[c]),P.getSnapshot!==p||F||zn!==null&&zn.memoizedState.tag&1){if(S.flags|=2048,ms(9,Cd.bind(null,S,P,I,p),void 0,null),Ui===null)throw Error(t(349));(yo&30)!==0||Dh(S,p,I)}return I}function Dh(c,p,S){c.flags|=16384,c={getSnapshot:p,value:S},p=hr.updateQueue,p===null?(p={lastEffect:null,stores:null},hr.updateQueue=p,p.stores=[c]):(S=p.stores,S===null?p.stores=[c]:S.push(c))}function Cd(c,p,S,P){p.value=S,p.getSnapshot=P,R0(p)&&Mg(c)}function O0(c,p,S){return S(function(){R0(p)&&Mg(c)})}function R0(c){var p=c.getSnapshot;c=c.value;try{var S=p();return!wa(c,S)}catch{return!0}}function Mg(c){var p=fs(c,1);p!==null&&Mo(p,c,1,-1)}function Eg(c){var p=Si();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:c},p.queue=c,c=c.dispatch=Xl.bind(null,hr,c),[p.memoizedState,c]}function ms(c,p,S,P){return c={tag:c,create:p,destroy:S,deps:P,next:null},p=hr.updateQueue,p===null?(p={lastEffect:null,stores:null},hr.updateQueue=p,p.lastEffect=c.next=c):(S=p.lastEffect,S===null?p.lastEffect=c.next=c:(P=S.next,S.next=c,c.next=P,p.lastEffect=c)),c}function k0(){return Ta().memoizedState}function Hs(c,p,S,P){var I=Si();hr.flags|=c,I.memoizedState=ms(1|p,S,void 0,P===void 0?null:P)}function Pd(c,p,S,P){var I=Ta();P=P===void 0?null:P;var F=void 0;if(Lr!==null){var K=Lr.memoizedState;if(F=K.destroy,P!==null&&Ed(P,K.deps)){I.memoizedState=ms(p,S,F,P);return}}hr.flags|=c,I.memoizedState=ms(1|p,S,F,P)}function Qi(c,p){return Hs(8390656,8,c,p)}function Tg(c,p){return Pd(2048,8,c,p)}function Ag(c,p){return Pd(4,2,c,p)}function j0(c,p){return Pd(4,4,c,p)}function I0(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function Cg(c,p,S){return S=S!=null?S.concat([c]):null,Pd(4,4,I0.bind(null,p,c),S)}function Uh(){}function L0(c,p){var S=Ta();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&Ed(p,P[1])?P[0]:(S.memoizedState=[c,p],c)}function Aa(c,p){var S=Ta();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&Ed(p,P[1])?P[0]:(c=c(),S.memoizedState=[c,p],c)}function Fh(c,p,S){return(yo&21)===0?(c.baseState&&(c.baseState=!1,Sn=!0),c.memoizedState=S):(wa(S,p)||(S=ir(),hr.lanes|=S,Rd|=S,c.baseState=!0),p)}function __(c,p){var S=Fn;Fn=S!==0&&4>S?S:4,c(!0);var P=ql.transition;ql.transition={};try{c(!1),p()}finally{Fn=S,ql.transition=P}}function bo(){return Ta().memoizedState}function zh(c,p,S){var P=ou(c);if(S={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null},Nd(c))Bh(p,S);else if(S=Sd(c,p,S,P),S!==null){var I=Pa();Mo(S,c,P,I),Hh(S,p,P)}}function Xl(c,p,S){var P=ou(c),I={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null};if(Nd(c))Bh(p,I);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var K=p.lastRenderedState,fe=F(K,S);if(I.hasEagerState=!0,I.eagerState=fe,wa(fe,K)){var we=p.interleaved;we===null?(I.next=I,bg(p)):(I.next=we.next,we.next=I),p.interleaved=I;return}}catch{}finally{}S=Sd(c,p,I,P),S!==null&&(I=Pa(),Mo(S,c,P,I),Hh(S,p,P))}}function Nd(c){var p=c.alternate;return c===hr||p!==null&&p===hr}function Bh(c,p){Di=ps=!0;var S=c.pending;S===null?p.next=p:(p.next=S.next,S.next=p),c.pending=p}function Hh(c,p,S){if((S&4194240)!==0){var P=p.lanes;P&=c.pendingLanes,S|=P,p.lanes=S,kc(c,S)}}var Vh={readContext:Ma,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},D0={readContext:Ma,useCallback:function(c,p){return Si().memoizedState=[c,p===void 0?null:p],c},useContext:Ma,useEffect:Qi,useImperativeHandle:function(c,p,S){return S=S!=null?S.concat([c]):null,Hs(4194308,4,I0.bind(null,p,c),S)},useLayoutEffect:function(c,p){return Hs(4194308,4,c,p)},useInsertionEffect:function(c,p){return Hs(4,2,c,p)},useMemo:function(c,p){var S=Si();return p=p===void 0?null:p,c=c(),S.memoizedState=[c,p],c},useReducer:function(c,p,S){var P=Si();return p=S!==void 0?S(p):p,P.memoizedState=P.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},P.queue=c,c=c.dispatch=zh.bind(null,hr,c),[P.memoizedState,c]},useRef:function(c){var p=Si();return c={current:c},p.memoizedState=c},useState:Eg,useDebugValue:Uh,useDeferredValue:function(c){return Si().memoizedState=c},useTransition:function(){var c=Eg(!1),p=c[0];return c=__.bind(null,c[1]),Si().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,S){var P=hr,I=Si();if(yr){if(S===void 0)throw Error(t(407));S=S()}else{if(S=p(),Ui===null)throw Error(t(349));(yo&30)!==0||Dh(P,p,S)}I.memoizedState=S;var F={value:S,getSnapshot:p};return I.queue=F,Qi(O0.bind(null,P,F,c),[c]),P.flags|=2048,ms(9,Cd.bind(null,P,F,S,p),void 0,null),S},useId:function(){var c=Si(),p=Ui.identifierPrefix;if(yr){var S=qa,P=ht;S=(P&~(1<<32-tn(P)-1)).toString(32)+S,p=":"+p+"R"+S,S=el++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=la++,p=":"+p+"r"+S.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},U0={readContext:Ma,useCallback:L0,useContext:Ma,useEffect:Tg,useImperativeHandle:Cg,useInsertionEffect:Ag,useLayoutEffect:j0,useMemo:Aa,useReducer:Ad,useRef:k0,useState:function(){return Ad(ru)},useDebugValue:Uh,useDeferredValue:function(c){var p=Ta();return Fh(p,Lr.memoizedState,c)},useTransition:function(){var c=Ad(ru)[0],p=Ta().memoizedState;return[c,p]},useMutableSource:_g,useSyncExternalStore:Sg,useId:bo,unstable_isNewReconciler:!1},F0={readContext:Ma,useCallback:L0,useContext:Ma,useEffect:Tg,useImperativeHandle:Cg,useInsertionEffect:Ag,useLayoutEffect:j0,useMemo:Aa,useReducer:xo,useRef:k0,useState:function(){return xo(ru)},useDebugValue:Uh,useDeferredValue:function(c){var p=Ta();return Lr===null?p.memoizedState=c:Fh(p,Lr.memoizedState,c)},useTransition:function(){var c=xo(ru)[0],p=Ta().memoizedState;return[c,p]},useMutableSource:_g,useSyncExternalStore:Sg,useId:bo,unstable_isNewReconciler:!1};function Ya(c,p){if(c&&c.defaultProps){p=Z({},p),c=c.defaultProps;for(var S in c)p[S]===void 0&&(p[S]=c[S]);return p}return p}function Od(c,p,S,P){p=c.memoizedState,S=S(P,p),S=S==null?p:Z({},p,S),c.memoizedState=S,c.lanes===0&&(c.updateQueue.baseState=S)}var Wh={isMounted:function(c){return(c=c._reactInternals)?re(c)===c:!1},enqueueSetState:function(c,p,S){c=c._reactInternals;var P=Pa(),I=ou(c),F=Jn(P,I);F.payload=p,S!=null&&(F.callback=S),p=Sr(c,F,I),p!==null&&(Mo(p,c,I,P),Li(p,c,I))},enqueueReplaceState:function(c,p,S){c=c._reactInternals;var P=Pa(),I=ou(c),F=Jn(P,I);F.tag=1,F.payload=p,S!=null&&(F.callback=S),p=Sr(c,F,I),p!==null&&(Mo(p,c,I,P),Li(p,c,I))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var S=Pa(),P=ou(c),I=Jn(S,P);I.tag=2,p!=null&&(I.callback=p),p=Sr(c,I,P),p!==null&&(Mo(p,c,P,S),Li(p,c,P))}};function z0(c,p,S,P,I,F,K){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(P,F,K):p.prototype&&p.prototype.isPureReactComponent?!Pl(S,P)||!Pl(I,F):!0}function g(c,p,S){var P=!1,I=uo,F=p.contextType;return typeof F=="object"&&F!==null?F=Ma(F):(I=Ii(p)?fo:bi.current,P=p.contextTypes,F=(P=P!=null)?Il(c,I):uo),p=new p(S,F),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Wh,c.stateNode=p,p._reactInternals=c,P&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=I,c.__reactInternalMemoizedMaskedChildContext=F),p}function v(c,p,S,P){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,P),p.state!==c&&Wh.enqueueReplaceState(p,p.state,null)}function C(c,p,S,P){var I=c.stateNode;I.props=S,I.state=c.memoizedState,I.refs={},wn(c);var F=p.contextType;typeof F=="object"&&F!==null?I.context=Ma(F):(F=Ii(p)?fo:bi.current,I.context=Il(c,F)),I.state=c.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(Od(c,p,F,S),I.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(p=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),p!==I.state&&Wh.enqueueReplaceState(I,I.state,null),Ir(c,S,I,P),I.state=c.memoizedState),typeof I.componentDidMount=="function"&&(c.flags|=4194308)}function k(c,p){try{var S="",P=p;do S+=be(P),P=P.return;while(P);var I=S}catch(F){I=`
Error generating stack: `+F.message+`
`+F.stack}return{value:c,source:p,stack:I,digest:null}}function D(c,p,S){return{value:c,source:null,stack:S??null,digest:p??null}}function H(c,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var de=typeof WeakMap=="function"?WeakMap:Map;function Me(c,p,S){S=Jn(-1,S),S.tag=3,S.payload={element:null};var P=p.value;return S.callback=function(){q0||(q0=!0,R_=P),H(c,p)},S}function He(c,p,S){S=Jn(-1,S),S.tag=3;var P=c.type.getDerivedStateFromError;if(typeof P=="function"){var I=p.value;S.payload=function(){return P(I)},S.callback=function(){H(c,p)}}var F=c.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(S.callback=function(){H(c,p),typeof P!="function"&&(au===null?au=new Set([this]):au.add(this));var K=p.stack;this.componentDidCatch(p.value,{componentStack:K!==null?K:""})}),S}function ct(c,p,S){var P=c.pingCache;if(P===null){P=c.pingCache=new de;var I=new Set;P.set(p,I)}else I=P.get(p),I===void 0&&(I=new Set,P.set(p,I));I.has(S)||(I.add(S),c=eW.bind(null,c,p,S),p.then(c,c))}function Ot(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function un(c,p,S,P,I){return(c.mode&1)===0?(c===p?c.flags|=65536:(c.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=Jn(-1,1),p.tag=2,Sr(S,p,1))),S.lanes|=1),c):(c.flags|=65536,c.lanes=I,c)}var Xt=A.ReactCurrentOwner,Sn=!1;function Et(c,p,S,P){p.child=c===null?bd(p,null,S,P):Fl(p,c.child,S,P)}function Mi(c,p,S,P,I){S=S.render;var F=p.ref;return Jo(p,I),P=Td(c,p,S,P,F,I),S=wg(),c!==null&&!Sn?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~I,Yl(c,p,I)):(yr&&S&&pg(p),p.flags|=1,Et(c,p,P,I),p.child)}function Ca(c,p,S,P,I){if(c===null){var F=S.type;return typeof F=="function"&&!F_(F)&&F.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=F,ke(c,p,F,P,I)):(c=Q0(S.type,null,P,p,p.mode,I),c.ref=p.ref,c.return=p,p.child=c)}if(F=c.child,(c.lanes&I)===0){var K=F.memoizedProps;if(S=S.compare,S=S!==null?S:Pl,S(K,P)&&c.ref===p.ref)return Yl(c,p,I)}return p.flags|=1,c=cu(F,P),c.ref=p.ref,c.return=p,p.child=c}function ke(c,p,S,P,I){if(c!==null){var F=c.memoizedProps;if(Pl(F,P)&&c.ref===p.ref)if(Sn=!1,p.pendingProps=P=F,(c.lanes&I)!==0)(c.flags&131072)!==0&&(Sn=!0);else return p.lanes=c.lanes,Yl(c,p,I)}return _t(c,p,S,P,I)}function Ee(c,p,S){var P=p.pendingProps,I=P.children,F=c!==null?c.memoizedState:null;if(P.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},ar($h,gs),gs|=S;else{if((S&1073741824)===0)return c=F!==null?F.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,ar($h,gs),gs|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=F!==null?F.baseLanes:S,ar($h,gs),gs|=P}else F!==null?(P=F.baseLanes|S,p.memoizedState=null):P=S,ar($h,gs),gs|=P;return Et(c,p,I,S),p.child}function ze(c,p){var S=p.ref;(c===null&&S!==null||c!==null&&c.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function _t(c,p,S,P,I){var F=Ii(S)?fo:bi.current;return F=Il(p,F),Jo(p,I),S=Td(c,p,S,P,F,I),P=wg(),c!==null&&!Sn?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~I,Yl(c,p,I)):(yr&&P&&pg(p),p.flags|=1,Et(c,p,S,I),p.child)}function zt(c,p,S,P,I){if(Ii(S)){var F=!0;Ll(p)}else F=!1;if(Jo(p,I),p.stateNode===null)H0(c,p),g(p,S,P),C(p,S,P,I),P=!0;else if(c===null){var K=p.stateNode,fe=p.memoizedProps;K.props=fe;var we=K.context,Le=S.contextType;typeof Le=="object"&&Le!==null?Le=Ma(Le):(Le=Ii(S)?fo:bi.current,Le=Il(p,Le));var at=S.getDerivedStateFromProps,st=typeof at=="function"||typeof K.getSnapshotBeforeUpdate=="function";st||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(fe!==P||we!==Le)&&v(p,K,P,Le),Zn=!1;var rt=p.memoizedState;K.state=rt,Ir(p,P,K,I),we=p.memoizedState,fe!==P||rt!==we||Ki.current||Zn?(typeof at=="function"&&(Od(p,S,at,P),we=p.memoizedState),(fe=Zn||z0(p,S,fe,P,rt,we,Le))?(st||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(p.flags|=4194308)):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=we),K.props=P,K.state=we,K.context=Le,P=fe):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{K=p.stateNode,Hr(c,p),fe=p.memoizedProps,Le=p.type===p.elementType?fe:Ya(p.type,fe),K.props=Le,st=p.pendingProps,rt=K.context,we=S.contextType,typeof we=="object"&&we!==null?we=Ma(we):(we=Ii(S)?fo:bi.current,we=Il(p,we));var Nt=S.getDerivedStateFromProps;(at=typeof Nt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(fe!==st||rt!==we)&&v(p,K,P,we),Zn=!1,rt=p.memoizedState,K.state=rt,Ir(p,P,K,I);var Dt=p.memoizedState;fe!==st||rt!==Dt||Ki.current||Zn?(typeof Nt=="function"&&(Od(p,S,Nt,P),Dt=p.memoizedState),(Le=Zn||z0(p,S,Le,P,rt,Dt,we)||!1)?(at||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(P,Dt,we),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(P,Dt,we)),typeof K.componentDidUpdate=="function"&&(p.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof K.componentDidUpdate!="function"||fe===c.memoizedProps&&rt===c.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||fe===c.memoizedProps&&rt===c.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=Dt),K.props=P,K.state=Dt,K.context=we,P=Le):(typeof K.componentDidUpdate!="function"||fe===c.memoizedProps&&rt===c.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||fe===c.memoizedProps&&rt===c.memoizedState||(p.flags|=1024),P=!1)}return vn(c,p,S,P,F,I)}function vn(c,p,S,P,I,F){ze(c,p);var K=(p.flags&128)!==0;if(!P&&!K)return I&&fg(p,S,!1),Yl(c,p,F);P=p.stateNode,Xt.current=p;var fe=K&&typeof S.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,c!==null&&K?(p.child=Fl(p,c.child,null,F),p.child=Fl(p,null,fe,F)):Et(c,p,fe,F),p.memoizedState=P.state,I&&fg(p,S,!0),p.child}function dn(c){var p=c.stateNode;p.pendingContext?dg(c,p.pendingContext,p.pendingContext!==p.context):p.context&&dg(c,p.context,!1),Md(c,p.containerInfo)}function Dn(c,p,S,P,I){return Zo(),Jc(I),p.flags|=256,Et(c,p,S,P),p.child}var $r={dehydrated:null,treeContext:null,retryLane:0};function In(c){return{baseLanes:c,cachePool:null,transitions:null}}function wo(c,p,S){var P=p.pendingProps,I=xr.current,F=!1,K=(p.flags&128)!==0,fe;if((fe=K)||(fe=c!==null&&c.memoizedState===null?!1:(I&2)!==0),fe?(F=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(I|=1),ar(xr,I&1),c===null)return Ih(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((p.mode&1)===0?p.lanes=1:c.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(K=P.children,c=P.fallback,F?(P=p.mode,F=p.child,K={mode:"hidden",children:K},(P&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=K):F=ex(K,P,0,null),c=Ld(c,P,S,null),F.return=p,c.return=p,F.sibling=c,p.child=F,p.child.memoizedState=In(S),p.memoizedState=$r,c):Pg(p,K));if(I=c.memoizedState,I!==null&&(fe=I.dehydrated,fe!==null))return HV(c,p,K,P,fe,I,S);if(F){F=P.fallback,K=p.mode,I=c.child,fe=I.sibling;var we={mode:"hidden",children:P.children};return(K&1)===0&&p.child!==I?(P=p.child,P.childLanes=0,P.pendingProps=we,p.deletions=null):(P=cu(I,we),P.subtreeFlags=I.subtreeFlags&14680064),fe!==null?F=cu(fe,F):(F=Ld(F,K,S,null),F.flags|=2),F.return=p,P.return=p,P.sibling=F,p.child=P,P=F,F=p.child,K=c.child.memoizedState,K=K===null?In(S):{baseLanes:K.baseLanes|S,cachePool:null,transitions:K.transitions},F.memoizedState=K,F.childLanes=c.childLanes&~S,p.memoizedState=$r,P}return F=c.child,c=F.sibling,P=cu(F,{mode:"visible",children:P.children}),(p.mode&1)===0&&(P.lanes=S),P.return=p,P.sibling=null,c!==null&&(S=p.deletions,S===null?(p.deletions=[c],p.flags|=16):S.push(c)),p.child=P,p.memoizedState=null,P}function Pg(c,p){return p=ex({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function B0(c,p,S,P){return P!==null&&Jc(P),Fl(p,c.child,null,S),c=Pg(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function HV(c,p,S,P,I,F,K){if(S)return p.flags&256?(p.flags&=-257,P=D(Error(t(422))),B0(c,p,K,P)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(F=P.fallback,I=p.mode,P=ex({mode:"visible",children:P.children},I,0,null),F=Ld(F,I,K,null),F.flags|=2,P.return=p,F.return=p,P.sibling=F,p.child=P,(p.mode&1)!==0&&Fl(p,c.child,null,K),p.child.memoizedState=In(K),p.memoizedState=$r,F);if((p.mode&1)===0)return B0(c,p,K,null);if(I.data==="$!"){if(P=I.nextSibling&&I.nextSibling.dataset,P)var fe=P.dgst;return P=fe,F=Error(t(419)),P=D(F,P,void 0),B0(c,p,K,P)}if(fe=(K&c.childLanes)!==0,Sn||fe){if(P=Ui,P!==null){switch(K&-K){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(P.suspendedLanes|K))!==0?0:I,I!==0&&I!==F.retryLane&&(F.retryLane=I,fs(c,I),Mo(P,c,I,-1))}return U_(),P=D(Error(t(421))),B0(c,p,K,P)}return I.data==="$?"?(p.flags|=128,p.child=c.child,p=tW.bind(null,c),I._reactRetry=p,null):(c=F.treeContext,Ji=lo(I.nextSibling),wi=p,yr=!0,Xa=null,c!==null&&(Zi[di++]=ht,Zi[di++]=qa,Zi[di++]=Ul,ht=c.id,qa=c.overflow,Ul=p),p=Pg(p,P.children),p.flags|=4096,p)}function WO(c,p,S){c.lanes|=p;var P=c.alternate;P!==null&&(P.lanes|=p),_d(c.return,p,S)}function S_(c,p,S,P,I){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:S,tailMode:I}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=P,F.tail=S,F.tailMode=I)}function GO(c,p,S){var P=p.pendingProps,I=P.revealOrder,F=P.tail;if(Et(c,p,P.children,S),P=xr.current,(P&2)!==0)P=P&1|2,p.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&WO(c,S,p);else if(c.tag===19)WO(c,S,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}P&=1}if(ar(xr,P),(p.mode&1)===0)p.memoizedState=null;else switch(I){case"forwards":for(S=p.child,I=null;S!==null;)c=S.alternate,c!==null&&hs(c)===null&&(I=S),S=S.sibling;S=I,S===null?(I=p.child,p.child=null):(I=S.sibling,S.sibling=null),S_(p,!1,I,S,F);break;case"backwards":for(S=null,I=p.child,p.child=null;I!==null;){if(c=I.alternate,c!==null&&hs(c)===null){p.child=I;break}c=I.sibling,I.sibling=S,S=I,I=c}S_(p,!0,S,null,F);break;case"together":S_(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function H0(c,p){(p.mode&1)===0&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function Yl(c,p,S){if(c!==null&&(p.dependencies=c.dependencies),Rd|=p.lanes,(S&p.childLanes)===0)return null;if(c!==null&&p.child!==c.child)throw Error(t(153));if(p.child!==null){for(c=p.child,S=cu(c,c.pendingProps),p.child=S,S.return=p;c.sibling!==null;)c=c.sibling,S=S.sibling=cu(c,c.pendingProps),S.return=p;S.sibling=null}return p.child}function VV(c,p,S){switch(p.tag){case 3:dn(p),Zo();break;case 5:Gl(p);break;case 1:Ii(p.type)&&Ll(p);break;case 4:Md(p,p.stateNode.containerInfo);break;case 10:var P=p.type._context,I=p.memoizedProps.value;ar(zl,P._currentValue),P._currentValue=I;break;case 13:if(P=p.memoizedState,P!==null)return P.dehydrated!==null?(ar(xr,xr.current&1),p.flags|=128,null):(S&p.child.childLanes)!==0?wo(c,p,S):(ar(xr,xr.current&1),c=Yl(c,p,S),c!==null?c.sibling:null);ar(xr,xr.current&1);break;case 19:if(P=(S&p.childLanes)!==0,(c.flags&128)!==0){if(P)return GO(c,p,S);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),ar(xr,xr.current),P)break;return null;case 22:case 23:return p.lanes=0,Ee(c,p,S)}return Yl(c,p,S)}var $O,M_,qO,XO;$O=function(c,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)c.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},M_=function(){},qO=function(c,p,S,P){var I=c.memoizedProps;if(I!==P){c=p.stateNode,Gr(Ea.current);var F=null;switch(S){case"input":I=Ne(c,I),P=Ne(c,P),F=[];break;case"select":I=Z({},I,{value:void 0}),P=Z({},P,{value:void 0}),F=[];break;case"textarea":I=Ze(c,I),P=Ze(c,P),F=[];break;default:typeof I.onClick!="function"&&typeof P.onClick=="function"&&(c.onclick=hd)}me(S,P);var K;S=null;for(Le in I)if(!P.hasOwnProperty(Le)&&I.hasOwnProperty(Le)&&I[Le]!=null)if(Le==="style"){var fe=I[Le];for(K in fe)fe.hasOwnProperty(K)&&(S||(S={}),S[K]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(i.hasOwnProperty(Le)?F||(F=[]):(F=F||[]).push(Le,null));for(Le in P){var we=P[Le];if(fe=I?.[Le],P.hasOwnProperty(Le)&&we!==fe&&(we!=null||fe!=null))if(Le==="style")if(fe){for(K in fe)!fe.hasOwnProperty(K)||we&&we.hasOwnProperty(K)||(S||(S={}),S[K]="");for(K in we)we.hasOwnProperty(K)&&fe[K]!==we[K]&&(S||(S={}),S[K]=we[K])}else S||(F||(F=[]),F.push(Le,S)),S=we;else Le==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,fe=fe?fe.__html:void 0,we!=null&&fe!==we&&(F=F||[]).push(Le,we)):Le==="children"?typeof we!="string"&&typeof we!="number"||(F=F||[]).push(Le,""+we):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(i.hasOwnProperty(Le)?(we!=null&&Le==="onScroll"&&dr("scroll",c),F||fe===we||(F=[])):(F=F||[]).push(Le,we))}S&&(F=F||[]).push("style",S);var Le=F;(p.updateQueue=Le)&&(p.flags|=4)}},XO=function(c,p,S,P){S!==P&&(p.flags|=4)};function Ng(c,p){if(!yr)switch(c.tailMode){case"hidden":p=c.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?c.tail=null:S.sibling=null;break;case"collapsed":S=c.tail;for(var P=null;S!==null;)S.alternate!==null&&(P=S),S=S.sibling;P===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:P.sibling=null}}function ca(c){var p=c.alternate!==null&&c.alternate.child===c.child,S=0,P=0;if(p)for(var I=c.child;I!==null;)S|=I.lanes|I.childLanes,P|=I.subtreeFlags&14680064,P|=I.flags&14680064,I.return=c,I=I.sibling;else for(I=c.child;I!==null;)S|=I.lanes|I.childLanes,P|=I.subtreeFlags,P|=I.flags,I.return=c,I=I.sibling;return c.subtreeFlags|=P,c.childLanes=S,p}function WV(c,p,S){var P=p.pendingProps;switch(po(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(p),null;case 1:return Ii(p.type)&&pd(),ca(p),null;case 3:return P=p.stateNode,Qo(),fr(Ki),fr(bi),Bs(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(c===null||c.child===null)&&(Zc(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Xa!==null&&(I_(Xa),Xa=null))),M_(c,p),ca(p),null;case 5:tu(p);var I=Gr(vo.current);if(S=p.type,c!==null&&p.stateNode!=null)qO(c,p,S,P,I),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(t(166));return ca(p),null}if(c=Gr(Ea.current),Zc(p)){P=p.stateNode,S=p.type;var F=p.memoizedProps;switch(P[ei]=p,P[Kc]=F,c=(p.mode&1)!==0,S){case"dialog":dr("cancel",P),dr("close",P);break;case"iframe":case"object":case"embed":dr("load",P);break;case"video":case"audio":for(I=0;I<Yo.length;I++)dr(Yo[I],P);break;case"source":dr("error",P);break;case"img":case"image":case"link":dr("error",P),dr("load",P);break;case"details":dr("toggle",P);break;case"input":Ke(P,F),dr("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!F.multiple},dr("invalid",P);break;case"textarea":Je(P,F),dr("invalid",P)}me(S,F),I=null;for(var K in F)if(F.hasOwnProperty(K)){var fe=F[K];K==="children"?typeof fe=="string"?P.textContent!==fe&&(F.suppressHydrationWarning!==!0&&fd(P.textContent,fe,c),I=["children",fe]):typeof fe=="number"&&P.textContent!==""+fe&&(F.suppressHydrationWarning!==!0&&fd(P.textContent,fe,c),I=["children",""+fe]):i.hasOwnProperty(K)&&fe!=null&&K==="onScroll"&&dr("scroll",P)}switch(S){case"input":$e(P),dt(P,F,!0);break;case"textarea":$e(P),Tt(P);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(P.onclick=hd)}P=I,p.updateQueue=P,P!==null&&(p.flags|=4)}else{K=I.nodeType===9?I:I.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=pt(S)),c==="http://www.w3.org/1999/xhtml"?S==="script"?(c=K.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof P.is=="string"?c=K.createElement(S,{is:P.is}):(c=K.createElement(S),S==="select"&&(K=c,P.multiple?K.multiple=!0:P.size&&(K.size=P.size))):c=K.createElementNS(c,S),c[ei]=p,c[Kc]=P,$O(c,p,!1,!1),p.stateNode=c;e:{switch(K=We(S,P),S){case"dialog":dr("cancel",c),dr("close",c),I=P;break;case"iframe":case"object":case"embed":dr("load",c),I=P;break;case"video":case"audio":for(I=0;I<Yo.length;I++)dr(Yo[I],c);I=P;break;case"source":dr("error",c),I=P;break;case"img":case"image":case"link":dr("error",c),dr("load",c),I=P;break;case"details":dr("toggle",c),I=P;break;case"input":Ke(c,P),I=Ne(c,P),dr("invalid",c);break;case"option":I=P;break;case"select":c._wrapperState={wasMultiple:!!P.multiple},I=Z({},P,{value:void 0}),dr("invalid",c);break;case"textarea":Je(c,P),I=Ze(c,P),dr("invalid",c);break;default:I=P}me(S,I),fe=I;for(F in fe)if(fe.hasOwnProperty(F)){var we=fe[F];F==="style"?Mt(c,we):F==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,we!=null&&Yt(c,we)):F==="children"?typeof we=="string"?(S!=="textarea"||we!=="")&&Qe(c,we):typeof we=="number"&&Qe(c,""+we):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(i.hasOwnProperty(F)?we!=null&&F==="onScroll"&&dr("scroll",c):we!=null&&E(c,F,we,K))}switch(S){case"input":$e(c),dt(c,P,!1);break;case"textarea":$e(c),Tt(c);break;case"option":P.value!=null&&c.setAttribute("value",""+qe(P.value));break;case"select":c.multiple=!!P.multiple,F=P.value,F!=null?Te(c,!!P.multiple,F,!1):P.defaultValue!=null&&Te(c,!!P.multiple,P.defaultValue,!0);break;default:typeof I.onClick=="function"&&(c.onclick=hd)}switch(S){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ca(p),null;case 6:if(c&&p.stateNode!=null)XO(c,p,c.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(t(166));if(S=Gr(vo.current),Gr(Ea.current),Zc(p)){if(P=p.stateNode,S=p.memoizedProps,P[ei]=p,(F=P.nodeValue!==S)&&(c=wi,c!==null))switch(c.tag){case 3:fd(P.nodeValue,S,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&fd(P.nodeValue,S,(c.mode&1)!==0)}F&&(p.flags|=4)}else P=(S.nodeType===9?S:S.ownerDocument).createTextNode(P),P[ei]=p,p.stateNode=P}return ca(p),null;case 13:if(fr(xr),P=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(yr&&Ji!==null&&(p.mode&1)!==0&&(p.flags&128)===0)vg(),Zo(),p.flags|=98560,F=!1;else if(F=Zc(p),P!==null&&P.dehydrated!==null){if(c===null){if(!F)throw Error(t(318));if(F=p.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(t(317));F[ei]=p}else Zo(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ca(p),F=!1}else Xa!==null&&(I_(Xa),Xa=null),F=!0;if(!F)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=S,p):(P=P!==null,P!==(c!==null&&c.memoizedState!==null)&&P&&(p.child.flags|=8192,(p.mode&1)!==0&&(c===null||(xr.current&1)!==0?Ei===0&&(Ei=3):U_())),p.updateQueue!==null&&(p.flags|=4),ca(p),null);case 4:return Qo(),M_(c,p),c===null&&qc(p.stateNode.containerInfo),ca(p),null;case 10:return wd(p.type._context),ca(p),null;case 17:return Ii(p.type)&&pd(),ca(p),null;case 19:if(fr(xr),F=p.memoizedState,F===null)return ca(p),null;if(P=(p.flags&128)!==0,K=F.rendering,K===null)if(P)Ng(F,!1);else{if(Ei!==0||c!==null&&(c.flags&128)!==0)for(c=p.child;c!==null;){if(K=hs(c),K!==null){for(p.flags|=128,Ng(F,!1),P=K.updateQueue,P!==null&&(p.updateQueue=P,p.flags|=4),p.subtreeFlags=0,P=S,S=p.child;S!==null;)F=S,c=P,F.flags&=14680066,K=F.alternate,K===null?(F.childLanes=0,F.lanes=c,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=K.childLanes,F.lanes=K.lanes,F.child=K.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=K.memoizedProps,F.memoizedState=K.memoizedState,F.updateQueue=K.updateQueue,F.type=K.type,c=K.dependencies,F.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),S=S.sibling;return ar(xr,xr.current&1|2),p.child}c=c.sibling}F.tail!==null&&Re()>qh&&(p.flags|=128,P=!0,Ng(F,!1),p.lanes=4194304)}else{if(!P)if(c=hs(K),c!==null){if(p.flags|=128,P=!0,S=c.updateQueue,S!==null&&(p.updateQueue=S,p.flags|=4),Ng(F,!0),F.tail===null&&F.tailMode==="hidden"&&!K.alternate&&!yr)return ca(p),null}else 2*Re()-F.renderingStartTime>qh&&S!==1073741824&&(p.flags|=128,P=!0,Ng(F,!1),p.lanes=4194304);F.isBackwards?(K.sibling=p.child,p.child=K):(S=F.last,S!==null?S.sibling=K:p.child=K,F.last=K)}return F.tail!==null?(p=F.tail,F.rendering=p,F.tail=p.sibling,F.renderingStartTime=Re(),p.sibling=null,S=xr.current,ar(xr,P?S&1|2:S&1),p):(ca(p),null);case 22:case 23:return D_(),P=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==P&&(p.flags|=8192),P&&(p.mode&1)!==0?(gs&1073741824)!==0&&(ca(p),p.subtreeFlags&6&&(p.flags|=8192)):ca(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function GV(c,p){switch(po(p),p.tag){case 1:return Ii(p.type)&&pd(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return Qo(),fr(Ki),fr(bi),Bs(),c=p.flags,(c&65536)!==0&&(c&128)===0?(p.flags=c&-65537|128,p):null;case 5:return tu(p),null;case 13:if(fr(xr),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(t(340));Zo()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return fr(xr),null;case 4:return Qo(),null;case 10:return wd(p.type._context),null;case 22:case 23:return D_(),null;case 24:return null;default:return null}}var V0=!1,ua=!1,$V=typeof WeakSet=="function"?WeakSet:Set,It=null;function Gh(c,p){var S=c.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(P){qr(c,p,P)}else S.current=null}function E_(c,p,S){try{S()}catch(P){qr(c,p,P)}}var YO=!1;function qV(c,p){if(Yc=Ba,c=Or(),oi(c)){if("selectionStart"in c)var S={start:c.selectionStart,end:c.selectionEnd};else e:{S=(S=c.ownerDocument)&&S.defaultView||window;var P=S.getSelection&&S.getSelection();if(P&&P.rangeCount!==0){S=P.anchorNode;var I=P.anchorOffset,F=P.focusNode;P=P.focusOffset;try{S.nodeType,F.nodeType}catch{S=null;break e}var K=0,fe=-1,we=-1,Le=0,at=0,st=c,rt=null;t:for(;;){for(var Nt;st!==S||I!==0&&st.nodeType!==3||(fe=K+I),st!==F||P!==0&&st.nodeType!==3||(we=K+P),st.nodeType===3&&(K+=st.nodeValue.length),(Nt=st.firstChild)!==null;)rt=st,st=Nt;for(;;){if(st===c)break t;if(rt===S&&++Le===I&&(fe=K),rt===F&&++at===P&&(we=K),(Nt=st.nextSibling)!==null)break;st=rt,rt=st.parentNode}st=Nt}S=fe===-1||we===-1?null:{start:fe,end:we}}else S=null}S=S||{start:0,end:0}}else S=null;for(ag={focusedElem:c,selectionRange:S},Ba=!1,It=p;It!==null;)if(p=It,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,It=c;else for(;It!==null;){p=It;try{var Dt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var Ft=Dt.memoizedProps,ti=Dt.memoizedState,Ce=p.stateNode,_e=Ce.getSnapshotBeforeUpdate(p.elementType===p.type?Ft:Ya(p.type,Ft),ti);Ce.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Oe=p.stateNode.containerInfo;Oe.nodeType===1?Oe.textContent="":Oe.nodeType===9&&Oe.documentElement&&Oe.removeChild(Oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ut){qr(p,p.return,ut)}if(c=p.sibling,c!==null){c.return=p.return,It=c;break}It=p.return}return Dt=YO,YO=!1,Dt}function Og(c,p,S){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var I=P=P.next;do{if((I.tag&c)===c){var F=I.destroy;I.destroy=void 0,F!==void 0&&E_(p,S,F)}I=I.next}while(I!==P)}}function W0(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&c)===c){var P=S.create;S.destroy=P()}S=S.next}while(S!==p)}}function T_(c){var p=c.ref;if(p!==null){var S=c.stateNode;switch(c.tag){case 5:c=S;break;default:c=S}typeof p=="function"?p(c):p.current=c}}function KO(c){var p=c.alternate;p!==null&&(c.alternate=null,KO(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[ei],delete p[Kc],delete p[jl],delete p[Ch],delete p[Ph])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function ZO(c){return c.tag===5||c.tag===3||c.tag===4}function JO(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||ZO(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function A_(c,p,S){var P=c.tag;if(P===5||P===6)c=c.stateNode,p?S.nodeType===8?S.parentNode.insertBefore(c,p):S.insertBefore(c,p):(S.nodeType===8?(p=S.parentNode,p.insertBefore(c,S)):(p=S,p.appendChild(c)),S=S._reactRootContainer,S!=null||p.onclick!==null||(p.onclick=hd));else if(P!==4&&(c=c.child,c!==null))for(A_(c,p,S),c=c.sibling;c!==null;)A_(c,p,S),c=c.sibling}function C_(c,p,S){var P=c.tag;if(P===5||P===6)c=c.stateNode,p?S.insertBefore(c,p):S.appendChild(c);else if(P!==4&&(c=c.child,c!==null))for(C_(c,p,S),c=c.sibling;c!==null;)C_(c,p,S),c=c.sibling}var ea=null,_o=!1;function iu(c,p,S){for(S=S.child;S!==null;)QO(c,p,S),S=S.sibling}function QO(c,p,S){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(nn,S)}catch{}switch(S.tag){case 5:ua||Gh(S,p);case 6:var P=ea,I=_o;ea=null,iu(c,p,S),ea=P,_o=I,ea!==null&&(_o?(c=ea,S=S.stateNode,c.nodeType===8?c.parentNode.removeChild(S):c.removeChild(S)):ea.removeChild(S.stateNode));break;case 18:ea!==null&&(_o?(c=ea,S=S.stateNode,c.nodeType===8?Ah(c.parentNode,S):c.nodeType===1&&Ah(c,S),td(c)):Ah(ea,S.stateNode));break;case 4:P=ea,I=_o,ea=S.stateNode.containerInfo,_o=!0,iu(c,p,S),ea=P,_o=I;break;case 0:case 11:case 14:case 15:if(!ua&&(P=S.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){I=P=P.next;do{var F=I,K=F.destroy;F=F.tag,K!==void 0&&((F&2)!==0||(F&4)!==0)&&E_(S,p,K),I=I.next}while(I!==P)}iu(c,p,S);break;case 1:if(!ua&&(Gh(S,p),P=S.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=S.memoizedProps,P.state=S.memoizedState,P.componentWillUnmount()}catch(fe){qr(S,p,fe)}iu(c,p,S);break;case 21:iu(c,p,S);break;case 22:S.mode&1?(ua=(P=ua)||S.memoizedState!==null,iu(c,p,S),ua=P):iu(c,p,S);break;default:iu(c,p,S)}}function eR(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var S=c.stateNode;S===null&&(S=c.stateNode=new $V),p.forEach(function(P){var I=nW.bind(null,c,P);S.has(P)||(S.add(P),P.then(I,I))})}}function So(c,p){var S=p.deletions;if(S!==null)for(var P=0;P<S.length;P++){var I=S[P];try{var F=c,K=p,fe=K;e:for(;fe!==null;){switch(fe.tag){case 5:ea=fe.stateNode,_o=!1;break e;case 3:ea=fe.stateNode.containerInfo,_o=!0;break e;case 4:ea=fe.stateNode.containerInfo,_o=!0;break e}fe=fe.return}if(ea===null)throw Error(t(160));QO(F,K,I),ea=null,_o=!1;var we=I.alternate;we!==null&&(we.return=null),I.return=null}catch(Le){qr(I,p,Le)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)tR(p,c),p=p.sibling}function tR(c,p){var S=c.alternate,P=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(So(p,c),tl(c),P&4){try{Og(3,c,c.return),W0(3,c)}catch(Ft){qr(c,c.return,Ft)}try{Og(5,c,c.return)}catch(Ft){qr(c,c.return,Ft)}}break;case 1:So(p,c),tl(c),P&512&&S!==null&&Gh(S,S.return);break;case 5:if(So(p,c),tl(c),P&512&&S!==null&&Gh(S,S.return),c.flags&32){var I=c.stateNode;try{Qe(I,"")}catch(Ft){qr(c,c.return,Ft)}}if(P&4&&(I=c.stateNode,I!=null)){var F=c.memoizedProps,K=S!==null?S.memoizedProps:F,fe=c.type,we=c.updateQueue;if(c.updateQueue=null,we!==null)try{fe==="input"&&F.type==="radio"&&F.name!=null&&De(I,F),We(fe,K);var Le=We(fe,F);for(K=0;K<we.length;K+=2){var at=we[K],st=we[K+1];at==="style"?Mt(I,st):at==="dangerouslySetInnerHTML"?Yt(I,st):at==="children"?Qe(I,st):E(I,at,st,Le)}switch(fe){case"input":vt(I,F);break;case"textarea":Ye(I,F);break;case"select":var rt=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!F.multiple;var Nt=F.value;Nt!=null?Te(I,!!F.multiple,Nt,!1):rt!==!!F.multiple&&(F.defaultValue!=null?Te(I,!!F.multiple,F.defaultValue,!0):Te(I,!!F.multiple,F.multiple?[]:"",!1))}I[Kc]=F}catch(Ft){qr(c,c.return,Ft)}}break;case 6:if(So(p,c),tl(c),P&4){if(c.stateNode===null)throw Error(t(162));I=c.stateNode,F=c.memoizedProps;try{I.nodeValue=F}catch(Ft){qr(c,c.return,Ft)}}break;case 3:if(So(p,c),tl(c),P&4&&S!==null&&S.memoizedState.isDehydrated)try{td(p.containerInfo)}catch(Ft){qr(c,c.return,Ft)}break;case 4:So(p,c),tl(c);break;case 13:So(p,c),tl(c),I=c.child,I.flags&8192&&(F=I.memoizedState!==null,I.stateNode.isHidden=F,!F||I.alternate!==null&&I.alternate.memoizedState!==null||(O_=Re())),P&4&&eR(c);break;case 22:if(at=S!==null&&S.memoizedState!==null,c.mode&1?(ua=(Le=ua)||at,So(p,c),ua=Le):So(p,c),tl(c),P&8192){if(Le=c.memoizedState!==null,(c.stateNode.isHidden=Le)&&!at&&(c.mode&1)!==0)for(It=c,at=c.child;at!==null;){for(st=It=at;It!==null;){switch(rt=It,Nt=rt.child,rt.tag){case 0:case 11:case 14:case 15:Og(4,rt,rt.return);break;case 1:Gh(rt,rt.return);var Dt=rt.stateNode;if(typeof Dt.componentWillUnmount=="function"){P=rt,S=rt.return;try{p=P,Dt.props=p.memoizedProps,Dt.state=p.memoizedState,Dt.componentWillUnmount()}catch(Ft){qr(P,S,Ft)}}break;case 5:Gh(rt,rt.return);break;case 22:if(rt.memoizedState!==null){iR(st);continue}}Nt!==null?(Nt.return=rt,It=Nt):iR(st)}at=at.sibling}e:for(at=null,st=c;;){if(st.tag===5){if(at===null){at=st;try{I=st.stateNode,Le?(F=I.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(fe=st.stateNode,we=st.memoizedProps.style,K=we!=null&&we.hasOwnProperty("display")?we.display:null,fe.style.display=$t("display",K))}catch(Ft){qr(c,c.return,Ft)}}}else if(st.tag===6){if(at===null)try{st.stateNode.nodeValue=Le?"":st.memoizedProps}catch(Ft){qr(c,c.return,Ft)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===c)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===c)break e;for(;st.sibling===null;){if(st.return===null||st.return===c)break e;at===st&&(at=null),st=st.return}at===st&&(at=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:So(p,c),tl(c),P&4&&eR(c);break;case 21:break;default:So(p,c),tl(c)}}function tl(c){var p=c.flags;if(p&2){try{e:{for(var S=c.return;S!==null;){if(ZO(S)){var P=S;break e}S=S.return}throw Error(t(160))}switch(P.tag){case 5:var I=P.stateNode;P.flags&32&&(Qe(I,""),P.flags&=-33);var F=JO(c);C_(c,F,I);break;case 3:case 4:var K=P.stateNode.containerInfo,fe=JO(c);A_(c,fe,K);break;default:throw Error(t(161))}}catch(we){qr(c,c.return,we)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function XV(c,p,S){It=c,nR(c)}function nR(c,p,S){for(var P=(c.mode&1)!==0;It!==null;){var I=It,F=I.child;if(I.tag===22&&P){var K=I.memoizedState!==null||V0;if(!K){var fe=I.alternate,we=fe!==null&&fe.memoizedState!==null||ua;fe=V0;var Le=ua;if(V0=K,(ua=we)&&!Le)for(It=I;It!==null;)K=It,we=K.child,K.tag===22&&K.memoizedState!==null?aR(I):we!==null?(we.return=K,It=we):aR(I);for(;F!==null;)It=F,nR(F),F=F.sibling;It=I,V0=fe,ua=Le}rR(c)}else(I.subtreeFlags&8772)!==0&&F!==null?(F.return=I,It=F):rR(c)}}function rR(c){for(;It!==null;){var p=It;if((p.flags&8772)!==0){var S=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:ua||W0(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!ua)if(S===null)P.componentDidMount();else{var I=p.elementType===p.type?S.memoizedProps:Ya(p.type,S.memoizedProps);P.componentDidUpdate(I,S.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&eu(p,F,P);break;case 3:var K=p.updateQueue;if(K!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=p.child.stateNode;break;case 1:S=p.child.stateNode}eu(p,K,S)}break;case 5:var fe=p.stateNode;if(S===null&&p.flags&4){S=fe;var we=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":we.autoFocus&&S.focus();break;case"img":we.src&&(S.src=we.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Le=p.alternate;if(Le!==null){var at=Le.memoizedState;if(at!==null){var st=at.dehydrated;st!==null&&td(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ua||p.flags&512&&T_(p)}catch(rt){qr(p,p.return,rt)}}if(p===c){It=null;break}if(S=p.sibling,S!==null){S.return=p.return,It=S;break}It=p.return}}function iR(c){for(;It!==null;){var p=It;if(p===c){It=null;break}var S=p.sibling;if(S!==null){S.return=p.return,It=S;break}It=p.return}}function aR(c){for(;It!==null;){var p=It;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{W0(4,p)}catch(we){qr(p,S,we)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var I=p.return;try{P.componentDidMount()}catch(we){qr(p,I,we)}}var F=p.return;try{T_(p)}catch(we){qr(p,F,we)}break;case 5:var K=p.return;try{T_(p)}catch(we){qr(p,K,we)}}}catch(we){qr(p,p.return,we)}if(p===c){It=null;break}var fe=p.sibling;if(fe!==null){fe.return=p.return,It=fe;break}It=p.return}}var YV=Math.ceil,G0=A.ReactCurrentDispatcher,P_=A.ReactCurrentOwner,Vs=A.ReactCurrentBatchConfig,Hn=0,Ui=null,fi=null,ta=0,gs=0,$h=jr(0),Ei=0,Rg=null,Rd=0,$0=0,N_=0,kg=null,Ka=null,O_=0,qh=1/0,Kl=null,q0=!1,R_=null,au=null,X0=!1,su=null,Y0=0,jg=0,k_=null,K0=-1,Z0=0;function Pa(){return(Hn&6)!==0?Re():K0!==-1?K0:K0=Re()}function ou(c){return(c.mode&1)===0?1:(Hn&2)!==0&&ta!==0?ta&-ta:w_.transition!==null?(Z0===0&&(Z0=ir()),Z0):(c=Fn,c!==0||(c=window.event,c=c===void 0?16:g0(c.type)),c)}function Mo(c,p,S,P){if(50<jg)throw jg=0,k_=null,Error(t(185));Jr(c,S,P),((Hn&2)===0||c!==Ui)&&(c===Ui&&((Hn&2)===0&&($0|=S),Ei===4&&lu(c,ta)),Za(c,P),S===1&&Hn===0&&(p.mode&1)===0&&(qh=Re()+500,gd&&Fs()))}function Za(c,p){var S=c.callbackNode;gn(c,p);var P=bn(c,c===Ui?ta:0);if(P===0)S!==null&&je(S),c.callbackNode=null,c.callbackPriority=0;else if(p=P&-P,c.callbackPriority!==p){if(S!=null&&je(S),p===1)c.tag===0?N0(oR.bind(null,c)):vd(oR.bind(null,c)),b_(function(){(Hn&6)===0&&Fs()}),S=null;else{switch(jc(P)){case 1:S=et;break;case 4:S=it;break;case 16:S=Pt;break;case 536870912:S=qt;break;default:S=Pt}S=mR(S,sR.bind(null,c))}c.callbackPriority=p,c.callbackNode=S}}function sR(c,p){if(K0=-1,Z0=0,(Hn&6)!==0)throw Error(t(327));var S=c.callbackNode;if(Xh()&&c.callbackNode!==S)return null;var P=bn(c,c===Ui?ta:0);if(P===0)return null;if((P&30)!==0||(P&c.expiredLanes)!==0||p)p=J0(c,P);else{p=P;var I=Hn;Hn|=2;var F=cR();(Ui!==c||ta!==p)&&(Kl=null,qh=Re()+500,jd(c,p));do try{JV();break}catch(fe){lR(c,fe)}while(!0);Hl(),G0.current=F,Hn=I,fi!==null?p=0:(Ui=null,ta=0,p=Ei)}if(p!==0){if(p===2&&(I=On(c),I!==0&&(P=I,p=j_(c,I))),p===1)throw S=Rg,jd(c,0),lu(c,P),Za(c,Re()),S;if(p===6)lu(c,P);else{if(I=c.current.alternate,(P&30)===0&&!KV(I)&&(p=J0(c,P),p===2&&(F=On(c),F!==0&&(P=F,p=j_(c,F))),p===1))throw S=Rg,jd(c,0),lu(c,P),Za(c,Re()),S;switch(c.finishedWork=I,c.finishedLanes=P,p){case 0:case 1:throw Error(t(345));case 2:Id(c,Ka,Kl);break;case 3:if(lu(c,P),(P&130023424)===P&&(p=O_+500-Re(),10<p)){if(bn(c,0)!==0)break;if(I=c.suspendedLanes,(I&P)!==P){Pa(),c.pingedLanes|=c.suspendedLanes&I;break}c.timeoutHandle=og(Id.bind(null,c,Ka,Kl),p);break}Id(c,Ka,Kl);break;case 4:if(lu(c,P),(P&4194240)===P)break;for(p=c.eventTimes,I=-1;0<P;){var K=31-tn(P);F=1<<K,K=p[K],K>I&&(I=K),P&=~F}if(P=I,P=Re()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*YV(P/1960))-P,10<P){c.timeoutHandle=og(Id.bind(null,c,Ka,Kl),P);break}Id(c,Ka,Kl);break;case 5:Id(c,Ka,Kl);break;default:throw Error(t(329))}}}return Za(c,Re()),c.callbackNode===S?sR.bind(null,c):null}function j_(c,p){var S=kg;return c.current.memoizedState.isDehydrated&&(jd(c,p).flags|=256),c=J0(c,p),c!==2&&(p=Ka,Ka=S,p!==null&&I_(p)),c}function I_(c){Ka===null?Ka=c:Ka.push.apply(Ka,c)}function KV(c){for(var p=c;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var P=0;P<S.length;P++){var I=S[P],F=I.getSnapshot;I=I.value;try{if(!wa(F(),I))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function lu(c,p){for(p&=~N_,p&=~$0,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var S=31-tn(p),P=1<<S;c[S]=-1,p&=~P}}function oR(c){if((Hn&6)!==0)throw Error(t(327));Xh();var p=bn(c,0);if((p&1)===0)return Za(c,Re()),null;var S=J0(c,p);if(c.tag!==0&&S===2){var P=On(c);P!==0&&(p=P,S=j_(c,P))}if(S===1)throw S=Rg,jd(c,0),lu(c,p),Za(c,Re()),S;if(S===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Id(c,Ka,Kl),Za(c,Re()),null}function L_(c,p){var S=Hn;Hn|=1;try{return c(p)}finally{Hn=S,Hn===0&&(qh=Re()+500,gd&&Fs())}}function kd(c){su!==null&&su.tag===0&&(Hn&6)===0&&Xh();var p=Hn;Hn|=1;var S=Vs.transition,P=Fn;try{if(Vs.transition=null,Fn=1,c)return c()}finally{Fn=P,Vs.transition=S,Hn=p,(Hn&6)===0&&Fs()}}function D_(){gs=$h.current,fr($h)}function jd(c,p){c.finishedWork=null,c.finishedLanes=0;var S=c.timeoutHandle;if(S!==-1&&(c.timeoutHandle=-1,lg(S)),fi!==null)for(S=fi.return;S!==null;){var P=S;switch(po(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&pd();break;case 3:Qo(),fr(Ki),fr(bi),Bs();break;case 5:tu(P);break;case 4:Qo();break;case 13:fr(xr);break;case 19:fr(xr);break;case 10:wd(P.type._context);break;case 22:case 23:D_()}S=S.return}if(Ui=c,fi=c=cu(c.current,null),ta=gs=p,Ei=0,Rg=null,N_=$0=Rd=0,Ka=kg=null,go!==null){for(p=0;p<go.length;p++)if(S=go[p],P=S.interleaved,P!==null){S.interleaved=null;var I=P.next,F=S.pending;if(F!==null){var K=F.next;F.next=I,P.next=K}S.pending=P}go=null}return c}function lR(c,p){do{var S=fi;try{if(Hl(),$l.current=Vh,ps){for(var P=hr.memoizedState;P!==null;){var I=P.queue;I!==null&&(I.pending=null),P=P.next}ps=!1}if(yo=0,zn=Lr=hr=null,Di=!1,el=0,P_.current=null,S===null||S.return===null){Ei=1,Rg=p,fi=null;break}e:{var F=c,K=S.return,fe=S,we=p;if(p=ta,fe.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Le=we,at=fe,st=at.tag;if((at.mode&1)===0&&(st===0||st===11||st===15)){var rt=at.alternate;rt?(at.updateQueue=rt.updateQueue,at.memoizedState=rt.memoizedState,at.lanes=rt.lanes):(at.updateQueue=null,at.memoizedState=null)}var Nt=Ot(K);if(Nt!==null){Nt.flags&=-257,un(Nt,K,fe,F,p),Nt.mode&1&&ct(F,Le,p),p=Nt,we=Le;var Dt=p.updateQueue;if(Dt===null){var Ft=new Set;Ft.add(we),p.updateQueue=Ft}else Dt.add(we);break e}else{if((p&1)===0){ct(F,Le,p),U_();break e}we=Error(t(426))}}else if(yr&&fe.mode&1){var ti=Ot(K);if(ti!==null){(ti.flags&65536)===0&&(ti.flags|=256),un(ti,K,fe,F,p),Jc(k(we,fe));break e}}F=we=k(we,fe),Ei!==4&&(Ei=2),kg===null?kg=[F]:kg.push(F),F=K;do{switch(F.tag){case 3:F.flags|=65536,p&=-p,F.lanes|=p;var Ce=Me(F,we,p);Vl(F,Ce);break e;case 1:fe=we;var _e=F.type,Oe=F.stateNode;if((F.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(au===null||!au.has(Oe)))){F.flags|=65536,p&=-p,F.lanes|=p;var ut=He(F,fe,p);Vl(F,ut);break e}}F=F.return}while(F!==null)}dR(S)}catch(Ht){p=Ht,fi===S&&S!==null&&(fi=S=S.return);continue}break}while(!0)}function cR(){var c=G0.current;return G0.current=Vh,c===null?Vh:c}function U_(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Ui===null||(Rd&268435455)===0&&($0&268435455)===0||lu(Ui,ta)}function J0(c,p){var S=Hn;Hn|=2;var P=cR();(Ui!==c||ta!==p)&&(Kl=null,jd(c,p));do try{ZV();break}catch(I){lR(c,I)}while(!0);if(Hl(),Hn=S,G0.current=P,fi!==null)throw Error(t(261));return Ui=null,ta=0,Ei}function ZV(){for(;fi!==null;)uR(fi)}function JV(){for(;fi!==null&&!Ue();)uR(fi)}function uR(c){var p=pR(c.alternate,c,gs);c.memoizedProps=c.pendingProps,p===null?dR(c):fi=p,P_.current=null}function dR(c){var p=c;do{var S=p.alternate;if(c=p.return,(p.flags&32768)===0){if(S=WV(S,p,gs),S!==null){fi=S;return}}else{if(S=GV(S,p),S!==null){S.flags&=32767,fi=S;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Ei=6,fi=null;return}}if(p=p.sibling,p!==null){fi=p;return}fi=p=c}while(p!==null);Ei===0&&(Ei=5)}function Id(c,p,S){var P=Fn,I=Vs.transition;try{Vs.transition=null,Fn=1,QV(c,p,S,P)}finally{Vs.transition=I,Fn=P}return null}function QV(c,p,S,P){do Xh();while(su!==null);if((Hn&6)!==0)throw Error(t(327));S=c.finishedWork;var I=c.finishedLanes;if(S===null)return null;if(c.finishedWork=null,c.finishedLanes=0,S===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var F=S.lanes|S.childLanes;if(js(c,F),c===Ui&&(fi=Ui=null,ta=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||X0||(X0=!0,mR(Pt,function(){return Xh(),null})),F=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||F){F=Vs.transition,Vs.transition=null;var K=Fn;Fn=1;var fe=Hn;Hn|=4,P_.current=null,qV(c,S),tR(S,c),li(ag),Ba=!!Yc,ag=Yc=null,c.current=S,XV(S),Be(),Hn=fe,Fn=K,Vs.transition=F}else c.current=S;if(X0&&(X0=!1,su=c,Y0=I),F=c.pendingLanes,F===0&&(au=null),mt(S.stateNode),Za(c,Re()),p!==null)for(P=c.onRecoverableError,S=0;S<p.length;S++)I=p[S],P(I.value,{componentStack:I.stack,digest:I.digest});if(q0)throw q0=!1,c=R_,R_=null,c;return(Y0&1)!==0&&c.tag!==0&&Xh(),F=c.pendingLanes,(F&1)!==0?c===k_?jg++:(jg=0,k_=c):jg=0,Fs(),null}function Xh(){if(su!==null){var c=jc(Y0),p=Vs.transition,S=Fn;try{if(Vs.transition=null,Fn=16>c?16:c,su===null)var P=!1;else{if(c=su,su=null,Y0=0,(Hn&6)!==0)throw Error(t(331));var I=Hn;for(Hn|=4,It=c.current;It!==null;){var F=It,K=F.child;if((It.flags&16)!==0){var fe=F.deletions;if(fe!==null){for(var we=0;we<fe.length;we++){var Le=fe[we];for(It=Le;It!==null;){var at=It;switch(at.tag){case 0:case 11:case 15:Og(8,at,F)}var st=at.child;if(st!==null)st.return=at,It=st;else for(;It!==null;){at=It;var rt=at.sibling,Nt=at.return;if(KO(at),at===Le){It=null;break}if(rt!==null){rt.return=Nt,It=rt;break}It=Nt}}}var Dt=F.alternate;if(Dt!==null){var Ft=Dt.child;if(Ft!==null){Dt.child=null;do{var ti=Ft.sibling;Ft.sibling=null,Ft=ti}while(Ft!==null)}}It=F}}if((F.subtreeFlags&2064)!==0&&K!==null)K.return=F,It=K;else e:for(;It!==null;){if(F=It,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:Og(9,F,F.return)}var Ce=F.sibling;if(Ce!==null){Ce.return=F.return,It=Ce;break e}It=F.return}}var _e=c.current;for(It=_e;It!==null;){K=It;var Oe=K.child;if((K.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=K,It=Oe;else e:for(K=_e;It!==null;){if(fe=It,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:W0(9,fe)}}catch(Ht){qr(fe,fe.return,Ht)}if(fe===K){It=null;break e}var ut=fe.sibling;if(ut!==null){ut.return=fe.return,It=ut;break e}It=fe.return}}if(Hn=I,Fs(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(nn,c)}catch{}P=!0}return P}finally{Fn=S,Vs.transition=p}}return!1}function fR(c,p,S){p=k(S,p),p=Me(c,p,1),c=Sr(c,p,1),p=Pa(),c!==null&&(Jr(c,1,p),Za(c,p))}function qr(c,p,S){if(c.tag===3)fR(c,c,S);else for(;p!==null;){if(p.tag===3){fR(p,c,S);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(au===null||!au.has(P))){c=k(S,c),c=He(p,c,1),p=Sr(p,c,1),c=Pa(),p!==null&&(Jr(p,1,c),Za(p,c));break}}p=p.return}}function eW(c,p,S){var P=c.pingCache;P!==null&&P.delete(p),p=Pa(),c.pingedLanes|=c.suspendedLanes&S,Ui===c&&(ta&S)===S&&(Ei===4||Ei===3&&(ta&130023424)===ta&&500>Re()-O_?jd(c,0):N_|=S),Za(c,p)}function hR(c,p){p===0&&((c.mode&1)===0?p=1:(p=rr,rr<<=1,(rr&130023424)===0&&(rr=4194304)));var S=Pa();c=fs(c,p),c!==null&&(Jr(c,p,S),Za(c,S))}function tW(c){var p=c.memoizedState,S=0;p!==null&&(S=p.retryLane),hR(c,S)}function nW(c,p){var S=0;switch(c.tag){case 13:var P=c.stateNode,I=c.memoizedState;I!==null&&(S=I.retryLane);break;case 19:P=c.stateNode;break;default:throw Error(t(314))}P!==null&&P.delete(p),hR(c,S)}var pR;pR=function(c,p,S){if(c!==null)if(c.memoizedProps!==p.pendingProps||Ki.current)Sn=!0;else{if((c.lanes&S)===0&&(p.flags&128)===0)return Sn=!1,VV(c,p,S);Sn=(c.flags&131072)!==0}else Sn=!1,yr&&(p.flags&1048576)!==0&&hg(p,kh,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;H0(c,p),c=p.pendingProps;var I=Il(p,bi.current);Jo(p,S),I=Td(null,p,P,c,I,S);var F=wg();return p.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ii(P)?(F=!0,Ll(p)):F=!1,p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,wn(p),I.updater=Wh,p.stateNode=I,I._reactInternals=p,C(p,P,c,S),p=vn(null,p,P,!0,F,S)):(p.tag=0,yr&&F&&pg(p),Et(null,p,I,S),p=p.child),p;case 16:P=p.elementType;e:{switch(H0(c,p),c=p.pendingProps,I=P._init,P=I(P._payload),p.type=P,I=p.tag=iW(P),c=Ya(P,c),I){case 0:p=_t(null,p,P,c,S);break e;case 1:p=zt(null,p,P,c,S);break e;case 11:p=Mi(null,p,P,c,S);break e;case 14:p=Ca(null,p,P,Ya(P.type,c),S);break e}throw Error(t(306,P,""))}return p;case 0:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Ya(P,I),_t(c,p,P,I,S);case 1:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Ya(P,I),zt(c,p,P,I,S);case 3:e:{if(dn(p),c===null)throw Error(t(387));P=p.pendingProps,F=p.memoizedState,I=F.element,Hr(c,p),Ir(p,P,null,S);var K=p.memoizedState;if(P=K.element,F.isDehydrated)if(F={element:P,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){I=k(Error(t(423)),p),p=Dn(c,p,P,S,I);break e}else if(P!==I){I=k(Error(t(424)),p),p=Dn(c,p,P,S,I);break e}else for(Ji=lo(p.stateNode.containerInfo.firstChild),wi=p,yr=!0,Xa=null,S=bd(p,null,P,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Zo(),P===I){p=Yl(c,p,S);break e}Et(c,p,P,S)}p=p.child}return p;case 5:return Gl(p),c===null&&Ih(p),P=p.type,I=p.pendingProps,F=c!==null?c.memoizedProps:null,K=I.children,sg(P,I)?K=null:F!==null&&sg(P,F)&&(p.flags|=32),ze(c,p),Et(c,p,K,S),p.child;case 6:return c===null&&Ih(p),null;case 13:return wo(c,p,S);case 4:return Md(p,p.stateNode.containerInfo),P=p.pendingProps,c===null?p.child=Fl(p,null,P,S):Et(c,p,P,S),p.child;case 11:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Ya(P,I),Mi(c,p,P,I,S);case 7:return Et(c,p,p.pendingProps,S),p.child;case 8:return Et(c,p,p.pendingProps.children,S),p.child;case 12:return Et(c,p,p.pendingProps.children,S),p.child;case 10:e:{if(P=p.type._context,I=p.pendingProps,F=p.memoizedProps,K=I.value,ar(zl,P._currentValue),P._currentValue=K,F!==null)if(wa(F.value,K)){if(F.children===I.children&&!Ki.current){p=Yl(c,p,S);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var fe=F.dependencies;if(fe!==null){K=F.child;for(var we=fe.firstContext;we!==null;){if(we.context===P){if(F.tag===1){we=Jn(-1,S&-S),we.tag=2;var Le=F.updateQueue;if(Le!==null){Le=Le.shared;var at=Le.pending;at===null?we.next=we:(we.next=at.next,at.next=we),Le.pending=we}}F.lanes|=S,we=F.alternate,we!==null&&(we.lanes|=S),_d(F.return,S,p),fe.lanes|=S;break}we=we.next}}else if(F.tag===10)K=F.type===p.type?null:F.child;else if(F.tag===18){if(K=F.return,K===null)throw Error(t(341));K.lanes|=S,fe=K.alternate,fe!==null&&(fe.lanes|=S),_d(K,S,p),K=F.sibling}else K=F.child;if(K!==null)K.return=F;else for(K=F;K!==null;){if(K===p){K=null;break}if(F=K.sibling,F!==null){F.return=K.return,K=F;break}K=K.return}F=K}Et(c,p,I.children,S),p=p.child}return p;case 9:return I=p.type,P=p.pendingProps.children,Jo(p,S),I=Ma(I),P=P(I),p.flags|=1,Et(c,p,P,S),p.child;case 14:return P=p.type,I=Ya(P,p.pendingProps),I=Ya(P.type,I),Ca(c,p,P,I,S);case 15:return ke(c,p,p.type,p.pendingProps,S);case 17:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Ya(P,I),H0(c,p),p.tag=1,Ii(P)?(c=!0,Ll(p)):c=!1,Jo(p,S),g(p,P,I),C(p,P,I,S),vn(null,p,P,!0,c,S);case 19:return GO(c,p,S);case 22:return Ee(c,p,S)}throw Error(t(156,p.tag))};function mR(c,p){return he(c,p)}function rW(c,p,S,P){this.tag=c,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(c,p,S,P){return new rW(c,p,S,P)}function F_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function iW(c){if(typeof c=="function")return F_(c)?1:0;if(c!=null){if(c=c.$$typeof,c===B)return 11;if(c===Y)return 14}return 2}function cu(c,p){var S=c.alternate;return S===null?(S=Ws(c.tag,p,c.key,c.mode),S.elementType=c.elementType,S.type=c.type,S.stateNode=c.stateNode,S.alternate=c,c.alternate=S):(S.pendingProps=p,S.type=c.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=c.flags&14680064,S.childLanes=c.childLanes,S.lanes=c.lanes,S.child=c.child,S.memoizedProps=c.memoizedProps,S.memoizedState=c.memoizedState,S.updateQueue=c.updateQueue,p=c.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=c.sibling,S.index=c.index,S.ref=c.ref,S}function Q0(c,p,S,P,I,F){var K=2;if(P=c,typeof c=="function")F_(c)&&(K=1);else if(typeof c=="string")K=5;else e:switch(c){case N:return Ld(S.children,I,F,p);case L:K=8,I|=8;break;case T:return c=Ws(12,S,p,I|2),c.elementType=T,c.lanes=F,c;case V:return c=Ws(13,S,p,I),c.elementType=V,c.lanes=F,c;case W:return c=Ws(19,S,p,I),c.elementType=W,c.lanes=F,c;case se:return ex(S,I,F,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case j:K=10;break e;case U:K=9;break e;case B:K=11;break e;case Y:K=14;break e;case Q:K=16,P=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return p=Ws(K,S,p,I),p.elementType=c,p.type=P,p.lanes=F,p}function Ld(c,p,S,P){return c=Ws(7,c,P,p),c.lanes=S,c}function ex(c,p,S,P){return c=Ws(22,c,P,p),c.elementType=se,c.lanes=S,c.stateNode={isHidden:!1},c}function z_(c,p,S){return c=Ws(6,c,null,p),c.lanes=S,c}function B_(c,p,S){return p=Ws(4,c.children!==null?c.children:[],c.key,p),p.lanes=S,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function aW(c,p,S,P,I){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=P,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function H_(c,p,S,P,I,F,K,fe,we){return c=new aW(c,p,S,fe,we),p===1?(p=1,F===!0&&(p|=8)):p=0,F=Ws(3,null,null,p),c.current=F,F.stateNode=c,F.memoizedState={element:P,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},wn(F),c}function sW(c,p,S){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:P==null?null:""+P,children:c,containerInfo:p,implementation:S}}function gR(c){if(!c)return uo;c=c._reactInternals;e:{if(re(c)!==c||c.tag!==1)throw Error(t(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ii(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(c.tag===1){var S=c.type;if(Ii(S))return md(c,S,p)}return p}function vR(c,p,S,P,I,F,K,fe,we){return c=H_(S,P,!0,c,I,F,K,fe,we),c.context=gR(null),S=c.current,P=Pa(),I=ou(S),F=Jn(P,I),F.callback=p??null,Sr(S,F,I),c.current.lanes=I,Jr(c,I,P),Za(c,P),c}function tx(c,p,S,P){var I=p.current,F=Pa(),K=ou(I);return S=gR(S),p.context===null?p.context=S:p.pendingContext=S,p=Jn(F,K),p.payload={element:c},P=P===void 0?null:P,P!==null&&(p.callback=P),c=Sr(I,p,K),c!==null&&(Mo(c,I,K,F),Li(c,I,K)),K}function nx(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function yR(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var S=c.retryLane;c.retryLane=S!==0&&S<p?S:p}}function V_(c,p){yR(c,p),(c=c.alternate)&&yR(c,p)}function oW(){return null}var xR=typeof reportError=="function"?reportError:function(c){console.error(c)};function W_(c){this._internalRoot=c}rx.prototype.render=W_.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(t(409));tx(c,p,null,null)},rx.prototype.unmount=W_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;kd(function(){tx(null,c,null,null)}),p[Sa]=null}};function rx(c){this._internalRoot=c}rx.prototype.unstable_scheduleHydration=function(c){if(c){var p=Jf();c={blockedOn:null,target:c,priority:p};for(var S=0;S<Vo.length&&p!==0&&p<Vo[S].priority;S++);Vo.splice(S,0,c),S===0&&th(c)}};function G_(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function ix(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function bR(){}function lW(c,p,S,P,I){if(I){if(typeof P=="function"){var F=P;P=function(){var Le=nx(K);F.call(Le)}}var K=vR(p,P,c,0,null,!1,!1,"",bR);return c._reactRootContainer=K,c[Sa]=K.current,qc(c.nodeType===8?c.parentNode:c),kd(),K}for(;I=c.lastChild;)c.removeChild(I);if(typeof P=="function"){var fe=P;P=function(){var Le=nx(we);fe.call(Le)}}var we=H_(c,0,!1,null,null,!1,!1,"",bR);return c._reactRootContainer=we,c[Sa]=we.current,qc(c.nodeType===8?c.parentNode:c),kd(function(){tx(p,we,S,P)}),we}function ax(c,p,S,P,I){var F=S._reactRootContainer;if(F){var K=F;if(typeof I=="function"){var fe=I;I=function(){var we=nx(K);fe.call(we)}}tx(p,K,c,I)}else K=lW(S,p,c,I,P);return nx(K)}Ju=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var S=Nn(p.pendingLanes);S!==0&&(kc(p,S|1),Za(p,Re()),(Hn&6)===0&&(qh=Re()+500,Fs()))}break;case 13:kd(function(){var P=fs(c,1);if(P!==null){var I=Pa();Mo(P,c,1,I)}}),V_(c,1)}},Hm=function(c){if(c.tag===13){var p=fs(c,134217728);if(p!==null){var S=Pa();Mo(p,c,134217728,S)}V_(c,134217728)}},m0=function(c){if(c.tag===13){var p=ou(c),S=fs(c,p);if(S!==null){var P=Pa();Mo(S,c,p,P)}V_(c,p)}},Jf=function(){return Fn},Qf=function(c,p){var S=Fn;try{return Fn=c,p()}finally{Fn=S}},Ae=function(c,p,S){switch(p){case"input":if(vt(c,S),p=S.name,S.type==="radio"&&p!=null){for(S=c;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<S.length;p++){var P=S[p];if(P!==c&&P.form===c.form){var I=Nh(P);if(!I)throw Error(t(90));ne(P),vt(P,I)}}}break;case"textarea":Ye(c,S);break;case"select":p=S.value,p!=null&&Te(c,!!S.multiple,p,!1)}},xn=L_,Pn=kd;var cW={usingClientEntryPoint:!1,Events:[co,Br,Nh,Gt,kt,L_]},Ig={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uW={bundleType:Ig.bundleType,version:Ig.version,rendererPackageName:Ig.rendererPackageName,rendererConfig:Ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ue(c),c===null?null:c.stateNode},findFiberByHostInstance:Ig.findFiberByHostInstance||oW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sx.isDisabled&&sx.supportsFiber)try{nn=sx.inject(uW),yt=sx}catch{}}return Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cW,Ja.createPortal=function(c,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G_(p))throw Error(t(200));return sW(c,p,null,S)},Ja.createRoot=function(c,p){if(!G_(c))throw Error(t(299));var S=!1,P="",I=xR;return p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(P=p.identifierPrefix),p.onRecoverableError!==void 0&&(I=p.onRecoverableError)),p=H_(c,1,!1,null,null,S,!1,P,I),c[Sa]=p.current,qc(c.nodeType===8?c.parentNode:c),new W_(p)},Ja.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ue(p),c=c===null?null:c.stateNode,c},Ja.flushSync=function(c){return kd(c)},Ja.hydrate=function(c,p,S){if(!ix(p))throw Error(t(200));return ax(null,c,p,!0,S)},Ja.hydrateRoot=function(c,p,S){if(!G_(c))throw Error(t(405));var P=S!=null&&S.hydratedSources||null,I=!1,F="",K=xR;if(S!=null&&(S.unstable_strictMode===!0&&(I=!0),S.identifierPrefix!==void 0&&(F=S.identifierPrefix),S.onRecoverableError!==void 0&&(K=S.onRecoverableError)),p=vR(p,null,c,1,S??null,I,!1,F,K),c[Sa]=p.current,qc(c),P)for(c=0;c<P.length;c++)S=P[c],I=S._getVersion,I=I(S._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[S,I]:p.mutableSourceEagerHydrationData.push(S,I);return new rx(p)},Ja.render=function(c,p,S){if(!ix(p))throw Error(t(200));return ax(null,c,p,!1,S)},Ja.unmountComponentAtNode=function(c){if(!ix(c))throw Error(t(40));return c._reactRootContainer?(kd(function(){ax(null,null,c,!1,function(){c._reactRootContainer=null,c[Sa]=null})}),!0):!1},Ja.unstable_batchedUpdates=L_,Ja.unstable_renderSubtreeIntoContainer=function(c,p,S,P){if(!ix(S))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return ax(c,p,S,!1,P)},Ja.version="18.3.1-next-f1338f8080-20240426",Ja}var CR;function KF(){if(CR)return X_.exports;CR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),X_.exports=xW(),X_.exports}var PR;function bW(){if(PR)return lx;PR=1;var n=KF();return lx.createRoot=n.createRoot,lx.hydrateRoot=n.hydrateRoot,lx}var wW=bW();const _W=Kn(wW);KF();function jv(){return jv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jv.apply(this,arguments)}var Tu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Tu||(Tu={}));const NR="popstate";function SW(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return r2("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Rb(i)}return EW(e,t,null,n)}function Wr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function NP(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MW(){return Math.random().toString(36).substr(2,8)}function OR(n,e){return{usr:n.state,key:n.key,idx:e}}function r2(n,e,t,r){return t===void 0&&(t=null),jv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Am(e):e,{state:t,key:e&&e.key||r||MW()})}function Rb(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Am(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function EW(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Tu.Pop,l=null,u=f();u==null&&(u=0,s.replaceState(jv({},s.state,{idx:u}),""));function f(){return(s.state||{idx:null}).idx}function h(){o=Tu.Pop;let x=f(),_=x==null?null:x-u;u=x,l&&l({action:o,location:w.location,delta:_})}function m(x,_){o=Tu.Push;let M=r2(w.location,x,_);u=f()+1;let E=OR(M,u),A=w.createHref(M);try{s.pushState(E,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(A)}a&&l&&l({action:o,location:w.location,delta:1})}function y(x,_){o=Tu.Replace;let M=r2(w.location,x,_);u=f();let E=OR(M,u),A=w.createHref(M);s.replaceState(E,"",A),a&&l&&l({action:o,location:w.location,delta:0})}function b(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof x=="string"?x:Rb(x);return M=M.replace(/ $/,"%20"),Wr(_,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,_)}let w={get action(){return o},get location(){return n(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(NR,h),l=x,()=>{i.removeEventListener(NR,h),l=null}},createHref(x){return e(i,x)},createURL:b,encodeLocation(x){let _=b(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(x){return s.go(x)}};return w}var RR;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(RR||(RR={}));function TW(n,e,t){return t===void 0&&(t="/"),AW(n,e,t)}function AW(n,e,t,r){let i=typeof e=="string"?Am(e):e,a=Gp(i.pathname||"/",t);if(a==null)return null;let s=ZF(n);CW(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=FW(a);o=DW(s[l],u)}return o}function ZF(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Wr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ou([r,l.relativePath]),f=t.concat(l);a.children&&a.children.length>0&&(Wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ZF(a.children,e,f,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:IW(u,a.index),routesMeta:f})};return n.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of JF(a.path))i(a,s,l)}),e}function JF(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=JF(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function CW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LW(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const PW=/^:[\w-]+$/,NW=3,OW=2,RW=1,kW=10,jW=-2,kR=n=>n==="*";function IW(n,e){let t=n.split("/"),r=t.length;return t.some(kR)&&(r+=jW),e&&(r+=OW),t.filter(i=>!kR(i)).reduce((i,a)=>i+(PW.test(a)?NW:a===""?RW:kW),r)}function LW(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function DW(n,e,t){let{routesMeta:r}=n,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=i2({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),m=l.route;if(!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ou([a,h.pathname]),pathnameBase:WW(Ou([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=Ou([a,h.pathnameBase]))}return s}function i2(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=UW(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,f,h)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let w=o[h]||"";s=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=o[h];return y&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:n}}function UW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),NP(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return NP(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Gp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const zW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BW=n=>zW.test(n);function HW(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Am(n):n,a;if(t)if(BW(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),NP(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=jR(t.substring(1),"/"):a=jR(t,e)}else a=e;return{pathname:a,search:GW(r),hash:$W(i)}}function jR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Z_(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OP(n,e){let t=VW(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function RP(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Am(n):(i=jv({},n),Wr(!i.pathname||!i.pathname.includes("?"),Z_("?","pathname","search",i)),Wr(!i.pathname||!i.pathname.includes("#"),Z_("#","pathname","hash",i)),Wr(!i.search||!i.search.includes("#"),Z_("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let h=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=HW(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const Ou=n=>n.join("/").replace(/\/\/+/g,"/"),WW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),GW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$W=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qW(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const QF=["post","put","patch","delete"];new Set(QF);const XW=["get",...QF];new Set(XW);function Iv(){return Iv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Iv.apply(this,arguments)}const J1=z.createContext(null),ez=z.createContext(null),Sc=z.createContext(null),Q1=z.createContext(null),Mc=z.createContext({outlet:null,matches:[],isDataRoute:!1}),tz=z.createContext(null);function YW(n,e){let{relative:t}=e===void 0?{}:e;Cm()||Wr(!1);let{basename:r,navigator:i}=z.useContext(Sc),{hash:a,pathname:s,search:o}=ew(n,{relative:t}),l=s;return r!=="/"&&(l=s==="/"?r:Ou([r,s])),i.createHref({pathname:l,search:o,hash:a})}function Cm(){return z.useContext(Q1)!=null}function Ec(){return Cm()||Wr(!1),z.useContext(Q1).location}function nz(n){z.useContext(Sc).static||z.useLayoutEffect(n)}function Ua(){let{isDataRoute:n}=z.useContext(Mc);return n?cG():KW()}function KW(){Cm()||Wr(!1);let n=z.useContext(J1),{basename:e,future:t,navigator:r}=z.useContext(Sc),{matches:i}=z.useContext(Mc),{pathname:a}=Ec(),s=JSON.stringify(OP(i,t.v7_relativeSplatPath)),o=z.useRef(!1);return nz(()=>{o.current=!0}),z.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=RP(u,JSON.parse(s),a,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ou([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,s,a,n])}function ZW(){let{matches:n}=z.useContext(Mc),e=n[n.length-1];return e?e.params:{}}function ew(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=z.useContext(Sc),{matches:i}=z.useContext(Mc),{pathname:a}=Ec(),s=JSON.stringify(OP(i,r.v7_relativeSplatPath));return z.useMemo(()=>RP(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function JW(n,e){return QW(n,e)}function QW(n,e,t,r){Cm()||Wr(!1);let{navigator:i}=z.useContext(Sc),{matches:a}=z.useContext(Mc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Ec(),f;if(e){var h;let x=typeof e=="string"?Am(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||Wr(!1),f=x}else f=u;let m=f.pathname||"/",y=m;if(l!=="/"){let x=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=TW(n,{pathname:y}),w=iG(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Ou([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ou([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&w?z.createElement(Q1.Provider,{value:{location:Iv({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Tu.Pop}},w):w}function eG(){let n=lG(),e=qW(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,null)}const tG=z.createElement(eG,null);class nG extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(Mc.Provider,{value:this.props.routeContext},z.createElement(tz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rG(n){let{routeContext:e,match:t,children:r}=n,i=z.useContext(J1);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Mc.Provider,{value:e},r)}function iG(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let f=s.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);f>=0||Wr(!1),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:y}=t,b=h.route.loader&&m[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||b){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,h,m)=>{let y,b=!1,w=null,x=null;t&&(y=o&&h.route.id?o[h.route.id]:void 0,w=h.route.errorElement||tG,l&&(u<0&&m===0?(uG("route-fallback"),b=!0,x=null):u===m&&(b=!0,x=h.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,m+1)),M=()=>{let E;return y?E=w:b?E=x:h.route.Component?E=z.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=f,z.createElement(rG,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:t!=null},children:E})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?z.createElement(nG,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:M(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):M()},null)}var rz=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(rz||{}),iz=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(iz||{});function aG(n){let e=z.useContext(J1);return e||Wr(!1),e}function sG(n){let e=z.useContext(ez);return e||Wr(!1),e}function oG(n){let e=z.useContext(Mc);return e||Wr(!1),e}function az(n){let e=oG(),t=e.matches[e.matches.length-1];return t.route.id||Wr(!1),t.route.id}function lG(){var n;let e=z.useContext(tz),t=sG(),r=az();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function cG(){let{router:n}=aG(rz.UseNavigateStable),e=az(iz.UseNavigateStable),t=z.useRef(!1);return nz(()=>{t.current=!0}),z.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Iv({fromRouteId:e},a)))},[n,e])}const IR={};function uG(n,e,t){IR[n]||(IR[n]=!0)}function dG(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function kb(n){let{to:e,replace:t,state:r,relative:i}=n;Cm()||Wr(!1);let{future:a,static:s}=z.useContext(Sc),{matches:o}=z.useContext(Mc),{pathname:l}=Ec(),u=Ua(),f=RP(e,OP(o,a.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(f);return z.useEffect(()=>u(JSON.parse(h),{replace:t,state:r,relative:i}),[u,h,i,t,r]),null}function Un(n){Wr(!1)}function fG(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Tu.Pop,navigator:a,static:s=!1,future:o}=n;Cm()&&Wr(!1);let l=e.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:l,navigator:a,static:s,future:Iv({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Am(r));let{pathname:f="/",search:h="",hash:m="",state:y=null,key:b="default"}=r,w=z.useMemo(()=>{let x=Gp(f,l);return x==null?null:{location:{pathname:x,search:h,hash:m,state:y,key:b},navigationType:i}},[l,f,h,m,y,b,i]);return w==null?null:z.createElement(Sc.Provider,{value:u},z.createElement(Q1.Provider,{children:t,value:w}))}function hG(n){let{children:e,location:t}=n;return JW(a2(e),t)}new Promise(()=>{});function a2(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(r,i)=>{if(!z.isValidElement(r))return;let a=[...e,i];if(r.type===z.Fragment){t.push.apply(t,a2(r.props.children,a));return}r.type!==Un&&Wr(!1),!r.props.index||!r.props.children||Wr(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=a2(r.props.children,a)),t.push(s)}),t}function jb(){return jb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jb.apply(this,arguments)}function sz(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function pG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mG(n,e){return n.button===0&&(!e||e==="_self")&&!pG(n)}function s2(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function gG(n,e){let t=s2(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}const vG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yG=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xG="6";try{window.__reactRouterVersion=xG}catch{}const bG=z.createContext({isTransitioning:!1}),wG="startTransition",LR=gW[wG];function _G(n){let{basename:e,children:t,future:r,window:i}=n,a=z.useRef();a.current==null&&(a.current=SW({window:i,v5Compat:!0}));let s=a.current,[o,l]=z.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},f=z.useCallback(h=>{u&&LR?LR(()=>l(h)):l(h)},[l,u]);return z.useLayoutEffect(()=>s.listen(f),[s,f]),z.useEffect(()=>dG(r),[r]),z.createElement(fG,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,future:r})}const SG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EG=z.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:f,viewTransition:h}=e,m=sz(e,vG),{basename:y}=z.useContext(Sc),b,w=!1;if(typeof u=="string"&&MG.test(u)&&(b=u,SG))try{let E=new URL(window.location.href),A=u.startsWith("//")?new URL(E.protocol+u):new URL(u),R=Gp(A.pathname,y);A.origin===E.origin&&R!=null?u=R+A.search+A.hash:w=!0}catch{}let x=YW(u,{relative:i}),_=AG(u,{replace:s,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:h});function M(E){r&&r(E),E.defaultPrevented||_(E)}return z.createElement("a",jb({},m,{href:b||x,onClick:w||a?r:M,ref:t,target:l}))}),oz=z.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:u,children:f}=e,h=sz(e,yG),m=ew(l,{relative:h.relative}),y=Ec(),b=z.useContext(ez),{navigator:w,basename:x}=z.useContext(Sc),_=b!=null&&PG(m)&&u===!0,M=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,E=y.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(E=E.toLowerCase(),A=A?A.toLowerCase():null,M=M.toLowerCase()),A&&x&&(A=Gp(A,x)||A);const R=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let O=E===M||!s&&E.startsWith(M)&&E.charAt(R)==="/",N=A!=null&&(A===M||!s&&A.startsWith(M)&&A.charAt(M.length)==="/"),L={isActive:O,isPending:N,isTransitioning:_},T=O?r:void 0,j;typeof a=="function"?j=a(L):j=[a,O?"active":null,N?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(L):o;return z.createElement(EG,jb({},h,{"aria-current":T,className:j,ref:t,style:U,to:l,viewTransition:u}),typeof f=="function"?f(L):f)});var o2;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(o2||(o2={}));var DR;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(DR||(DR={}));function TG(n){let e=z.useContext(J1);return e||Wr(!1),e}function AG(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=Ua(),u=Ec(),f=ew(n,{relative:s});return z.useCallback(h=>{if(mG(h,t)){h.preventDefault();let m=r!==void 0?r:Rb(u)===Rb(f);l(n,{replace:m,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,f,r,i,t,n,a,s,o])}function CG(n){let e=z.useRef(s2(n)),t=z.useRef(!1),r=Ec(),i=z.useMemo(()=>gG(r.search,t.current?null:e.current),[r.search]),a=Ua(),s=z.useCallback((o,l)=>{const u=s2(typeof o=="function"?o(i):o);t.current=!0,a("?"+u,l)},[a,i]);return[i,s]}function PG(n,e){e===void 0&&(e={});let t=z.useContext(bG);t==null&&Wr(!1);let{basename:r}=TG(o2.useViewTransitionState),i=ew(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Gp(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Gp(t.nextLocation.pathname,r)||t.nextLocation.pathname;return i2(i.pathname,s)!=null||i2(i.pathname,a)!=null}let NG={data:""},OG=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||NG},RG=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kG=/\/\*[^]*?\*\/|  +/g,UR=/\n+/g,Su=(n,e)=>{let t="",r="",i="";for(let a in n){let s=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+s+";":r+=a[1]=="f"?Su(s,a):a+"{"+Su(s,a[1]=="k"?"":e)+"}":typeof s=="object"?r+=Su(s,e?e.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Su.p?Su.p(a,s):a+":"+s+";")}return t+(e&&i?e+"{"+i+"}":i)+r},Zl={},lz=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+lz(n[t]);return e}return n},jG=(n,e,t,r,i)=>{let a=lz(n),s=Zl[a]||(Zl[a]=(l=>{let u=0,f=11;for(;u<l.length;)f=101*f+l.charCodeAt(u++)>>>0;return"go"+f})(a));if(!Zl[s]){let l=a!==n?n:(u=>{let f,h,m=[{}];for(;f=RG.exec(u.replace(kG,""));)f[4]?m.shift():f[3]?(h=f[3].replace(UR," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][f[1]]=f[2].replace(UR," ").trim();return m[0]})(n);Zl[s]=Su(i?{["@keyframes "+s]:l}:l,t?"":"."+s)}let o=t&&Zl.g?Zl.g:null;return t&&(Zl.g=Zl[s]),((l,u,f,h)=>{h?u.data=u.data.replace(h,l):u.data.indexOf(l)===-1&&(u.data=f?l+u.data:u.data+l)})(Zl[s],e,r,o),s},IG=(n,e,t)=>n.reduce((r,i,a)=>{let s=e[a];if(s&&s.call){let o=s(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":Su(o,""):o===!1?"":o}return r+i+(s??"")},"");function tw(n){let e=this||{},t=n.call?n(e.p):n;return jG(t.unshift?t.raw?IG(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,OG(e.target),e.g,e.o,e.k)}let cz,l2,c2;tw.bind({g:1});let vc=tw.bind({k:1});function LG(n,e,t,r){Su.p=e,cz=n,l2=t,c2=r}function Vu(n,e){let t=this||{};return function(){let r=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;t.p=Object.assign({theme:l2&&l2()},o),t.o=/ *go\d+/.test(l),o.className=tw.apply(t,r)+(l?" "+l:"");let u=n;return n[0]&&(u=o.as||n,delete o.as),c2&&u[0]&&c2(o),cz(u,o)}return i}}var DG=n=>typeof n=="function",Ib=(n,e)=>DG(n)?n(e):n,UG=(()=>{let n=0;return()=>(++n).toString()})(),uz=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),FG=20,kP="default",dz=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:r}=e;return dz(n,{type:n.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let a=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},bb=[],fz={toasts:[],pausedAt:void 0,settings:{toastLimit:FG}},rl={},hz=(n,e=kP)=>{rl[e]=dz(rl[e]||fz,n),bb.forEach(([t,r])=>{t===e&&r(rl[e])})},pz=n=>Object.keys(rl).forEach(e=>hz(n,e)),zG=n=>Object.keys(rl).find(e=>rl[e].toasts.some(t=>t.id===n)),nw=(n=kP)=>e=>{hz(e,n)},BG={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},HG=(n={},e=kP)=>{let[t,r]=z.useState(rl[e]||fz),i=z.useRef(rl[e]);z.useEffect(()=>(i.current!==rl[e]&&r(rl[e]),bb.push([e,r]),()=>{let s=bb.findIndex(([o])=>o===e);s>-1&&bb.splice(s,1)}),[e]);let a=t.toasts.map(s=>{var o,l,u;return{...n,...n[s.type],...s,removeDelay:s.removeDelay||((o=n[s.type])==null?void 0:o.removeDelay)||n?.removeDelay,duration:s.duration||((l=n[s.type])==null?void 0:l.duration)||n?.duration||BG[s.type],style:{...n.style,...(u=n[s.type])==null?void 0:u.style,...s.style}}});return{...t,toasts:a}},VG=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||UG()}),Wy=n=>(e,t)=>{let r=VG(e,n,t);return nw(r.toasterId||zG(r.id))({type:2,toast:r}),r.id},Ci=(n,e)=>Wy("blank")(n,e);Ci.error=Wy("error");Ci.success=Wy("success");Ci.loading=Wy("loading");Ci.custom=Wy("custom");Ci.dismiss=(n,e)=>{let t={type:3,toastId:n};e?nw(e)(t):pz(t)};Ci.dismissAll=n=>Ci.dismiss(void 0,n);Ci.remove=(n,e)=>{let t={type:4,toastId:n};e?nw(e)(t):pz(t)};Ci.removeAll=n=>Ci.remove(void 0,n);Ci.promise=(n,e,t)=>{let r=Ci.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?Ib(e.success,i):void 0;return a?Ci.success(a,{id:r,...t,...t?.success}):Ci.dismiss(r),i}).catch(i=>{let a=e.error?Ib(e.error,i):void 0;a?Ci.error(a,{id:r,...t,...t?.error}):Ci.dismiss(r)}),n};var WG=1e3,GG=(n,e="default")=>{let{toasts:t,pausedAt:r}=HG(n,e),i=z.useRef(new Map).current,a=z.useCallback((h,m=WG)=>{if(i.has(h))return;let y=setTimeout(()=>{i.delete(h),s({type:4,toastId:h})},m);i.set(h,y)},[]);z.useEffect(()=>{if(r)return;let h=Date.now(),m=t.map(y=>{if(y.duration===1/0)return;let b=(y.duration||0)+y.pauseDuration-(h-y.createdAt);if(b<0){y.visible&&Ci.dismiss(y.id);return}return setTimeout(()=>Ci.dismiss(y.id,e),b)});return()=>{m.forEach(y=>y&&clearTimeout(y))}},[t,r,e]);let s=z.useCallback(nw(e),[e]),o=z.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=z.useCallback((h,m)=>{s({type:1,toast:{id:h,height:m}})},[s]),u=z.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),f=z.useCallback((h,m)=>{let{reverseOrder:y=!1,gutter:b=8,defaultPosition:w}=m||{},x=t.filter(E=>(E.position||w)===(h.position||w)&&E.height),_=x.findIndex(E=>E.id===h.id),M=x.filter((E,A)=>A<_&&E.visible).length;return x.filter(E=>E.visible).slice(...y?[M+1]:[0,M]).reduce((E,A)=>E+(A.height||0)+b,0)},[t]);return z.useEffect(()=>{t.forEach(h=>{if(h.dismissed)a(h.id,h.removeDelay);else{let m=i.get(h.id);m&&(clearTimeout(m),i.delete(h.id))}})},[t,a]),{toasts:t,handlers:{updateHeight:l,startPause:o,endPause:u,calculateOffset:f}}},$G=vc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qG=vc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XG=vc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,YG=Vu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$G} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qG} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${XG} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,KG=vc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZG=Vu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${KG} 1s linear infinite;
`,JG=vc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,QG=vc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,e$=Vu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JG} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${QG} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,t$=Vu("div")`
  position: absolute;
`,n$=Vu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,r$=vc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,i$=Vu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${r$} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,a$=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?z.createElement(i$,null,e):e:t==="blank"?null:z.createElement(n$,null,z.createElement(ZG,{...r}),t!=="loading"&&z.createElement(t$,null,t==="error"?z.createElement(YG,{...r}):z.createElement(e$,{...r})))},s$=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,o$=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,l$="0%{opacity:0;} 100%{opacity:1;}",c$="0%{opacity:1;} 100%{opacity:0;}",u$=Vu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,d$=Vu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,f$=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=uz()?[l$,c$]:[s$(t),o$(t)];return{animation:e?`${vc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${vc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},h$=z.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?f$(n.position||e||"top-center",n.visible):{opacity:0},a=z.createElement(a$,{toast:n}),s=z.createElement(d$,{...n.ariaProps},Ib(n.message,n));return z.createElement(u$,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:a,message:s}):z.createElement(z.Fragment,null,a,s))});LG(z.createElement);var p$=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let a=z.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;r(n,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return z.createElement("div",{ref:a,className:e,style:t},i)},m$=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:uz()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},g$=tw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cx=16,v$=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=GG(t,a);return z.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:cx,left:cx,right:cx,bottom:cx,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let h=f.position||e,m=u.calculateOffset(f,{reverseOrder:n,gutter:r,defaultPosition:e}),y=m$(h,m);return z.createElement(p$,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?g$:"",style:y},f.type==="custom"?Ib(f.message,f):i?i(f):z.createElement(h$,{toast:f,position:h}))}))},ve=Ci;const Lv="/api",Lb=()=>localStorage.getItem("token"),tt=async(n,e={})=>{const t=Lb(),r={"Content-Type":"application/json",...e.headers};t&&(r.Authorization=`Bearer ${t}`);try{const i=await fetch(`${Lv}${n}`,{...e,headers:r});if(!i.ok){if(i.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login");const s=await i.json().catch(()=>({message:"Session expired. Please login again."}));throw new Error(s.message||"Session expired. Please login again.")}const a=await i.json().catch(()=>({message:"An error occurred"}));throw new Error(a.message||"Request failed")}return i.json()}catch(i){throw i instanceof TypeError&&i.message.includes("fetch")?new Error("Network error: Unable to connect to server. Please check your connection and try again."):i}},u2={login:async(n,e)=>tt("/auth/login",{method:"POST",body:JSON.stringify({email:n,password:e})}),register:async n=>tt("/auth/register",{method:"POST",body:JSON.stringify(n)}),getMe:async()=>tt("/auth/me")},Vi={getAll:async(n={})=>{const e=new URLSearchParams;n.status&&e.append("status",n.status),n.priority&&e.append("priority",n.priority),n.search&&e.append("search",n.search),n.organization&&e.append("organization",n.organization);const t=e.toString();return tt(`/tickets${t?`?${t}`:""}`)},getById:async n=>tt(`/tickets/${n}`),create:async n=>tt("/tickets",{method:"POST",body:JSON.stringify(n)}),createWithFiles:async n=>{const e=localStorage.getItem("token"),t=await fetch(`${Lv}/tickets`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:n});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to create ticket")}return t.json()},update:async(n,e)=>tt(`/tickets/${n}`,{method:"PUT",body:JSON.stringify(e)}),addComment:async(n,e)=>tt(`/tickets/${n}/comments`,{method:"POST",body:JSON.stringify(e)}),approveTicket:async n=>tt(`/tickets/${n}/approve`,{method:"POST"}),rejectTicket:async(n,e)=>tt(`/tickets/${n}/reject`,{method:"POST",body:JSON.stringify({rejectionReason:e})}),getDashboardStats:async(n=null)=>{const e=new URLSearchParams;n&&e.append("organization",n);const t=e.toString();return tt(`/tickets/stats/dashboard${t?`?${t}`:""}`)},importTickets:async n=>tt("/tickets/import",{method:"POST",body:JSON.stringify({tickets:n})})},nl={getAll:async(n=null)=>{const e=new URLSearchParams;n&&e.append("organization",n);const t=e.toString();return tt(`/users${t?`?${t}`:""}`)},getMentions:async()=>tt("/users/mentions"),getById:async n=>tt(`/users/${n}`),create:async n=>tt("/users",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/users/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/users/${n}`,{method:"DELETE"})},gr={getSSOConfig:async()=>tt("/admin/sso"),updateSSOConfig:async n=>tt("/admin/sso",{method:"POST",body:JSON.stringify(n)}),getEmailSettings:async()=>tt("/admin/email"),updateEmailSettings:async n=>tt("/admin/email",{method:"PUT",body:JSON.stringify(n)}),testSMTP:async(n,e)=>tt("/email/test-smtp",{method:"POST",body:JSON.stringify({to:n,settings:e})}),testIMAP:async n=>tt("/email/test-imap",{method:"POST",body:JSON.stringify({settings:n})}),sendTestEmail:async(n,e,t)=>tt("/email/send",{method:"POST",body:JSON.stringify({to:n,subject:e,html:t})}),getLogo:async()=>tt("/admin/logo"),updateLogo:async(n,e,t,r=null)=>tt("/admin/logo",{method:"POST",body:JSON.stringify({logo:n,filename:e,showOnLogin:t,loginTitle:r})}),getRoles:async()=>tt("/admin/roles"),createRole:async n=>tt("/admin/roles",{method:"POST",body:JSON.stringify(n)}),updateRole:async(n,e)=>tt(`/admin/roles/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteRole:async n=>tt(`/admin/roles/${n}`,{method:"DELETE"}),getSLAPolicies:async n=>{const e=n?`/admin/sla?organization=${n}`:"/admin/sla";return tt(e)},createSLAPolicy:async n=>tt("/admin/sla",{method:"POST",body:JSON.stringify(n)}),updateSLAPolicy:async(n,e)=>tt(`/admin/sla/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteSLAPolicy:async n=>tt(`/admin/sla/${n}`,{method:"DELETE"}),getEmailTemplates:async()=>tt("/email-templates"),getEmailTemplate:async n=>tt(`/email-templates/${n}`),createEmailTemplate:async n=>tt("/email-templates",{method:"POST",body:JSON.stringify(n)}),updateEmailTemplate:async(n,e)=>tt(`/email-templates/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteEmailTemplate:async n=>tt(`/email-templates/${n}`,{method:"DELETE"}),previewEmailTemplate:async n=>tt(`/email-templates/${n}/preview`,{method:"POST"}),createBackup:async()=>tt("/backup/create",{method:"POST"}),listBackups:async()=>tt("/backup/list"),downloadBackup:async n=>{const e=Lb(),t=await fetch(`${Lv}/backup/download/${n}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const s=await t.json().catch(()=>({message:"Download failed"}));throw new Error(s.message||"Download failed")}const r=await t.blob(),i=window.URL.createObjectURL(r),a=document.createElement("a");return a.href=i,a.download=`${n}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a),{success:!0}},deleteBackup:async n=>tt(`/backup/${n}`,{method:"DELETE"}),restoreBackup:async(n,e=!1)=>tt("/backup/restore",{method:"POST",body:JSON.stringify({backupName:n,clearExisting:e})}),uploadBackup:async(n,e=!1)=>{const t=Lb(),r=new FormData;r.append("backupFile",n),r.append("clearExisting",e?"true":"false");const i=await fetch(`${Lv}/backup/upload`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!i.ok){const a=await i.json().catch(()=>({message:"Upload failed"}));throw new Error(a.message||"Upload failed")}return i.json()}},ga={getAll:async()=>tt("/organizations"),getById:async n=>tt(`/organizations/${n}`),create:async n=>tt("/organizations",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/organizations/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/organizations/${n}`,{method:"DELETE"})},Tp={getAll:async()=>tt("/categories"),getAllAdmin:async(n=null)=>{const e=new URLSearchParams;n&&e.append("organization",n);const t=e.toString();return tt(`/categories/all${t?`?${t}`:""}`)},getById:async n=>tt(`/categories/${n}`),create:async n=>tt("/categories",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/categories/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/categories/${n}`,{method:"DELETE"})},Au={getAll:async()=>tt("/departments"),getById:async n=>tt(`/departments/${n}`),create:async n=>tt("/departments",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/departments/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/departments/${n}`,{method:"DELETE"})},Db={getSetup:async()=>tt("/mfa/setup"),verify:async n=>tt("/mfa/verify",{method:"POST",body:JSON.stringify({token:n})}),verifyLogin:async(n,e)=>tt("/mfa/verify-login",{method:"POST",body:JSON.stringify({tempToken:n,code:e})}),disable:async()=>tt("/mfa/disable",{method:"POST"})},Kd={getDashboard:async(n="month",e=null)=>{const t=new URLSearchParams;return n&&t.append("period",n),e&&t.append("organization",e),tt(`/reports/dashboard?${t.toString()}`)},getStatusWise:async(n="month",e=null)=>{const t=new URLSearchParams;return n&&t.append("period",n),e&&t.append("organization",e),tt(`/reports/status-wise?${t.toString()}`)},getDepartmentWise:async(n="month",e=null)=>{const t=new URLSearchParams;return n&&t.append("period",n),e&&t.append("organization",e),tt(`/reports/department-wise?${t.toString()}`)},getTechnicianPerformance:async(n="month",e=null)=>{const t=new URLSearchParams;return n&&t.append("period",n),e&&t.append("organization",e),tt(`/reports/technician-performance?${t.toString()}`)},getSLACompliance:async(n="month",e=null)=>{const t=new URLSearchParams;return n&&t.append("period",n),e&&t.append("organization",e),tt(`/reports/sla-compliance?${t.toString()}`)},getTrends:async(n="month",e=null,t="day")=>{const r=new URLSearchParams;return n&&r.append("period",n),e&&r.append("organization",e),t&&r.append("groupBy",t),tt(`/reports/trends?${r.toString()}`)}},Sp={getAll:async(n=null)=>{const e=new URLSearchParams;return n&&e.append("organization",n),tt(`/api-keys?${e.toString()}`)},create:async n=>tt("/api-keys",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/api-keys/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/api-keys/${n}`,{method:"DELETE"}),revoke:async n=>tt(`/api-keys/${n}/revoke`,{method:"POST"}),activate:async n=>tt(`/api-keys/${n}/activate`,{method:"POST"})},Ap={getAll:async(n=null,e=null)=>{const t=new URLSearchParams;return n&&t.append("organization",n),e&&t.append("type",e),tt(`/email-templates?${t.toString()}`)},getById:async n=>tt(`/email-templates/${n}`),create:async n=>tt("/email-templates",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/email-templates/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/email-templates/${n}`,{method:"DELETE"}),preview:async n=>tt(`/email-templates/${n}/preview`,{method:"POST"})},Zd={getAll:async(n=null)=>{const e=new URLSearchParams;return n&&e.append("organization",n),tt(`/email-automation?${e.toString()}`)},getById:async n=>tt(`/email-automation/${n}`),create:async n=>tt("/email-automation",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/email-automation/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/email-automation/${n}`,{method:"DELETE"}),run:async n=>tt(`/email-automation/${n}/run`,{method:"POST"})},yf={createSession:async(n="web")=>tt("/chatbot/session",{method:"POST",body:JSON.stringify({platform:n})}),sendMessage:async(n,e,t=[])=>{const r=new FormData;n&&r.append("message",n),e&&r.append("sessionId",e),t.forEach(s=>{r.append("attachments",s)});const i=Lb(),a=await fetch(`${Lv}/chatbot/message`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:r});if(!a.ok){const s=await a.json().catch(()=>({message:"An error occurred"}));throw new Error(s.message||"Request failed")}return a.json()},createTicket:async(n,e)=>tt("/chatbot/create-ticket",{method:"POST",body:JSON.stringify({sessionId:n,...e})}),getHistory:async(n=null,e=50)=>{const t=new URLSearchParams;return n&&t.append("userId",n),t.append("limit",e),tt(`/chatbot/history?${t.toString()}`)},getSession:async n=>tt(`/chatbot/session/${n}`),escalate:async(n,e=null)=>tt("/chatbot/escalate",{method:"POST",body:JSON.stringify({sessionId:n,departmentId:e})})},uv={getAll:async(n=null,e=null,t=null)=>{const r=new URLSearchParams;return n&&r.append("organization",n),e&&r.append("category",e),t&&r.append("search",t),tt(`/faq?${r.toString()}`)},getById:async n=>tt(`/faq/${n}`),create:async n=>tt("/faq",{method:"POST",body:JSON.stringify(n)}),update:async(n,e)=>tt(`/faq/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:async n=>tt(`/faq/${n}`,{method:"DELETE"}),markHelpful:async n=>tt(`/faq/${n}/helpful`,{method:"POST"})},dv={getConfig:async(n=null)=>{const e=new URLSearchParams;return n&&e.append("organization",n),tt(`/teams/config?${e.toString()}`)},saveConfig:async(n,e=null)=>{const t=new URLSearchParams;return e&&t.append("organization",e),tt(`/teams/config?${t.toString()}`,{method:"POST",body:JSON.stringify(n)})},updateConfig:async(n,e)=>tt(`/teams/config/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteConfig:async n=>tt(`/teams/config/${n}`,{method:"DELETE"}),testWebhook:async(n,e=null)=>{const t=new URLSearchParams;return e&&t.append("organization",e),tt(`/teams/test?${t.toString()}`,{method:"POST",body:JSON.stringify({webhookUrl:n})})}},y$=Object.freeze(Object.defineProperty({__proto__:null,adminAPI:gr,apiKeysAPI:Sp,authAPI:u2,categoriesAPI:Tp,chatbotAPI:yf,departmentsAPI:Au,emailAutomationAPI:Zd,emailTemplatesAPI:Ap,faqAPI:uv,mfaAPI:Db,organizationsAPI:ga,reportsAPI:Kd,teamsAPI:dv,ticketsAPI:Vi,usersAPI:nl},Symbol.toStringTag,{value:"Module"})),mz=z.createContext(null),Fr=()=>{const n=z.useContext(mz);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},x$=({children:n})=>{const[e,t]=z.useState(null),[r,i]=z.useState(!0);z.useEffect(()=>{const l=localStorage.getItem("token"),u=localStorage.getItem("user");l&&u?u2.getMe().then(f=>{t(f)}).catch(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}).finally(()=>{i(!1)}):i(!1)},[]);const a=async(l,u)=>{try{const f=await u2.login(l,u);return f.mfaRequired||(localStorage.setItem("token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),t(f.user)),f}catch(f){throw f}},s=()=>{t(null),localStorage.removeItem("token"),localStorage.removeItem("user")},o=l=>{t(l),localStorage.setItem("user",JSON.stringify(l))};return d.jsx(mz.Provider,{value:{user:e,login:a,logout:s,updateUser:o,loading:r},children:n})},gz=z.createContext(null),vz=()=>{const n=z.useContext(gz);if(!n)throw new Error("useSSO must be used within SSOProvider");return n},b$=({children:n})=>{const[e,t]=z.useState({azureEnabled:!1,googleEnabled:!1}),[r,i]=z.useState(!0);z.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await gr.getSSOConfig(),l={azureEnabled:o.find(u=>u.provider==="azure")?.enabled||!1,googleEnabled:o.find(u=>u.provider==="google")?.enabled||!1};t(l)}catch(o){console.warn("SSO settings not available:",o.message),t({azureEnabled:!1,googleEnabled:!1})}finally{i(!1)}},s=async o=>{try{for(const[u,f]of Object.entries(o))if(u==="azureEnabled"||u==="googleEnabled"){const h=u.replace("Enabled","");await gr.updateSSOConfig({provider:h,enabled:f,config:{}})}const l={...e,...o};t(l)}catch(l){throw console.error("Failed to update SSO settings:",l),l}};return d.jsx(gz.Provider,{value:{ssoSettings:e,updateSSOSettings:s,loading:r},children:n})},yz=z.createContext(null),rw=()=>{const n=z.useContext(yz);if(!n)throw new Error("useLogo must be used within LogoProvider");return n},w$=({children:n})=>{const[e,t]=z.useState("/logo.svg"),[r,i]=z.useState(!0),[a,s]=z.useState(null),[o,l]=z.useState(!0);z.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await gr.getLogo();y.logo?t(y.logo):t("/logo.svg"),y.showOnLogin!==void 0&&i(y.showOnLogin),y.loginTitle!==void 0&&s(y.loginTitle)}catch(y){console.error("Failed to load logo:",y),t("/logo.svg")}finally{l(!1)}},f=y=>{t(y)},h=y=>{i(y)},m=y=>{s(y)};return d.jsx(yz.Provider,{value:{logo:e,showOnLogin:r,loginTitle:a,loading:o,updateLogo:f,updateShowOnLogin:h,updateLoginTitle:m,reloadLogo:u},children:n})},pr=({children:n,requireAdmin:e=!1})=>{const{user:t,loading:r}=Fr();return r?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cyber-dark",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-6xl mb-4",children:""}),d.jsx("p",{className:"text-cyber-neon-cyan font-cyber uppercase tracking-wider",children:"Loading..."})]})}):t?e&&t.role!=="admin"?d.jsx(kb,{to:"/dashboard",replace:!0}):n:d.jsx(kb,{to:"/login",replace:!0})};let _$=class extends z.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cyber-dark",children:d.jsxs("div",{className:"text-center p-8 card",children:[d.jsx("h1",{className:"text-2xl font-cyber font-bold text-red-400 mb-4 neon-text",children:"Error Loading Page"}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono mb-4",children:this.state.error?.message||"An unexpected error occurred"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Reload Page"})]})}):this.props.children}};class S${constructor(){this.audioContext=null;const e=localStorage.getItem("soundEnabled");this.enabled=e!==null?e==="true":!0,this.volume=.3,this.initAudioContext=()=>{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext))}}playClick(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(800,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(600,this.audioContext.currentTime+.05),e.type="sine",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.1),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.1)}playConfirm(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(600,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(800,this.audioContext.currentTime+.15),e.type="sine",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.4,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.2),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.2)}playError(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(500,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(300,this.audioContext.currentTime+.2),e.type="sawtooth",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.25),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.25)}playHover(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(700,this.audioContext.currentTime),e.type="sine",t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.05),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.05)}setEnabled(e){this.enabled=e,localStorage.setItem("soundEnabled",e.toString())}getEnabled(){return this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}}const Yh=new S$,xz=()=>({playClick:()=>Yh.playClick(),playConfirm:()=>Yh.playConfirm(),playError:()=>Yh.playError(),playHover:()=>Yh.playHover(),enabled:Yh.getEnabled(),setEnabled:n=>Yh.setEnabled(n)}),nt=({children:n,variant:e="primary",size:t="md",className:r="",disabled:i=!1,onClick:a,type:s="button",transparent:o=!1,customColor:l,...u})=>{const f="btn relative overflow-hidden",h={primary:o?"bg-primary-500/20 backdrop-blur-md border border-primary-500/40 text-primary-700 hover:bg-primary-500/30 hover:border-primary-500/60 shadow-lg shadow-primary-500/20":"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg shadow-primary-500/30 hover:shadow-xl hover:shadow-primary-500/40",secondary:o?"bg-gray-500/20 backdrop-blur-md border border-gray-500/40 text-gray-700 hover:bg-gray-500/30 hover:border-gray-500/60 shadow-md":"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border border-gray-300 hover:from-gray-200 hover:to-gray-300 shadow-md",danger:o?"bg-red-500/20 backdrop-blur-md border border-red-500/40 text-red-700 hover:bg-red-500/30 hover:border-red-500/60 shadow-lg shadow-red-500/20":"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg shadow-red-500/30 hover:shadow-xl hover:shadow-red-500/40",outline:o?"bg-white/30 backdrop-blur-md border-2 border-primary-500/50 text-primary-600 hover:bg-primary-500/20 hover:border-primary-500/70 shadow-md":"bg-white/80 backdrop-blur-sm text-primary-600 border-2 border-primary-600 hover:bg-primary-50 shadow-md hover:shadow-lg"},m=h[e]||h.primary,y={sm:"px-4 py-2 text-sm",md:"px-6 py-3",lg:"px-8 py-4 text-lg"},b=l?{backgroundColor:o?`${l}20`:l,borderColor:o?`${l}60`:"transparent",color:o?l:"#ffffff",boxShadow:o?`0 4px 15px ${l}30`:`0 4px 15px ${l}40`}:{};return d.jsxs("button",{type:s,className:`${f} ${m} ${y[t]} ${r} ${i?"opacity-50 cursor-not-allowed":""}`,style:b,disabled:i,onClick:a,...u,children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 opacity-0 hover:opacity-100"}),d.jsx("span",{className:"relative z-10",children:n})]})},bt=({label:n,error:e,className:t="",required:r=!1,icon:i,...a})=>d.jsxs("div",{className:"mb-4",children:[n&&d.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:[n,r&&d.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d.jsxs("div",{className:"relative group",children:[i&&d.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300 group-focus-within:scale-110 group-focus-within:text-primary-600",children:i}),d.jsx("input",{className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${i?"pl-10":""} ${t} group-focus-within:scale-[1.01] group-focus-within:shadow-lg group-focus-within:shadow-primary-500/20`,...a}),e&&d.jsx("p",{className:"mt-1.5 text-sm text-red-600 animate-slide-down",children:e})]})]});var M$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const E$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Wt=(n,e)=>{const t=z.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},f)=>z.createElement("svg",{ref:f,...M$,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${E$(n)}`,o].join(" "),...u},[...e.map(([h,m])=>z.createElement(h,m)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};const Dv=Wt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const d2=Wt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const iw=Wt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const T$=Wt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const fv=Wt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const A$=Wt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const Ub=Wt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Fb=Wt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Ra=Wt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const FR=Wt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const Js=Wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const zR=Wt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const hv=Wt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Uv=Wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const zb=Wt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const $p=Wt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const C$=Wt("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);const Bb=Wt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const P$=Wt("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);const bz=Wt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const wz=Wt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const _z=Wt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const N$=Wt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const yv=Wt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const Sz=Wt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const f2=Wt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const O$=Wt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Ef=Wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const R$=Wt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const k$=Wt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Ru=Wt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const j$=Wt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const I$=Wt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Mz=Wt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const Tc=Wt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);const L$=Wt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Ez=Wt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Uo=Wt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Dg=Wt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const jP=Wt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Tf=Wt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const IP=Wt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const BR=Wt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const D$=Wt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Af=Wt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const U$=Wt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const F$=Wt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Hb=Wt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);const Fp=Wt("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const Fo=Wt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const fc=Wt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const qp=Wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Tz=Wt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const z$=Wt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const B$=Wt("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const Fv=Wt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const H$=Wt("XSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Cf=Wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zv=()=>{const n=new Uint8Array(32);return crypto.getRandomValues(n),Array.from(n,e=>e.toString(16).padStart(2,"0")).join("")},LP=n=>{sessionStorage.setItem("csrf_token",n)},V$=(n,e=5,t=900*1e3)=>{const r=Date.now(),a=JSON.parse(localStorage.getItem(`rate_limit_${n}`)||"[]").filter(s=>r-s<t);return a.length>=e?{allowed:!1,remaining:0}:(a.push(r),localStorage.setItem(`rate_limit_${n}`,JSON.stringify(a)),{allowed:!0,remaining:e-a.length})},W$=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),G$=()=>{const[n,e]=z.useState(""),[t,r]=z.useState(""),[i,a]=z.useState(!1),[s,o]=z.useState({}),[l,u]=z.useState(!1),[f,h]=z.useState(!1),{login:m}=Fr(),{ssoSettings:y}=vz(),{logo:b,showOnLogin:w,loginTitle:x}=rw(),{playClick:_,playConfirm:M}=xz(),E=Ua();z.useEffect(()=>{const R=zv();LP(R)},[]);const A=async R=>{if(R.preventDefault(),o({}),a(!0),M(),!W$(n)){o({email:"Please enter a valid email address"}),a(!1);return}if(!V$(`login_${n}`,5,900*1e3).allowed){ve.error("Too many login attempts. Please try again in 15 minutes."),a(!1);return}try{const N=await m(n,t);N.mfaRequired&&N.tempToken?E("/mfa-login",{state:{tempToken:N.tempToken,email:n}}):(ve.success("Login successful!"),E("/dashboard"))}catch(N){o({password:N.message||"Invalid email or password"}),ve.error(N.message||"Invalid credentials")}finally{a(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-8 relative overflow-hidden",style:{background:"linear-gradient(135deg, #a855f7 0%, #eab308 100%)"},children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[d.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-float"}),d.jsx("div",{className:"absolute bottom-20 right-20 w-[500px] h-[500px] bg-white/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),d.jsx("div",{className:"absolute top-1/2 left-1/4 w-80 h-80 bg-white/5 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}})]}),d.jsx("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)",backgroundSize:"50px 50px"}}),d.jsx("div",{className:"w-full max-w-md relative z-10",children:d.jsx("div",{className:"rounded-3xl overflow-hidden backdrop-blur-xl border border-white/20",style:{background:"rgba(255, 255, 255, 0.15)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.1)"},children:d.jsxs("div",{className:"p-8 sm:p-10",children:[b&&w&&d.jsx("div",{className:"text-center mb-6",children:d.jsx("div",{className:"inline-block backdrop-blur-md p-4 rounded-xl border-2 border-white/40 shadow-lg",style:{background:"rgba(255, 255, 255, 0.35)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)"},children:d.jsx("img",{src:b,alt:"Logo",className:"h-14 w-auto max-w-xs",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))",maxHeight:"56px",display:"block"},onError:R=>{R.target.src="/logo.svg"}})})}),x&&d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:x}),d.jsx("p",{className:"text-sm text-gray-700",children:"Log in to access your ticketing system"})]}),d.jsxs("form",{onSubmit:A,className:"space-y-5",children:[d.jsx("div",{onFocus:()=>u(!0),onBlur:()=>u(!1),children:d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-1.5",children:["Email",d.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300",children:d.jsx(Ef,{size:18,className:"text-gray-600"})}),d.jsx("input",{type:"email",placeholder:"Enter your email",value:n,onChange:R=>{e(R.target.value),o({...s,email:""}),R.target.value&&_()},className:`w-full px-4 py-3 pl-10 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 transition-all duration-300 ${s.email?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,required:!0})]}),s.email&&d.jsx("p",{className:"mt-1.5 text-sm text-red-600 animate-slide-down",children:s.email})]})}),d.jsx("div",{onFocus:()=>u(!0),onBlur:()=>u(!1),children:d.jsxs("div",{className:"mb-4",children:[d.jsx("div",{className:"mb-1.5",children:d.jsxs("label",{className:"block text-sm font-semibold text-gray-900",children:["Password",d.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300",children:d.jsx(f2,{size:18,className:"text-gray-600"})}),d.jsx("input",{type:f?"text":"password",placeholder:"Enter your password",value:t,onChange:R=>{r(R.target.value),o({...s,password:""}),R.target.value&&_()},className:`w-full px-4 py-3 pl-10 pr-10 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 transition-all duration-300 ${s.password?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,required:!0}),d.jsx("button",{type:"button",onClick:()=>{h(!f),_()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-900 transition-colors",children:f?d.jsx(zb,{size:18}):d.jsx($p,{size:18})})]}),s.password&&d.jsx("p",{className:"mt-1.5 text-sm text-red-600 animate-slide-down",children:s.password})]})}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("label",{className:"flex items-center cursor-pointer group",children:[d.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 bg-white/20 text-primary-600 focus:ring-primary-500 focus:ring-offset-0 cursor-pointer transition-all duration-200 group-hover:scale-110",onChange:()=>_()}),d.jsx("span",{className:"ml-2 text-sm text-gray-900 group-hover:text-gray-700 transition-colors",children:"Remember me"})]})}),d.jsxs("button",{type:"submit",disabled:i,onClick:()=>playSound("click"),className:"w-full px-6 py-3.5 bg-primary-600/90 backdrop-blur-md border border-primary-500/50 text-white rounded-xl font-semibold text-base shadow-lg shadow-primary-500/30 hover:bg-primary-600 hover:shadow-xl hover:shadow-primary-500/40 transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 relative overflow-hidden group",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),d.jsx("span",{className:"relative flex items-center justify-center gap-2",children:i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"animate-spin",children:""}),"Signing in..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Af,{size:18,className:"group-hover:rotate-12 transition-transform duration-300"}),"Log in",d.jsx(U$,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})})]})]}),(y.azureEnabled||y.googleEnabled)&&d.jsxs("div",{className:"mt-6 pt-6 border-t border-white/20",children:[d.jsxs("div",{className:"relative mb-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-white/20"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-3 bg-transparent text-gray-700 text-xs font-medium",children:"Or continue with"})})]}),d.jsxs("div",{className:"space-y-2",children:[y.googleEnabled&&d.jsxs("button",{type:"button",onClick:()=>{_(),E("/sso/google")},className:"w-full flex items-center justify-center space-x-3 py-2.5 px-4 bg-white/20 backdrop-blur-sm border-2 border-white/30 rounded-xl hover:border-white/50 hover:bg-white/30 transition-all duration-300 group shadow-sm hover:shadow-md",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-gray-700 transition-colors",children:"Google Workspace"})]}),y.azureEnabled&&d.jsxs("button",{type:"button",onClick:()=>{_(),E("/sso/azure")},className:"w-full flex items-center justify-center space-x-3 py-2.5 px-4 bg-white/20 backdrop-blur-sm border-2 border-white/30 rounded-xl hover:border-white/50 hover:bg-white/30 transition-all duration-300 group shadow-sm hover:shadow-md",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M0 0h11.5v11.5H0V0z",fill:"#F25022"}),d.jsx("path",{d:"M11.5 0H23v11.5H11.5V0z",fill:"#7FBA00"}),d.jsx("path",{d:"M0 11.5h11.5V23H0V11.5z",fill:"#00A4EF"}),d.jsx("path",{d:"M11.5 11.5H23V23H11.5V11.5z",fill:"#FFB900"})]}),d.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-gray-700 transition-colors",children:"Microsoft"})]})]})]})]})})})]})},jt=({children:n,className:e="",title:t,actions:r,onClick:i,style:a})=>d.jsxs("div",{className:`card ${e}`,onClick:i,style:a,children:[(t||r)&&d.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200/50",children:[t&&d.jsx("h3",{className:"text-lg font-semibold text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:t}),r&&d.jsx("div",{children:r})]}),d.jsx("div",{children:n})]}),$$=()=>{const[n,e]=z.useState(!1),{login:t}=Fr(),r=Ua();z.useEffect(()=>{const a=zv();LP(a)},[]);const i=async()=>{e(!0);try{const a=`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=${encodeURIComponent("your-azure-client-id")}&response_type=code&redirect_uri=${encodeURIComponent(window.location.origin+"/sso/azure/callback")}&response_mode=query&scope=${encodeURIComponent("openid profile email")}&state=${zv()}`;setTimeout(()=>{t({id:1,name:"Azure User",email:"user@microsoft.com",role:"user",mfaEnabled:!1,authProvider:"azure"}),ve.success("Azure Entra ID authentication successful!"),r("/dashboard"),e(!1)},1500)}catch{ve.error("Azure AD authentication failed"),e(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs(nt,{variant:"outline",onClick:()=>r("/login"),className:"mb-4",children:[d.jsx(iw,{size:16,className:"mr-2"}),"Back to Login"]}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-lg",children:d.jsxs("svg",{className:"w-10 h-10",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"#F25022"}),d.jsx("path",{d:"M11.5 0L23 4.5V11.5C23 17.3 18.8 22.5 11.5 23V0Z",fill:"#7FBA00"}),d.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23V0Z",fill:"#00A4EF"}),d.jsx("path",{d:"M11.5 0L0 4.5L11.5 11.5L23 4.5L11.5 0Z",fill:"#FFB900"})]})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Azure Entra ID"}),d.jsx("p",{className:"text-gray-600",children:"Sign in with your Microsoft account"})]}),d.jsx(jt,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium mb-2",children:"Azure Entra ID Authentication:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[d.jsx("li",{children:"Secure OAuth 2.0 / OpenID Connect"}),d.jsx("li",{children:"Enterprise Single Sign-On (SSO)"}),d.jsx("li",{children:"Conditional Access policies"}),d.jsx("li",{children:"Multi-factor authentication support"})]})]}),d.jsx(nt,{onClick:i,className:"w-full bg-[#0078D4] text-white hover:bg-[#0064B8]",disabled:n,children:n?"Authenticating...":d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"white"})}),d.jsx("span",{children:"Continue with Microsoft"})]})})]})})]})})},q$=()=>{const[n,e]=z.useState(!1),{login:t}=Fr(),r=Ua();z.useEffect(()=>{const a=zv();LP(a)},[]);const i=async()=>{e(!0);try{const a=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${encodeURIComponent("your-google-client-id")}&redirect_uri=${encodeURIComponent(window.location.origin+"/sso/google/callback")}&response_type=code&scope=${encodeURIComponent("openid email profile")}&state=${zv()}`;setTimeout(()=>{t({id:1,name:"Google User",email:"user@gmail.com",role:"user",mfaEnabled:!1,authProvider:"google"}),ve.success("Google Workspace authentication successful!"),r("/dashboard"),e(!1)},1500)}catch{ve.error("Google Workspace authentication failed"),e(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs(nt,{variant:"outline",onClick:()=>r("/login"),className:"mb-4",children:[d.jsx(iw,{size:16,className:"mr-2"}),"Back to Login"]}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-lg",children:d.jsxs("svg",{className:"w-10 h-10",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Google Workspace"}),d.jsx("p",{className:"text-gray-600",children:"Sign in with your Google Workspace account"})]}),d.jsx(jt,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium mb-2",children:"Google Workspace Authentication:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[d.jsx("li",{children:"Secure OAuth 2.0 authentication"}),d.jsx("li",{children:"Single Sign-On (SSO) support"}),d.jsx("li",{children:"Organization-wide access control"}),d.jsx("li",{children:"Multi-factor authentication support"})]})]}),d.jsx(nt,{onClick:i,className:"w-full bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50",disabled:n,children:n?"Authenticating...":d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d.jsx("span",{children:"Continue with Google Workspace"})]})})]})})]})})},X$=n=>{const e=[{path:"/dashboard",icon:Sz,label:"Dashboard"},{path:"/tickets",icon:Fp,label:"Tickets"}];return(n==="admin"||n==="agent")&&e.push({path:"/reports",icon:Bb,label:"Reports"}),e.push({path:"/settings",icon:D$,label:"Settings"}),e},Y$=[{path:"/admin/organizations",icon:Ub,label:"Organizations"},{path:"/admin/users",icon:Tz,label:"Users"},{path:"/admin/categories",icon:Hb,label:"Categories"},{path:"/admin/departments",icon:A$,label:"Departments"},{path:"/admin/roles",icon:Af,label:"Roles"},{path:"/admin/sla",icon:Js,label:"SLA Policies"},{path:"/admin/tickets/import",icon:fc,label:"Import Tickets"},{path:"/admin/analytics",icon:T$,label:"Analytics"},{path:"/admin/api-keys",icon:yv,label:"API Keys"},{path:"/admin/email",icon:Ef,label:"Email Settings"},{path:"/admin/email-templates",icon:C$,label:"Email Templates"},{path:"/admin/email-automation",icon:IP,label:"Email Automation"},{path:"/admin/faq",icon:wz,label:"FAQ Management"},{path:"/admin/chat-history",icon:Ru,label:"Chat History"},{path:"/admin/teams-integration",icon:Ru,label:"Microsoft Teams"},{path:"/admin/sso",icon:Af,label:"SSO Configuration"},{path:"/admin/logo",icon:_z,label:"Logo Management"},{path:"/admin/backup-restore",icon:hv,label:"Backup & Restore"}],J_=({item:n,onClick:e})=>{const r=Ec().pathname===n.path,i=n.icon;return d.jsxs(oz,{to:n.path,onClick:e,className:`flex items-center px-4 py-3 rounded-xl transition-all duration-300 relative group ${r?"bg-gradient-to-r from-primary-500/20 via-primary-500/15 to-primary-500/10 text-primary-700 font-semibold backdrop-blur-md border border-primary-500/30 shadow-lg shadow-primary-500/20":"text-gray-700 hover:bg-white/40 hover:backdrop-blur-md hover:text-gray-900 hover:border hover:border-white/30 hover:shadow-md"}`,style:{backgroundColor:r?"rgba(14, 165, 233, 0.15)":"transparent"},children:[d.jsx(i,{size:20,className:`mr-3 ${r?"text-primary-600":"text-gray-500 group-hover:text-primary-600"} transition-colors`}),d.jsx("span",{className:"text-sm",children:n.label}),r&&d.jsx("div",{className:"absolute right-2 w-2 h-2 bg-primary-600 rounded-full animate-glow-pulse shadow-lg shadow-primary-500/50"})]})},K$=({isOpen:n,onClose:e})=>{const{user:t,logout:r}=Fr(),{logo:i}=rw(),a=t?.role==="admin",s=t?.role==="department-head";return d.jsxs(d.Fragment,{children:[n&&d.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-20 lg:hidden transition-opacity",onClick:e}),d.jsx("aside",{className:`fixed top-0 left-0 z-30 h-full w-64 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${n?"translate-x-0":"-translate-x-full"}`,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderRight:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.1)"},children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b",style:{borderColor:"rgba(0, 0, 0, 0.08)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)"},children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(135deg, rgba(14, 165, 233, 0.8) 0%, rgba(2, 132, 199, 0.9) 100%)",boxShadow:"0 4px 15px rgba(14, 165, 233, 0.3)"},children:d.jsx("img",{src:i,alt:"Logo",className:"h-8 w-auto",onError:o=>{o.target.src="/logo.svg"}})}),d.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Ticketing Tool"})]}),d.jsx("button",{onClick:e,className:"lg:hidden text-gray-500 hover:text-gray-700 transition-colors p-1 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:d.jsx(Cf,{size:24})})]}),d.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:[X$(t?.role).map(o=>d.jsx(J_,{item:o,onClick:()=>window.innerWidth<1024&&e()},o.path)),(a||s)&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"pt-4 mt-4 border-t",style:{borderColor:"rgba(0, 0, 0, 0.08)"},children:d.jsx("p",{className:"px-4 text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:a?"Administration":"Department Management"})}),a&&Y$.map(o=>d.jsx(J_,{item:o,onClick:()=>window.innerWidth<1024&&e()},o.path)),s&&d.jsx(J_,{item:{path:"/department-head/dashboard",icon:Sz,label:"Department Dashboard"},onClick:()=>window.innerWidth<1024&&e()})]})]}),d.jsxs("div",{className:"p-4 border-t",style:{borderColor:"rgba(0, 0, 0, 0.08)",background:"linear-gradient(to top, rgba(255, 255, 255, 0.6) 0%, transparent 100%)"},children:[d.jsxs(oz,{to:"/profile",onClick:()=>window.innerWidth<1024&&e(),className:"flex items-center px-4 py-3 text-gray-700 rounded-xl transition-all duration-300 mb-2 backdrop-blur-md hover:bg-white/50 hover:text-gray-900 border border-transparent hover:border-white/40 shadow-sm hover:shadow-md",children:[d.jsx(qp,{size:20,className:"mr-3 text-gray-500"}),d.jsx("span",{className:"text-sm font-medium",children:"Profile"})]}),d.jsxs("button",{onClick:r,className:"w-full flex items-center px-4 py-3 text-red-600 rounded-xl transition-all duration-300 backdrop-blur-md hover:bg-red-500/20 hover:text-red-700 border border-transparent hover:border-red-500/30 shadow-sm hover:shadow-md",children:[d.jsx(O$,{size:20,className:"mr-3"}),d.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})})]})},Z$=({onMenuClick:n})=>{const{user:e}=Fr();return d.jsxs("header",{className:"h-16 flex items-center justify-between px-4 lg:px-6 sticky top-0 z-10 border-b",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderColor:"rgba(0, 0, 0, 0.08)",boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.08)"},children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:n,className:"lg:hidden text-gray-600 hover:text-gray-900 focus:outline-none transition-colors duration-200 p-2 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:d.jsx(k$,{size:24})}),d.jsxs("div",{className:"relative hidden md:block",children:[d.jsx(Tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),d.jsx("input",{type:"text",placeholder:"Search tickets...",className:"pl-10 pr-4 py-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 text-gray-900 placeholder-gray-400 w-64 text-sm transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"}})]})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("button",{className:"relative text-gray-600 hover:text-gray-900 focus:outline-none transition-colors duration-200 p-2 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:[d.jsx(fv,{size:24}),d.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full border-2 border-white shadow-sm"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("div",{className:"text-right hidden sm:block",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e?.name||"User"}),d.jsx("p",{className:"text-xs text-gray-500",children:e?.email||""})]}),d.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-semibold transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(14, 165, 233, 0.9) 0%, rgba(2, 132, 199, 0.95) 100%)",boxShadow:"0 4px 15px rgba(14, 165, 233, 0.3)"},children:e?.name?.charAt(0).toUpperCase()||"U"})]})]})]})},Ln=({children:n})=>{const[e,t]=z.useState(!1);return d.jsxs("div",{className:"flex h-screen bg-gray-50",children:[d.jsx(K$,{isOpen:e,onClose:()=>t(!1)}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-64",children:[d.jsx(Z$,{onMenuClick:()=>t(!e)}),d.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:n})]})]})},J$=()=>{const[n,e]=z.useState(1),[t,r]=z.useState(null),[i,a]=z.useState(""),[s,o]=z.useState(""),[l,u]=z.useState(!1),{updateUser:f,user:h}=Fr(),m=Ua();z.useEffect(()=>{n===2&&!t&&y()},[n]);const y=async()=>{try{u(!0);const x=await Db.getSetup();r(x.qrCode),a(x.manualEntryKey)}catch(x){ve.error(x.message||"Failed to load MFA setup"),e(1)}finally{u(!1)}},b=()=>{e(2)},w=async()=>{if(s.length!==6){ve.error("Please enter a 6-digit code");return}try{u(!0),await Db.verify(s),f({...h,mfaEnabled:!0}),ve.success("MFA enabled successfully!"),m("/profile")}catch(x){ve.error(x.message||"Invalid verification code")}finally{u(!1)}};return n===1?d.jsx(Ln,{children:d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs(jt,{children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4",children:d.jsx(Af,{className:"text-primary-600",size:32})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Enable Multi-Factor Authentication"}),d.jsx("p",{className:"text-gray-600",children:"Add an extra layer of security to your account"})]}),d.jsxs("div",{className:"space-y-4 mb-6",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Ra,{className:"text-green-500 mt-1",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Enhanced Security"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Protect your account with two-factor authentication"})]})]}),d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Ra,{className:"text-green-500 mt-1",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Easy Setup"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Scan QR code with your authenticator app"})]})]}),d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Ra,{className:"text-green-500 mt-1",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Compatible Apps"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Google Authenticator, Microsoft Authenticator, Authy"})]})]})]}),d.jsx(nt,{onClick:b,className:"w-full",children:"Enable MFA"})]})})}):d.jsx(Ln,{children:d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs(jt,{children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Scan QR Code"}),d.jsx("p",{className:"text-gray-600",children:"Use your authenticator app to scan this code"})]}),d.jsxs("div",{className:"flex flex-col items-center space-y-6 mb-6",children:[l?d.jsx("div",{className:"flex items-center justify-center w-48 h-48 bg-gray-100 rounded-lg",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?d.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:d.jsx("img",{src:t,alt:"QR Code",className:"w-48 h-48"})}):d.jsx("div",{className:"bg-gray-100 p-4 rounded-lg border-2 border-gray-200 w-48 h-48 flex items-center justify-center",children:d.jsx("p",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Or enter this code manually:"}),d.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-gray-100 rounded-lg font-mono text-sm",children:i})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(bt,{label:"Verification Code",placeholder:"Enter 6-digit code",value:s,onChange:x=>o(x.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(nt,{variant:"outline",onClick:()=>e(1),className:"flex-1",children:"Back"}),d.jsx(nt,{onClick:w,className:"flex-1",disabled:s.length!==6||l,children:l?"Verifying...":"Verify & Enable"})]})]})]})})})},Q$=()=>{const[n,e]=z.useState(""),[t,r]=z.useState(!1),i=Ua(),a=Ec(),{updateUser:s}=Fr(),{logo:o}=rw(),l=a.state?.tempToken,u=a.state?.email;z.useEffect(()=>{l||(ve.error("Session expired. Please login again."),i("/login"))},[l,i]);const f=async m=>{if(m.preventDefault(),n.length!==6){ve.error("Please enter a 6-digit code");return}try{r(!0);const y=await Db.verifyLogin(l,n);localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),s(y.user),ve.success("MFA verification successful!"),i("/dashboard",{replace:!0})}catch(y){ve.error(y.message||"Invalid verification code"),e("")}finally{r(!1)}},h=()=>{i("/login",{replace:!0})};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mb-6 flex justify-center",children:d.jsx("img",{src:o,alt:"Rezilyens",className:"h-24 w-auto",onError:m=>{m.target.src="/logo.svg"}})}),d.jsx("p",{className:"text-gray-600",children:"Multi-Factor Authentication Required"})]}),d.jsxs(jt,{children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4",children:d.jsx(Af,{className:"text-primary-600",size:32})}),d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Enter Verification Code"}),d.jsx("p",{className:"text-sm text-gray-600",children:u?`Please enter the 6-digit code from your authenticator app for ${u}`:"Please enter the 6-digit code from your authenticator app"})]}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsx(bt,{label:"Verification Code",placeholder:"Enter 6-digit code",value:n,onChange:m=>e(m.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,autoFocus:!0,className:"text-center text-2xl tracking-widest font-mono"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(nt,{type:"submit",className:"w-full",disabled:n.length!==6||t,children:t?"Verifying...":"Verify & Continue"}),d.jsxs(nt,{type:"button",variant:"outline",onClick:h,className:"w-full",disabled:t,children:[d.jsx(iw,{size:16,className:"mr-2"}),"Back to Login"]})]})]}),d.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx("strong",{children:"Note:"})," Open your authenticator app (Google Authenticator, Microsoft Authenticator, or Authy) and enter the 6-digit code shown."]})})]})]})})},e7="modulepreload",t7=function(n){return"/"+n},HR={},n7=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var s=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=u(t.map(f=>{if(f=t7(f),f in HR)return;HR[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":e7,h||(y.as="script"),y.crossOrigin="",y.href=f,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},pn=({children:n,variant:e="info",className:t=""})=>{const r={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info"};return d.jsx("span",{className:`badge ${r[e]} ${t}`,children:n})},_n=({label:n,error:e,className:t="",required:r=!1,options:i=[],placeholder:a="Select an option",...s})=>d.jsxs("div",{className:"mb-4",children:[n&&d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[n,r&&d.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d.jsxs("select",{className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${t} cursor-pointer`,...s,children:[!s.value&&a&&d.jsx("option",{value:"",className:"bg-white text-gray-900",disabled:!0,children:a}),i.map(o=>d.jsx("option",{value:o.value,className:"bg-white text-gray-900",children:o.label},o.value))]}),e&&d.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:e})]});function Az(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Az(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Cn(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Az(n))&&(r&&(r+=" "),r+=e);return r}var Q_,VR;function as(){if(VR)return Q_;VR=1;var n=Array.isArray;return Q_=n,Q_}var eS,WR;function Cz(){if(WR)return eS;WR=1;var n=typeof ox=="object"&&ox&&ox.Object===Object&&ox;return eS=n,eS}var tS,GR;function pl(){if(GR)return tS;GR=1;var n=Cz(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return tS=t,tS}var nS,$R;function Gy(){if($R)return nS;$R=1;var n=pl(),e=n.Symbol;return nS=e,nS}var rS,qR;function r7(){if(qR)return rS;qR=1;var n=Gy(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(s){var o=t.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var f=r.call(s);return u&&(o?s[i]=l:delete s[i]),f}return rS=a,rS}var iS,XR;function i7(){if(XR)return iS;XR=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return iS=t,iS}var aS,YR;function Ac(){if(YR)return aS;YR=1;var n=Gy(),e=r7(),t=i7(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):t(o)}return aS=s,aS}var sS,KR;function Cc(){if(KR)return sS;KR=1;function n(e){return e!=null&&typeof e=="object"}return sS=n,sS}var oS,ZR;function Pm(){if(ZR)return oS;ZR=1;var n=Ac(),e=Cc(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return oS=r,oS}var lS,JR;function DP(){if(JR)return lS;JR=1;var n=as(),e=Pm(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||s!=null&&a in Object(s)}return lS=i,lS}var cS,QR;function Wu(){if(QR)return cS;QR=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return cS=n,cS}var uS,ek;function UP(){if(ek)return uS;ek=1;var n=Ac(),e=Wu(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var l=n(o);return l==r||l==i||l==t||l==a}return uS=s,uS}var dS,tk;function a7(){if(tk)return dS;tk=1;var n=pl(),e=n["__core-js_shared__"];return dS=e,dS}var fS,nk;function s7(){if(nk)return fS;nk=1;var n=a7(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return fS=t,fS}var hS,rk;function Pz(){if(rk)return hS;rk=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return hS=t,hS}var pS,ik;function o7(){if(ik)return pS;ik=1;var n=UP(),e=s7(),t=Wu(),r=Pz(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,f=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(m){if(!t(m)||e(m))return!1;var y=n(m)?f:a;return y.test(r(m))}return pS=h,pS}var mS,ak;function l7(){if(ak)return mS;ak=1;function n(e,t){return e?.[t]}return mS=n,mS}var gS,sk;function Bf(){if(sk)return gS;sk=1;var n=o7(),e=l7();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return gS=t,gS}var vS,ok;function aw(){if(ok)return vS;ok=1;var n=Bf(),e=n(Object,"create");return vS=e,vS}var yS,lk;function c7(){if(lk)return yS;lk=1;var n=aw();function e(){this.__data__=n?n(null):{},this.size=0}return yS=e,yS}var xS,ck;function u7(){if(ck)return xS;ck=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return xS=n,xS}var bS,uk;function d7(){if(uk)return bS;uk=1;var n=aw(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var s=this.__data__;if(n){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return bS=i,bS}var wS,dk;function f7(){if(dk)return wS;dk=1;var n=aw(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return wS=r,wS}var _S,fk;function h7(){if(fk)return _S;fk=1;var n=aw(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return _S=t,_S}var SS,hk;function p7(){if(hk)return SS;hk=1;var n=c7(),e=u7(),t=d7(),r=f7(),i=h7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,SS=a,SS}var MS,pk;function m7(){if(pk)return MS;pk=1;function n(){this.__data__=[],this.size=0}return MS=n,MS}var ES,mk;function FP(){if(mk)return ES;mk=1;function n(e,t){return e===t||e!==e&&t!==t}return ES=n,ES}var TS,gk;function sw(){if(gk)return TS;gk=1;var n=FP();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return TS=e,TS}var AS,vk;function g7(){if(vk)return AS;vk=1;var n=sw(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,s=n(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return AS=r,AS}var CS,yk;function v7(){if(yk)return CS;yk=1;var n=sw();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return CS=e,CS}var PS,xk;function y7(){if(xk)return PS;xk=1;var n=sw();function e(t){return n(this.__data__,t)>-1}return PS=e,PS}var NS,bk;function x7(){if(bk)return NS;bk=1;var n=sw();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return NS=e,NS}var OS,wk;function ow(){if(wk)return OS;wk=1;var n=m7(),e=g7(),t=v7(),r=y7(),i=x7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,OS=a,OS}var RS,_k;function zP(){if(_k)return RS;_k=1;var n=Bf(),e=pl(),t=n(e,"Map");return RS=t,RS}var kS,Sk;function b7(){if(Sk)return kS;Sk=1;var n=p7(),e=ow(),t=zP();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return kS=r,kS}var jS,Mk;function w7(){if(Mk)return jS;Mk=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return jS=n,jS}var IS,Ek;function lw(){if(Ek)return IS;Ek=1;var n=w7();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return IS=e,IS}var LS,Tk;function _7(){if(Tk)return LS;Tk=1;var n=lw();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return LS=e,LS}var DS,Ak;function S7(){if(Ak)return DS;Ak=1;var n=lw();function e(t){return n(this,t).get(t)}return DS=e,DS}var US,Ck;function M7(){if(Ck)return US;Ck=1;var n=lw();function e(t){return n(this,t).has(t)}return US=e,US}var FS,Pk;function E7(){if(Pk)return FS;Pk=1;var n=lw();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return FS=e,FS}var zS,Nk;function BP(){if(Nk)return zS;Nk=1;var n=b7(),e=_7(),t=S7(),r=M7(),i=E7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,zS=a,zS}var BS,Ok;function Nz(){if(Ok)return BS;Ok=1;var n=BP(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(t.Cache||n),a}return t.Cache=n,BS=t,BS}var HS,Rk;function T7(){if(Rk)return HS;Rk=1;var n=Nz(),e=500;function t(r){var i=n(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return HS=t,HS}var VS,kk;function A7(){if(kk)return VS;kk=1;var n=T7(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,l,u){a.push(l?u.replace(t,"$1"):o||s)}),a});return VS=r,VS}var WS,jk;function HP(){if(jk)return WS;jk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return WS=n,WS}var GS,Ik;function C7(){if(Ik)return GS;Ik=1;var n=Gy(),e=HP(),t=as(),r=Pm(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return GS=s,GS}var $S,Lk;function Oz(){if(Lk)return $S;Lk=1;var n=C7();function e(t){return t==null?"":n(t)}return $S=e,$S}var qS,Dk;function Rz(){if(Dk)return qS;Dk=1;var n=as(),e=DP(),t=A7(),r=Oz();function i(a,s){return n(a)?a:e(a,s)?[a]:t(r(a))}return qS=i,qS}var XS,Uk;function cw(){if(Uk)return XS;Uk=1;var n=Pm();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return XS=e,XS}var YS,Fk;function VP(){if(Fk)return YS;Fk=1;var n=Rz(),e=cw();function t(r,i){i=n(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return YS=t,YS}var KS,zk;function kz(){if(zk)return KS;zk=1;var n=VP();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return KS=e,KS}var P7=kz();const Es=Kn(P7);var ZS,Bk;function N7(){if(Bk)return ZS;Bk=1;function n(e){return e==null}return ZS=n,ZS}var O7=N7();const yn=Kn(O7);var JS,Hk;function R7(){if(Hk)return JS;Hk=1;var n=Ac(),e=as(),t=Cc(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return JS=i,JS}var k7=R7();const Pf=Kn(k7);var j7=UP();const on=Kn(j7);var I7=Wu();const Nm=Kn(I7);var QS={exports:{}},Qn={};var Vk;function L7(){if(Vk)return Qn;Vk=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function w(x){if(typeof x=="object"&&x!==null){var _=x.$$typeof;switch(_){case n:switch(x=x.type,x){case t:case i:case r:case u:case f:return x;default:switch(x=x&&x.$$typeof,x){case o:case s:case l:case m:case h:case a:return x;default:return _}}case e:return _}}}return Qn.ContextConsumer=s,Qn.ContextProvider=a,Qn.Element=n,Qn.ForwardRef=l,Qn.Fragment=t,Qn.Lazy=m,Qn.Memo=h,Qn.Portal=e,Qn.Profiler=i,Qn.StrictMode=r,Qn.Suspense=u,Qn.SuspenseList=f,Qn.isAsyncMode=function(){return!1},Qn.isConcurrentMode=function(){return!1},Qn.isContextConsumer=function(x){return w(x)===s},Qn.isContextProvider=function(x){return w(x)===a},Qn.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===n},Qn.isForwardRef=function(x){return w(x)===l},Qn.isFragment=function(x){return w(x)===t},Qn.isLazy=function(x){return w(x)===m},Qn.isMemo=function(x){return w(x)===h},Qn.isPortal=function(x){return w(x)===e},Qn.isProfiler=function(x){return w(x)===i},Qn.isStrictMode=function(x){return w(x)===r},Qn.isSuspense=function(x){return w(x)===u},Qn.isSuspenseList=function(x){return w(x)===f},Qn.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===t||x===i||x===r||x===u||x===f||x===y||typeof x=="object"&&x!==null&&(x.$$typeof===m||x.$$typeof===h||x.$$typeof===a||x.$$typeof===s||x.$$typeof===l||x.$$typeof===b||x.getModuleId!==void 0)},Qn.typeOf=w,Qn}var Wk;function D7(){return Wk||(Wk=1,QS.exports=L7()),QS.exports}var U7=D7(),eM,Gk;function jz(){if(Gk)return eM;Gk=1;var n=Ac(),e=Cc(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return eM=r,eM}var tM,$k;function F7(){if($k)return tM;$k=1;var n=jz();function e(t){return n(t)&&t!=+t}return tM=e,tM}var z7=F7();const $y=Kn(z7);var B7=jz();const H7=Kn(B7);var ka=function(e){return e===0?0:e>0?1:-1},lf=function(e){return Pf(e)&&e.indexOf("%")===e.length-1},ft=function(e){return H7(e)&&!$y(e)},V7=function(e){return yn(e)},Ni=function(e){return ft(e)||Pf(e)},W7=0,Om=function(e){var t=++W7;return"".concat(e||"").concat(t)},ja=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ft(e)&&!Pf(e))return r;var a;if(lf(e)){var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return $y(a)&&(a=r),i&&a>t&&(a=t),a},Mu=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},G7=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},_s=function(e,t){return ft(e)&&ft(t)?function(r){return e+r*(t-e)}:function(){return t}};function Vb(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):Es(r,e))===t})}var $7=function(e,t){return ft(e)&&ft(t)?e-t:Pf(e)&&Pf(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function zp(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function h2(n){"@babel/helpers - typeof";return h2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h2(n)}var q7=["viewBox","children"],X7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qk=["points","pathLength"],nM={svg:q7,polygon:qk,polyline:qk},WP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Wb=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(z.isValidElement(e)&&(r=e.props),!Nm(r))return null;var i={};return Object.keys(r).forEach(function(a){WP.includes(a)&&(i[a]=t||function(s){return r[a](r,s)})}),i},Y7=function(e,t,r){return function(i){return e(t,r,i),null}},Nf=function(e,t,r){if(!Nm(e)||h2(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];WP.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Y7(s,t,r))}),i},K7=["children"],Z7=["children"];function Xk(n,e){if(n==null)return{};var t=J7(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function J7(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function p2(n){"@babel/helpers - typeof";return p2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p2(n)}var Yk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},hc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Kk=null,rM=null,GP=function n(e){if(e===Kk&&Array.isArray(rM))return rM;var t=[];return z.Children.forEach(e,function(r){yn(r)||(U7.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),rM=t,Kk=e,t};function Ts(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return hc(i)}):r=[hc(e)],GP(n).forEach(function(i){var a=Es(i,"type.displayName")||Es(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function ws(n,e){var t=Ts(n,e);return t&&t[0]}var Zk=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!ft(r)||r<=0||!ft(i)||i<=0)},Q7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],e9=function(e){return e&&e.type&&Pf(e.type)&&Q7.indexOf(e.type)>=0},t9=function(e){return e&&p2(e)==="object"&&"clipDot"in e},n9=function(e,t,r,i){var a,s=(a=nM?.[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!on(e)&&(i&&s.includes(t)||X7.includes(t))||r&&WP.includes(t)},en=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(z.isValidElement(e)&&(i=e.props),!Nm(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;n9((o=i)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=i[s])}),a},m2=function n(e,t){if(e===t)return!0;var r=z.Children.count(e);if(r!==z.Children.count(t))return!1;if(r===0)return!0;if(r===1)return Jk(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],s=t[i];if(Array.isArray(a)||Array.isArray(s)){if(!n(a,s))return!1}else if(!Jk(a,s))return!1}return!0},Jk=function(e,t){if(yn(e)&&yn(t))return!0;if(!yn(e)&&!yn(t)){var r=e.props||{},i=r.children,a=Xk(r,K7),s=t.props||{},o=s.children,l=Xk(s,Z7);return i&&o?zp(a,l)&&m2(i,o):!i&&!o?zp(a,l):!1}return!1},Qk=function(e,t){var r=[],i={};return GP(e).forEach(function(a,s){if(e9(a))r.push(a);else if(a){var o=hc(a.type),l=t[o]||{},u=l.handler,f=l.once;if(u&&(!f||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},r9=function(e){var t=e&&e.type;return t&&Yk[t]?Yk[t]:null},i9=function(e,t){return GP(t).indexOf(e)},a9=["children","width","height","viewBox","className","style","title","desc"];function g2(){return g2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g2.apply(this,arguments)}function s9(n,e){if(n==null)return{};var t=o9(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function o9(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function v2(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,s=n.style,o=n.title,l=n.desc,u=s9(n,a9),f=i||{width:t,height:r,x:0,y:0},h=Cn("recharts-surface",a);return ye.createElement("svg",g2({},en(u,!0,"svg"),{className:h,width:t,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ye.createElement("title",null,o),ye.createElement("desc",null,l),e)}var l9=["children","className"];function y2(){return y2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y2.apply(this,arguments)}function c9(n,e){if(n==null)return{};var t=u9(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function u9(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var $n=ye.forwardRef(function(n,e){var t=n.children,r=n.className,i=c9(n,l9),a=Cn("recharts-layer",r);return ye.createElement("g",y2({className:a},en(i,!0),{ref:e}),t)}),Do=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},iM,ej;function d9(){if(ej)return iM;ej=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+t];return s}return iM=n,iM}var aM,tj;function f9(){if(tj)return aM;tj=1;var n=d9();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return aM=e,aM}var sM,nj;function Iz(){if(nj)return sM;nj=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+n+i+a+"]");function l(u){return o.test(u)}return sM=l,sM}var oM,rj;function h9(){if(rj)return oM;rj=1;function n(e){return e.split("")}return oM=n,oM}var lM,ij;function p9(){if(ij)return lM;ij=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="["+n+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",f="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",b=u+"?",w="["+a+"]?",x="(?:"+y+"(?:"+[f,h,m].join("|")+")"+w+b+")*",_=w+b+x,M="(?:"+[f+o+"?",o,h,m,s].join("|")+")",E=RegExp(l+"(?="+l+")|"+M+_,"g");function A(R){return R.match(E)||[]}return lM=A,lM}var cM,aj;function m9(){if(aj)return cM;aj=1;var n=h9(),e=Iz(),t=p9();function r(i){return e(i)?t(i):n(i)}return cM=r,cM}var uM,sj;function g9(){if(sj)return uM;sj=1;var n=f9(),e=Iz(),t=m9(),r=Oz();function i(a){return function(s){s=r(s);var o=e(s)?t(s):void 0,l=o?o[0]:s.charAt(0),u=o?n(o,1).join(""):s.slice(1);return l[a]()+u}}return uM=i,uM}var dM,oj;function v9(){if(oj)return dM;oj=1;var n=g9(),e=n("toUpperCase");return dM=e,dM}var y9=v9();const uw=Kn(y9);function Tr(n){return function(){return n}}const Lz=Math.cos,Gb=Math.sin,zo=Math.sqrt,$b=Math.PI,dw=2*$b,x2=Math.PI,b2=2*x2,Jd=1e-6,x9=b2-Jd;function Dz(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function b9(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Dz;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let w9=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Dz:b9(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-t,f=s-e,h=o-t,m=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(m>Jd)if(!(Math.abs(h*l-u*f)>Jd)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,b=i-o,w=l*l+u*u,x=y*y+b*b,_=Math.sqrt(w),M=Math.sqrt(m),E=a*Math.tan((x2-Math.acos((w+m-x)/(2*_*M)))/2),A=E/M,R=E/_;Math.abs(A-1)>Jd&&this._append`L${e+A*f},${t+A*h}`,this._append`A${a},${a},0,0,${+(h*y>f*b)},${this._x1=e+R*l},${this._y1=t+R*u}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,f=t+l,h=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Jd||Math.abs(this._y1-f)>Jd)&&this._append`L${u},${f}`,r&&(m<0&&(m=m%b2+b2),m>x9?this._append`A${r},${r},0,1,${h},${e-o},${t-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:m>Jd&&this._append`A${r},${r},0,${+(m>=x2)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function $P(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new w9(e)}function qP(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Uz(n){this._context=n}Uz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function fw(n){return new Uz(n)}function Fz(n){return n[0]}function zz(n){return n[1]}function Bz(n,e){var t=Tr(!0),r=null,i=fw,a=null,s=$P(o);n=typeof n=="function"?n:n===void 0?Fz:Tr(n),e=typeof e=="function"?e:e===void 0?zz:Tr(e);function o(l){var u,f=(l=qP(l)).length,h,m=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=f;++u)!(u<f&&t(h=l[u],u,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+n(h,u,l),+e(h,u,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(n=typeof l=="function"?l:Tr(+l),o):n},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Tr(+l),o):e},o.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Tr(!!l),o):t},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function ux(n,e,t){var r=null,i=Tr(!0),a=null,s=fw,o=null,l=$P(u);n=typeof n=="function"?n:n===void 0?Fz:Tr(+n),e=typeof e=="function"?e:Tr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?zz:Tr(+t);function u(h){var m,y,b,w=(h=qP(h)).length,x,_=!1,M,E=new Array(w),A=new Array(w);for(a==null&&(o=s(M=l())),m=0;m<=w;++m){if(!(m<w&&i(x=h[m],m,h))===_)if(_=!_)y=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=m-1;b>=y;--b)o.point(E[b],A[b]);o.lineEnd(),o.areaEnd()}_&&(E[m]=+n(x,m,h),A[m]=+e(x,m,h),o.point(r?+r(x,m,h):E[m],t?+t(x,m,h):A[m]))}if(M)return o=null,M+""||null}function f(){return Bz().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(n=typeof h=="function"?h:Tr(+h),r=null,u):n},u.x0=function(h){return arguments.length?(n=typeof h=="function"?h:Tr(+h),u):n},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Tr(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Tr(+h),t=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Tr(+h),u):e},u.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:Tr(+h),u):t},u.lineX0=u.lineY0=function(){return f().x(n).y(e)},u.lineY1=function(){return f().x(n).y(t)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Tr(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class Hz{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function _9(n){return new Hz(n,!0)}function S9(n){return new Hz(n,!1)}const XP={draw(n,e){const t=zo(e/$b);n.moveTo(t,0),n.arc(0,0,t,0,dw)}},M9={draw(n,e){const t=zo(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},Vz=zo(1/3),E9=Vz*2,T9={draw(n,e){const t=zo(e/E9),r=t*Vz;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},A9={draw(n,e){const t=zo(e),r=-t/2;n.rect(r,r,t,t)}},C9=.8908130915292852,Wz=Gb($b/10)/Gb(7*$b/10),P9=Gb(dw/10)*Wz,N9=-Lz(dw/10)*Wz,O9={draw(n,e){const t=zo(e*C9),r=P9*t,i=N9*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const s=dw*a/5,o=Lz(s),l=Gb(s);n.lineTo(l*t,-o*t),n.lineTo(o*r-l*i,l*r+o*i)}n.closePath()}},fM=zo(3),R9={draw(n,e){const t=-zo(e/(fM*3));n.moveTo(0,t*2),n.lineTo(-fM*t,-t),n.lineTo(fM*t,-t),n.closePath()}},Gs=-.5,$s=zo(3)/2,w2=1/zo(12),k9=(w2/2+1)*3,j9={draw(n,e){const t=zo(e/k9),r=t/2,i=t*w2,a=r,s=t*w2+t,o=-a,l=s;n.moveTo(r,i),n.lineTo(a,s),n.lineTo(o,l),n.lineTo(Gs*r-$s*i,$s*r+Gs*i),n.lineTo(Gs*a-$s*s,$s*a+Gs*s),n.lineTo(Gs*o-$s*l,$s*o+Gs*l),n.lineTo(Gs*r+$s*i,Gs*i-$s*r),n.lineTo(Gs*a+$s*s,Gs*s-$s*a),n.lineTo(Gs*o+$s*l,Gs*l-$s*o),n.closePath()}};function I9(n,e){let t=null,r=$P(i);n=typeof n=="function"?n:Tr(n||XP),e=typeof e=="function"?e:Tr(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:Tr(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Tr(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function qb(){}function Xb(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function Gz(n){this._context=n}Gz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xb(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function L9(n){return new Gz(n)}function $z(n){this._context=n}$z.prototype={areaStart:qb,areaEnd:qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:Xb(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function D9(n){return new $z(n)}function qz(n){this._context=n}qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:Xb(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function U9(n){return new qz(n)}function Xz(n){this._context=n}Xz.prototype={areaStart:qb,areaEnd:qb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function F9(n){return new Xz(n)}function lj(n){return n<0?-1:1}function cj(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),s=(t-n._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(lj(a)+lj(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function uj(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function hM(n,e,t){var r=n._x0,i=n._y0,a=n._x1,s=n._y1,o=(a-r)/3;n._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*t,a,s)}function Yb(n){this._context=n}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hM(this,this._t0,uj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,hM(this,uj(this,t=cj(this,n,e)),t);break;default:hM(this,this._t0,t=cj(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function Yz(n){this._context=new Kz(n)}(Yz.prototype=Object.create(Yb.prototype)).point=function(n,e){Yb.prototype.point.call(this,e,n)};function Kz(n){this._context=n}Kz.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function z9(n){return new Yb(n)}function B9(n){return new Yz(n)}function Zz(n){this._context=n}Zz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=dj(n),i=dj(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function dj(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function H9(n){return new Zz(n)}function hw(n,e){this._context=n,this._t=e}hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function V9(n){return new hw(n,.5)}function W9(n){return new hw(n,0)}function G9(n){return new hw(n,1)}function Xp(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _2(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function $9(n,e){return n[e]}function q9(n){const e=[];return e.key=n,e}function X9(){var n=Tr([]),e=_2,t=Xp,r=$9;function i(a){var s=Array.from(n.apply(this,arguments),q9),o,l=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=qP(e(s));o<l;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Tr(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Tr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?_2:typeof a=="function"?a:Tr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Xp,i):t},i}function Y9(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}Xp(n,e)}}function K9(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}Xp(n,e)}}function Z9(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var f=n[e[o]],h=f[r][1]||0,m=f[r-1][1]||0,y=(h-m)/2,b=0;b<o;++b){var w=n[e[b]],x=w[r][1]||0,_=w[r-1][1]||0;y+=x-_}l+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=t,l&&(t-=u/l)}i[r-1][1]+=i[r-1][0]=t,Xp(n,e)}}function Bv(n){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(n)}var J9=["type","size","sizeType"];function S2(){return S2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},S2.apply(this,arguments)}function fj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(t),!0).forEach(function(r){Q9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Q9(n,e,t){return e=eq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eq(n){var e=tq(n,"string");return Bv(e)=="symbol"?e:e+""}function tq(n,e){if(Bv(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nq(n,e){if(n==null)return{};var t=rq(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rq(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Jz={symbolCircle:XP,symbolCross:M9,symbolDiamond:T9,symbolSquare:A9,symbolStar:O9,symbolTriangle:R9,symbolWye:j9},iq=Math.PI/180,aq=function(e){var t="symbol".concat(uw(e));return Jz[t]||XP},sq=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*iq;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},oq=function(e,t){Jz["symbol".concat(uw(e))]=t},YP=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=nq(e,J9),u=hj(hj({},l),{},{type:r,size:a,sizeType:o}),f=function(){var x=aq(r),_=I9().type(x).size(sq(a,o,r));return _()},h=u.className,m=u.cx,y=u.cy,b=en(u,!0);return m===+m&&y===+y&&a===+a?ye.createElement("path",S2({},b,{className:Cn("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(y,")"),d:f()})):null};YP.registerSymbol=oq;function Yp(n){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(n)}function M2(){return M2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},M2.apply(this,arguments)}function pj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lq(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(t),!0).forEach(function(r){Hv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uq(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,e5(r.key),r)}}function dq(n,e,t){return e&&uq(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function fq(n,e,t){return e=Kb(e),hq(n,Qz()?Reflect.construct(e,t||[],Kb(n).constructor):e.apply(n,t))}function hq(n,e){if(e&&(Yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pq(n)}function pq(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qz(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qz=function(){return!!n})()}function Kb(n){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kb(n)}function mq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&E2(n,e)}function E2(n,e){return E2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E2(n,e)}function Hv(n,e,t){return e=e5(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e5(n){var e=gq(n,"string");return Yp(e)=="symbol"?e:e+""}function gq(n,e){if(Yp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var qs=32,KP=(function(n){function e(){return cq(this,e),fq(this,e,arguments)}return mq(e,n),dq(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=qs/2,s=qs/6,o=qs/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:qs,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(qs,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ye.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(qs/8,"h").concat(qs,"v").concat(qs*3/4,"h").concat(-qs,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(r.legendIcon)){var u=lq({},r);return delete u.legendIcon,ye.cloneElement(r.legendIcon,u)}return ye.createElement(YP,{fill:l,cx:a,cy:a,size:qs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:qs,height:qs},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,b){var w=y.formatter||l,x=Cn(Hv(Hv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",y.inactive));if(y.type==="none")return null;var _=on(y.value)?null:y.value;Do(!on(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var M=y.inactive?u:y.color;return ye.createElement("li",M2({className:x,style:h,key:"legend-item-".concat(b)},Nf(r.props,y,b)),ye.createElement(v2,{width:s,height:s,viewBox:f,style:m},r.renderIcon(y)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:M}},w?w(_,y,b):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(z.PureComponent);Hv(KP,"displayName","Legend");Hv(KP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var pM,mj;function vq(){if(mj)return pM;mj=1;var n=ow();function e(){this.__data__=new n,this.size=0}return pM=e,pM}var mM,gj;function yq(){if(gj)return mM;gj=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return mM=n,mM}var gM,vj;function xq(){if(vj)return gM;vj=1;function n(e){return this.__data__.get(e)}return gM=n,gM}var vM,yj;function bq(){if(yj)return vM;yj=1;function n(e){return this.__data__.has(e)}return vM=n,vM}var yM,xj;function wq(){if(xj)return yM;xj=1;var n=ow(),e=zP(),t=BP(),r=200;function i(a,s){var o=this.__data__;if(o instanceof n){var l=o.__data__;if(!e||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(l)}return o.set(a,s),this.size=o.size,this}return yM=i,yM}var xM,bj;function t5(){if(bj)return xM;bj=1;var n=ow(),e=vq(),t=yq(),r=xq(),i=bq(),a=wq();function s(o){var l=this.__data__=new n(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,xM=s,xM}var bM,wj;function _q(){if(wj)return bM;wj=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return bM=e,bM}var wM,_j;function Sq(){if(_j)return wM;_j=1;function n(e){return this.__data__.has(e)}return wM=n,wM}var _M,Sj;function n5(){if(Sj)return _M;Sj=1;var n=BP(),e=_q(),t=Sq();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new n;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,_M=r,_M}var SM,Mj;function r5(){if(Mj)return SM;Mj=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return SM=n,SM}var MM,Ej;function i5(){if(Ej)return MM;Ej=1;function n(e,t){return e.has(t)}return MM=n,MM}var EM,Tj;function a5(){if(Tj)return EM;Tj=1;var n=n5(),e=r5(),t=i5(),r=1,i=2;function a(s,o,l,u,f,h){var m=l&r,y=s.length,b=o.length;if(y!=b&&!(m&&b>y))return!1;var w=h.get(s),x=h.get(o);if(w&&x)return w==o&&x==s;var _=-1,M=!0,E=l&i?new n:void 0;for(h.set(s,o),h.set(o,s);++_<y;){var A=s[_],R=o[_];if(u)var O=m?u(R,A,_,o,s,h):u(A,R,_,s,o,h);if(O!==void 0){if(O)continue;M=!1;break}if(E){if(!e(o,function(N,L){if(!t(E,L)&&(A===N||f(A,N,l,u,h)))return E.push(L)})){M=!1;break}}else if(!(A===R||f(A,R,l,u,h))){M=!1;break}}return h.delete(s),h.delete(o),M}return EM=a,EM}var TM,Aj;function Mq(){if(Aj)return TM;Aj=1;var n=pl(),e=n.Uint8Array;return TM=e,TM}var AM,Cj;function Eq(){if(Cj)return AM;Cj=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return AM=n,AM}var CM,Pj;function ZP(){if(Pj)return CM;Pj=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return CM=n,CM}var PM,Nj;function Tq(){if(Nj)return PM;Nj=1;var n=Gy(),e=Mq(),t=FP(),r=a5(),i=Eq(),a=ZP(),s=1,o=2,l="[object Boolean]",u="[object Date]",f="[object Error]",h="[object Map]",m="[object Number]",y="[object RegExp]",b="[object Set]",w="[object String]",x="[object Symbol]",_="[object ArrayBuffer]",M="[object DataView]",E=n?n.prototype:void 0,A=E?E.valueOf:void 0;function R(O,N,L,T,j,U,B){switch(L){case M:if(O.byteLength!=N.byteLength||O.byteOffset!=N.byteOffset)return!1;O=O.buffer,N=N.buffer;case _:return!(O.byteLength!=N.byteLength||!U(new e(O),new e(N)));case l:case u:case m:return t(+O,+N);case f:return O.name==N.name&&O.message==N.message;case y:case w:return O==N+"";case h:var V=i;case b:var W=T&s;if(V||(V=a),O.size!=N.size&&!W)return!1;var Y=B.get(O);if(Y)return Y==N;T|=o,B.set(O,N);var Q=r(V(O),V(N),T,j,U,B);return B.delete(O),Q;case x:if(A)return A.call(O)==A.call(N)}return!1}return PM=R,PM}var NM,Oj;function s5(){if(Oj)return NM;Oj=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return NM=n,NM}var OM,Rj;function Aq(){if(Rj)return OM;Rj=1;var n=s5(),e=as();function t(r,i,a){var s=i(r);return e(r)?s:n(s,a(r))}return OM=t,OM}var RM,kj;function Cq(){if(kj)return RM;kj=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}return RM=n,RM}var kM,jj;function Pq(){if(jj)return kM;jj=1;function n(){return[]}return kM=n,kM}var jM,Ij;function Nq(){if(Ij)return jM;Ij=1;var n=Cq(),e=Pq(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),n(i(s),function(o){return r.call(s,o)}))}:e;return jM=a,jM}var IM,Lj;function Oq(){if(Lj)return IM;Lj=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return IM=n,IM}var LM,Dj;function Rq(){if(Dj)return LM;Dj=1;var n=Ac(),e=Cc(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return LM=r,LM}var DM,Uj;function JP(){if(Uj)return DM;Uj=1;var n=Rq(),e=Cc(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n((function(){return arguments})())?n:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return DM=a,DM}var pv={exports:{}},UM,Fj;function kq(){if(Fj)return UM;Fj=1;function n(){return!1}return UM=n,UM}pv.exports;var zj;function o5(){return zj||(zj=1,(function(n,e){var t=pl(),r=kq(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,o=s?t.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;n.exports=u})(pv,pv.exports)),pv.exports}var FM,Bj;function QP(){if(Bj)return FM;Bj=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return FM=t,FM}var zM,Hj;function eN(){if(Hj)return zM;Hj=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return zM=e,zM}var BM,Vj;function jq(){if(Vj)return BM;Vj=1;var n=Ac(),e=eN(),t=Cc(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",y="[object Set]",b="[object String]",w="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",M="[object Float32Array]",E="[object Float64Array]",A="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",T="[object Uint16Array]",j="[object Uint32Array]",U={};U[M]=U[E]=U[A]=U[R]=U[O]=U[N]=U[L]=U[T]=U[j]=!0,U[r]=U[i]=U[x]=U[a]=U[_]=U[s]=U[o]=U[l]=U[u]=U[f]=U[h]=U[m]=U[y]=U[b]=U[w]=!1;function B(V){return t(V)&&e(V.length)&&!!U[n(V)]}return BM=B,BM}var HM,Wj;function l5(){if(Wj)return HM;Wj=1;function n(e){return function(t){return e(t)}}return HM=n,HM}var mv={exports:{}};mv.exports;var Gj;function Iq(){return Gj||(Gj=1,(function(n,e){var t=Cz(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,s=a&&t.process,o=(function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();n.exports=o})(mv,mv.exports)),mv.exports}var VM,$j;function c5(){if($j)return VM;$j=1;var n=jq(),e=l5(),t=Iq(),r=t&&t.isTypedArray,i=r?e(r):n;return VM=i,VM}var WM,qj;function Lq(){if(qj)return WM;qj=1;var n=Oq(),e=JP(),t=as(),r=o5(),i=QP(),a=c5(),s=Object.prototype,o=s.hasOwnProperty;function l(u,f){var h=t(u),m=!h&&e(u),y=!h&&!m&&r(u),b=!h&&!m&&!y&&a(u),w=h||m||y||b,x=w?n(u.length,String):[],_=x.length;for(var M in u)(f||o.call(u,M))&&!(w&&(M=="length"||y&&(M=="offset"||M=="parent")||b&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||i(M,_)))&&x.push(M);return x}return WM=l,WM}var GM,Xj;function Dq(){if(Xj)return GM;Xj=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return GM=e,GM}var $M,Yj;function u5(){if(Yj)return $M;Yj=1;function n(e,t){return function(r){return e(t(r))}}return $M=n,$M}var qM,Kj;function Uq(){if(Kj)return qM;Kj=1;var n=u5(),e=n(Object.keys,Object);return qM=e,qM}var XM,Zj;function Fq(){if(Zj)return XM;Zj=1;var n=Dq(),e=Uq(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return XM=i,XM}var YM,Jj;function qy(){if(Jj)return YM;Jj=1;var n=UP(),e=eN();function t(r){return r!=null&&e(r.length)&&!n(r)}return YM=t,YM}var KM,Qj;function pw(){if(Qj)return KM;Qj=1;var n=Lq(),e=Fq(),t=qy();function r(i){return t(i)?n(i):e(i)}return KM=r,KM}var ZM,eI;function zq(){if(eI)return ZM;eI=1;var n=Aq(),e=Nq(),t=pw();function r(i){return n(i,t,e)}return ZM=r,ZM}var JM,tI;function Bq(){if(tI)return JM;tI=1;var n=zq(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,s,o,l,u,f){var h=o&e,m=n(a),y=m.length,b=n(s),w=b.length;if(y!=w&&!h)return!1;for(var x=y;x--;){var _=m[x];if(!(h?_ in s:r.call(s,_)))return!1}var M=f.get(a),E=f.get(s);if(M&&E)return M==s&&E==a;var A=!0;f.set(a,s),f.set(s,a);for(var R=h;++x<y;){_=m[x];var O=a[_],N=s[_];if(l)var L=h?l(N,O,_,s,a,f):l(O,N,_,a,s,f);if(!(L===void 0?O===N||u(O,N,o,l,f):L)){A=!1;break}R||(R=_=="constructor")}if(A&&!R){var T=a.constructor,j=s.constructor;T!=j&&"constructor"in a&&"constructor"in s&&!(typeof T=="function"&&T instanceof T&&typeof j=="function"&&j instanceof j)&&(A=!1)}return f.delete(a),f.delete(s),A}return JM=i,JM}var QM,nI;function Hq(){if(nI)return QM;nI=1;var n=Bf(),e=pl(),t=n(e,"DataView");return QM=t,QM}var eE,rI;function Vq(){if(rI)return eE;rI=1;var n=Bf(),e=pl(),t=n(e,"Promise");return eE=t,eE}var tE,iI;function d5(){if(iI)return tE;iI=1;var n=Bf(),e=pl(),t=n(e,"Set");return tE=t,tE}var nE,aI;function Wq(){if(aI)return nE;aI=1;var n=Bf(),e=pl(),t=n(e,"WeakMap");return nE=t,nE}var rE,sI;function Gq(){if(sI)return rE;sI=1;var n=Hq(),e=zP(),t=Vq(),r=d5(),i=Wq(),a=Ac(),s=Pz(),o="[object Map]",l="[object Object]",u="[object Promise]",f="[object Set]",h="[object WeakMap]",m="[object DataView]",y=s(n),b=s(e),w=s(t),x=s(r),_=s(i),M=a;return(n&&M(new n(new ArrayBuffer(1)))!=m||e&&M(new e)!=o||t&&M(t.resolve())!=u||r&&M(new r)!=f||i&&M(new i)!=h)&&(M=function(E){var A=a(E),R=A==l?E.constructor:void 0,O=R?s(R):"";if(O)switch(O){case y:return m;case b:return o;case w:return u;case x:return f;case _:return h}return A}),rE=M,rE}var iE,oI;function $q(){if(oI)return iE;oI=1;var n=t5(),e=a5(),t=Tq(),r=Bq(),i=Gq(),a=as(),s=o5(),o=c5(),l=1,u="[object Arguments]",f="[object Array]",h="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function b(w,x,_,M,E,A){var R=a(w),O=a(x),N=R?f:i(w),L=O?f:i(x);N=N==u?h:N,L=L==u?h:L;var T=N==h,j=L==h,U=N==L;if(U&&s(w)){if(!s(x))return!1;R=!0,T=!1}if(U&&!T)return A||(A=new n),R||o(w)?e(w,x,_,M,E,A):t(w,x,N,_,M,E,A);if(!(_&l)){var B=T&&y.call(w,"__wrapped__"),V=j&&y.call(x,"__wrapped__");if(B||V){var W=B?w.value():w,Y=V?x.value():x;return A||(A=new n),E(W,Y,_,M,A)}}return U?(A||(A=new n),r(w,x,_,M,E,A)):!1}return iE=b,iE}var aE,lI;function tN(){if(lI)return aE;lI=1;var n=$q(),e=Cc();function t(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,s,t,o)}return aE=t,aE}var sE,cI;function qq(){if(cI)return sE;cI=1;var n=t5(),e=tN(),t=1,r=2;function i(a,s,o,l){var u=o.length,f=u,h=!l;if(a==null)return!f;for(a=Object(a);u--;){var m=o[u];if(h&&m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++u<f;){m=o[u];var y=m[0],b=a[y],w=m[1];if(h&&m[2]){if(b===void 0&&!(y in a))return!1}else{var x=new n;if(l)var _=l(b,w,y,a,s,x);if(!(_===void 0?e(w,b,t|r,l,x):_))return!1}}return!0}return sE=i,sE}var oE,uI;function f5(){if(uI)return oE;uI=1;var n=Wu();function e(t){return t===t&&!n(t)}return oE=e,oE}var lE,dI;function Xq(){if(dI)return lE;dI=1;var n=f5(),e=pw();function t(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,n(o)]}return i}return lE=t,lE}var cE,fI;function h5(){if(fI)return cE;fI=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return cE=n,cE}var uE,hI;function Yq(){if(hI)return uE;hI=1;var n=qq(),e=Xq(),t=h5();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||n(s,i,a)}}return uE=r,uE}var dE,pI;function Kq(){if(pI)return dE;pI=1;function n(e,t){return e!=null&&t in Object(e)}return dE=n,dE}var fE,mI;function Zq(){if(mI)return fE;mI=1;var n=Rz(),e=JP(),t=as(),r=QP(),i=eN(),a=cw();function s(o,l,u){l=n(l,o);for(var f=-1,h=l.length,m=!1;++f<h;){var y=a(l[f]);if(!(m=o!=null&&u(o,y)))break;o=o[y]}return m||++f!=h?m:(h=o==null?0:o.length,!!h&&i(h)&&r(y,h)&&(t(o)||e(o)))}return fE=s,fE}var hE,gI;function Jq(){if(gI)return hE;gI=1;var n=Kq(),e=Zq();function t(r,i){return r!=null&&e(r,i,n)}return hE=t,hE}var pE,vI;function Qq(){if(vI)return pE;vI=1;var n=tN(),e=kz(),t=Jq(),r=DP(),i=f5(),a=h5(),s=cw(),o=1,l=2;function u(f,h){return r(f)&&i(h)?a(s(f),h):function(m){var y=e(m,f);return y===void 0&&y===h?t(m,f):n(h,y,o|l)}}return pE=u,pE}var mE,yI;function Rm(){if(yI)return mE;yI=1;function n(e){return e}return mE=n,mE}var gE,xI;function eX(){if(xI)return gE;xI=1;function n(e){return function(t){return t?.[e]}}return gE=n,gE}var vE,bI;function tX(){if(bI)return vE;bI=1;var n=VP();function e(t){return function(r){return n(r,t)}}return vE=e,vE}var yE,wI;function nX(){if(wI)return yE;wI=1;var n=eX(),e=tX(),t=DP(),r=cw();function i(a){return t(a)?n(r(a)):e(a)}return yE=i,yE}var xE,_I;function ml(){if(_I)return xE;_I=1;var n=Yq(),e=Qq(),t=Rm(),r=as(),i=nX();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?r(s)?e(s[0],s[1]):n(s):i(s)}return xE=a,xE}var bE,SI;function p5(){if(SI)return bE;SI=1;function n(e,t,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return bE=n,bE}var wE,MI;function rX(){if(MI)return wE;MI=1;function n(e){return e!==e}return wE=n,wE}var _E,EI;function iX(){if(EI)return _E;EI=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return _E=n,_E}var SE,TI;function aX(){if(TI)return SE;TI=1;var n=p5(),e=rX(),t=iX();function r(i,a,s){return a===a?t(i,a,s):n(i,e,s)}return SE=r,SE}var ME,AI;function sX(){if(AI)return ME;AI=1;var n=aX();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return ME=e,ME}var EE,CI;function oX(){if(CI)return EE;CI=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return EE=n,EE}var TE,PI;function lX(){if(PI)return TE;PI=1;function n(){}return TE=n,TE}var AE,NI;function cX(){if(NI)return AE;NI=1;var n=d5(),e=lX(),t=ZP(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return AE=i,AE}var CE,OI;function uX(){if(OI)return CE;OI=1;var n=n5(),e=sX(),t=oX(),r=i5(),i=cX(),a=ZP(),s=200;function o(l,u,f){var h=-1,m=e,y=l.length,b=!0,w=[],x=w;if(f)b=!1,m=t;else if(y>=s){var _=u?null:i(l);if(_)return a(_);b=!1,m=r,x=new n}else x=u?[]:w;e:for(;++h<y;){var M=l[h],E=u?u(M):M;if(M=f||M!==0?M:0,b&&E===E){for(var A=x.length;A--;)if(x[A]===E)continue e;u&&x.push(E),w.push(M)}else m(x,E,f)||(x!==w&&x.push(E),w.push(M))}return w}return CE=o,CE}var PE,RI;function dX(){if(RI)return PE;RI=1;var n=ml(),e=uX();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return PE=t,PE}var fX=dX();const kI=Kn(fX);function m5(n,e,t){return e===!0?kI(n,t):on(e)?kI(n,e):n}function Kp(n){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(n)}var hX=["ref"];function jI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(t),!0).forEach(function(r){mw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pX(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function II(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,v5(r.key),r)}}function mX(n,e,t){return e&&II(n.prototype,e),t&&II(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function gX(n,e,t){return e=Zb(e),vX(n,g5()?Reflect.construct(e,t||[],Zb(n).constructor):e.apply(n,t))}function vX(n,e){if(e&&(Kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yX(n)}function yX(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g5(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!n})()}function Zb(n){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zb(n)}function xX(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&T2(n,e)}function T2(n,e){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T2(n,e)}function mw(n,e,t){return e=v5(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v5(n){var e=bX(n,"string");return Kp(e)=="symbol"?e:e+""}function bX(n,e){if(Kp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function wX(n,e){if(n==null)return{};var t=_X(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _X(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function SX(n){return n.value}function MX(n,e){if(ye.isValidElement(n))return ye.cloneElement(n,e);if(typeof n=="function")return ye.createElement(n,e);e.ref;var t=wX(e,hX);return ye.createElement(KP,t)}var LI=1,ku=(function(n){function e(){var t;pX(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=gX(this,e,[].concat(i)),mw(t,"lastBoundingBox",{width:-1,height:-1}),t}return xX(e,n),mX(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>LI||Math.abs(i.height-this.lastBoundingBox.height)>LI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Jl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,f=i.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();h={left:((u||0)-y.width)/2}}else h=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var b=this.getBBoxSnapshot();m={top:((f||0)-b.height)/2}}else m=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Jl(Jl({},h),m)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,h=Jl(Jl({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return ye.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(y){r.wrapperNode=y}},MX(a,Jl(Jl({},this.props),{},{payload:m5(f,u,SX)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Jl(Jl({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&ft(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(z.PureComponent);mw(ku,"displayName","Legend");mw(ku,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var NE,DI;function EX(){if(DI)return NE;DI=1;var n=Gy(),e=JP(),t=as(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return NE=i,NE}var OE,UI;function y5(){if(UI)return OE;UI=1;var n=s5(),e=EX();function t(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=e),o||(o=[]);++l<u;){var f=r[l];i>0&&a(f)?i>1?t(f,i-1,a,s,o):n(o,f):s||(o[o.length]=f)}return o}return OE=t,OE}var RE,FI;function TX(){if(FI)return RE;FI=1;function n(e){return function(t,r,i){for(var a=-1,s=Object(t),o=i(t),l=o.length;l--;){var u=o[e?l:++a];if(r(s[u],u,s)===!1)break}return t}}return RE=n,RE}var kE,zI;function AX(){if(zI)return kE;zI=1;var n=TX(),e=n();return kE=e,kE}var jE,BI;function x5(){if(BI)return jE;BI=1;var n=AX(),e=pw();function t(r,i){return r&&n(r,i,e)}return jE=t,jE}var IE,HI;function CX(){if(HI)return IE;HI=1;var n=qy();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return IE=e,IE}var LE,VI;function nN(){if(VI)return LE;VI=1;var n=x5(),e=CX(),t=e(n);return LE=t,LE}var DE,WI;function b5(){if(WI)return DE;WI=1;var n=nN(),e=qy();function t(r,i){var a=-1,s=e(r)?Array(r.length):[];return n(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return DE=t,DE}var UE,GI;function PX(){if(GI)return UE;GI=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return UE=n,UE}var FE,$I;function NX(){if($I)return FE;$I=1;var n=Pm();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,s=t===t,o=n(t),l=r!==void 0,u=r===null,f=r===r,h=n(r);if(!u&&!h&&!o&&t>r||o&&l&&f&&!u&&!h||a&&l&&f||!i&&f||!s)return 1;if(!a&&!o&&!h&&t<r||h&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!f)return-1}return 0}return FE=e,FE}var zE,qI;function OX(){if(qI)return zE;qI=1;var n=NX();function e(t,r,i){for(var a=-1,s=t.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var f=n(s[a],o[a]);if(f){if(a>=u)return f;var h=i[a];return f*(h=="desc"?-1:1)}}return t.index-r.index}return zE=e,zE}var BE,XI;function RX(){if(XI)return BE;XI=1;var n=HP(),e=VP(),t=ml(),r=b5(),i=PX(),a=l5(),s=OX(),o=Rm(),l=as();function u(f,h,m){h.length?h=n(h,function(w){return l(w)?function(x){return e(x,w.length===1?w[0]:w)}:w}):h=[o];var y=-1;h=n(h,a(t));var b=r(f,function(w,x,_){var M=n(h,function(E){return E(w)});return{criteria:M,index:++y,value:w}});return i(b,function(w,x){return s(w,x,m)})}return BE=u,BE}var HE,YI;function kX(){if(YI)return HE;YI=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return HE=n,HE}var VE,KI;function jX(){if(KI)return VE;KI=1;var n=kX(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=e(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var f=Array(i+1);++o<i;)f[o]=s[o];return f[i]=a(u),n(r,this,f)}}return VE=t,VE}var WE,ZI;function IX(){if(ZI)return WE;ZI=1;function n(e){return function(){return e}}return WE=n,WE}var GE,JI;function w5(){if(JI)return GE;JI=1;var n=Bf(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return GE=e,GE}var $E,QI;function LX(){if(QI)return $E;QI=1;var n=IX(),e=w5(),t=Rm(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return $E=r,$E}var qE,e3;function DX(){if(e3)return qE;e3=1;var n=800,e=16,t=Date.now;function r(i){var a=0,s=0;return function(){var o=t(),l=e-(o-s);if(s=o,l>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return qE=r,qE}var XE,t3;function UX(){if(t3)return XE;t3=1;var n=LX(),e=DX(),t=e(n);return XE=t,XE}var YE,n3;function FX(){if(n3)return YE;n3=1;var n=Rm(),e=jX(),t=UX();function r(i,a){return t(e(i,a,n),i+"")}return YE=r,YE}var KE,r3;function gw(){if(r3)return KE;r3=1;var n=FP(),e=qy(),t=QP(),r=Wu();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?e(o)&&t(s,o.length):l=="string"&&s in o)?n(o[s],a):!1}return KE=i,KE}var ZE,i3;function zX(){if(i3)return ZE;i3=1;var n=y5(),e=RX(),t=FX(),r=gw(),i=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,n(s,1),[])});return ZE=i,ZE}var BX=zX();const rN=Kn(BX);function Vv(n){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(n)}function A2(){return A2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A2.apply(this,arguments)}function HX(n,e){return $X(n)||GX(n,e)||WX(n,e)||VX()}function VX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WX(n,e){if(n){if(typeof n=="string")return a3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a3(n,e)}}function a3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function GX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function $X(n){if(Array.isArray(n))return n}function s3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function JE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s3(Object(t),!0).forEach(function(r){qX(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qX(n,e,t){return e=XX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XX(n){var e=YX(n,"string");return Vv(e)=="symbol"?e:e+""}function YX(n,e){if(Vv(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KX(n){return Array.isArray(n)&&Ni(n[0])&&Ni(n[1])?n.join(" ~ "):n}var ZX=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,f=e.payload,h=e.formatter,m=e.itemSorter,y=e.wrapperClassName,b=e.labelClassName,w=e.label,x=e.labelFormatter,_=e.accessibilityLayer,M=_===void 0?!1:_,E=function(){if(f&&f.length){var B={padding:0,margin:0},V=(m?rN(f,m):f).map(function(W,Y){if(W.type==="none")return null;var Q=JE({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),se=W.formatter||h||KX,G=W.value,J=W.name,Z=G,X=J;if(se&&Z!=null&&X!=null){var te=se(G,J,W,Y,f);if(Array.isArray(te)){var ce=HX(te,2);Z=ce[0],X=ce[1]}else Z=te}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:Q},Ni(X)?ye.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Ni(X)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},Z),ye.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:B},V)}return null},A=JE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=JE({margin:0},u),O=!yn(w),N=O?w:"",L=Cn("recharts-default-tooltip",y),T=Cn("recharts-tooltip-label",b);O&&x&&f!==void 0&&f!==null&&(N=x(w,f));var j=M?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",A2({className:L,style:A},j),ye.createElement("p",{className:T,style:R},ye.isValidElement(N)?N:"".concat(N)),E())};function Wv(n){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(n)}function dx(n,e,t){return e=JX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JX(n){var e=QX(n,"string");return Wv(e)=="symbol"?e:e+""}function QX(n,e){if(Wv(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ug="recharts-tooltip-wrapper",eY={visibility:"hidden"};function tY(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return Cn(Ug,dx(dx(dx(dx({},"".concat(Ug,"-right"),ft(t)&&e&&ft(e.x)&&t>=e.x),"".concat(Ug,"-left"),ft(t)&&e&&ft(e.x)&&t<e.x),"".concat(Ug,"-bottom"),ft(r)&&e&&ft(e.y)&&r>=e.y),"".concat(Ug,"-top"),ft(r)&&e&&ft(e.y)&&r<e.y))}function o3(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,s=n.reverseDirection,o=n.tooltipDimension,l=n.viewBox,u=n.viewBoxDimension;if(a&&ft(a[r]))return a[r];var f=t[r]-o-i,h=t[r]+i;if(e[r])return s[r]?f:h;if(s[r]){var m=f,y=l[r];return m<y?Math.max(h,l[r]):Math.max(f,l[r])}var b=h+o,w=l[r]+u;return b>w?Math.max(f,l[r]):Math.max(h,l[r])}function nY(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function rY(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,s=n.tooltipBox,o=n.useTranslate3d,l=n.viewBox,u,f,h;return s.height>0&&s.width>0&&t?(f=o3({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=o3({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=nY({translateX:f,translateY:h,useTranslate3d:o})):u=eY,{cssProperties:u,cssClasses:tY({translateX:f,translateY:h,coordinate:t})}}function Zp(n){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(n)}function l3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function c3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(t),!0).forEach(function(r){P2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aY(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,S5(r.key),r)}}function sY(n,e,t){return e&&aY(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function oY(n,e,t){return e=Jb(e),lY(n,_5()?Reflect.construct(e,t||[],Jb(n).constructor):e.apply(n,t))}function lY(n,e){if(e&&(Zp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cY(n)}function cY(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _5(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_5=function(){return!!n})()}function Jb(n){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jb(n)}function uY(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&C2(n,e)}function C2(n,e){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C2(n,e)}function P2(n,e,t){return e=S5(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S5(n){var e=dY(n,"string");return Zp(e)=="symbol"?e:e+""}function dY(n,e){if(Zp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var u3=1,fY=(function(n){function e(){var t;iY(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=oY(this,e,[].concat(i)),P2(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),P2(t,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,f;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(f=t.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),t}return uY(e,n),sY(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>u3||Math.abs(r.height-this.state.lastBoundingBox.height)>u3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,f=i.coordinate,h=i.hasPayload,m=i.isAnimationActive,y=i.offset,b=i.position,w=i.reverseDirection,x=i.useTranslate3d,_=i.viewBox,M=i.wrapperStyle,E=rY({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:y,position:b,reverseDirection:w,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:_}),A=E.cssClasses,R=E.cssProperties,O=c3(c3({transition:m&&a?"transform ".concat(o,"ms ").concat(l):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},M);return ye.createElement("div",{tabIndex:-1,className:A,style:O,ref:function(L){r.wrapperNode=L}},u)}}])})(z.PureComponent),hY=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Hf={isSsr:hY()};function Jp(n){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(n)}function d3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d3(Object(t),!0).forEach(function(r){iN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mY(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,E5(r.key),r)}}function gY(n,e,t){return e&&mY(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function vY(n,e,t){return e=Qb(e),yY(n,M5()?Reflect.construct(e,t||[],Qb(n).constructor):e.apply(n,t))}function yY(n,e){if(e&&(Jp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xY(n)}function xY(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M5(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M5=function(){return!!n})()}function Qb(n){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qb(n)}function bY(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&N2(n,e)}function N2(n,e){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N2(n,e)}function iN(n,e,t){return e=E5(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E5(n){var e=wY(n,"string");return Jp(e)=="symbol"?e:e+""}function wY(n,e){if(Jp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function _Y(n){return n.dataKey}function SY(n,e){return ye.isValidElement(n)?ye.cloneElement(n,e):typeof n=="function"?ye.createElement(n,e):ye.createElement(ZX,e)}var es=(function(n){function e(){return pY(this,e),vY(this,e,arguments)}return bY(e,n),gY(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,f=i.coordinate,h=i.filterNull,m=i.isAnimationActive,y=i.offset,b=i.payload,w=i.payloadUniqBy,x=i.position,_=i.reverseDirection,M=i.useTranslate3d,E=i.viewBox,A=i.wrapperStyle,R=b??[];h&&R.length&&(R=m5(b.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),w,_Y));var O=R.length>0;return ye.createElement(fY,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:m,active:a,coordinate:f,hasPayload:O,offset:y,position:x,reverseDirection:_,useTranslate3d:M,viewBox:E,wrapperStyle:A},SY(u,f3(f3({},this.props),{},{payload:R})))}}])})(z.PureComponent);iN(es,"displayName","Tooltip");iN(es,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Hf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var QE,h3;function MY(){if(h3)return QE;h3=1;var n=pl(),e=function(){return n.Date.now()};return QE=e,QE}var eT,p3;function EY(){if(p3)return eT;p3=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return eT=e,eT}var tT,m3;function TY(){if(m3)return tT;m3=1;var n=EY(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return tT=t,tT}var nT,g3;function T5(){if(g3)return nT;g3=1;var n=TY(),e=Wu(),t=Pm(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return r;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=n(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return nT=l,nT}var rT,v3;function AY(){if(v3)return rT;v3=1;var n=Wu(),e=MY(),t=T5(),r="Expected a function",i=Math.max,a=Math.min;function s(o,l,u){var f,h,m,y,b,w,x=0,_=!1,M=!1,E=!0;if(typeof o!="function")throw new TypeError(r);l=t(l)||0,n(u)&&(_=!!u.leading,M="maxWait"in u,m=M?i(t(u.maxWait)||0,l):m,E="trailing"in u?!!u.trailing:E);function A(V){var W=f,Y=h;return f=h=void 0,x=V,y=o.apply(Y,W),y}function R(V){return x=V,b=setTimeout(L,l),_?A(V):y}function O(V){var W=V-w,Y=V-x,Q=l-W;return M?a(Q,m-Y):Q}function N(V){var W=V-w,Y=V-x;return w===void 0||W>=l||W<0||M&&Y>=m}function L(){var V=e();if(N(V))return T(V);b=setTimeout(L,O(V))}function T(V){return b=void 0,E&&f?A(V):(f=h=void 0,y)}function j(){b!==void 0&&clearTimeout(b),x=0,f=w=h=b=void 0}function U(){return b===void 0?y:T(e())}function B(){var V=e(),W=N(V);if(f=arguments,h=this,w=V,W){if(b===void 0)return R(w);if(M)return clearTimeout(b),b=setTimeout(L,l),A(w)}return b===void 0&&(b=setTimeout(L,l)),y}return B.cancel=j,B.flush=U,B}return rT=s,rT}var iT,y3;function CY(){if(y3)return iT;y3=1;var n=AY(),e=Wu(),t="Expected a function";function r(i,a,s){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(t);return e(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),n(i,a,{leading:o,maxWait:a,trailing:l})}return iT=r,iT}var PY=CY();const A5=Kn(PY);function Gv(n){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(n)}function x3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(t),!0).forEach(function(r){NY(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NY(n,e,t){return e=OY(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OY(n){var e=RY(n,"string");return Gv(e)=="symbol"?e:e+""}function RY(n,e){if(Gv(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kY(n,e){return DY(n)||LY(n,e)||IY(n,e)||jY()}function jY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IY(n,e){if(n){if(typeof n=="string")return b3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b3(n,e)}}function b3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function LY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function DY(n){if(Array.isArray(n))return n}var xv=z.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,s=a===void 0?"100%":a,o=n.height,l=o===void 0?"100%":o,u=n.minWidth,f=u===void 0?0:u,h=n.minHeight,m=n.maxHeight,y=n.children,b=n.debounce,w=b===void 0?0:b,x=n.id,_=n.className,M=n.onResize,E=n.style,A=E===void 0?{}:E,R=z.useRef(null),O=z.useRef();O.current=M,z.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var N=z.useState({containerWidth:i.width,containerHeight:i.height}),L=kY(N,2),T=L[0],j=L[1],U=z.useCallback(function(V,W){j(function(Y){var Q=Math.round(V),se=Math.round(W);return Y.containerWidth===Q&&Y.containerHeight===se?Y:{containerWidth:Q,containerHeight:se}})},[]);z.useEffect(function(){var V=function(J){var Z,X=J[0].contentRect,te=X.width,ce=X.height;U(te,ce),(Z=O.current)===null||Z===void 0||Z.call(O,te,ce)};w>0&&(V=A5(V,w,{trailing:!0,leading:!1}));var W=new ResizeObserver(V),Y=R.current.getBoundingClientRect(),Q=Y.width,se=Y.height;return U(Q,se),W.observe(R.current),function(){W.disconnect()}},[U,w]);var B=z.useMemo(function(){var V=T.containerWidth,W=T.containerHeight;if(V<0||W<0)return null;Do(lf(s)||lf(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Do(!t||t>0,"The aspect(%s) must be greater than zero.",t);var Y=lf(s)?V:s,Q=lf(l)?W:l;t&&t>0&&(Y?Q=Y/t:Q&&(Y=Q*t),m&&Q>m&&(Q=m)),Do(Y>0||Q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,Q,s,l,f,h,t);var se=!Array.isArray(y)&&hc(y.type).endsWith("Chart");return ye.Children.map(y,function(G){return ye.isValidElement(G)?z.cloneElement(G,fx({width:Y,height:Q},se?{style:fx({height:"100%",width:"100%",maxHeight:Q,maxWidth:Y},G.props.style)}:{})):G})},[t,y,l,m,h,f,T,s]);return ye.createElement("div",{id:x?"".concat(x):void 0,className:Cn("recharts-responsive-container",_),style:fx(fx({},A),{},{width:s,height:l,minWidth:f,minHeight:h,maxHeight:m}),ref:R},B)}),Qp=function(e){return null};Qp.displayName="Cell";function $v(n){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(n)}function w3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function O2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w3(Object(t),!0).forEach(function(r){UY(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UY(n,e,t){return e=FY(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FY(n){var e=zY(n,"string");return $v(e)=="symbol"?e:e+""}function zY(n,e){if($v(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Kh={widthCache:{},cacheCount:0},BY=2e3,HY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_3="recharts_measurement_span";function VY(n){var e=O2({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var bv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Hf.isSsr)return{width:0,height:0};var r=VY(t),i=JSON.stringify({text:e,copyStyle:r});if(Kh.widthCache[i])return Kh.widthCache[i];try{var a=document.getElementById(_3);a||(a=document.createElement("span"),a.setAttribute("id",_3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=O2(O2({},HY),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Kh.widthCache[i]=l,++Kh.cacheCount>BY&&(Kh.cacheCount=0,Kh.widthCache={}),l}catch{return{width:0,height:0}}},WY=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function qv(n){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(n)}function e1(n,e){return XY(n)||qY(n,e)||$Y(n,e)||GY()}function GY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Y(n,e){if(n){if(typeof n=="string")return S3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S3(n,e)}}function S3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function qY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function XY(n){if(Array.isArray(n))return n}function YY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function M3(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ZY(r.key),r)}}function KY(n,e,t){return e&&M3(n.prototype,e),t&&M3(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ZY(n){var e=JY(n,"string");return qv(e)=="symbol"?e:e+""}function JY(n,e){if(qv(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var E3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,eK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,C5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},tK=Object.keys(C5),Cp="NaN";function nK(n,e){return n*C5[e]}var hx=(function(){function n(e,t){YY(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!QY.test(t)&&(this.num=NaN,this.unit=""),tK.includes(t)&&(this.num=nK(e,t),this.unit="px")}return KY(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=eK.exec(t))!==null&&r!==void 0?r:[],a=e1(i,3),s=a[1],o=a[2];return new n(parseFloat(s),o??"")}}])})();function P5(n){if(n.includes(Cp))return Cp;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=E3.exec(e))!==null&&t!==void 0?t:[],i=e1(r,4),a=i[1],s=i[2],o=i[3],l=hx.parse(a??""),u=hx.parse(o??""),f=s==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Cp;e=e.replace(E3,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,m=(h=T3.exec(e))!==null&&h!==void 0?h:[],y=e1(m,4),b=y[1],w=y[2],x=y[3],_=hx.parse(b??""),M=hx.parse(x??""),E=w==="+"?_.add(M):_.subtract(M);if(E.isNaN())return Cp;e=e.replace(T3,E.toString())}return e}var A3=/\(([^()]*)\)/;function rK(n){for(var e=n;e.includes("(");){var t=A3.exec(e),r=e1(t,2),i=r[1];e=e.replace(A3,P5(i))}return e}function iK(n){var e=n.replace(/\s+/g,"");return e=rK(e),e=P5(e),e}function aK(n){try{return iK(n)}catch{return Cp}}function aT(n){var e=aK(n.slice(5,-1));return e===Cp?"":e}var sK=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],oK=["dx","dy","angle","className","breakAll"];function R2(){return R2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},R2.apply(this,arguments)}function C3(n,e){if(n==null)return{};var t=lK(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function P3(n,e){return fK(n)||dK(n,e)||uK(n,e)||cK()}function cK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uK(n,e){if(n){if(typeof n=="string")return N3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N3(n,e)}}function N3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function dK(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function fK(n){if(Array.isArray(n))return n}var N5=/[ \f\n\r\t\v\u2028\u2029]+/,O5=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];yn(t)||(r?a=t.toString().split(""):a=t.toString().split(N5));var s=a.map(function(l){return{word:l,width:bv(l,i).width}}),o=r?0:bv("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},hK=function(e,t,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,f=ft(s),h=o,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(Q,se){var G=se.word,J=se.width,Z=Q[Q.length-1];if(Z&&(i==null||a||Z.width+J+r<Number(i)))Z.words.push(G),Z.width+=J+r;else{var X={words:[G],width:J};Q.push(X)}return Q},[])},y=m(t),b=function(Y){return Y.reduce(function(Q,se){return Q.width>se.width?Q:se})};if(!f)return y;for(var w="",x=function(Y){var Q=h.slice(0,Y),se=O5({breakAll:u,style:l,children:Q+w}).wordsWithComputedWidth,G=m(se),J=G.length>s||b(G).width>Number(i);return[J,G]},_=0,M=h.length-1,E=0,A;_<=M&&E<=h.length-1;){var R=Math.floor((_+M)/2),O=R-1,N=x(O),L=P3(N,2),T=L[0],j=L[1],U=x(R),B=P3(U,1),V=B[0];if(!T&&!V&&(_=R+1),T&&V&&(M=R-1),!T&&V){A=j;break}E++}return A||y},O3=function(e){var t=yn(e)?[]:e.toString().split(N5);return[{words:t}]},pK=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((t||r)&&!Hf.isSsr){var l,u,f=O5({breakAll:s,children:i,style:a});if(f){var h=f.wordsWithComputedWidth,m=f.spaceWidth;l=h,u=m}else return O3(i);return hK({breakAll:s,children:i,maxLines:o,style:a},l,u,t,r)}return O3(i)},R3="#808080",Of=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,f=e.scaleToFit,h=f===void 0?!1:f,m=e.textAnchor,y=m===void 0?"start":m,b=e.verticalAnchor,w=b===void 0?"end":b,x=e.fill,_=x===void 0?R3:x,M=C3(e,sK),E=z.useMemo(function(){return pK({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:h,style:M.style,width:M.width})},[M.breakAll,M.children,M.maxLines,h,M.style,M.width]),A=M.dx,R=M.dy,O=M.angle,N=M.className,L=M.breakAll,T=C3(M,oK);if(!Ni(r)||!Ni(a))return null;var j=r+(ft(A)?A:0),U=a+(ft(R)?R:0),B;switch(w){case"start":B=aT("calc(".concat(u,")"));break;case"middle":B=aT("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:B=aT("calc(".concat(E.length-1," * -").concat(o,")"));break}var V=[];if(h){var W=E[0].width,Y=M.width;V.push("scale(".concat((ft(Y)?Y/W:1)/W,")"))}return O&&V.push("rotate(".concat(O,", ").concat(j,", ").concat(U,")")),V.length&&(T.transform=V.join(" ")),ye.createElement("text",R2({},en(T,!0),{x:j,y:U,className:Cn("recharts-text",N),textAnchor:y,fill:_.includes("url")?R3:_}),E.map(function(Q,se){var G=Q.words.join(L?"":" ");return ye.createElement("tspan",{x:j,dy:se===0?B:o,key:"".concat(G,"-").concat(se)},G)}))};function ju(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function mK(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function aN(n){let e,t,r;n.length!==2?(e=ju,t=(o,l)=>ju(n(o),l),r=(o,l)=>n(o)-l):(e=n===ju||n===mK?n:gK,t=n,r=n);function i(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;t(o[h],l)<0?u=h+1:f=h}while(u<f)}return u}function a(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;t(o[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,l,u=0,f=o.length){const h=i(o,l,u,f-1);return h>u&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function gK(){return 0}function R5(n){return n===null?NaN:+n}function*vK(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const yK=aN(ju),Xy=yK.right;aN(R5).center;class k3 extends Map{constructor(e,t=wK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(j3(this,e))}has(e){return super.has(j3(this,e))}set(e,t){return super.set(xK(this,e),t)}delete(e){return super.delete(bK(this,e))}}function j3({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function xK({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function bK({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function wK(n){return n!==null&&typeof n=="object"?n.valueOf():n}function _K(n=ju){if(n===ju)return k5;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function k5(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const SK=Math.sqrt(50),MK=Math.sqrt(10),EK=Math.sqrt(2);function t1(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=SK?10:a>=MK?5:a>=EK?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(n*u),l=Math.round(e*u),o/u<n&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(n/u),l=Math.round(e/u),o*u<n&&++o,l*u>e&&--l),l<o&&.5<=t&&t<2?t1(n,e,t*2):[o,l,u]}function k2(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?t1(e,n,t):t1(n,e,t);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function j2(n,e,t){return e=+e,n=+n,t=+t,t1(n,e,t)[2]}function I2(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?j2(e,n,t):j2(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function I3(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function L3(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function j5(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?k5:_K(i);r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,f=Math.log(l),h=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*h*(l-h)/l)*(u-l/2<0?-1:1),y=Math.max(t,Math.floor(e-u*h/l+m)),b=Math.min(r,Math.floor(e+(l-u)*h/l+m));j5(n,e,y,b,i)}const a=n[e];let s=t,o=r;for(Fg(n,t,e),i(n[r],a)>0&&Fg(n,t,r);s<o;){for(Fg(n,s,o),++s,--o;i(n[s],a)<0;)++s;for(;i(n[o],a)>0;)--o}i(n[t],a)===0?Fg(n,t,o):(++o,Fg(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}return n}function Fg(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function TK(n,e,t){if(n=Float64Array.from(vK(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return L3(n);if(e>=1)return I3(n);var r,i=(r-1)*e,a=Math.floor(i),s=I3(j5(n,a).subarray(0,a+1)),o=L3(n.subarray(a+1));return s+(o-s)*(i-a)}}function AK(n,e,t=R5){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),s=+t(n[a],a,n),o=+t(n[a+1],a+1,n);return s+(o-s)*(i-a)}}function CK(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function eo(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Pc(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const L2=Symbol("implicit");function sN(){var n=new k3,e=[],t=[],r=L2;function i(a){let s=n.get(a);if(s===void 0){if(r!==L2)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new k3;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sN(e,t).unknown(r)},eo.apply(i,arguments),i}function Xv(){var n=sN().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,l=0,u=0,f=.5;delete n.unknown;function h(){var m=e().length,y=i<r,b=y?i:r,w=y?r:i;a=(w-b)/Math.max(1,m-l+u*2),o&&(a=Math.floor(a)),b+=(w-b-a*(m-l))*f,s=a*(1-l),o&&(b=Math.round(b),s=Math.round(s));var x=CK(m).map(function(_){return b+a*_});return t(y?x.reverse():x)}return n.domain=function(m){return arguments.length?(e(m),h()):e()},n.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},n.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,o=!0,h()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(m){return arguments.length?(o=!!m,h()):o},n.padding=function(m){return arguments.length?(l=Math.min(1,u=+m),h()):l},n.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},n.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},n.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),h()):f},n.copy=function(){return Xv(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(f)},eo.apply(h(),arguments)}function I5(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return I5(e())},n}function wv(){return I5(Xv.apply(null,arguments).paddingInner(1))}function oN(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function L5(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Yy(){}var Yv=.7,n1=1/Yv,Bp="\\s*([+-]?\\d+)\\s*",Kv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PK=/^#([0-9a-f]{3,8})$/,NK=new RegExp(`^rgb\\(${Bp},${Bp},${Bp}\\)$`),OK=new RegExp(`^rgb\\(${sl},${sl},${sl}\\)$`),RK=new RegExp(`^rgba\\(${Bp},${Bp},${Bp},${Kv}\\)$`),kK=new RegExp(`^rgba\\(${sl},${sl},${sl},${Kv}\\)$`),jK=new RegExp(`^hsl\\(${Kv},${sl},${sl}\\)$`),IK=new RegExp(`^hsla\\(${Kv},${sl},${sl},${Kv}\\)$`),D3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oN(Yy,Zv,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:U3,formatHex:U3,formatHex8:LK,formatHsl:DK,formatRgb:F3,toString:F3});function U3(){return this.rgb().formatHex()}function LK(){return this.rgb().formatHex8()}function DK(){return D5(this).formatHsl()}function F3(){return this.rgb().formatRgb()}function Zv(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=PK.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?z3(e):t===3?new rs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?px(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?px(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NK.exec(n))?new rs(e[1],e[2],e[3],1):(e=OK.exec(n))?new rs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=RK.exec(n))?px(e[1],e[2],e[3],e[4]):(e=kK.exec(n))?px(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jK.exec(n))?V3(e[1],e[2]/100,e[3]/100,1):(e=IK.exec(n))?V3(e[1],e[2]/100,e[3]/100,e[4]):D3.hasOwnProperty(n)?z3(D3[n]):n==="transparent"?new rs(NaN,NaN,NaN,0):null}function z3(n){return new rs(n>>16&255,n>>8&255,n&255,1)}function px(n,e,t,r){return r<=0&&(n=e=t=NaN),new rs(n,e,t,r)}function UK(n){return n instanceof Yy||(n=Zv(n)),n?(n=n.rgb(),new rs(n.r,n.g,n.b,n.opacity)):new rs}function D2(n,e,t,r){return arguments.length===1?UK(n):new rs(n,e,t,r??1)}function rs(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}oN(rs,D2,L5(Yy,{brighter(n){return n=n==null?n1:Math.pow(n1,n),new rs(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Yv:Math.pow(Yv,n),new rs(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new rs(xf(this.r),xf(this.g),xf(this.b),r1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B3,formatHex:B3,formatHex8:FK,formatRgb:H3,toString:H3}));function B3(){return`#${cf(this.r)}${cf(this.g)}${cf(this.b)}`}function FK(){return`#${cf(this.r)}${cf(this.g)}${cf(this.b)}${cf((isNaN(this.opacity)?1:this.opacity)*255)}`}function H3(){const n=r1(this.opacity);return`${n===1?"rgb(":"rgba("}${xf(this.r)}, ${xf(this.g)}, ${xf(this.b)}${n===1?")":`, ${n})`}`}function r1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function xf(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function cf(n){return n=xf(n),(n<16?"0":"")+n.toString(16)}function V3(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new jo(n,e,t,r)}function D5(n){if(n instanceof jo)return new jo(n.h,n.s,n.l,n.opacity);if(n instanceof Yy||(n=Zv(n)),!n)return new jo;if(n instanceof jo)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new jo(s,o,l,n.opacity)}function zK(n,e,t,r){return arguments.length===1?D5(n):new jo(n,e,t,r??1)}function jo(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}oN(jo,zK,L5(Yy,{brighter(n){return n=n==null?n1:Math.pow(n1,n),new jo(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Yv:Math.pow(Yv,n),new jo(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new rs(sT(n>=240?n-240:n+120,i,r),sT(n,i,r),sT(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new jo(W3(this.h),mx(this.s),mx(this.l),r1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=r1(this.opacity);return`${n===1?"hsl(":"hsla("}${W3(this.h)}, ${mx(this.s)*100}%, ${mx(this.l)*100}%${n===1?")":`, ${n})`}`}}));function W3(n){return n=(n||0)%360,n<0?n+360:n}function mx(n){return Math.max(0,Math.min(1,n||0))}function sT(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const lN=n=>()=>n;function BK(n,e){return function(t){return n+t*e}}function HK(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function VK(n){return(n=+n)==1?U5:function(e,t){return t-e?HK(e,t,n):lN(isNaN(e)?t:e)}}function U5(n,e){var t=e-n;return t?BK(n,t):lN(isNaN(n)?e:n)}const G3=(function n(e){var t=VK(e);function r(i,a){var s=t((i=D2(i)).r,(a=D2(a)).r),o=t(i.g,a.g),l=t(i.b,a.b),u=U5(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=n,r})(1);function WK(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function GK(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $K(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=km(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function qK(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function i1(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function XK(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=km(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var U2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oT=new RegExp(U2.source,"g");function YK(n){return function(){return n}}function KK(n){return function(e){return n(e)+""}}function ZK(n,e){var t=U2.lastIndex=oT.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(n=n+"",e=e+"";(r=U2.exec(n))&&(i=oT.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:i1(r,i)})),t=oT.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?KK(l[0].x):YK(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(u);return o.join("")})}function km(n,e){var t=typeof e,r;return e==null||t==="boolean"?lN(e):(t==="number"?i1:t==="string"?(r=Zv(e))?(e=r,G3):ZK:e instanceof Zv?G3:e instanceof Date?qK:GK(e)?WK:Array.isArray(e)?$K:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?XK:i1)(n,e)}function cN(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function JK(n,e){e===void 0&&(e=n,n=km);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function QK(n){return function(){return n}}function a1(n){return+n}var $3=[0,1];function Ia(n){return n}function F2(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:QK(isNaN(e)?NaN:.5)}function eZ(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function tZ(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=F2(i,r),a=t(s,a)):(r=F2(r,i),a=t(a,s)),function(o){return a(r(o))}}function nZ(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=F2(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var l=Xy(n,o,1,r)-1;return a[l](i[l](o))}}function Ky(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function vw(){var n=$3,e=$3,t=km,r,i,a,s=Ia,o,l,u;function f(){var m=Math.min(n.length,e.length);return s!==Ia&&(s=eZ(n[0],n[m-1])),o=m>2?nZ:tZ,l=u=null,h}function h(m){return m==null||isNaN(m=+m)?a:(l||(l=o(n.map(r),e,t)))(r(s(m)))}return h.invert=function(m){return s(i((u||(u=o(e,n.map(r),i1)))(m)))},h.domain=function(m){return arguments.length?(n=Array.from(m,a1),f()):n.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),t=cN,f()},h.clamp=function(m){return arguments.length?(s=m?!0:Ia,f()):s!==Ia},h.interpolate=function(m){return arguments.length?(t=m,f()):t},h.unknown=function(m){return arguments.length?(a=m,h):a},function(m,y){return r=m,i=y,f()}}function uN(){return vw()(Ia,Ia)}function rZ(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function s1(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function em(n){return n=s1(Math.abs(n)),n?n[1]:NaN}function iZ(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(t.substring(i-=o,i+o)),!((l+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function aZ(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var sZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(n){if(!(e=sZ.exec(n)))throw new Error("invalid format: "+n);var e;return new dN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Jv.prototype=dN.prototype;function dN(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}dN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oZ(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var F5;function lZ(n,e){var t=s1(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(F5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+s1(n,Math.max(0,e+a-1))[0]}function q3(n,e){var t=s1(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const X3={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:rZ,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>q3(n*100,e),r:q3,s:lZ,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Y3(n){return n}var K3=Array.prototype.map,Z3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cZ(n){var e=n.grouping===void 0||n.thousands===void 0?Y3:iZ(K3.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?Y3:aZ(K3.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function u(h){h=Jv(h);var m=h.fill,y=h.align,b=h.sign,w=h.symbol,x=h.zero,_=h.width,M=h.comma,E=h.precision,A=h.trim,R=h.type;R==="n"?(M=!0,R="g"):X3[R]||(E===void 0&&(E=12),A=!0,R="g"),(x||m==="0"&&y==="=")&&(x=!0,m="0",y="=");var O=w==="$"?t:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",N=w==="$"?r:/[%p]/.test(R)?s:"",L=X3[R],T=/[defgprs%]/.test(R);E=E===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function j(U){var B=O,V=N,W,Y,Q;if(R==="c")V=L(U)+V,U="";else{U=+U;var se=U<0||1/U<0;if(U=isNaN(U)?l:L(Math.abs(U),E),A&&(U=oZ(U)),se&&+U==0&&b!=="+"&&(se=!1),B=(se?b==="("?b:o:b==="-"||b==="("?"":b)+B,V=(R==="s"?Z3[8+F5/3]:"")+V+(se&&b==="("?")":""),T){for(W=-1,Y=U.length;++W<Y;)if(Q=U.charCodeAt(W),48>Q||Q>57){V=(Q===46?i+U.slice(W+1):U.slice(W))+V,U=U.slice(0,W);break}}}M&&!x&&(U=e(U,1/0));var G=B.length+U.length+V.length,J=G<_?new Array(_-G+1).join(m):"";switch(M&&x&&(U=e(J+U,J.length?_-V.length:1/0),J=""),y){case"<":U=B+U+V+J;break;case"=":U=B+J+U+V;break;case"^":U=J.slice(0,G=J.length>>1)+B+U+V+J.slice(G);break;default:U=J+B+U+V;break}return a(U)}return j.toString=function(){return h+""},j}function f(h,m){var y=u((h=Jv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(em(m)/3)))*3,w=Math.pow(10,-b),x=Z3[8+b/3];return function(_){return y(w*_)+x}}return{format:u,formatPrefix:f}}var gx,fN,z5;uZ({thousands:",",grouping:[3],currency:["$",""]});function uZ(n){return gx=cZ(n),fN=gx.format,z5=gx.formatPrefix,gx}function dZ(n){return Math.max(0,-em(Math.abs(n)))}function fZ(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(em(e)/3)))*3-em(Math.abs(n)))}function hZ(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,em(e)-em(n))+1}function B5(n,e,t,r){var i=I2(n,e,t),a;switch(r=Jv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=fZ(i,s))&&(r.precision=a),z5(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=hZ(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=dZ(i))&&(r.precision=a-(r.type==="%")*2);break}}return fN(r)}function Gu(n){var e=n.domain;return n.ticks=function(t){var r=e();return k2(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return B5(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=j2(s,o,t),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return n},n}function o1(){var n=uN();return n.copy=function(){return Ky(n,o1())},eo.apply(n,arguments),Gu(n)}function H5(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,a1),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return H5(n).unknown(e)},n=arguments.length?Array.from(n,a1):[0,1],Gu(t)}function V5(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function J3(n){return Math.log(n)}function Q3(n){return Math.exp(n)}function pZ(n){return-Math.log(-n)}function mZ(n){return-Math.exp(-n)}function gZ(n){return isFinite(n)?+("1e"+n):n<0?0:n}function vZ(n){return n===10?gZ:n===Math.E?Math.exp:e=>Math.pow(n,e)}function yZ(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function eL(n){return(e,t)=>-n(-e,t)}function hN(n){const e=n(J3,Q3),t=e.domain;let r=10,i,a;function s(){return i=yZ(r),a=vZ(r),t()[0]<0?(i=eL(i),a=eL(a),n(pZ,mZ)):n(J3,Q3),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const l=t();let u=l[0],f=l[l.length-1];const h=f<u;h&&([u,f]=[f,u]);let m=i(u),y=i(f),b,w;const x=o==null?10:+o;let _=[];if(!(r%1)&&y-m<x){if(m=Math.floor(m),y=Math.ceil(y),u>0){for(;m<=y;++m)for(b=1;b<r;++b)if(w=m<0?b/a(-m):b*a(m),!(w<u)){if(w>f)break;_.push(w)}}else for(;m<=y;++m)for(b=r-1;b>=1;--b)if(w=m>0?b/a(-m):b*a(m),!(w<u)){if(w>f)break;_.push(w)}_.length*2<x&&(_=k2(u,f,x))}else _=k2(m,y,Math.min(y-m,x)).map(a);return h?_.reverse():_},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Jv(l)).precision==null&&(l.trim=!0),l=fN(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?l(f):""}},e.nice=()=>t(V5(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function W5(){const n=hN(vw()).domain([1,10]);return n.copy=()=>Ky(n,W5()).base(n.base()),eo.apply(n,arguments),n}function tL(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function nL(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function pN(n){var e=1,t=n(tL(e),nL(e));return t.constant=function(r){return arguments.length?n(tL(e=+r),nL(e)):e},Gu(t)}function G5(){var n=pN(vw());return n.copy=function(){return Ky(n,G5()).constant(n.constant())},eo.apply(n,arguments)}function rL(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function xZ(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function bZ(n){return n<0?-n*n:n*n}function mN(n){var e=n(Ia,Ia),t=1;function r(){return t===1?n(Ia,Ia):t===.5?n(xZ,bZ):n(rL(t),rL(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Gu(e)}function gN(){var n=mN(vw());return n.copy=function(){return Ky(n,gN()).exponent(n.exponent())},eo.apply(n,arguments),n}function wZ(){return gN.apply(null,arguments).exponent(.5)}function iL(n){return Math.sign(n)*n*n}function _Z(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function $5(){var n=uN(),e=[0,1],t=!1,r;function i(a){var s=_Z(n(a));return isNaN(s)?r:t?Math.round(s):s}return i.invert=function(a){return n.invert(iL(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,a1)).map(iL)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return $5(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},eo.apply(i,arguments),Gu(i)}function q5(){var n=[],e=[],t=[],r;function i(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=AK(n,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Xy(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:n[0],o<t.length?t[o]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let o of s)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(ju),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return q5().domain(n).range(e).unknown(r)},eo.apply(a,arguments)}function X5(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[Xy(r,l,0,t)]:a}function o(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return s}return s.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,o()):[n,e]},s.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[n,r[0]]:u>=t?[r[t-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return X5().domain([n,e]).range(i).unknown(a)},eo.apply(Gu(s),arguments)}function Y5(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[Xy(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return Y5().domain(n).range(e).unknown(t)},eo.apply(i,arguments)}const lT=new Date,cT=new Date;function ji(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),n(a);while(u<a&&a<s);return l},i.filter=a=>ji(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(lT.setTime(+a),cT.setTime(+s),n(lT),n(cT),Math.floor(t(lT,cT))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const l1=ji(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);l1.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?ji(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):l1);l1.range;const lc=1e3,Zs=lc*60,cc=Zs*60,yc=cc*24,vN=yc*7,aL=yc*30,uT=yc*365,uf=ji(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*lc)},(n,e)=>(e-n)/lc,n=>n.getUTCSeconds());uf.range;const yN=ji(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*lc)},(n,e)=>{n.setTime(+n+e*Zs)},(n,e)=>(e-n)/Zs,n=>n.getMinutes());yN.range;const xN=ji(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Zs)},(n,e)=>(e-n)/Zs,n=>n.getUTCMinutes());xN.range;const bN=ji(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*lc-n.getMinutes()*Zs)},(n,e)=>{n.setTime(+n+e*cc)},(n,e)=>(e-n)/cc,n=>n.getHours());bN.range;const wN=ji(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*cc)},(n,e)=>(e-n)/cc,n=>n.getUTCHours());wN.range;const Zy=ji(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Zs)/yc,n=>n.getDate()-1);Zy.range;const yw=ji(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yc,n=>n.getUTCDate()-1);yw.range;const K5=ji(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yc,n=>Math.floor(n/yc));K5.range;function Vf(n){return ji(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zs)/vN)}const xw=Vf(0),c1=Vf(1),SZ=Vf(2),MZ=Vf(3),tm=Vf(4),EZ=Vf(5),TZ=Vf(6);xw.range;c1.range;SZ.range;MZ.range;tm.range;EZ.range;TZ.range;function Wf(n){return ji(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/vN)}const bw=Wf(0),u1=Wf(1),AZ=Wf(2),CZ=Wf(3),nm=Wf(4),PZ=Wf(5),NZ=Wf(6);bw.range;u1.range;AZ.range;CZ.range;nm.range;PZ.range;NZ.range;const _N=ji(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());_N.range;const SN=ji(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());SN.range;const xc=ji(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());xc.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ji(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});xc.range;const bc=ji(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());bc.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ji(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});bc.range;function Z5(n,e,t,r,i,a){const s=[[uf,1,lc],[uf,5,5*lc],[uf,15,15*lc],[uf,30,30*lc],[a,1,Zs],[a,5,5*Zs],[a,15,15*Zs],[a,30,30*Zs],[i,1,cc],[i,3,3*cc],[i,6,6*cc],[i,12,12*cc],[r,1,yc],[r,2,2*yc],[t,1,vN],[e,1,aL],[e,3,3*aL],[n,1,uT]];function o(u,f,h){const m=f<u;m&&([u,f]=[f,u]);const y=h&&typeof h.range=="function"?h:l(u,f,h),b=y?y.range(u,+f+1):[];return m?b.reverse():b}function l(u,f,h){const m=Math.abs(f-u)/h,y=aN(([,,x])=>x).right(s,m);if(y===s.length)return n.every(I2(u/uT,f/uT,h));if(y===0)return l1.every(Math.max(I2(u,f,h),1));const[b,w]=s[m/s[y-1][2]<s[y][2]/m?y-1:y];return b.every(w)}return[o,l]}const[OZ,RZ]=Z5(bc,SN,bw,K5,wN,xN),[kZ,jZ]=Z5(xc,_N,xw,Zy,bN,yN);function dT(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function fT(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function zg(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function IZ(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,l=n.shortMonths,u=Bg(i),f=Hg(i),h=Bg(a),m=Hg(a),y=Bg(s),b=Hg(s),w=Bg(o),x=Hg(o),_=Bg(l),M=Hg(l),E={a:se,A:G,b:J,B:Z,c:null,d:dL,e:dL,f:iJ,g:pJ,G:gJ,H:tJ,I:nJ,j:rJ,L:J5,m:aJ,M:sJ,p:X,q:te,Q:pL,s:mL,S:oJ,u:lJ,U:cJ,V:uJ,w:dJ,W:fJ,x:null,X:null,y:hJ,Y:mJ,Z:vJ,"%":hL},A={a:ce,A:le,b:be,B:Se,c:null,d:fL,e:fL,f:wJ,g:OJ,G:kJ,H:yJ,I:xJ,j:bJ,L:eB,m:_J,M:SJ,p:Ie,q:qe,Q:pL,s:mL,S:MJ,u:EJ,U:TJ,V:AJ,w:CJ,W:PJ,x:null,X:null,y:NJ,Y:RJ,Z:jJ,"%":hL},R={a:j,A:U,b:B,B:V,c:W,d:cL,e:cL,f:ZZ,g:lL,G:oL,H:uL,I:uL,j:qZ,L:KZ,m:$Z,M:XZ,p:T,q:GZ,Q:QZ,s:eJ,S:YZ,u:zZ,U:BZ,V:HZ,w:FZ,W:VZ,x:Y,X:Q,y:lL,Y:oL,Z:WZ,"%":JZ};E.x=O(t,E),E.X=O(r,E),E.c=O(e,E),A.x=O(t,A),A.X=O(r,A),A.c=O(e,A);function O(Pe,Fe){return function($e){var ne=[],Ve=-1,Ne=0,Ke=Pe.length,De,vt,dt;for($e instanceof Date||($e=new Date(+$e));++Ve<Ke;)Pe.charCodeAt(Ve)===37&&(ne.push(Pe.slice(Ne,Ve)),(vt=sL[De=Pe.charAt(++Ve)])!=null?De=Pe.charAt(++Ve):vt=De==="e"?" ":"0",(dt=Fe[De])&&(De=dt($e,vt)),ne.push(De),Ne=Ve+1);return ne.push(Pe.slice(Ne,Ve)),ne.join("")}}function N(Pe,Fe){return function($e){var ne=zg(1900,void 0,1),Ve=L(ne,Pe,$e+="",0),Ne,Ke;if(Ve!=$e.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Fe&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Ne=fT(zg(ne.y,0,1)),Ke=Ne.getUTCDay(),Ne=Ke>4||Ke===0?u1.ceil(Ne):u1(Ne),Ne=yw.offset(Ne,(ne.V-1)*7),ne.y=Ne.getUTCFullYear(),ne.m=Ne.getUTCMonth(),ne.d=Ne.getUTCDate()+(ne.w+6)%7):(Ne=dT(zg(ne.y,0,1)),Ke=Ne.getDay(),Ne=Ke>4||Ke===0?c1.ceil(Ne):c1(Ne),Ne=Zy.offset(Ne,(ne.V-1)*7),ne.y=Ne.getFullYear(),ne.m=Ne.getMonth(),ne.d=Ne.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Ke="Z"in ne?fT(zg(ne.y,0,1)).getUTCDay():dT(zg(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Ke+5)%7:ne.w+ne.U*7-(Ke+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,fT(ne)):dT(ne)}}function L(Pe,Fe,$e,ne){for(var Ve=0,Ne=Fe.length,Ke=$e.length,De,vt;Ve<Ne;){if(ne>=Ke)return-1;if(De=Fe.charCodeAt(Ve++),De===37){if(De=Fe.charAt(Ve++),vt=R[De in sL?Fe.charAt(Ve++):De],!vt||(ne=vt(Pe,$e,ne))<0)return-1}else if(De!=$e.charCodeAt(ne++))return-1}return ne}function T(Pe,Fe,$e){var ne=u.exec(Fe.slice($e));return ne?(Pe.p=f.get(ne[0].toLowerCase()),$e+ne[0].length):-1}function j(Pe,Fe,$e){var ne=y.exec(Fe.slice($e));return ne?(Pe.w=b.get(ne[0].toLowerCase()),$e+ne[0].length):-1}function U(Pe,Fe,$e){var ne=h.exec(Fe.slice($e));return ne?(Pe.w=m.get(ne[0].toLowerCase()),$e+ne[0].length):-1}function B(Pe,Fe,$e){var ne=_.exec(Fe.slice($e));return ne?(Pe.m=M.get(ne[0].toLowerCase()),$e+ne[0].length):-1}function V(Pe,Fe,$e){var ne=w.exec(Fe.slice($e));return ne?(Pe.m=x.get(ne[0].toLowerCase()),$e+ne[0].length):-1}function W(Pe,Fe,$e){return L(Pe,e,Fe,$e)}function Y(Pe,Fe,$e){return L(Pe,t,Fe,$e)}function Q(Pe,Fe,$e){return L(Pe,r,Fe,$e)}function se(Pe){return s[Pe.getDay()]}function G(Pe){return a[Pe.getDay()]}function J(Pe){return l[Pe.getMonth()]}function Z(Pe){return o[Pe.getMonth()]}function X(Pe){return i[+(Pe.getHours()>=12)]}function te(Pe){return 1+~~(Pe.getMonth()/3)}function ce(Pe){return s[Pe.getUTCDay()]}function le(Pe){return a[Pe.getUTCDay()]}function be(Pe){return l[Pe.getUTCMonth()]}function Se(Pe){return o[Pe.getUTCMonth()]}function Ie(Pe){return i[+(Pe.getUTCHours()>=12)]}function qe(Pe){return 1+~~(Pe.getUTCMonth()/3)}return{format:function(Pe){var Fe=O(Pe+="",E);return Fe.toString=function(){return Pe},Fe},parse:function(Pe){var Fe=N(Pe+="",!1);return Fe.toString=function(){return Pe},Fe},utcFormat:function(Pe){var Fe=O(Pe+="",A);return Fe.toString=function(){return Pe},Fe},utcParse:function(Pe){var Fe=N(Pe+="",!0);return Fe.toString=function(){return Pe},Fe}}}var sL={"-":"",_:" ",0:"0"},Gi=/^\s*\d+/,LZ=/^%/,DZ=/[\\^$*+?|[\]().{}]/g;function Xn(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function UZ(n){return n.replace(DZ,"\\$&")}function Bg(n){return new RegExp("^(?:"+n.map(UZ).join("|")+")","i")}function Hg(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function FZ(n,e,t){var r=Gi.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function zZ(n,e,t){var r=Gi.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function BZ(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function HZ(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function VZ(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function oL(n,e,t){var r=Gi.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function lL(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function WZ(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function GZ(n,e,t){var r=Gi.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function $Z(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function cL(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function qZ(n,e,t){var r=Gi.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function uL(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function XZ(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function YZ(n,e,t){var r=Gi.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function KZ(n,e,t){var r=Gi.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function ZZ(n,e,t){var r=Gi.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function JZ(n,e,t){var r=LZ.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function QZ(n,e,t){var r=Gi.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function eJ(n,e,t){var r=Gi.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function dL(n,e){return Xn(n.getDate(),e,2)}function tJ(n,e){return Xn(n.getHours(),e,2)}function nJ(n,e){return Xn(n.getHours()%12||12,e,2)}function rJ(n,e){return Xn(1+Zy.count(xc(n),n),e,3)}function J5(n,e){return Xn(n.getMilliseconds(),e,3)}function iJ(n,e){return J5(n,e)+"000"}function aJ(n,e){return Xn(n.getMonth()+1,e,2)}function sJ(n,e){return Xn(n.getMinutes(),e,2)}function oJ(n,e){return Xn(n.getSeconds(),e,2)}function lJ(n){var e=n.getDay();return e===0?7:e}function cJ(n,e){return Xn(xw.count(xc(n)-1,n),e,2)}function Q5(n){var e=n.getDay();return e>=4||e===0?tm(n):tm.ceil(n)}function uJ(n,e){return n=Q5(n),Xn(tm.count(xc(n),n)+(xc(n).getDay()===4),e,2)}function dJ(n){return n.getDay()}function fJ(n,e){return Xn(c1.count(xc(n)-1,n),e,2)}function hJ(n,e){return Xn(n.getFullYear()%100,e,2)}function pJ(n,e){return n=Q5(n),Xn(n.getFullYear()%100,e,2)}function mJ(n,e){return Xn(n.getFullYear()%1e4,e,4)}function gJ(n,e){var t=n.getDay();return n=t>=4||t===0?tm(n):tm.ceil(n),Xn(n.getFullYear()%1e4,e,4)}function vJ(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xn(e/60|0,"0",2)+Xn(e%60,"0",2)}function fL(n,e){return Xn(n.getUTCDate(),e,2)}function yJ(n,e){return Xn(n.getUTCHours(),e,2)}function xJ(n,e){return Xn(n.getUTCHours()%12||12,e,2)}function bJ(n,e){return Xn(1+yw.count(bc(n),n),e,3)}function eB(n,e){return Xn(n.getUTCMilliseconds(),e,3)}function wJ(n,e){return eB(n,e)+"000"}function _J(n,e){return Xn(n.getUTCMonth()+1,e,2)}function SJ(n,e){return Xn(n.getUTCMinutes(),e,2)}function MJ(n,e){return Xn(n.getUTCSeconds(),e,2)}function EJ(n){var e=n.getUTCDay();return e===0?7:e}function TJ(n,e){return Xn(bw.count(bc(n)-1,n),e,2)}function tB(n){var e=n.getUTCDay();return e>=4||e===0?nm(n):nm.ceil(n)}function AJ(n,e){return n=tB(n),Xn(nm.count(bc(n),n)+(bc(n).getUTCDay()===4),e,2)}function CJ(n){return n.getUTCDay()}function PJ(n,e){return Xn(u1.count(bc(n)-1,n),e,2)}function NJ(n,e){return Xn(n.getUTCFullYear()%100,e,2)}function OJ(n,e){return n=tB(n),Xn(n.getUTCFullYear()%100,e,2)}function RJ(n,e){return Xn(n.getUTCFullYear()%1e4,e,4)}function kJ(n,e){var t=n.getUTCDay();return n=t>=4||t===0?nm(n):nm.ceil(n),Xn(n.getUTCFullYear()%1e4,e,4)}function jJ(){return"+0000"}function hL(){return"%"}function pL(n){return+n}function mL(n){return Math.floor(+n/1e3)}var Zh,nB,rB;IJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function IJ(n){return Zh=IZ(n),nB=Zh.format,Zh.parse,rB=Zh.utcFormat,Zh.utcParse,Zh}function LJ(n){return new Date(n)}function DJ(n){return n instanceof Date?+n:+new Date(+n)}function MN(n,e,t,r,i,a,s,o,l,u){var f=uN(),h=f.invert,m=f.domain,y=u(".%L"),b=u(":%S"),w=u("%I:%M"),x=u("%I %p"),_=u("%a %d"),M=u("%b %d"),E=u("%B"),A=u("%Y");function R(O){return(l(O)<O?y:o(O)<O?b:s(O)<O?w:a(O)<O?x:r(O)<O?i(O)<O?_:M:t(O)<O?E:A)(O)}return f.invert=function(O){return new Date(h(O))},f.domain=function(O){return arguments.length?m(Array.from(O,DJ)):m().map(LJ)},f.ticks=function(O){var N=m();return n(N[0],N[N.length-1],O??10)},f.tickFormat=function(O,N){return N==null?R:u(N)},f.nice=function(O){var N=m();return(!O||typeof O.range!="function")&&(O=e(N[0],N[N.length-1],O??10)),O?m(V5(N,O)):f},f.copy=function(){return Ky(f,MN(n,e,t,r,i,a,s,o,l,u))},f}function UJ(){return eo.apply(MN(kZ,jZ,xc,_N,xw,Zy,bN,yN,uf,nB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FJ(){return eo.apply(MN(OZ,RZ,bc,SN,bw,yw,wN,xN,uf,rB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ww(){var n=0,e=1,t,r,i,a,s=Ia,o=!1,l;function u(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-t)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([n,e]=h,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),u):[n,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(m){var y,b;return arguments.length?([y,b]=m,s=h(y,b),u):[s(0),s(1)]}}return u.range=f(km),u.rangeRound=f(cN),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return a=h,t=h(n),r=h(e),i=t===r?0:1/(r-t),u}}function $u(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function iB(){var n=Gu(ww()(Ia));return n.copy=function(){return $u(n,iB())},Pc.apply(n,arguments)}function aB(){var n=hN(ww()).domain([1,10]);return n.copy=function(){return $u(n,aB()).base(n.base())},Pc.apply(n,arguments)}function sB(){var n=pN(ww());return n.copy=function(){return $u(n,sB()).constant(n.constant())},Pc.apply(n,arguments)}function EN(){var n=mN(ww());return n.copy=function(){return $u(n,EN()).exponent(n.exponent())},Pc.apply(n,arguments)}function zJ(){return EN.apply(null,arguments).exponent(.5)}function oB(){var n=[],e=Ia;function t(r){if(r!=null&&!isNaN(r=+r))return e((Xy(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(ju),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>TK(n,a/r))},t.copy=function(){return oB(e).domain(n)},Pc.apply(t,arguments)}function _w(){var n=0,e=.5,t=1,r=1,i,a,s,o,l,u=Ia,f,h=!1,m;function y(w){return isNaN(w=+w)?m:(w=.5+((w=+f(w))-a)*(r*w<r*a?o:l),u(h?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([n,e,t]=w,i=f(n=+n),a=f(e=+e),s=f(t=+t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,y):[n,e,t]},y.clamp=function(w){return arguments.length?(h=!!w,y):h},y.interpolator=function(w){return arguments.length?(u=w,y):u};function b(w){return function(x){var _,M,E;return arguments.length?([_,M,E]=x,u=JK(w,[_,M,E]),y):[u(0),u(.5),u(1)]}}return y.range=b(km),y.rangeRound=b(cN),y.unknown=function(w){return arguments.length?(m=w,y):m},function(w){return f=w,i=w(n),a=w(e),s=w(t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function lB(){var n=Gu(_w()(Ia));return n.copy=function(){return $u(n,lB())},Pc.apply(n,arguments)}function cB(){var n=hN(_w()).domain([.1,1,10]);return n.copy=function(){return $u(n,cB()).base(n.base())},Pc.apply(n,arguments)}function uB(){var n=pN(_w());return n.copy=function(){return $u(n,uB()).constant(n.constant())},Pc.apply(n,arguments)}function TN(){var n=mN(_w());return n.copy=function(){return $u(n,TN()).exponent(n.exponent())},Pc.apply(n,arguments)}function BJ(){return TN.apply(null,arguments).exponent(.5)}const gL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xv,scaleDiverging:lB,scaleDivergingLog:cB,scaleDivergingPow:TN,scaleDivergingSqrt:BJ,scaleDivergingSymlog:uB,scaleIdentity:H5,scaleImplicit:L2,scaleLinear:o1,scaleLog:W5,scaleOrdinal:sN,scalePoint:wv,scalePow:gN,scaleQuantile:q5,scaleQuantize:X5,scaleRadial:$5,scaleSequential:iB,scaleSequentialLog:aB,scaleSequentialPow:EN,scaleSequentialQuantile:oB,scaleSequentialSqrt:zJ,scaleSequentialSymlog:sB,scaleSqrt:wZ,scaleSymlog:G5,scaleThreshold:Y5,scaleTime:UJ,scaleUtc:FJ,tickFormat:B5},Symbol.toStringTag,{value:"Module"}));var hT,vL;function Sw(){if(vL)return hT;vL=1;var n=Pm();function e(t,r,i){for(var a=-1,s=t.length;++a<s;){var o=t[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!n(l):i(l,u)))var u=l,f=o}return f}return hT=e,hT}var pT,yL;function dB(){if(yL)return pT;yL=1;function n(e,t){return e>t}return pT=n,pT}var mT,xL;function HJ(){if(xL)return mT;xL=1;var n=Sw(),e=dB(),t=Rm();function r(i){return i&&i.length?n(i,t,e):void 0}return mT=r,mT}var VJ=HJ();const Mw=Kn(VJ);var gT,bL;function fB(){if(bL)return gT;bL=1;function n(e,t){return e<t}return gT=n,gT}var vT,wL;function WJ(){if(wL)return vT;wL=1;var n=Sw(),e=fB(),t=Rm();function r(i){return i&&i.length?n(i,t,e):void 0}return vT=r,vT}var GJ=WJ();const Ew=Kn(GJ);var yT,_L;function $J(){if(_L)return yT;_L=1;var n=HP(),e=ml(),t=b5(),r=as();function i(a,s){var o=r(a)?n:t;return o(a,e(s,3))}return yT=i,yT}var xT,SL;function qJ(){if(SL)return xT;SL=1;var n=y5(),e=$J();function t(r,i){return n(e(r,i),1)}return xT=t,xT}var XJ=qJ();const YJ=Kn(XJ);var bT,ML;function KJ(){if(ML)return bT;ML=1;var n=tN();function e(t,r){return n(t,r)}return bT=e,bT}var ZJ=KJ();const Jy=Kn(ZJ);var jm=1e9,JJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CN,Ur=!0,Qs="[DecimalError] ",bf=Qs+"Invalid argument: ",AN=Qs+"Exponent out of range: ",Im=Math.floor,Qd=Math.pow,QJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ss,Bi=1e7,Rr=7,hB=9007199254740991,d1=Im(hB/Rr),Lt={};Lt.absoluteValue=Lt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Lt.comparedTo=Lt.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Lt.decimalPlaces=Lt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Rr;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Lt.dividedBy=Lt.div=function(n){return pc(this,new this.constructor(n))};Lt.dividedToIntegerBy=Lt.idiv=function(n){var e=this,t=e.constructor;return br(pc(e,new t(n),0,1),t.precision)};Lt.equals=Lt.eq=function(n){return!this.cmp(n)};Lt.exponent=function(){return vi(this)};Lt.greaterThan=Lt.gt=function(n){return this.cmp(n)>0};Lt.greaterThanOrEqualTo=Lt.gte=function(n){return this.cmp(n)>=0};Lt.isInteger=Lt.isint=function(){return this.e>this.d.length-2};Lt.isNegative=Lt.isneg=function(){return this.s<0};Lt.isPositive=Lt.ispos=function(){return this.s>0};Lt.isZero=function(){return this.s===0};Lt.lessThan=Lt.lt=function(n){return this.cmp(n)<0};Lt.lessThanOrEqualTo=Lt.lte=function(n){return this.cmp(n)<1};Lt.logarithm=Lt.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Ss))throw Error(Qs+"NaN");if(t.s<1)throw Error(Qs+(t.s?"NaN":"-Infinity"));return t.eq(Ss)?new r(0):(Ur=!1,e=pc(Qv(t,a),Qv(n,a),a),Ur=!0,br(e,i))};Lt.minus=Lt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?gB(e,n):pB(e,(n.s=-n.s,n))};Lt.modulo=Lt.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Qs+"NaN");return t.s?(Ur=!1,e=pc(t,n,0,1).times(n),Ur=!0,t.minus(e)):br(new r(t),i)};Lt.naturalExponential=Lt.exp=function(){return mB(this)};Lt.naturalLogarithm=Lt.ln=function(){return Qv(this)};Lt.negated=Lt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Lt.plus=Lt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?pB(e,n):gB(e,(n.s=-n.s,n))};Lt.precision=Lt.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(bf+n);if(e=vi(i)+1,r=i.d.length-1,t=r*Rr+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};Lt.squareRoot=Lt.sqrt=function(){var n,e,t,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Qs+"NaN")}for(n=vi(o),Ur=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=il(o.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=Im((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=s=t+3;;)if(a=r,r=a.plus(pc(o,a,s+2)).times(.5),il(a.d).slice(0,s)===(e=il(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(br(a,t+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Ur=!0,br(r,t)};Lt.times=Lt.mul=function(n){var e,t,r,i,a,s,o,l,u,f=this,h=f.constructor,m=f.d,y=(n=new h(n)).d;if(!f.s||!n.s)return new h(0);for(n.s*=f.s,t=f.e+n.e,l=m.length,u=y.length,l<u&&(a=m,m=y,y=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+y[r]*m[i-r-1]+e,a[i--]=o%Bi|0,e=o/Bi|0;a[i]=(a[i]+e)%Bi|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,Ur?br(n,h.precision):n};Lt.toDecimalPlaces=Lt.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(dl(n,0,jm),e===void 0?e=r.rounding:dl(e,0,8),br(t,n+vi(t)+1,e))};Lt.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Rf(r,!0):(dl(n,0,jm),e===void 0?e=i.rounding:dl(e,0,8),r=br(new i(r),n+1,e),t=Rf(r,!0,n+1)),t};Lt.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?Rf(i):(dl(n,0,jm),e===void 0?e=a.rounding:dl(e,0,8),r=br(new a(i),n+vi(i)+1,e),t=Rf(r.abs(),!1,n+vi(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};Lt.toInteger=Lt.toint=function(){var n=this,e=n.constructor;return br(new e(n),vi(n)+1,e.rounding)};Lt.toNumber=function(){return+this};Lt.toPower=Lt.pow=function(n){var e,t,r,i,a,s,o=this,l=o.constructor,u=12,f=+(n=new l(n));if(!n.s)return new l(Ss);if(o=new l(o),!o.s){if(n.s<1)throw Error(Qs+"Infinity");return o}if(o.eq(Ss))return o;if(r=l.precision,n.eq(Ss))return br(o,r);if(e=n.e,t=n.d.length-1,s=e>=t,a=o.s,s){if((t=f<0?-f:f)<=hB){for(i=new l(Ss),e=Math.ceil(r/Rr+4),Ur=!1;t%2&&(i=i.times(o),TL(i.d,e)),t=Im(t/2),t!==0;)o=o.times(o),TL(o.d,e);return Ur=!0,n.s<0?new l(Ss).div(i):br(i,r)}}else if(a<0)throw Error(Qs+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,o.s=1,Ur=!1,i=n.times(Qv(o,r+u)),Ur=!0,i=mB(i),i.s=a,i};Lt.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=vi(i),r=Rf(i,t<=a.toExpNeg||t>=a.toExpPos)):(dl(n,1,jm),e===void 0?e=a.rounding:dl(e,0,8),i=br(new a(i),n,e),t=vi(i),r=Rf(i,n<=t||t<=a.toExpNeg,n)),r};Lt.toSignificantDigits=Lt.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(dl(n,1,jm),e===void 0?e=r.rounding:dl(e,0,8)),br(new r(t),n,e)};Lt.toString=Lt.valueOf=Lt.val=Lt.toJSON=Lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=vi(n),t=n.constructor;return Rf(n,e<=t.toExpNeg||e>=t.toExpPos)};function pB(n,e){var t,r,i,a,s,o,l,u,f=n.constructor,h=f.precision;if(!n.s||!e.s)return e.s||(e=new f(n)),Ur?br(e,h):e;if(l=n.d,u=e.d,s=n.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(h/Rr),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),t=0;a;)t=(l[--a]=l[a]+u[a]+t)/Bi|0,l[a]%=Bi;for(t&&(l.unshift(t),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Ur?br(e,h):e}function dl(n,e,t){if(n!==~~n||n<e||n>t)throw Error(bf+n)}function il(n){var e,t,r,i=n.length-1,a="",s=n[0];if(i>0){for(a+=s,e=1;e<i;e++)r=n[e]+"",t=Rr-r.length,t&&(a+=wu(t)),a+=r;s=n[e],r=s+"",t=Rr-r.length,t&&(a+=wu(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var pc=(function(){function n(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Bi|0,s=a/Bi|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function t(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Bi+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,f,h,m,y,b,w,x,_,M,E,A,R,O,N,L,T=r.constructor,j=r.s==i.s?1:-1,U=r.d,B=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(Qs+"Division by zero");for(l=r.e-i.e,N=B.length,R=U.length,y=new T(j),b=y.d=[],u=0;B[u]==(U[u]||0);)++u;if(B[u]>(U[u]||0)&&--l,a==null?M=a=T.precision:s?M=a+(vi(r)-vi(i))+1:M=a,M<0)return new T(0);if(M=M/Rr+2|0,u=0,N==1)for(f=0,B=B[0],M++;(u<R||f)&&M--;u++)E=f*Bi+(U[u]||0),b[u]=E/B|0,f=E%B|0;else{for(f=Bi/(B[0]+1)|0,f>1&&(B=n(B,f),U=n(U,f),N=B.length,R=U.length),A=N,w=U.slice(0,N),x=w.length;x<N;)w[x++]=0;L=B.slice(),L.unshift(0),O=B[0],B[1]>=Bi/2&&++O;do f=0,o=e(B,w,N,x),o<0?(_=w[0],N!=x&&(_=_*Bi+(w[1]||0)),f=_/O|0,f>1?(f>=Bi&&(f=Bi-1),h=n(B,f),m=h.length,x=w.length,o=e(h,w,m,x),o==1&&(f--,t(h,N<m?L:B,m))):(f==0&&(o=f=1),h=B.slice()),m=h.length,m<x&&h.unshift(0),t(w,h,x),o==-1&&(x=w.length,o=e(B,w,N,x),o<1&&(f++,t(w,N<x?L:B,x))),x=w.length):o===0&&(f++,w=[0]),b[u++]=f,o&&w[0]?w[x++]=U[A]||0:(w=[U[A]],x=1);while((A++<R||w[0]!==void 0)&&M--)}return b[0]||b.shift(),y.e=l,br(y,s?a+vi(y)+1:a)}})();function mB(n,e){var t,r,i,a,s,o,l=0,u=0,f=n.constructor,h=f.precision;if(vi(n)>16)throw Error(AN+vi(n));if(!n.s)return new f(Ss);for(Ur=!1,o=h,s=new f(.03125);n.abs().gte(.1);)n=n.times(s),u+=5;for(r=Math.log(Qd(2,u))/Math.LN10*2+5|0,o+=r,t=i=a=new f(Ss),f.precision=o;;){if(i=br(i.times(n),o),t=t.times(++l),s=a.plus(pc(i,t,o)),il(s.d).slice(0,o)===il(a.d).slice(0,o)){for(;u--;)a=br(a.times(a),o);return f.precision=h,e==null?(Ur=!0,br(a,h)):a}a=s}}function vi(n){for(var e=n.e*Rr,t=n.d[0];t>=10;t/=10)e++;return e}function wT(n,e,t){if(e>n.LN10.sd())throw Ur=!0,t&&(n.precision=t),Error(Qs+"LN10 precision limit exceeded");return br(new n(n.LN10),e)}function wu(n){for(var e="";n--;)e+="0";return e}function Qv(n,e){var t,r,i,a,s,o,l,u,f,h=1,m=10,y=n,b=y.d,w=y.constructor,x=w.precision;if(y.s<1)throw Error(Qs+(y.s?"NaN":"-Infinity"));if(y.eq(Ss))return new w(0);if(e==null?(Ur=!1,u=x):u=e,y.eq(10))return e==null&&(Ur=!0),wT(w,u);if(u+=m,w.precision=u,t=il(b),r=t.charAt(0),a=vi(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)y=y.times(n),t=il(y.d),r=t.charAt(0),h++;a=vi(y),r>1?(y=new w("0."+t),a++):y=new w(r+"."+t.slice(1))}else return l=wT(w,u+2,x).times(a+""),y=Qv(new w(r+"."+t.slice(1)),u-m).plus(l),w.precision=x,e==null?(Ur=!0,br(y,x)):y;for(o=s=y=pc(y.minus(Ss),y.plus(Ss),u),f=br(y.times(y),u),i=3;;){if(s=br(s.times(f),u),l=o.plus(pc(s,new w(i),u)),il(l.d).slice(0,u)===il(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(wT(w,u+2,x).times(a+""))),o=pc(o,new w(h),u),w.precision=x,e==null?(Ur=!0,br(o,x)):o;o=l,i+=2}}function EL(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=Im(t/Rr),n.d=[],r=(t+1)%Rr,t<0&&(r+=Rr),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Rr;r<i;)n.d.push(+e.slice(r,r+=Rr));e=e.slice(r),r=Rr-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Ur&&(n.e>d1||n.e<-d1))throw Error(AN+t)}else n.s=0,n.e=0,n.d=[0];return n}function br(n,e,t){var r,i,a,s,o,l,u,f,h=n.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Rr,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/Rr),a=h.length,f>=a)return n;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=Rr,i=r-Rr+s}if(t!==void 0&&(a=Qd(10,s-i-1),o=u/a%10|0,l=e<0||h[f+1]!==void 0||u%a,l=t<4?(o||l)&&(t==0||t==(n.s<0?3:2)):o>5||o==5&&(t==4||l||t==6&&(r>0?i>0?u/Qd(10,s-i):0:h[f-1])%10&1||t==(n.s<0?8:7))),e<1||!h[0])return l?(a=vi(n),h.length=1,e=e-a-1,h[0]=Qd(10,(Rr-e%Rr)%Rr),n.e=Im(-e/Rr)||0):(h.length=1,h[0]=n.e=n.s=0),n;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=Qd(10,Rr-r),h[f]=i>0?(u/Qd(10,s-i)%Qd(10,i)|0)*a:0),l)for(;;)if(f==0){(h[0]+=a)==Bi&&(h[0]=1,++n.e);break}else{if(h[f]+=a,h[f]!=Bi)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Ur&&(n.e>d1||n.e<-d1))throw Error(AN+vi(n));return n}function gB(n,e){var t,r,i,a,s,o,l,u,f,h,m=n.constructor,y=m.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new m(n),Ur?br(e,y):e;if(l=n.d,h=e.d,r=e.e,u=n.e,l=l.slice(),s=u-r,s){for(f=s<0,f?(t=l,s=-s,o=h.length):(t=h,r=u,o=l.length),i=Math.max(Math.ceil(y/Rr),o)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=l.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){f=l[i]<h[i];break}s=0}for(f&&(t=l,l=h,h=t,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=Bi-1;--l[a],l[i]+=Bi}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ur?br(e,y):e):new m(0)}function Rf(n,e,t){var r,i=vi(n),a=il(n.d),s=a.length;return e?(t&&(r=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+wu(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+wu(-i-1)+a,t&&(r=t-s)>0&&(a+=wu(r))):i>=s?(a+=wu(i+1-s),t&&(r=t-i-1)>0&&(a=a+"."+wu(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(a+="."),a+=wu(r))),n.s<0?"-"+a:a}function TL(n,e){if(n.length>e)return n.length=e,!0}function vB(n){var e,t,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(bf+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return EL(s,a.toString())}else if(typeof a!="string")throw Error(bf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,QJ.test(a))EL(s,a);else throw Error(bf+a)}if(i.prototype=Lt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=vB,i.config=i.set=eQ,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function eQ(n){if(!n||typeof n!="object")throw Error(Qs+"Object expected");var e,t,r,i=["precision",1,jm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(Im(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(bf+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(bf+t+": "+r);return this}var CN=vB(JJ);Ss=new CN(1);const mr=CN;function tQ(n){return aQ(n)||iQ(n)||rQ(n)||nQ()}function nQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(n,e){if(n){if(typeof n=="string")return z2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z2(n,e)}}function iQ(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function aQ(n){if(Array.isArray(n))return z2(n)}function z2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var sQ=function(e){return e},yB={},xB=function(e){return e===yB},AL=function(e){return function t(){return arguments.length===0||arguments.length===1&&xB(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},oQ=function n(e,t){return e===1?t:AL(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==yB}).length;return s>=e?t.apply(void 0,i):n(e-s,AL(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var f=i.map(function(h){return xB(h)?l.shift():h});return t.apply(void 0,tQ(f).concat(l))}))})},Tw=function(e){return oQ(e.length,e)},B2=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},lQ=Tw(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),cQ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return sQ;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},H2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bB=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t&&a.every(function(o,l){return o===t[l]})||(t=a,r=e.apply(void 0,a)),r}};function uQ(n){var e;return n===0?e=1:e=Math.floor(new mr(n).abs().log(10).toNumber())+1,e}function dQ(n,e,t){for(var r=new mr(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var fQ=Tw(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),hQ=Tw(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),pQ=Tw(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const Aw={rangeStep:dQ,getDigitCount:uQ,interpolateNumber:fQ,uninterpolateNumber:hQ,uninterpolateTruncation:pQ};function V2(n){return vQ(n)||gQ(n)||wB(n)||mQ()}function mQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gQ(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function vQ(n){if(Array.isArray(n))return W2(n)}function ey(n,e){return bQ(n)||xQ(n,e)||wB(n,e)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wB(n,e){if(n){if(typeof n=="string")return W2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W2(n,e)}}function W2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xQ(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var s=n[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(t.push(o.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return t}}function bQ(n){if(Array.isArray(n))return n}function _B(n){var e=ey(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function SB(n,e,t){if(n.lte(0))return new mr(0);var r=Aw.getDigitCount(n.toNumber()),i=new mr(10).pow(r),a=n.div(i),s=r!==1?.05:.1,o=new mr(Math.ceil(a.div(s).toNumber())).add(t).mul(s),l=o.mul(i);return e?l:new mr(Math.ceil(l))}function wQ(n,e,t){var r=1,i=new mr(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new mr(10).pow(Aw.getDigitCount(n)-1),i=new mr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mr(Math.floor(n)))}else n===0?i=new mr(Math.floor((e-1)/2)):t||(i=new mr(Math.floor(n)));var s=Math.floor((e-1)/2),o=cQ(lQ(function(l){return i.add(new mr(l-s).mul(r)).toNumber()}),B2);return o(0,e)}function MB(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new mr(0),tickMin:new mr(0),tickMax:new mr(0)};var a=SB(new mr(e).sub(n).div(t-1),r,i),s;n<=0&&e>=0?s=new mr(0):(s=new mr(n).add(e).div(2),s=s.sub(new mr(s).mod(a)));var o=Math.ceil(s.sub(n).div(a).toNumber()),l=Math.ceil(new mr(e).sub(s).div(a).toNumber()),u=o+l+1;return u>t?MB(n,e,t,r,i+1):(u<t&&(l=e>0?l+(t-u):l,o=e>0?o:o+(t-u)),{step:a,tickMin:s.sub(new mr(o).mul(a)),tickMax:s.add(new mr(l).mul(a))})}function _Q(n){var e=ey(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=_B([t,r]),l=ey(o,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var h=f===1/0?[u].concat(V2(B2(0,i-1).map(function(){return 1/0}))):[].concat(V2(B2(0,i-1).map(function(){return-1/0})),[f]);return t>r?H2(h):h}if(u===f)return wQ(u,i,a);var m=MB(u,f,s,a),y=m.step,b=m.tickMin,w=m.tickMax,x=Aw.rangeStep(b,w.add(new mr(.1).mul(y)),y);return t>r?H2(x):x}function SQ(n,e){var t=ey(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=_B([r,i]),o=ey(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var f=Math.max(e,2),h=SB(new mr(u).sub(l).div(f-1),a,0),m=[].concat(V2(Aw.rangeStep(new mr(l),new mr(u).sub(new mr(.99).mul(h)),h)),[u]);return r>i?H2(m):m}var MQ=bB(_Q),EQ=bB(SQ),TQ="Invariant failed";function kf(n,e){throw new Error(TQ)}var AQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function rm(n){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(n)}function f1(){return f1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f1.apply(this,arguments)}function CQ(n,e){return RQ(n)||OQ(n,e)||NQ(n,e)||PQ()}function PQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NQ(n,e){if(n){if(typeof n=="string")return CL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CL(n,e)}}function CL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function OQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function RQ(n){if(Array.isArray(n))return n}function kQ(n,e){if(n==null)return{};var t=jQ(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function IQ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function LQ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,AB(r.key),r)}}function DQ(n,e,t){return e&&LQ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function UQ(n,e,t){return e=h1(e),FQ(n,EB()?Reflect.construct(e,t||[],h1(n).constructor):e.apply(n,t))}function FQ(n,e){if(e&&(rm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zQ(n)}function zQ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function EB(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EB=function(){return!!n})()}function h1(n){return h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h1(n)}function BQ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&G2(n,e)}function G2(n,e){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G2(n,e)}function TB(n,e,t){return e=AB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AB(n){var e=HQ(n,"string");return rm(e)=="symbol"?e:e+""}function HQ(n,e){if(rm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Qy=(function(n){function e(){return IQ(this,e),UQ(this,e,arguments)}return BQ(e,n),DQ(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,f=r.xAxis,h=r.yAxis,m=kQ(r,AQ),y=en(m,!1);this.props.direction==="x"&&f.type!=="number"&&kf();var b=l.map(function(w){var x=u(w,o),_=x.x,M=x.y,E=x.value,A=x.errorVal;if(!A)return null;var R=[],O,N;if(Array.isArray(A)){var L=CQ(A,2);O=L[0],N=L[1]}else O=N=A;if(a==="vertical"){var T=f.scale,j=M+i,U=j+s,B=j-s,V=T(E-O),W=T(E+N);R.push({x1:W,y1:U,x2:W,y2:B}),R.push({x1:V,y1:j,x2:W,y2:j}),R.push({x1:V,y1:U,x2:V,y2:B})}else if(a==="horizontal"){var Y=h.scale,Q=_+i,se=Q-s,G=Q+s,J=Y(E-O),Z=Y(E+N);R.push({x1:se,y1:Z,x2:G,y2:Z}),R.push({x1:Q,y1:J,x2:Q,y2:Z}),R.push({x1:se,y1:J,x2:G,y2:J})}return ye.createElement($n,f1({className:"recharts-errorBar",key:"bar-".concat(R.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},y),R.map(function(X){return ye.createElement("line",f1({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return ye.createElement($n,{className:"recharts-errorBars"},b)}}])})(ye.Component);TB(Qy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});TB(Qy,"displayName","ErrorBar");function ty(n){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(n)}function PL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Dd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(t),!0).forEach(function(r){VQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VQ(n,e,t){return e=WQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WQ(n){var e=GQ(n,"string");return ty(e)=="symbol"?e:e+""}function GQ(n,e){if(ty(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var CB=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=ws(t,ku);if(!s)return null;var o=ku.defaultProps,l=o!==void 0?Dd(Dd({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(f,h){var m=h.item,y=h.props,b=y.sectors||y.data||[];return f.concat(b.map(function(w){return{type:s.props.iconType||m.props.legendType,value:w.name,color:w.fill,payload:w}}))},[]):u=(r||[]).map(function(f){var h=f.item,m=h.type.defaultProps,y=m!==void 0?Dd(Dd({},m),h.props):{},b=y.dataKey,w=y.name,x=y.legendType,_=y.hide;return{inactive:_,dataKey:b,type:l.iconType||x||"square",color:PN(h),value:w||b,payload:y}}),Dd(Dd(Dd({},l),ku.getWithHeight(s,i)),{},{payload:u,item:s})};function ny(n){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(n)}function NL(n){return YQ(n)||XQ(n)||qQ(n)||$Q()}function $Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qQ(n,e){if(n){if(typeof n=="string")return $2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $2(n,e)}}function XQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function YQ(n){if(Array.isArray(n))return $2(n)}function $2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function OL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(t),!0).forEach(function(r){Hp(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hp(n,e,t){return e=KQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KQ(n){var e=ZQ(n,"string");return ny(e)=="symbol"?e:e+""}function ZQ(n,e){if(ny(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pi(n,e,t){return yn(n)||yn(e)?t:Ni(e)?Es(n,e,t):on(e)?e(n):t}function _v(n,e,t,r){var i=YJ(n,function(o){return Pi(o,e)});if(t==="number"){var a=i.filter(function(o){return ft(o)||parseFloat(o)});return a.length?[Ew(a),Mw(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!yn(o)}):i;return s.map(function(o){return Ni(o)||o instanceof Date?o:""})}var JQ=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(t=r?.length)!==null&&t!==void 0?t:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var f=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,m=u>=o-1?i[0].coordinate:i[u+1].coordinate,y=void 0;if(ka(h-f)!==ka(m-h)){var b=[];if(ka(m-h)===ka(l[1]-l[0])){y=m;var w=h+l[1]-l[0];b[0]=Math.min(w,(w+f)/2),b[1]=Math.max(w,(w+f)/2)}else{y=f;var x=m+l[1]-l[0];b[0]=Math.min(h,(x+h)/2),b[1]=Math.max(h,(x+h)/2)}var _=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){s=i[u].index;break}}else{var M=Math.min(f,m),E=Math.max(f,m);if(e>(M+h)/2&&e<=(E+h)/2){s=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},PN=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Yr(Yr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},QQ=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var f=a[o[l]].stackGroups,h=Object.keys(f),m=0,y=h.length;m<y;m++){var b=f[h[m]],w=b.items,x=b.cateAxisId,_=w.filter(function(N){return hc(N.type).indexOf("Bar")>=0});if(_&&_.length){var M=_[0].type.defaultProps,E=M!==void 0?Yr(Yr({},M),_[0].props):_[0].props,A=E.barSize,R=E[x];s[R]||(s[R]=[]);var O=yn(A)?t:A;s[R].push({item:_[0],stackList:_.slice(1),barSize:yn(O)?void 0:ja(O,r,0)})}}return s},eee=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=ja(t,i,0,!0),f,h=[];if(s[0].barSize===+s[0].barSize){var m=!1,y=i/l,b=s.reduce(function(A,R){return A+R.barSize||0},0);b+=(l-1)*u,b>=i&&(b-=(l-1)*u,u=0),b>=i&&y>0&&(m=!0,y*=.9,b=l*y);var w=(i-b)/2>>0,x={offset:w-u,size:0};f=s.reduce(function(A,R){var O={item:R.item,position:{offset:x.offset+x.size+u,size:m?y:R.barSize}},N=[].concat(NL(A),[O]);return x=N[N.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(L){N.push({item:L,position:x})}),N},h)}else{var _=ja(r,i,0,!0);i-2*_-(l-1)*u<=0&&(u=0);var M=(i-2*_-(l-1)*u)/l;M>1&&(M>>=0);var E=o===+o?Math.min(M,o):M;f=s.reduce(function(A,R,O){var N=[].concat(NL(A),[{item:R.item,position:{offset:_+(M+u)*O+(M-E)/2,size:E}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(L){N.push({item:L,position:N[N.length-1].position})}),N},h)}return f},tee=function(e,t,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=CB({children:a,legendWidth:l});if(u){var f=i||{},h=f.width,m=f.height,y=u.align,b=u.verticalAlign,w=u.layout;if((w==="vertical"||w==="horizontal"&&b==="middle")&&y!=="center"&&ft(e[y]))return Yr(Yr({},e),{},Hp({},y,e[y]+(h||0)));if((w==="horizontal"||w==="vertical"&&y==="center")&&b!=="middle"&&ft(e[b]))return Yr(Yr({},e),{},Hp({},b,e[b]+(m||0)))}return e},nee=function(e,t,r){return yn(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},PB=function(e,t,r,i,a){var s=t.props.children,o=Ts(s,Qy).filter(function(u){return nee(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var h=Pi(f,r);if(yn(h))return u;var m=Array.isArray(h)?[Ew(h),Mw(h)]:[h,h],y=l.reduce(function(b,w){var x=Pi(f,w,0),_=m[0]-Math.abs(Array.isArray(x)?x[0]:x),M=m[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(_,b[0]),Math.max(M,b[1])]},[1/0,-1/0]);return[Math.min(y[0],u[0]),Math.max(y[1],u[1])]},[1/0,-1/0])}return null},ree=function(e,t,r,i,a){var s=t.map(function(o){return PB(e,o,r,a,i)}).filter(function(o){return!yn(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},NB=function(e,t,r,i,a){var s=t.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&PB(e,l,u,i)||_v(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var f=0,h=u.length;f<h;f++)o[u[f]]||(o[u[f]]=!0,l.push(u[f]));return l},[])},OB=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},RB=function(e,t,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(t),s||o.push(r),o},uc=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(t||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&o?.length>=2?ka(o[0]-o[1])*2*u:u,t&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(h){var m=a?a.indexOf(h):h;return{coordinate:i(m)+u,value:h,offset:u}});return f.filter(function(h){return!$y(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,m){return{coordinate:i(h)+u,value:h,index:m,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,m){return{coordinate:i(h)+u,value:a?a[h]:h,index:m,offset:u}})},_T=new WeakMap,vx=function(e,t){if(typeof t!="function")return e;_T.has(e)||_T.set(e,new WeakMap);var r=_T.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},kB=function(e,t,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Xv(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:o1(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:wv(),realScaleType:"point"}:a==="category"?{scale:Xv(),realScaleType:"band"}:{scale:o1(),realScaleType:"linear"};if(Pf(i)){var l="scale".concat(uw(i));return{scale:(gL[l]||wv)(),realScaleType:gL[l]?l:"point"}}return on(i)?{scale:i}:{scale:wv(),realScaleType:"point"}},RL=1e-4,jB=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-RL,s=Math.max(i[0],i[1])+RL,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},iee=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},aee=function(e,t){if(!t||t.length!==2||!ft(t[0])||!ft(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ft(e[0])||e[0]<r)&&(a[0]=r),(!ft(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},see=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<t;++o){var l=$y(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},oee=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<t;++s){var o=$y(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},lee={sign:see,expand:Y9,none:Xp,silhouette:K9,wiggle:Z9,positive:oee},cee=function(e,t,r){var i=t.map(function(o){return o.props.dataKey}),a=lee[r],s=X9().keys(i).value(function(o,l){return+Pi(o,l,0)}).order(_2).offset(a);return s(e)},uee=function(e,t,r,i,a,s){if(!e)return null;var o=s?t.reverse():t,l={},u=o.reduce(function(h,m){var y,b=(y=m.type)!==null&&y!==void 0&&y.defaultProps?Yr(Yr({},m.type.defaultProps),m.props):m.props,w=b.stackId,x=b.hide;if(x)return h;var _=b[r],M=h[_]||{hasStack:!1,stackGroups:{}};if(Ni(w)){var E=M.stackGroups[w]||{numericAxisId:r,cateAxisId:i,items:[]};E.items.push(m),M.hasStack=!0,M.stackGroups[w]=E}else M.stackGroups[Om("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[m]};return Yr(Yr({},h),{},Hp({},_,M))},l),f={};return Object.keys(u).reduce(function(h,m){var y=u[m];if(y.hasStack){var b={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(w,x){var _=y.stackGroups[x];return Yr(Yr({},w),{},Hp({},x,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:cee(e,_.items,a)}))},b)}return Yr(Yr({},h),{},Hp({},m,y))},f)},IB=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,s=t.originalDomain,o=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=MQ(u,a,o);return e.domain([Ew(f),Mw(f)]),{niceTicks:f}}if(a&&i==="number"){var h=e.domain(),m=EQ(h,a,o);return{niceTicks:m}}return null};function kL(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,a=n.index,s=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!yn(i[e.dataKey])){var o=Vb(t,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return t[a]?t[a].coordinate+r/2:null}var l=Pi(i,yn(s)?e.dataKey:s);return yn(l)?null:e.scale(l)}var jL=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(t.type==="category")return r[o]?r[o].coordinate+i:null;var l=Pi(s,t.dataKey,t.domain[o]);return yn(l)?null:t.scale(l)-a/2+i},dee=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},fee=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Yr(Yr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Ni(a)){var s=t[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},hee=function(e){return e.reduce(function(t,r){return[Ew(r.concat([t[0]]).filter(ft)),Mw(r.concat([t[1]]).filter(ft))]},[1/0,-1/0])},LB=function(e,t,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,f){var h=hee(f.slice(t,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},IL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,q2=function(e,t,r){if(on(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(ft(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(IL.test(e[0])){var a=+IL.exec(e[0])[1];i[0]=t[0]-a}else on(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(ft(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(LL.test(e[1])){var s=+LL.exec(e[1])[1];i[1]=t[1]+s}else on(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},p1=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=rN(t,function(h){return h.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],f=a[o-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},DL=function(e,t,r){return!e||!e.length||Jy(e,Es(r,"type.defaultProps.domain"))?t:e},DB=function(e,t){var r=e.type.defaultProps?Yr(Yr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,f=r.hide;return Yr(Yr({},en(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:PN(e),value:Pi(t,i),type:l,payload:t,chartType:u,hide:f})};function ry(n){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(n)}function UL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ac(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(t),!0).forEach(function(r){UB(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):UL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UB(n,e,t){return e=pee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pee(n){var e=mee(n,"string");return ry(e)=="symbol"?e:e+""}function mee(n,e){if(ry(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gee(n,e){return bee(n)||xee(n,e)||yee(n,e)||vee()}function vee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yee(n,e){if(n){if(typeof n=="string")return FL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FL(n,e)}}function FL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function bee(n){if(Array.isArray(n))return n}var m1=Math.PI/180,wee=function(e){return e*180/Math.PI},Cr=function(e,t,r,i){return{x:e+Math.cos(-m1*i)*r,y:t+Math.sin(-m1*i)*r}},FB=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},_ee=function(e,t,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,f=ja(e.cx,s,s/2),h=ja(e.cy,o,o/2),m=FB(s,o,r),y=ja(e.innerRadius,m,0),b=ja(e.outerRadius,m,m*.8),w=Object.keys(t);return w.reduce(function(x,_){var M=t[_],E=M.domain,A=M.reversed,R;if(yn(M.range))i==="angleAxis"?R=[l,u]:i==="radiusAxis"&&(R=[y,b]),A&&(R=[R[1],R[0]]);else{R=M.range;var O=R,N=gee(O,2);l=N[0],u=N[1]}var L=kB(M,a),T=L.realScaleType,j=L.scale;j.domain(E).range(R),jB(j);var U=IB(j,ac(ac({},M),{},{realScaleType:T})),B=ac(ac(ac({},M),U),{},{range:R,radius:b,realScaleType:T,scale:j,cx:f,cy:h,innerRadius:y,outerRadius:b,startAngle:l,endAngle:u});return ac(ac({},x),{},UB({},_,B))},{})},See=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Mee=function(e,t){var r=e.x,i=e.y,a=t.cx,s=t.cy,o=See({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:wee(u),angleInRadian:u}},Eee=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:t-s*360,endAngle:r-s*360}},Tee=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},zL=function(e,t){var r=e.x,i=e.y,a=Mee({x:r,y:i},t),s=a.radius,o=a.angle,l=t.innerRadius,u=t.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var f=Eee(t),h=f.startAngle,m=f.endAngle,y=o,b;if(h<=m){for(;y>m;)y-=360;for(;y<h;)y+=360;b=y>=h&&y<=m}else{for(;y>h;)y-=360;for(;y<m;)y+=360;b=y>=m&&y<=h}return b?ac(ac({},t),{},{radius:s,angle:Tee(y,t)}):null},zB=function(e){return!z.isValidElement(e)&&!on(e)&&typeof e!="boolean"?e.className:""};function iy(n){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(n)}var Aee=["offset"];function Cee(n){return Ree(n)||Oee(n)||Nee(n)||Pee()}function Pee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nee(n,e){if(n){if(typeof n=="string")return X2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X2(n,e)}}function Oee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ree(n){if(Array.isArray(n))return X2(n)}function X2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kee(n,e){if(n==null)return{};var t=jee(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jee(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function BL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ai(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(t),!0).forEach(function(r){Iee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Iee(n,e,t){return e=Lee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lee(n){var e=Dee(n,"string");return iy(e)=="symbol"?e:e+""}function Dee(n,e){if(iy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ay(){return ay=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ay.apply(this,arguments)}var Uee=function(e){var t=e.value,r=e.formatter,i=yn(e.children)?t:e.children;return on(r)?r(i):i},Fee=function(e,t){var r=ka(t-e),i=Math.min(Math.abs(t-e),360);return r*i},zee=function(e,t,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,f=l.cy,h=l.innerRadius,m=l.outerRadius,y=l.startAngle,b=l.endAngle,w=l.clockWise,x=(h+m)/2,_=Fee(y,b),M=_>=0?1:-1,E,A;i==="insideStart"?(E=y+M*s,A=w):i==="insideEnd"?(E=b-M*s,A=!w):i==="end"&&(E=b+M*s,A=w),A=_<=0?A:!A;var R=Cr(u,f,x,E),O=Cr(u,f,x,E+(A?1:-1)*359),N="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(A?0:1,`,
    `).concat(O.x,",").concat(O.y),L=yn(e.id)?Om("recharts-radial-line-"):e.id;return ye.createElement("text",ay({},r,{dominantBaseline:"central",className:Cn("recharts-radial-bar-label",o)}),ye.createElement("defs",null,ye.createElement("path",{id:L,d:N})),ye.createElement("textPath",{xlinkHref:"#".concat(L)},t))},Bee=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,f=a.startAngle,h=a.endAngle,m=(f+h)/2;if(i==="outside"){var y=Cr(s,o,u+r,m),b=y.x,w=y.y;return{x:b,y:w,textAnchor:b>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,_=Cr(s,o,x,m),M=_.x,E=_.y;return{x:M,y:E,textAnchor:"middle",verticalAnchor:"middle"}},Hee=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=t,o=s.x,l=s.y,u=s.width,f=s.height,h=f>=0?1:-1,m=h*i,y=h>0?"end":"start",b=h>0?"start":"end",w=u>=0?1:-1,x=w*i,_=w>0?"end":"start",M=w>0?"start":"end";if(a==="top"){var E={x:o+u/2,y:l-h*i,textAnchor:"middle",verticalAnchor:y};return Ai(Ai({},E),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var A={x:o+u/2,y:l+f+m,textAnchor:"middle",verticalAnchor:b};return Ai(Ai({},A),r?{height:Math.max(r.y+r.height-(l+f),0),width:u}:{})}if(a==="left"){var R={x:o-x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"};return Ai(Ai({},R),r?{width:Math.max(R.x-r.x,0),height:f}:{})}if(a==="right"){var O={x:o+u+x,y:l+f/2,textAnchor:M,verticalAnchor:"middle"};return Ai(Ai({},O),r?{width:Math.max(r.x+r.width-O.x,0),height:f}:{})}var N=r?{width:u,height:f}:{};return a==="insideLeft"?Ai({x:o+x,y:l+f/2,textAnchor:M,verticalAnchor:"middle"},N):a==="insideRight"?Ai({x:o+u-x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"},N):a==="insideTop"?Ai({x:o+u/2,y:l+m,textAnchor:"middle",verticalAnchor:b},N):a==="insideBottom"?Ai({x:o+u/2,y:l+f-m,textAnchor:"middle",verticalAnchor:y},N):a==="insideTopLeft"?Ai({x:o+x,y:l+m,textAnchor:M,verticalAnchor:b},N):a==="insideTopRight"?Ai({x:o+u-x,y:l+m,textAnchor:_,verticalAnchor:b},N):a==="insideBottomLeft"?Ai({x:o+x,y:l+f-m,textAnchor:M,verticalAnchor:y},N):a==="insideBottomRight"?Ai({x:o+u-x,y:l+f-m,textAnchor:_,verticalAnchor:y},N):Nm(a)&&(ft(a.x)||lf(a.x))&&(ft(a.y)||lf(a.y))?Ai({x:o+ja(a.x,u),y:l+ja(a.y,f),textAnchor:"end",verticalAnchor:"end"},N):Ai({x:o+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Vee=function(e){return"cx"in e&&ft(e.cx)};function Wi(n){var e=n.offset,t=e===void 0?5:e,r=kee(n,Aee),i=Ai({offset:t},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,f=i.className,h=f===void 0?"":f,m=i.textBreakAll;if(!a||yn(o)&&yn(l)&&!z.isValidElement(u)&&!on(u))return null;if(z.isValidElement(u))return z.cloneElement(u,i);var y;if(on(u)){if(y=z.createElement(u,i),z.isValidElement(y))return y}else y=Uee(i);var b=Vee(a),w=en(i,!0);if(b&&(s==="insideStart"||s==="insideEnd"||s==="end"))return zee(i,y,w);var x=b?Bee(i):Hee(i);return ye.createElement(Of,ay({className:Cn("recharts-label",h)},w,x,{breakAll:m}),y)}Wi.displayName="Label";var BB=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,f=e.outerRadius,h=e.x,m=e.y,y=e.top,b=e.left,w=e.width,x=e.height,_=e.clockWise,M=e.labelViewBox;if(M)return M;if(ft(w)&&ft(x)){if(ft(h)&&ft(m))return{x:h,y:m,width:w,height:x};if(ft(y)&&ft(b))return{x:y,y:b,width:w,height:x}}return ft(h)&&ft(m)?{x:h,y:m,width:0,height:0}:ft(t)&&ft(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||l||o||0,clockWise:_}:e.viewBox?e.viewBox:{}},Wee=function(e,t){return e?e===!0?ye.createElement(Wi,{key:"label-implicit",viewBox:t}):Ni(e)?ye.createElement(Wi,{key:"label-implicit",viewBox:t,value:e}):z.isValidElement(e)?e.type===Wi?z.cloneElement(e,{key:"label-implicit",viewBox:t}):ye.createElement(Wi,{key:"label-implicit",content:e,viewBox:t}):on(e)?ye.createElement(Wi,{key:"label-implicit",content:e,viewBox:t}):Nm(e)?ye.createElement(Wi,ay({viewBox:t},e,{key:"label-implicit"})):null:null},Gee=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=BB(e),s=Ts(i,Wi).map(function(l,u){return z.cloneElement(l,{viewBox:t||a,key:"label-".concat(u)})});if(!r)return s;var o=Wee(e.label,t||a);return[o].concat(Cee(s))};Wi.parseViewBox=BB;Wi.renderCallByParent=Gee;var ST,HL;function $ee(){if(HL)return ST;HL=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return ST=n,ST}var qee=$ee();const Xee=Kn(qee);function sy(n){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(n)}var Yee=["valueAccessor"],Kee=["data","dataKey","clockWise","id","textBreakAll"];function Zee(n){return tte(n)||ete(n)||Qee(n)||Jee()}function Jee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qee(n,e){if(n){if(typeof n=="string")return Y2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y2(n,e)}}function ete(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tte(n){if(Array.isArray(n))return Y2(n)}function Y2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function g1(){return g1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g1.apply(this,arguments)}function VL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function WL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(t),!0).forEach(function(r){nte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nte(n,e,t){return e=rte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rte(n){var e=ite(n,"string");return sy(e)=="symbol"?e:e+""}function ite(n,e){if(sy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GL(n,e){if(n==null)return{};var t=ate(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ate(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var ste=function(e){return Array.isArray(e.value)?Xee(e.value):e.value};function mc(n){var e=n.valueAccessor,t=e===void 0?ste:e,r=GL(n,Yee),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=GL(r,Kee);return!i||!i.length?null:ye.createElement($n,{className:"recharts-label-list"},i.map(function(f,h){var m=yn(a)?t(f,h):Pi(f&&f.payload,a),y=yn(o)?{}:{id:"".concat(o,"-").concat(h)};return ye.createElement(Wi,g1({},en(f,!0),u,y,{parentViewBox:f.parentViewBox,value:m,textBreakAll:l,viewBox:Wi.parseViewBox(yn(s)?f:WL(WL({},f),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}mc.displayName="LabelList";function ote(n,e){return n?n===!0?ye.createElement(mc,{key:"labelList-implicit",data:e}):ye.isValidElement(n)||on(n)?ye.createElement(mc,{key:"labelList-implicit",data:e,content:n}):Nm(n)?ye.createElement(mc,g1({data:e},n,{key:"labelList-implicit"})):null:null}function lte(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=Ts(r,mc).map(function(s,o){return z.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!t)return i;var a=ote(n.label,e);return[a].concat(Zee(i))}mc.renderCallByParent=lte;function oy(n){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(n)}function K2(){return K2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},K2.apply(this,arguments)}function $L(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$L(Object(t),!0).forEach(function(r){cte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$L(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cte(n,e,t){return e=ute(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ute(n){var e=dte(n,"string");return oy(e)=="symbol"?e:e+""}function dte(n,e){if(oy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var fte=function(e,t){var r=ka(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},yx=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,f=l*(o?1:-1)+i,h=Math.asin(l/f)/m1,m=u?a:a+s*h,y=Cr(t,r,f,m),b=Cr(t,r,i,m),w=u?a-s*h:a,x=Cr(t,r,f*Math.cos(h*m1),w);return{center:y,circleTangency:b,lineTangency:x,theta:h}},HB=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=fte(s,o),u=s+l,f=Cr(t,r,a,s),h=Cr(t,r,a,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var y=Cr(t,r,i,s),b=Cr(t,r,i,u);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(r," Z");return m},hte=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,h=ka(f-u),m=yx({cx:t,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),y=m.circleTangency,b=m.lineTangency,w=m.theta,x=yx({cx:t,cy:r,radius:a,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:l}),_=x.circleTangency,M=x.lineTangency,E=x.theta,A=l?Math.abs(u-f):Math.abs(u-f)-w-E;if(A<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):HB({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f});var R="M ".concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
  `);if(i>0){var O=yx({cx:t,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),N=O.circleTangency,L=O.lineTangency,T=O.theta,j=yx({cx:t,cy:r,radius:i,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),U=j.circleTangency,B=j.lineTangency,V=j.theta,W=l?Math.abs(u-f):Math.abs(u-f)-T-V;if(W<0&&s===0)return"".concat(R,"L").concat(t,",").concat(r,"Z");R+="L".concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(U.x,",").concat(U.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(L.x,",").concat(L.y,"Z")}else R+="L".concat(t,",").concat(r,"Z");return R},pte={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VB=function(e){var t=qL(qL({},pte),e),r=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,f=t.startAngle,h=t.endAngle,m=t.className;if(s<a||f===h)return null;var y=Cn("recharts-sector",m),b=s-a,w=ja(o,b,0,!0),x;return w>0&&Math.abs(f-h)<360?x=hte({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(w,b/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:h}):x=HB({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:h}),ye.createElement("path",K2({},en(t,!0),{className:y,d:x,role:"img"}))};function ly(n){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ly(n)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Z2.apply(this,arguments)}function XL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function YL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XL(Object(t),!0).forEach(function(r){mte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mte(n,e,t){return e=gte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gte(n){var e=vte(n,"string");return ly(e)=="symbol"?e:e+""}function vte(n,e){if(ly(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var KL={curveBasisClosed:D9,curveBasisOpen:U9,curveBasis:L9,curveBumpX:_9,curveBumpY:S9,curveLinearClosed:F9,curveLinear:fw,curveMonotoneX:z9,curveMonotoneY:B9,curveNatural:H9,curveStep:V9,curveStepAfter:G9,curveStepBefore:W9},xx=function(e){return e.x===+e.x&&e.y===+e.y},Vg=function(e){return e.x},Wg=function(e){return e.y},yte=function(e,t){if(on(e))return e;var r="curve".concat(uw(e));return(r==="curveMonotone"||r==="curveBump")&&t?KL["".concat(r).concat(t==="vertical"?"Y":"X")]:KL[r]||fw},xte=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,f=yte(r,o),h=u?a.filter(function(w){return xx(w)}):a,m;if(Array.isArray(s)){var y=u?s.filter(function(w){return xx(w)}):s,b=h.map(function(w,x){return YL(YL({},w),{},{base:y[x]})});return o==="vertical"?m=ux().y(Wg).x1(Vg).x0(function(w){return w.base.x}):m=ux().x(Vg).y1(Wg).y0(function(w){return w.base.y}),m.defined(xx).curve(f),m(b)}return o==="vertical"&&ft(s)?m=ux().y(Wg).x1(Vg).x0(s):ft(s)?m=ux().x(Vg).y1(Wg).y0(s):m=Bz().x(Vg).y(Wg),m.defined(xx).curve(f),m(h)},v1=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?xte(e):i;return z.createElement("path",Z2({},en(e,!1),Wb(e),{className:Cn("recharts-curve",t),d:s,ref:a}))},MT={exports:{}},ET,ZL;function bte(){if(ZL)return ET;ZL=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ET=n,ET}var TT,JL;function wte(){if(JL)return TT;JL=1;var n=bte();function e(){}function t(){}return t.resetWarningCache=e,TT=function(){function r(s,o,l,u,f,h){if(h!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},TT}var QL;function _te(){return QL||(QL=1,MT.exports=wte()()),MT.exports}var Ste=_te();const er=Kn(Ste);var Mte=Object.getOwnPropertyNames,Ete=Object.getOwnPropertySymbols,Tte=Object.prototype.hasOwnProperty;function eD(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function bx(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var a=i.cache,s=a.get(t),o=a.get(r);if(s&&o)return s===r&&o===t;a.set(t,r),a.set(r,t);var l=n(t,r,i);return a.delete(t),a.delete(r),l}}function Ate(n){return n?.[Symbol.toStringTag]}function tD(n){return Mte(n).concat(Ete(n))}var Cte=Object.hasOwn||(function(n,e){return Tte.call(n,e)});function Gf(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var Pte="__v",Nte="__o",Ote="_owner",nD=Object.getOwnPropertyDescriptor,rD=Object.keys;function Rte(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function kte(n,e){return Gf(n.getTime(),e.getTime())}function jte(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function Ite(n,e){return n===e}function iD(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),f=!1,h=0;(o=u.next())&&!o.done;){if(i[h]){h++;continue}var m=s.value,y=o.value;if(t.equals(m[0],y[0],l,h,n,e,t)&&t.equals(m[1],y[1],m[0],y[0],n,e,t)){f=i[h]=!0;break}h++}if(!f)return!1;l++}return!0}var Lte=Gf;function Dte(n,e,t){var r=rD(n),i=r.length;if(rD(e).length!==i)return!1;for(;i-- >0;)if(!WB(n,e,t,r[i]))return!1;return!0}function Gg(n,e,t){var r=tD(n),i=r.length;if(tD(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!WB(n,e,t,a)||(s=nD(n,a),o=nD(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Ute(n,e){return Gf(n.valueOf(),e.valueOf())}function Fte(n,e){return n.source===e.source&&n.flags===e.flags}function aD(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&t.equals(s.value,o.value,s.value,o.value,n,e,t)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function zte(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function Bte(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function WB(n,e,t,r){return(r===Ote||r===Nte||r===Pte)&&(n.$$typeof||e.$$typeof)?!0:Cte(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var Hte="[object Arguments]",Vte="[object Boolean]",Wte="[object Date]",Gte="[object Error]",$te="[object Map]",qte="[object Number]",Xte="[object Object]",Yte="[object RegExp]",Kte="[object Set]",Zte="[object String]",Jte="[object URL]",Qte=Array.isArray,sD=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,oD=Object.assign,ene=Object.prototype.toString.call.bind(Object.prototype.toString);function tne(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,a=n.areMapsEqual,s=n.areNumbersEqual,o=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,u=n.areRegExpsEqual,f=n.areSetsEqual,h=n.areTypedArraysEqual,m=n.areUrlsEqual,y=n.unknownTagComparators;return function(w,x,_){if(w===x)return!0;if(w==null||x==null)return!1;var M=typeof w;if(M!==typeof x)return!1;if(M!=="object")return M==="number"?s(w,x,_):M==="function"?i(w,x,_):!1;var E=w.constructor;if(E!==x.constructor)return!1;if(E===Object)return o(w,x,_);if(Qte(w))return e(w,x,_);if(sD!=null&&sD(w))return h(w,x,_);if(E===Date)return t(w,x,_);if(E===RegExp)return u(w,x,_);if(E===Map)return a(w,x,_);if(E===Set)return f(w,x,_);var A=ene(w);if(A===Wte)return t(w,x,_);if(A===Yte)return u(w,x,_);if(A===$te)return a(w,x,_);if(A===Kte)return f(w,x,_);if(A===Xte)return typeof w.then!="function"&&typeof x.then!="function"&&o(w,x,_);if(A===Jte)return m(w,x,_);if(A===Gte)return r(w,x,_);if(A===Hte)return o(w,x,_);if(A===Vte||A===qte||A===Zte)return l(w,x,_);if(y){var R=y[A];if(!R){var O=Ate(w);O&&(R=y[O])}if(R)return R(w,x,_)}return!1}}function nne(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Gg:Rte,areDatesEqual:kte,areErrorsEqual:jte,areFunctionsEqual:Ite,areMapsEqual:r?eD(iD,Gg):iD,areNumbersEqual:Lte,areObjectsEqual:r?Gg:Dte,arePrimitiveWrappersEqual:Ute,areRegExpsEqual:Fte,areSetsEqual:r?eD(aD,Gg):aD,areTypedArraysEqual:r?Gg:zte,areUrlsEqual:Bte,unknownTagComparators:void 0};if(t&&(i=oD({},i,t(i))),e){var a=bx(i.areArraysEqual),s=bx(i.areMapsEqual),o=bx(i.areObjectsEqual),l=bx(i.areSetsEqual);i=oD({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function rne(n){return function(e,t,r,i,a,s,o){return n(e,t,o)}}function ine(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,a=n.strict;if(r)return function(l,u){var f=r(),h=f.cache,m=h===void 0?e?new WeakMap:void 0:h,y=f.meta;return t(l,u,{cache:m,equals:i,meta:y,strict:a})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return t(l,u,s)}}var ane=qu();qu({strict:!0});qu({circular:!0});qu({circular:!0,strict:!0});qu({createInternalComparator:function(){return Gf}});qu({strict:!0,createInternalComparator:function(){return Gf}});qu({circular:!0,createInternalComparator:function(){return Gf}});qu({circular:!0,createInternalComparator:function(){return Gf},strict:!0});function qu(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,a=n.strict,s=a===void 0?!1:a,o=nne(n),l=tne(o),u=r?r(l):rne(l);return ine({circular:t,comparator:l,createState:i,equals:u,strict:s})}function sne(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function lD(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):sne(i)};requestAnimationFrame(r)}function J2(n){"@babel/helpers - typeof";return J2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J2(n)}function one(n){return dne(n)||une(n)||cne(n)||lne()}function lne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cne(n,e){if(n){if(typeof n=="string")return cD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cD(n,e)}}function cD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function une(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dne(n){if(Array.isArray(n))return n}function fne(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var s=a,o=one(s),l=o[0],u=o.slice(1);if(typeof l=="number"){lD(i.bind(null,u),l);return}i(l),lD(i.bind(null,u));return}J2(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function cy(n){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(n)}function uD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(t),!0).forEach(function(r){GB(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GB(n,e,t){return e=hne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hne(n){var e=pne(n,"string");return cy(e)==="symbol"?e:String(e)}function pne(n,e){if(cy(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(cy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var mne=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},gne=function(e){return e},vne=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Sv=function(e,t){return Object.keys(t).reduce(function(r,i){return dD(dD({},r),{},GB({},i,e(i,t[i])))},{})},fD=function(e,t,r){return e.map(function(i){return"".concat(vne(i)," ").concat(t,"ms ").concat(r)}).join(",")};function yne(n,e){return wne(n)||bne(n,e)||$B(n,e)||xne()}function xne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function wne(n){if(Array.isArray(n))return n}function _ne(n){return Ene(n)||Mne(n)||$B(n)||Sne()}function Sne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $B(n,e){if(n){if(typeof n=="string")return Q2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q2(n,e)}}function Mne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ene(n){if(Array.isArray(n))return Q2(n)}function Q2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var y1=1e-4,qB=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},XB=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},hD=function(e,t){return function(r){var i=qB(e,t);return XB(i,r)}},Tne=function(e,t){return function(r){var i=qB(e,t),a=[].concat(_ne(i.map(function(s,o){return s*o}).slice(1)),[0]);return XB(a,r)}},pD=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],s=t[2],o=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=yne(u,4);i=f[0],a=f[1],s=f[2],o=f[3]}}}var h=hD(i,s),m=hD(a,o),y=Tne(i,s),b=function(_){return _>1?1:_<0?0:_},w=function(_){for(var M=_>1?1:_,E=M,A=0;A<8;++A){var R=h(E)-M,O=y(E);if(Math.abs(R-M)<y1||O<y1)return m(E);E=b(E-R/O)}return m(E)};return w.isStepper=!1,w},Ane=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(f,h,m){var y=-(f-h)*r,b=m*a,w=m+(y-b)*o/1e3,x=m*o/1e3+f;return Math.abs(x-h)<y1&&Math.abs(w)<y1?[h,0]:[x,w]};return l.isStepper=!0,l.dt=o,l},Cne=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pD(i);case"spring":return Ane();default:if(i.split("(")[0]==="cubic-bezier")return pD(i)}return typeof i=="function"?i:null};function uy(n){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(n)}function mD(n){return One(n)||Nne(n)||YB(n)||Pne()}function Pne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function One(n){if(Array.isArray(n))return tC(n)}function gD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function na(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(t),!0).forEach(function(r){eC(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eC(n,e,t){return e=Rne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rne(n){var e=kne(n,"string");return uy(e)==="symbol"?e:String(e)}function kne(n,e){if(uy(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jne(n,e){return Dne(n)||Lne(n,e)||YB(n,e)||Ine()}function Ine(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YB(n,e){if(n){if(typeof n=="string")return tC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tC(n,e)}}function tC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Lne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Dne(n){if(Array.isArray(n))return n}var x1=function(e,t,r){return e+(t-e)*r},nC=function(e){var t=e.from,r=e.to;return t!==r},Une=function n(e,t,r){var i=Sv(function(a,s){if(nC(s)){var o=e(s.from,s.to,s.velocity),l=jne(o,2),u=l[0],f=l[1];return na(na({},s),{},{from:u,velocity:f})}return s},t);return r<1?Sv(function(a,s){return nC(s)?na(na({},s),{},{velocity:x1(s.velocity,i[a].velocity,r),from:x1(s.from,i[a].from,r)}):s},t):n(e,i,r-1)};const Fne=(function(n,e,t,r,i){var a=mne(n,e),s=a.reduce(function(x,_){return na(na({},x),{},eC({},_,[n[_],e[_]]))},{}),o=a.reduce(function(x,_){return na(na({},x),{},eC({},_,{from:n[_],velocity:0,to:e[_]}))},{}),l=-1,u,f,h=function(){return null},m=function(){return Sv(function(_,M){return M.from},o)},y=function(){return!Object.values(o).filter(nC).length},b=function(_){u||(u=_);var M=_-u,E=M/t.dt;o=Une(t,o,E),i(na(na(na({},n),e),m())),u=_,y()||(l=requestAnimationFrame(h))},w=function(_){f||(f=_);var M=(_-f)/r,E=Sv(function(R,O){return x1.apply(void 0,mD(O).concat([t(M)]))},s);if(i(na(na(na({},n),e),E)),M<1)l=requestAnimationFrame(h);else{var A=Sv(function(R,O){return x1.apply(void 0,mD(O).concat([t(1)]))},s);i(na(na(na({},n),e),A))}};return h=t.isStepper?b:w,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}});function im(n){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(n)}var zne=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bne(n,e){if(n==null)return{};var t=Hne(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Hne(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function AT(n){return $ne(n)||Gne(n)||Wne(n)||Vne()}function Vne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wne(n,e){if(n){if(typeof n=="string")return rC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rC(n,e)}}function Gne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $ne(n){if(Array.isArray(n))return rC(n)}function rC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Eo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(t),!0).forEach(function(r){gv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gv(n,e,t){return e=KB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qne(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Xne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,KB(r.key),r)}}function Yne(n,e,t){return e&&Xne(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function KB(n){var e=Kne(n,"string");return im(e)==="symbol"?e:String(e)}function Kne(n,e){if(im(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(im(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zne(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&iC(n,e)}function iC(n,e){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iC(n,e)}function Jne(n){var e=Qne();return function(){var r=b1(n),i;if(e){var a=b1(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return aC(this,i)}}function aC(n,e){if(e&&(im(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sC(n)}function sC(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b1(n){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b1(n)}var fl=(function(n){Zne(t,n);var e=Jne(t);function t(r,i){var a;qne(this,t),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,f=s.to,h=s.steps,m=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(sC(a)),a.changeStyle=a.changeStyle.bind(sC(a)),!o||y<=0)return a.state={style:{}},typeof m=="function"&&(a.state={style:f}),aC(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof m=="function")return a.state={style:u},aC(a);a.state={style:l?gv({},l,u):u}}else a.state={style:{}};return a}return Yne(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,f=a.to,h=a.from,m=this.state.style;if(o){if(!s){var y={style:l?gv({},l,f):f};this.state&&m&&(l&&m[l]!==f||!l&&m!==f)&&this.setState(y);return}if(!(ane(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var w=b||u?h:i.to;if(this.state&&m){var x={style:l?gv({},l,w):w};(l&&m[l]!==w||!l&&m!==w)&&this.setState(x)}this.runAnimation(Eo(Eo({},this.props),{},{from:w,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,f=i.begin,h=i.onAnimationEnd,m=i.onAnimationStart,y=Fne(s,o,Cne(u),l,this.changeStyle),b=function(){a.stopJSAnimation=y()};this.manager.start([m,f,b,l,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],f=u.style,h=u.duration,m=h===void 0?0:h,y=function(w,x,_){if(_===0)return w;var M=x.duration,E=x.easing,A=E===void 0?"ease":E,R=x.style,O=x.properties,N=x.onAnimationEnd,L=_>0?s[_-1]:x,T=O||Object.keys(R);if(typeof A=="function"||A==="spring")return[].concat(AT(w),[a.runJSAnimation.bind(a,{from:L.style,to:R,duration:M,easing:A}),M]);var j=fD(T,M,A),U=Eo(Eo(Eo({},L.style),R),{},{transition:j});return[].concat(AT(w),[U,M,N]).filter(gne)};return this.manager.start([l].concat(AT(s.reduce(y,[f,Math.max(m,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=fne());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,f=i.onAnimationStart,h=i.onAnimationEnd,m=i.steps,y=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof y=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var w=o?gv({},o,l):l,x=fD(Object.keys(w),s,u);b.start([f,a,Eo(Eo({},w),{},{transition:x}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Bne(i,zne),u=z.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!o||u===0||s<=0)return a;var h=function(y){var b=y.props,w=b.style,x=w===void 0?{}:w,_=b.className,M=z.cloneElement(y,Eo(Eo({},l),{},{style:Eo(Eo({},x),f),className:_}));return M};return u===1?h(z.Children.only(a)):ye.createElement("div",null,z.Children.map(a,function(m){return h(m)}))}}]),t})(z.PureComponent);fl.displayName="Animate";fl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};fl.propTypes={from:er.oneOfType([er.object,er.string]),to:er.oneOfType([er.object,er.string]),attributeName:er.string,duration:er.number,begin:er.number,easing:er.oneOfType([er.string,er.func]),steps:er.arrayOf(er.shape({duration:er.number.isRequired,style:er.object.isRequired,easing:er.oneOfType([er.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),er.func]),properties:er.arrayOf("string"),onAnimationEnd:er.func})),children:er.oneOfType([er.node,er.func]),isActive:er.bool,canBegin:er.bool,onAnimationEnd:er.func,shouldReAnimate:er.bool,onAnimationStart:er.func,onAnimationReStart:er.func};function jf(){return jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jf.apply(null,arguments)}function dy(n){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(n)}function w1(){return w1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},w1.apply(this,arguments)}function ere(n,e){return ire(n)||rre(n,e)||nre(n,e)||tre()}function tre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nre(n,e){if(n){if(typeof n=="string")return yD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yD(n,e)}}function yD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ire(n){if(Array.isArray(n))return n}function xD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(t),!0).forEach(function(r){are(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function are(n,e,t){return e=sre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sre(n){var e=ore(n,"string");return dy(e)=="symbol"?e:e+""}function ore(n,e){if(dy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var wD=function(e,t,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],m=0,y=4;m<y;m++)h[m]=a[m]>s?s:a[m];f="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(t)),f+="L ".concat(e+r-l*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+o*h[1])),f+="L ".concat(e+r,",").concat(t+i-o*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-l*h[2],",").concat(t+i)),f+="L ".concat(e+l*h[3],",").concat(t+i),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+i-o*h[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var b=Math.min(s,a);f="M ".concat(e,",").concat(t+o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+l*b,",").concat(t,`
            L `).concat(e+r-l*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r,",").concat(t+o*b,`
            L `).concat(e+r,",").concat(t+i-o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r-l*b,",").concat(t+i,`
            L `).concat(e+l*b,",").concat(t+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(t+i-o*b," Z")}else f="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},lre=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,s=t.y,o=t.width,l=t.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),f=Math.max(a,a+o),h=Math.min(s,s+l),m=Math.max(s,s+l);return r>=u&&r<=f&&i>=h&&i<=m}return!1},cre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NN=function(e){var t=bD(bD({},cre),e),r=z.useRef(),i=z.useState(-1),a=ere(i,2),s=a[0],o=a[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=t.x,u=t.y,f=t.width,h=t.height,m=t.radius,y=t.className,b=t.animationEasing,w=t.animationDuration,x=t.animationBegin,_=t.isAnimationActive,M=t.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||h!==+h||f===0||h===0)return null;var E=Cn("recharts-rectangle",y);return M?ye.createElement(fl,{canBegin:s>0,from:{width:f,height:h,x:l,y:u},to:{width:f,height:h,x:l,y:u},duration:w,animationEasing:b,isActive:M},function(A){var R=A.width,O=A.height,N=A.x,L=A.y;return ye.createElement(fl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:w,isActive:_,easing:b},ye.createElement("path",w1({},en(t,!0),{className:E,d:wD(N,L,R,O,m),ref:r})))}):ye.createElement("path",w1({},en(t,!0),{className:E,d:wD(l,u,f,h,m)}))},ure=["points","className","baseLinePoints","connectNulls"];function Pp(){return Pp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pp.apply(this,arguments)}function dre(n,e){if(n==null)return{};var t=fre(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function _D(n){return gre(n)||mre(n)||pre(n)||hre()}function hre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pre(n,e){if(n){if(typeof n=="string")return oC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oC(n,e)}}function mre(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gre(n){if(Array.isArray(n))return oC(n)}function oC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var SD=function(e){return e&&e.x===+e.x&&e.y===+e.y},vre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return e.forEach(function(r){SD(r)?t[t.length-1].push(r):t[t.length-1].length>0&&t.push([])}),SD(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},Mv=function(e,t){var r=vre(e);t&&(r=[r.reduce(function(a,s){return[].concat(_D(a),_D(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},yre=function(e,t,r){var i=Mv(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Mv(t.reverse(),r).slice(1))},xre=function(e){var t=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=dre(e,ure);if(!t||!t.length)return null;var o=Cn("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=yre(t,i,a);return ye.createElement("g",{className:o},ye.createElement("path",Pp({},en(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?ye.createElement("path",Pp({},en(s,!0),{fill:"none",d:Mv(t,a)})):null,l?ye.createElement("path",Pp({},en(s,!0),{fill:"none",d:Mv(i,a)})):null)}var f=Mv(t,a);return ye.createElement("path",Pp({},en(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:o,d:f}))};function lC(){return lC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lC.apply(this,arguments)}var Cw=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,s=Cn("recharts-dot",a);return t===+t&&r===+r&&i===+i?z.createElement("circle",lC({},en(e,!1),Wb(e),{className:s,cx:t,cy:r,r:i})):null};function fy(n){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(n)}var bre=["x","y","top","left","width","height","className"];function cC(){return cC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cC.apply(this,arguments)}function MD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(t),!0).forEach(function(r){_re(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _re(n,e,t){return e=Sre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sre(n){var e=Mre(n,"string");return fy(e)=="symbol"?e:e+""}function Mre(n,e){if(fy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ere(n,e){if(n==null)return{};var t=Tre(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Tre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Are=function(e,t,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(r)},Cre=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,f=e.width,h=f===void 0?0:f,m=e.height,y=m===void 0?0:m,b=e.className,w=Ere(e,bre),x=wre({x:r,y:a,top:o,left:u,width:h,height:y},w);return!ft(r)||!ft(a)||!ft(h)||!ft(y)||!ft(o)||!ft(u)?null:ye.createElement("path",cC({},en(x,!0),{className:Cn("recharts-cross",b),d:Are(r,a,h,y,o,u)}))},CT,ED;function Pre(){if(ED)return CT;ED=1;var n=Sw(),e=dB(),t=ml();function r(i,a){return i&&i.length?n(i,t(a,2),e):void 0}return CT=r,CT}var Nre=Pre();const Ore=Kn(Nre);var PT,TD;function Rre(){if(TD)return PT;TD=1;var n=Sw(),e=ml(),t=fB();function r(i,a){return i&&i.length?n(i,e(a,2),t):void 0}return PT=r,PT}var kre=Rre();const jre=Kn(kre);var Ire=["cx","cy","angle","ticks","axisLine"],Lre=["ticks","tick","angle","tickFormatter","stroke"];function am(n){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(n)}function Ev(){return Ev=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ev.apply(this,arguments)}function AD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ud(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(t),!0).forEach(function(r){Pw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function CD(n,e){if(n==null)return{};var t=Dre(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Dre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Ure(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function PD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,JB(r.key),r)}}function Fre(n,e,t){return e&&PD(n.prototype,e),t&&PD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function zre(n,e,t){return e=_1(e),Bre(n,ZB()?Reflect.construct(e,t||[],_1(n).constructor):e.apply(n,t))}function Bre(n,e){if(e&&(am(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hre(n)}function Hre(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZB(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZB=function(){return!!n})()}function _1(n){return _1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_1(n)}function Vre(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&uC(n,e)}function uC(n,e){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uC(n,e)}function Pw(n,e,t){return e=JB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JB(n){var e=Wre(n,"string");return am(e)=="symbol"?e:e+""}function Wre(n,e){if(am(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Nw=(function(n){function e(){return Ure(this,e),zre(this,e,arguments)}return Vre(e,n),Fre(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return Cr(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=Ore(o,function(f){return f.coordinate||0}),u=jre(o,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=CD(r,Ire),f=o.reduce(function(b,w){return[Math.min(b[0],w.coordinate),Math.max(b[1],w.coordinate)]},[1/0,-1/0]),h=Cr(i,a,f[0],s),m=Cr(i,a,f[1],s),y=Ud(Ud(Ud({},en(u,!1)),{},{fill:"none"},en(l,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return ye.createElement("line",Ev({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,f=CD(i,Lre),h=this.getTickTextAnchor(),m=en(f,!1),y=en(s,!1),b=a.map(function(w,x){var _=r.getTickValueCoord(w),M=Ud(Ud(Ud(Ud({textAnchor:h,transform:"rotate(".concat(90-o,", ").concat(_.x,", ").concat(_.y,")")},m),{},{stroke:"none",fill:u},y),{},{index:x},_),{},{payload:w});return ye.createElement($n,Ev({className:Cn("recharts-polar-radius-axis-tick",zB(s)),key:"tick-".concat(w.coordinate)},Nf(r.props,w,x)),e.renderTickItem(s,M,l?l(w.value,x):w.value))});return ye.createElement($n,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:ye.createElement($n,{className:Cn("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Wi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ye.isValidElement(r)?s=ye.cloneElement(r,i):on(r)?s=r(i):s=ye.createElement(Of,Ev({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(z.PureComponent);Pw(Nw,"displayName","PolarRadiusAxis");Pw(Nw,"axisType","radiusAxis");Pw(Nw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function sm(n){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(n)}function sf(){return sf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sf.apply(this,arguments)}function ND(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(t),!0).forEach(function(r){Ow(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ND(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Gre(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function OD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,e6(r.key),r)}}function $re(n,e,t){return e&&OD(n.prototype,e),t&&OD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function qre(n,e,t){return e=S1(e),Xre(n,QB()?Reflect.construct(e,t||[],S1(n).constructor):e.apply(n,t))}function Xre(n,e){if(e&&(sm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yre(n)}function Yre(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function QB(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QB=function(){return!!n})()}function S1(n){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S1(n)}function Kre(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&dC(n,e)}function dC(n,e){return dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dC(n,e)}function Ow(n,e,t){return e=e6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e6(n){var e=Zre(n,"string");return sm(e)=="symbol"?e:e+""}function Zre(n,e){if(sm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Jre=Math.PI/180,RD=1e-5,Rw=(function(n){function e(){return Gre(this,e),qre(this,e,arguments)}return Kre(e,n),$re(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,f=u||8,h=Cr(a,s,o,r.coordinate),m=Cr(a,s,o+(l==="inner"?-1:1)*f,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Jre),s;return a>RD?s=i==="outer"?"start":"end":a<-RD?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=Fd(Fd({},en(this.props,!1)),{},{fill:"none"},en(o,!1));if(l==="circle")return ye.createElement(Cw,sf({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var f=this.props.ticks,h=f.map(function(m){return Cr(i,a,s,m.coordinate)});return ye.createElement(xre,sf({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,f=en(this.props,!1),h=en(s,!1),m=Fd(Fd({},f),{},{fill:"none"},en(o,!1)),y=a.map(function(b,w){var x=r.getTickLineCoord(b),_=r.getTickTextAnchor(b),M=Fd(Fd(Fd({textAnchor:_},f),{},{stroke:"none",fill:u},h),{},{index:w,payload:b,x:x.x2,y:x.y2});return ye.createElement($n,sf({className:Cn("recharts-polar-angle-axis-tick",zB(s)),key:"tick-".concat(b.coordinate)},Nf(r.props,b,w)),o&&ye.createElement("line",sf({className:"recharts-polar-angle-axis-tick-line"},m,x)),s&&e.renderTickItem(s,M,l?l(b.value,w):b.value))});return ye.createElement($n,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:ye.createElement($n,{className:Cn("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ye.isValidElement(r)?s=ye.cloneElement(r,i):on(r)?s=r(i):s=ye.createElement(Of,sf({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(z.PureComponent);Ow(Rw,"displayName","PolarAngleAxis");Ow(Rw,"axisType","angleAxis");Ow(Rw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var NT,kD;function Qre(){if(kD)return NT;kD=1;var n=u5(),e=n(Object.getPrototypeOf,Object);return NT=e,NT}var OT,jD;function eie(){if(jD)return OT;jD=1;var n=Ac(),e=Qre(),t=Cc(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(f){if(!t(f)||n(f)!=r)return!1;var h=e(f);if(h===null)return!0;var m=o.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&s.call(m)==l}return OT=u,OT}var tie=eie();const nie=Kn(tie);var RT,ID;function rie(){if(ID)return RT;ID=1;var n=Ac(),e=Cc(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return RT=r,RT}var iie=rie();const aie=Kn(iie);function hy(n){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(n)}function M1(){return M1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},M1.apply(this,arguments)}function sie(n,e){return uie(n)||cie(n,e)||lie(n,e)||oie()}function oie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lie(n,e){if(n){if(typeof n=="string")return LD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LD(n,e)}}function LD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function uie(n){if(Array.isArray(n))return n}function DD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function UD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DD(Object(t),!0).forEach(function(r){die(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function die(n,e,t){return e=fie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fie(n){var e=hie(n,"string");return hy(e)=="symbol"?e:e+""}function hie(n,e){if(hy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var FD=function(e,t,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-i,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},pie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mie=function(e){var t=UD(UD({},pie),e),r=z.useRef(),i=z.useState(-1),a=sie(i,2),s=a[0],o=a[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&o(E)}catch{}},[]);var l=t.x,u=t.y,f=t.upperWidth,h=t.lowerWidth,m=t.height,y=t.className,b=t.animationEasing,w=t.animationDuration,x=t.animationBegin,_=t.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||h!==+h||m!==+m||f===0&&h===0||m===0)return null;var M=Cn("recharts-trapezoid",y);return _?ye.createElement(fl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:m,x:l,y:u},to:{upperWidth:f,lowerWidth:h,height:m,x:l,y:u},duration:w,animationEasing:b,isActive:_},function(E){var A=E.upperWidth,R=E.lowerWidth,O=E.height,N=E.x,L=E.y;return ye.createElement(fl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:w,easing:b},ye.createElement("path",M1({},en(t,!0),{className:M,d:FD(N,L,A,R,O),ref:r})))}):ye.createElement("g",null,ye.createElement("path",M1({},en(t,!0),{className:M,d:FD(l,u,f,h,m)})))},gie=["option","shapeType","propTransformer","activeClassName","isActive"];function py(n){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(n)}function vie(n,e){if(n==null)return{};var t=yie(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function yie(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function zD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function E1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(t),!0).forEach(function(r){xie(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xie(n,e,t){return e=bie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bie(n){var e=wie(n,"string");return py(e)=="symbol"?e:e+""}function wie(n,e){if(py(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _ie(n,e){return E1(E1({},e),n)}function Sie(n,e){return n==="symbols"}function BD(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return ye.createElement(NN,t);case"trapezoid":return ye.createElement(mie,t);case"sector":return ye.createElement(VB,t);case"symbols":if(Sie(e))return ye.createElement(YP,t);break;default:return null}}function Mie(n){return z.isValidElement(n)?n.props:n}function t6(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?_ie:r,a=n.activeClassName,s=a===void 0?"recharts-active-shape":a,o=n.isActive,l=vie(n,gie),u;if(z.isValidElement(e))u=z.cloneElement(e,E1(E1({},l),Mie(e)));else if(on(e))u=e(l);else if(nie(e)&&!aie(e)){var f=i(e,l);u=ye.createElement(BD,{shapeType:t,elementProps:f})}else{var h=l;u=ye.createElement(BD,{shapeType:t,elementProps:h})}return o?ye.createElement($n,{className:s},u):u}function kw(n,e){return e!=null&&"trapezoids"in n.props}function jw(n,e){return e!=null&&"sectors"in n.props}function my(n,e){return e!=null&&"points"in n.props}function Eie(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function Tie(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function Aie(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function Cie(n,e){var t;return kw(n,e)?t=Eie:jw(n,e)?t=Tie:my(n,e)&&(t=Aie),t}function Pie(n,e){var t;return kw(n,e)?t="trapezoids":jw(n,e)?t="sectors":my(n,e)&&(t="points"),t}function Nie(n,e){if(kw(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(jw(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return my(n,e)?e.payload:{}}function Oie(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Pie(t,e),a=Nie(t,e),s=r.filter(function(l,u){var f=Jy(a,l),h=t.props[i].filter(function(b){var w=Cie(t,e);return w(b,e)}),m=t.props[i].indexOf(h[h.length-1]),y=u===m;return f&&y}),o=r.indexOf(s[s.length-1]);return o}var wb;function om(n){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(n)}function Np(){return Np=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Np.apply(this,arguments)}function HD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Er(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(t),!0).forEach(function(r){Ys(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Rie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function VD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r6(r.key),r)}}function kie(n,e,t){return e&&VD(n.prototype,e),t&&VD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function jie(n,e,t){return e=T1(e),Iie(n,n6()?Reflect.construct(e,t||[],T1(n).constructor):e.apply(n,t))}function Iie(n,e){if(e&&(om(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lie(n)}function Lie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function n6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n6=function(){return!!n})()}function T1(n){return T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T1(n)}function Die(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fC(n,e)}function fC(n,e){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fC(n,e)}function Ys(n,e,t){return e=r6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r6(n){var e=Uie(n,"string");return om(e)=="symbol"?e:e+""}function Uie(n,e){if(om(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var gl=(function(n){function e(t){var r;return Rie(this,e),r=jie(this,e,[t]),Ys(r,"pieRef",null),Ys(r,"sectorRefs",[]),Ys(r,"id",Om("recharts-pie-")),Ys(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),on(i)&&i()}),Ys(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),on(i)&&i()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return Die(e,n),kie(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,f=en(this.props,!1),h=en(s,!1),m=en(o,!1),y=s&&s.offsetRadius||20,b=r.map(function(w,x){var _=(w.startAngle+w.endAngle)/2,M=Cr(w.cx,w.cy,w.outerRadius+y,_),E=Er(Er(Er(Er({},f),w),{},{stroke:"none"},h),{},{index:x,textAnchor:e.getTextAnchor(M.x,w.cx)},M),A=Er(Er(Er(Er({},f),w),{},{fill:"none",stroke:w.fill},m),{},{index:x,points:[Cr(w.cx,w.cy,w.outerRadius,_),M]}),R=l;return yn(l)&&yn(u)?R="value":yn(l)&&(R=u),ye.createElement($n,{key:"label-".concat(w.startAngle,"-").concat(w.endAngle,"-").concat(w.midAngle,"-").concat(x)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,E,Pi(w,R)))});return ye.createElement($n,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&r.length!==1)return null;var h=i.isActiveIndex(f),m=l&&i.hasActiveIndex()?l:null,y=h?s:m,b=Er(Er({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return ye.createElement($n,Np({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Nf(i.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),ye.createElement(t6,Np({option:y,isActive:h,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state,m=h.prevSectors,y=h.prevIsAnimationActive;return ye.createElement(fl,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var w=b.t,x=[],_=a&&a[0],M=_.startAngle;return a.forEach(function(E,A){var R=m&&m[A],O=A>0?Es(E,"paddingAngle",0):0;if(R){var N=_s(R.endAngle-R.startAngle,E.endAngle-E.startAngle),L=Er(Er({},E),{},{startAngle:M+O,endAngle:M+N(w)+O});x.push(L),M=L.endAngle}else{var T=E.endAngle,j=E.startAngle,U=_s(0,T-j),B=U(w),V=Er(Er({},E),{},{startAngle:M+O,endAngle:M+B+O});x.push(V),M=V.endAngle}}),ye.createElement($n,null,r.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Jy(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,f=i.cy,h=i.innerRadius,m=i.outerRadius,y=i.isAnimationActive,b=this.state.isAnimationFinished;if(a||!s||!s.length||!ft(u)||!ft(f)||!ft(h)||!ft(m))return null;var w=Cn("recharts-pie",o);return ye.createElement($n,{tabIndex:this.props.rootTabIndex,className:w,ref:function(_){r.pieRef=_}},this.renderSectors(),l&&this.renderLabels(s),Wi.renderCallByParent(this.props,null,!1),(!y||b)&&mc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ye.isValidElement(r))return ye.cloneElement(r,i);if(on(r))return r(i);var s=Cn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ye.createElement(v1,Np({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(ye.isValidElement(r))return ye.cloneElement(r,i);var s=a;if(on(r)&&(s=r(i),ye.isValidElement(s)))return s;var o=Cn("recharts-pie-label-text",typeof r!="boolean"&&!on(r)?r.className:"");return ye.createElement(Of,Np({},i,{alignmentBaseline:"middle",className:o}),s)}}])})(z.PureComponent);wb=gl;Ys(gl,"displayName","Pie");Ys(gl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Hf.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ys(gl,"parseDeltaAngle",function(n,e){var t=ka(e-n),r=Math.min(Math.abs(e-n),360);return t*r});Ys(gl,"getRealPieData",function(n){var e=n.data,t=n.children,r=en(n,!1),i=Ts(t,Qp);return e&&e.length?e.map(function(a,s){return Er(Er(Er({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Er(Er({},r),a.props)}):[]});Ys(gl,"parseCoordinateOfPie",function(n,e){var t=e.top,r=e.left,i=e.width,a=e.height,s=FB(i,a),o=r+ja(n.cx,i,i/2),l=t+ja(n.cy,a,a/2),u=ja(n.innerRadius,s,0),f=ja(n.outerRadius,s,s*.8),h=n.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:f,maxRadius:h}});Ys(gl,"getComposedData",function(n){var e=n.item,t=n.offset,r=e.type.defaultProps!==void 0?Er(Er({},e.type.defaultProps),e.props):e.props,i=wb.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,f=r.nameKey,h=r.valueKey,m=r.tooltipType,y=Math.abs(r.minAngle),b=wb.parseCoordinateOfPie(r,t),w=wb.parseDeltaAngle(s,o),x=Math.abs(w),_=u;yn(u)&&yn(h)?(Do(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):yn(u)&&(Do(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=h);var M=i.filter(function(L){return Pi(L,_,0)!==0}).length,E=(x>=360?M:M-1)*l,A=x-M*y-E,R=i.reduce(function(L,T){var j=Pi(T,_,0);return L+(ft(j)?j:0)},0),O;if(R>0){var N;O=i.map(function(L,T){var j=Pi(L,_,0),U=Pi(L,f,T),B=(ft(j)?j:0)/R,V;T?V=N.endAngle+ka(w)*l*(j!==0?1:0):V=s;var W=V+ka(w)*((j!==0?y:0)+B*A),Y=(V+W)/2,Q=(b.innerRadius+b.outerRadius)/2,se=[{name:U,value:j,payload:L,dataKey:_,type:m}],G=Cr(b.cx,b.cy,Q,Y);return N=Er(Er(Er({percent:B,cornerRadius:a,name:U,tooltipPayload:se,midAngle:Y,middleRadius:Q,tooltipPosition:G},L),b),{},{value:Pi(L,_),startAngle:V,endAngle:W,payload:L,paddingAngle:ka(w)*l}),N})}return Er(Er({},b),{},{sectors:O,data:i})});var kT,WD;function Fie(){if(WD)return kT;WD=1;var n=Math.ceil,e=Math.max;function t(r,i,a,s){for(var o=-1,l=e(n((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return kT=t,kT}var jT,GD;function i6(){if(GD)return jT;GD=1;var n=T5(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return jT=r,jT}var IT,$D;function zie(){if($D)return IT;$D=1;var n=Fie(),e=gw(),t=i6();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),n(a,s,o,i)}}return IT=r,IT}var LT,qD;function Bie(){if(qD)return LT;qD=1;var n=zie(),e=n();return LT=e,LT}var Hie=Bie();const A1=Kn(Hie);function gy(n){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gy(n)}function XD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function YD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(t),!0).forEach(function(r){a6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function a6(n,e,t){return e=Vie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vie(n){var e=Wie(n,"string");return gy(e)=="symbol"?e:e+""}function Wie(n,e){if(gy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Gie=["Webkit","Moz","O","ms"],$ie=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Gie.reduce(function(a,s){return YD(YD({},a),{},a6({},s+r,t))},{});return i[e]=t,i};function lm(n){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(n)}function C1(){return C1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C1.apply(this,arguments)}function KD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function DT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(t),!0).forEach(function(r){bs(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ZD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,o6(r.key),r)}}function Xie(n,e,t){return e&&ZD(n.prototype,e),t&&ZD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Yie(n,e,t){return e=P1(e),Kie(n,s6()?Reflect.construct(e,t||[],P1(n).constructor):e.apply(n,t))}function Kie(n,e){if(e&&(lm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zie(n)}function Zie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function s6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s6=function(){return!!n})()}function P1(n){return P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P1(n)}function Jie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hC(n,e)}function hC(n,e){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hC(n,e)}function bs(n,e,t){return e=o6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o6(n){var e=Qie(n,"string");return lm(e)=="symbol"?e:e+""}function Qie(n,e){if(lm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var eae=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,u=wv().domain(A1(0,l)).range([a,a+s-o]),f=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:f}},JD=function(e){return e.changedTouches&&!!e.changedTouches.length},cm=(function(n){function e(t){var r;return qie(this,e),r=Yie(this,e,[t]),bs(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),bs(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),bs(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s?.({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),bs(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),bs(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),bs(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),bs(r,"handleSlideDragStart",function(i){var a=JD(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Jie(e,n),Xie(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,f=u.length-1,h=Math.min(i,a),m=Math.max(i,a),y=e.getIndexInRange(s,h),b=e.getIndexInRange(s,m);return{startIndex:y-y%l,endIndex:b===f?f:b-b%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=Pi(a[r],o,r);return on(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,f=l.width,h=l.travellerWidth,m=l.startIndex,y=l.endIndex,b=l.onChange,w=r.pageX-a;w>0?w=Math.min(w,u+f-h-o,u+f-h-s):w<0&&(w=Math.max(w,u-s,u-o));var x=this.getIndex({startX:s+w,endX:o+w});(x.startIndex!==m||x.endIndex!==y)&&b&&b(x),this.setState({startX:s+w,endX:o+w,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=JD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],f=this.props,h=f.x,m=f.width,y=f.travellerWidth,b=f.onChange,w=f.gap,x=f.data,_={startX:this.state.startX,endX:this.state.endX},M=r.pageX-a;M>0?M=Math.min(M,h+m-y-u):M<0&&(M=Math.max(M,h-u)),_[s]=u+M;var E=this.getIndex(_),A=E.startIndex,R=E.endIndex,O=function(){var L=x.length-1;return s==="startX"&&(o>l?A%w===0:R%w===0)||o<l&&R===L||s==="endX"&&(o>l?R%w===0:A%w===0)||o>l&&R===L};this.setState(bs(bs({},s,u+M),"brushMoveStartX",r.pageX),function(){b&&O()&&b(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,f=this.state[i],h=o.indexOf(f);if(h!==-1){var m=h+r;if(!(m===-1||m>=o.length)){var y=o[m];i==="startX"&&y>=u||i==="endX"&&y<=l||this.setState(bs({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return ye.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,f=r.padding,h=z.Children.only(u);return h?ye.cloneElement(h,{x:i,y:a,width:s,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,f=l.travellerWidth,h=l.height,m=l.traveller,y=l.ariaLabel,b=l.data,w=l.startIndex,x=l.endIndex,_=Math.max(r,this.props.x),M=DT(DT({},en(this.props,!1)),{},{x:_,y:u,width:f,height:h}),E=y||"Min value: ".concat((a=b[w])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=b[x])===null||s===void 0?void 0:s.name);return ye.createElement($n,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,M))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,f=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,f=this.state,h=f.startX,m=f.endX,y=5,b={pointerEvents:"none",fill:u};return ye.createElement($n,{className:"recharts-brush-texts"},ye.createElement(Of,C1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-y,y:s+o/2},b),this.getTextOfTick(i)),ye.createElement(Of,C1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+l+y,y:s+o/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,f=r.height,h=r.alwaysShowText,m=this.state,y=m.startX,b=m.endX,w=m.isTextActive,x=m.isSlideMoving,_=m.isTravellerMoving,M=m.isTravellerFocused;if(!i||!i.length||!ft(o)||!ft(l)||!ft(u)||!ft(f)||u<=0||f<=0)return null;var E=Cn("recharts-brush",a),A=ye.Children.count(s)===1,R=$ie("userSelect","none");return ye.createElement($n,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(y,b),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(b,"endX"),(w||x||_||M||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),ye.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ye.isValidElement(r)?a=ye.cloneElement(r,i):on(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,f=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return DT({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?eae({data:a,width:s,x:o,travellerWidth:l,startIndex:f,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var m=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])})(z.PureComponent);bs(cm,"displayName","Brush");bs(cm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var UT,QD;function tae(){if(QD)return UT;QD=1;var n=nN();function e(t,r){var i;return n(t,function(a,s,o){return i=r(a,s,o),!i}),!!i}return UT=e,UT}var FT,eU;function nae(){if(eU)return FT;eU=1;var n=r5(),e=ml(),t=tae(),r=as(),i=gw();function a(s,o,l){var u=r(s)?n:t;return l&&i(s,o,l)&&(o=void 0),u(s,e(o,3))}return FT=a,FT}var rae=nae();const iae=Kn(rae);var ol=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},zT,tU;function aae(){if(tU)return zT;tU=1;var n=w5();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return zT=e,zT}var BT,nU;function sae(){if(nU)return BT;nU=1;var n=aae(),e=x5(),t=ml();function r(i,a){var s={};return a=t(a,3),e(i,function(o,l,u){n(s,l,a(o,l,u))}),s}return BT=r,BT}var oae=sae();const lae=Kn(oae);var HT,rU;function cae(){if(rU)return HT;rU=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return HT=n,HT}var VT,iU;function uae(){if(iU)return VT;iU=1;var n=nN();function e(t,r){var i=!0;return n(t,function(a,s,o){return i=!!r(a,s,o),i}),i}return VT=e,VT}var WT,aU;function dae(){if(aU)return WT;aU=1;var n=cae(),e=uae(),t=ml(),r=as(),i=gw();function a(s,o,l){var u=r(s)?n:e;return l&&i(s,o,l)&&(o=void 0),u(s,t(o,3))}return WT=a,WT}var fae=dae();const l6=Kn(fae);var hae=["x","y"];function vy(n){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(n)}function pC(){return pC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pC.apply(this,arguments)}function sU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $g(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(t),!0).forEach(function(r){pae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pae(n,e,t){return e=mae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mae(n){var e=gae(n,"string");return vy(e)=="symbol"?e:e+""}function gae(n,e){if(vy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vae(n,e){if(n==null)return{};var t=yae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function yae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function xae(n,e){var t=n.x,r=n.y,i=vae(n,hae),a="".concat(t),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),f=parseInt(u,10),h="".concat(e.width||i.width),m=parseInt(h,10);return $g($g($g($g($g({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:m,name:e.name,radius:e.radius})}function oU(n){return ye.createElement(t6,pC({shapeType:"rectangle",propTransformer:xae,activeClassName:"recharts-active-bar"},n))}var bae=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=ft(r)||V7(r);return a?e(r,i):(a||kf(),t)}},wae=["value","background"],c6;function um(n){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(n)}function _ae(n,e){if(n==null)return{};var t=Sae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Sae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function N1(){return N1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},N1.apply(this,arguments)}function lU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(t),!0).forEach(function(r){Cu(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Mae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,d6(r.key),r)}}function Eae(n,e,t){return e&&cU(n.prototype,e),t&&cU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Tae(n,e,t){return e=O1(e),Aae(n,u6()?Reflect.construct(e,t||[],O1(n).constructor):e.apply(n,t))}function Aae(n,e){if(e&&(um(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cae(n)}function Cae(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u6=function(){return!!n})()}function O1(n){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O1(n)}function Pae(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&mC(n,e)}function mC(n,e){return mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mC(n,e)}function Cu(n,e,t){return e=d6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d6(n){var e=Nae(n,"string");return um(e)=="symbol"?e:e+""}function Nae(n,e){if(um(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Xu=(function(n){function e(){var t;Mae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Tae(this,e,[].concat(i)),Cu(t,"state",{isAnimationFinished:!1}),Cu(t,"id",Om("recharts-bar-")),Cu(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),s&&s()}),Cu(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),s&&s()}),t}return Pae(e,n),Eae(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,f=en(this.props,!1);return r&&r.map(function(h,m){var y=m===l,b=y?u:s,w=pi(pi(pi({},f),h),{},{isActive:y,option:b,index:m,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ye.createElement($n,N1({className:"recharts-bar-rectangle"},Nf(i.props,h,m),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(m)}),ye.createElement(oU,w))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,f=i.animationEasing,h=i.animationId,m=this.state.prevData;return ye.createElement(fl,{begin:l,duration:u,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,w=a.map(function(x,_){var M=m&&m[_];if(M){var E=_s(M.x,x.x),A=_s(M.y,x.y),R=_s(M.width,x.width),O=_s(M.height,x.height);return pi(pi({},x),{},{x:E(b),y:A(b),width:R(b),height:O(b)})}if(s==="horizontal"){var N=_s(0,x.height),L=N(b);return pi(pi({},x),{},{y:x.y+x.height-L,height:L})}var T=_s(0,x.width),j=T(b);return pi(pi({},x),{},{width:j})});return ye.createElement($n,null,r.renderRectanglesStatically(w))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Jy(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=en(this.props.background,!1);return a.map(function(u,f){u.value;var h=u.background,m=_ae(u,wae);if(!h)return null;var y=pi(pi(pi(pi(pi({},m),{},{fill:"#eee"},h),l),Nf(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return ye.createElement(oU,N1({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,h=Ts(f,Qy);if(!h)return null;var m=u==="vertical"?s[0].height/2:s[0].width/2,y=function(x,_){var M=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:M,errorVal:Pi(x,_)}},b={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ye.createElement($n,b,h.map(function(w){return ye.cloneElement(w,{key:"error-bar-".concat(i,"-").concat(w.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:m,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,f=r.top,h=r.width,m=r.height,y=r.isAnimationActive,b=r.background,w=r.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,_=Cn("recharts-bar",s),M=o&&o.allowDataOverflow,E=l&&l.allowDataOverflow,A=M||E,R=yn(w)?this.id:w;return ye.createElement($n,{className:_},M||E?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(R)},ye.createElement("rect",{x:M?u:u-h/2,y:E?f:f-m/2,width:M?h:h*2,height:E?m:m*2}))):null,ye.createElement($n,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(R,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,R),(!y||x)&&mc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(z.PureComponent);c6=Xu;Cu(Xu,"displayName","Bar");Cu(Xu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Hf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cu(Xu,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,s=n.yAxis,o=n.xAxisTicks,l=n.yAxisTicks,u=n.stackedData,f=n.dataStartIndex,h=n.displayedData,m=n.offset,y=iee(r,t);if(!y)return null;var b=e.layout,w=t.type.defaultProps,x=w!==void 0?pi(pi({},w),t.props):t.props,_=x.dataKey,M=x.children,E=x.minPointSize,A=b==="horizontal"?s:a,R=u?A.scale.domain():null,O=dee({numericAxis:A}),N=Ts(M,Qp),L=h.map(function(T,j){var U,B,V,W,Y,Q;u?U=aee(u[f+j],R):(U=Pi(T,_),Array.isArray(U)||(U=[O,U]));var se=bae(E,c6.defaultProps.minPointSize)(U[1],j);if(b==="horizontal"){var G,J=[s.scale(U[0]),s.scale(U[1])],Z=J[0],X=J[1];B=jL({axis:a,ticks:o,bandSize:i,offset:y.offset,entry:T,index:j}),V=(G=X??Z)!==null&&G!==void 0?G:void 0,W=y.size;var te=Z-X;if(Y=Number.isNaN(te)?0:te,Q={x:B,y:s.y,width:W,height:s.height},Math.abs(se)>0&&Math.abs(Y)<Math.abs(se)){var ce=ka(Y||se)*(Math.abs(se)-Math.abs(Y));V-=ce,Y+=ce}}else{var le=[a.scale(U[0]),a.scale(U[1])],be=le[0],Se=le[1];if(B=be,V=jL({axis:s,ticks:l,bandSize:i,offset:y.offset,entry:T,index:j}),W=Se-be,Y=y.size,Q={x:a.x,y:V,width:a.width,height:Y},Math.abs(se)>0&&Math.abs(W)<Math.abs(se)){var Ie=ka(W||se)*(Math.abs(se)-Math.abs(W));W+=Ie}}return pi(pi(pi({},T),{},{x:B,y:V,width:W,height:Y,value:u?U:U[1],payload:T,background:Q},N&&N[j]&&N[j].props),{},{tooltipPayload:[DB(t,T)],tooltipPosition:{x:B+W/2,y:V+Y/2}})});return pi({data:L,layout:b},m)});function yy(n){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(n)}function Oae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,f6(r.key),r)}}function Rae(n,e,t){return e&&uU(n.prototype,e),t&&uU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function dU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Oo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(t),!0).forEach(function(r){Iw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Iw(n,e,t){return e=f6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f6(n){var e=kae(n,"string");return yy(e)=="symbol"?e:e+""}function kae(n,e){if(yy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var h6=function(e,t,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,f=Object.keys(t),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},m=!!ws(u,Xu);return f.reduce(function(y,b){var w=t[b],x=w.orientation,_=w.domain,M=w.padding,E=M===void 0?{}:M,A=w.mirror,R=w.reversed,O="".concat(x).concat(A?"Mirror":""),N,L,T,j,U;if(w.type==="number"&&(w.padding==="gap"||w.padding==="no-gap")){var B=_[1]-_[0],V=1/0,W=w.categoricalDomain.sort($7);if(W.forEach(function(le,be){be>0&&(V=Math.min((le||0)-(W[be-1]||0),V))}),Number.isFinite(V)){var Y=V/B,Q=w.layout==="vertical"?r.height:r.width;if(w.padding==="gap"&&(N=Y*Q/2),w.padding==="no-gap"){var se=ja(e.barCategoryGap,Y*Q),G=Y*Q/2;N=G-se-(G-se)/Q*se}}}i==="xAxis"?L=[r.left+(E.left||0)+(N||0),r.left+r.width-(E.right||0)-(N||0)]:i==="yAxis"?L=l==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(N||0),r.top+r.height-(E.bottom||0)-(N||0)]:L=w.range,R&&(L=[L[1],L[0]]);var J=kB(w,a,m),Z=J.scale,X=J.realScaleType;Z.domain(_).range(L),jB(Z);var te=IB(Z,Oo(Oo({},w),{},{realScaleType:X}));i==="xAxis"?(U=x==="top"&&!A||x==="bottom"&&A,T=r.left,j=h[O]-U*w.height):i==="yAxis"&&(U=x==="left"&&!A||x==="right"&&A,T=h[O]-U*w.width,j=r.top);var ce=Oo(Oo(Oo({},w),te),{},{realScaleType:X,x:T,y:j,scale:Z,width:i==="xAxis"?r.width:w.width,height:i==="yAxis"?r.height:w.height});return ce.bandSize=p1(ce,te),!w.hide&&i==="xAxis"?h[O]+=(U?-1:1)*ce.height:w.hide||(h[O]+=(U?-1:1)*ce.width),Oo(Oo({},y),{},Iw({},b,ce))},{})},p6=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},jae=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return p6({x:t,y:r},{x:i,y:a})},m6=(function(){function n(e){Oae(this,n),this.scale=e}return Rae(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])})();Iw(m6,"EPS",1e-4);var ON=function(e){var t=Object.keys(e).reduce(function(r,i){return Oo(Oo({},r),{},Iw({},i,m6.create(e[i])))},{});return Oo(Oo({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return lae(i,function(l,u){return t[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return l6(i,function(a,s){return t[s].isInRange(a)})}})};function Iae(n){return(n%180+180)%180}var Lae=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Iae(i),s=a*Math.PI/180,o=Math.atan(r/t),l=s>o&&s<Math.PI-o?r/Math.sin(s):t/Math.cos(s);return Math.abs(l)},GT,fU;function Dae(){if(fU)return GT;fU=1;var n=ml(),e=qy(),t=pw();function r(i){return function(a,s,o){var l=Object(a);if(!e(a)){var u=n(s,3);a=t(a),s=function(h){return u(l[h],h,l)}}var f=i(a,s,o);return f>-1?l[u?a[f]:f]:void 0}}return GT=r,GT}var $T,hU;function Uae(){if(hU)return $T;hU=1;var n=i6();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return $T=e,$T}var qT,pU;function Fae(){if(pU)return qT;pU=1;var n=p5(),e=ml(),t=Uae(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:t(o);return u<0&&(u=r(l+u,0)),n(a,e(s,3),u)}return qT=i,qT}var XT,mU;function zae(){if(mU)return XT;mU=1;var n=Dae(),e=Fae(),t=n(e);return XT=t,XT}var Bae=zae();const Hae=Kn(Bae);var Vae=Nz();const Wae=Kn(Vae);var Gae=Wae(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),RN=z.createContext(void 0),kN=z.createContext(void 0),g6=z.createContext(void 0),v6=z.createContext({}),y6=z.createContext(void 0),x6=z.createContext(0),b6=z.createContext(0),gU=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,f=Gae(a);return ye.createElement(RN.Provider,{value:r},ye.createElement(kN.Provider,{value:i},ye.createElement(v6.Provider,{value:a},ye.createElement(g6.Provider,{value:f},ye.createElement(y6.Provider,{value:s},ye.createElement(x6.Provider,{value:u},ye.createElement(b6.Provider,{value:l},o)))))))},$ae=function(){return z.useContext(y6)},w6=function(e){var t=z.useContext(RN);t==null&&kf();var r=t[e];return r==null&&kf(),r},qae=function(){var e=z.useContext(RN);return Mu(e)},Xae=function(){var e=z.useContext(kN),t=Hae(e,function(r){return l6(r.domain,Number.isFinite)});return t||Mu(e)},_6=function(e){var t=z.useContext(kN);t==null&&kf();var r=t[e];return r==null&&kf(),r},Yae=function(){var e=z.useContext(g6);return e},Kae=function(){return z.useContext(v6)},jN=function(){return z.useContext(b6)},IN=function(){return z.useContext(x6)};function dm(n){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(n)}function Zae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,M6(r.key),r)}}function Qae(n,e,t){return e&&Jae(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ese(n,e,t){return e=R1(e),tse(n,S6()?Reflect.construct(e,t||[],R1(n).constructor):e.apply(n,t))}function tse(n,e){if(e&&(dm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nse(n)}function nse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S6=function(){return!!n})()}function R1(n){return R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R1(n)}function rse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gC(n,e)}function gC(n,e){return gC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gC(n,e)}function vU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(t),!0).forEach(function(r){LN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function LN(n,e,t){return e=M6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function M6(n){var e=ise(n,"string");return dm(e)=="symbol"?e:e+""}function ise(n,e){if(dm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ase(n,e){return cse(n)||lse(n,e)||ose(n,e)||sse()}function sse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ose(n,e){if(n){if(typeof n=="string")return xU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xU(n,e)}}function xU(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function lse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function cse(n){if(Array.isArray(n))return n}function vC(){return vC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vC.apply(this,arguments)}var use=function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):on(e)?r=e(t):r=ye.createElement("line",vC({},t,{className:"recharts-reference-line-line"})),r},dse=function(e,t,r,i,a,s,o,l,u){var f=a.x,h=a.y,m=a.width,y=a.height;if(r){var b=u.y,w=e.y.apply(b,{position:s});if(ol(u,"discard")&&!e.y.isInRange(w))return null;var x=[{x:f+m,y:w},{x:f,y:w}];return l==="left"?x.reverse():x}if(t){var _=u.x,M=e.x.apply(_,{position:s});if(ol(u,"discard")&&!e.x.isInRange(M))return null;var E=[{x:M,y:h+y},{x:M,y:h}];return o==="top"?E.reverse():E}if(i){var A=u.segment,R=A.map(function(O){return e.apply(O,{position:s})});return ol(u,"discard")&&iae(R,function(O){return!e.isInRange(O)})?null:R}return null};function fse(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,s=n.shape,o=n.className,l=n.alwaysShow,u=$ae(),f=w6(i),h=_6(a),m=Yae();if(!u||!m)return null;Do(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=ON({x:f.scale,y:h.scale}),b=Ni(e),w=Ni(t),x=r&&r.length===2,_=dse(y,b,w,x,m,n.position,f.orientation,h.orientation,n);if(!_)return null;var M=ase(_,2),E=M[0],A=E.x,R=E.y,O=M[1],N=O.x,L=O.y,T=ol(n,"hidden")?"url(#".concat(u,")"):void 0,j=yU(yU({clipPath:T},en(n,!0)),{},{x1:A,y1:R,x2:N,y2:L});return ye.createElement($n,{className:Cn("recharts-reference-line",o)},use(s,j),Wi.renderCallByParent(n,jae({x1:A,y1:R,x2:N,y2:L})))}var DN=(function(n){function e(){return Zae(this,e),ese(this,e,arguments)}return rse(e,n),Qae(e,[{key:"render",value:function(){return ye.createElement(fse,this.props)}}])})(ye.Component);LN(DN,"displayName","ReferenceLine");LN(DN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function yC(){return yC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yC.apply(this,arguments)}function fm(n){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(n)}function bU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(t),!0).forEach(function(r){Lw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hse(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,T6(r.key),r)}}function mse(n,e,t){return e&&pse(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function gse(n,e,t){return e=k1(e),vse(n,E6()?Reflect.construct(e,t||[],k1(n).constructor):e.apply(n,t))}function vse(n,e){if(e&&(fm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yse(n)}function yse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function E6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E6=function(){return!!n})()}function k1(n){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k1(n)}function xse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&xC(n,e)}function xC(n,e){return xC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xC(n,e)}function Lw(n,e,t){return e=T6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T6(n){var e=bse(n,"string");return fm(e)=="symbol"?e:e+""}function bse(n,e){if(fm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var wse=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=ON({x:i.scale,y:a.scale}),o=s.apply({x:t,y:r},{bandAware:!0});return ol(e,"discard")&&!s.isInRange(o)?null:o},Dw=(function(n){function e(){return hse(this,e),gse(this,e,arguments)}return xse(e,n),mse(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=Ni(i),f=Ni(a);if(Do(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var h=wse(this.props);if(!h)return null;var m=h.x,y=h.y,b=this.props,w=b.shape,x=b.className,_=ol(this.props,"hidden")?"url(#".concat(l,")"):void 0,M=wU(wU({clipPath:_},en(this.props,!0)),{},{cx:m,cy:y});return ye.createElement($n,{className:Cn("recharts-reference-dot",x)},e.renderDot(w,M),Wi.renderCallByParent(this.props,{x:m-s,y:y-s,width:2*s,height:2*s}))}}])})(ye.Component);Lw(Dw,"displayName","ReferenceDot");Lw(Dw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Lw(Dw,"renderDot",function(n,e){var t;return ye.isValidElement(n)?t=ye.cloneElement(n,e):on(n)?t=n(e):t=ye.createElement(Cw,yC({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function bC(){return bC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bC.apply(this,arguments)}function hm(n){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(n)}function _U(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function SU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(t),!0).forEach(function(r){Uw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_U(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _se(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Sse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,C6(r.key),r)}}function Mse(n,e,t){return e&&Sse(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ese(n,e,t){return e=j1(e),Tse(n,A6()?Reflect.construct(e,t||[],j1(n).constructor):e.apply(n,t))}function Tse(n,e){if(e&&(hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ase(n)}function Ase(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function A6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A6=function(){return!!n})()}function j1(n){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j1(n)}function Cse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&wC(n,e)}function wC(n,e){return wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wC(n,e)}function Uw(n,e,t){return e=C6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C6(n){var e=Pse(n,"string");return hm(e)=="symbol"?e:e+""}function Pse(n,e){if(hm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Nse=function(e,t,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,f=a.xAxis,h=a.yAxis;if(!f||!h)return null;var m=ON({x:f.scale,y:h.scale}),y={x:e?m.x.apply(s,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(l,{position:"start"}):m.y.rangeMin},b={x:t?m.x.apply(o,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return ol(a,"discard")&&(!m.isInRange(y)||!m.isInRange(b))?null:p6(y,b)},Fw=(function(n){function e(){return _se(this,e),Ese(this,e,arguments)}return Cse(e,n),Mse(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,f=r.clipPathId;Do(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Ni(i),m=Ni(a),y=Ni(s),b=Ni(o),w=this.props.shape;if(!h&&!m&&!y&&!b&&!w)return null;var x=Nse(h,m,y,b,this.props);if(!x&&!w)return null;var _=ol(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ye.createElement($n,{className:Cn("recharts-reference-area",l)},e.renderRect(w,SU(SU({clipPath:_},en(this.props,!0)),x)),Wi.renderCallByParent(this.props,x))}}])})(ye.Component);Uw(Fw,"displayName","ReferenceArea");Uw(Fw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Uw(Fw,"renderRect",function(n,e){var t;return ye.isValidElement(n)?t=ye.cloneElement(n,e):on(n)?t=n(e):t=ye.createElement(NN,bC({},e,{className:"recharts-reference-area-rect"})),t});function P6(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function Ose(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return Lae(r,t)}function Rse(n,e,t){var r=t==="width",i=n.x,a=n.y,s=n.width,o=n.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function I1(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function kse(n,e){return P6(n,e+1)}function jse(n,e,t,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,f=s,h=function(){var b=r?.[l];if(b===void 0)return{v:P6(r,u)};var w=l,x,_=function(){return x===void 0&&(x=t(b,w)),x},M=b.coordinate,E=l===0||I1(n,M,_,f,o);E||(l=0,f=s,u+=1),E&&(f=M+n*(_()/2+i),l+=u)},m;u<=a.length;)if(m=h(),m)return m.v;return[]}function xy(n){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(n)}function MU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(t),!0).forEach(function(r){Ise(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ise(n,e,t){return e=Lse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lse(n){var e=Dse(n,"string");return xy(e)=="symbol"?e:e+""}function Dse(n,e){if(xy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Use(n,e,t,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(m){var y=a[m],b,w=function(){return b===void 0&&(b=t(y,m)),b};if(m===s-1){var x=n*(y.coordinate+n*w()/2-l);a[m]=y=pa(pa({},y),{},{tickCoord:x>0?y.coordinate-x*n:y.coordinate})}else a[m]=y=pa(pa({},y),{},{tickCoord:y.coordinate});var _=I1(n,y.tickCoord,w,o,l);_&&(l=y.tickCoord-n*(w()/2+i),a[m]=pa(pa({},y),{},{isShow:!0}))},f=s-1;f>=0;f--)u(f);return a}function Fse(n,e,t,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var f=r[o-1],h=t(f,o-1),m=n*(f.coordinate+n*h/2-u);s[o-1]=f=pa(pa({},f),{},{tickCoord:m>0?f.coordinate-m*n:f.coordinate});var y=I1(n,f.tickCoord,function(){return h},l,u);y&&(u=f.tickCoord-n*(h/2+i),s[o-1]=pa(pa({},f),{},{isShow:!0}))}for(var b=a?o-1:o,w=function(M){var E=s[M],A,R=function(){return A===void 0&&(A=t(E,M)),A};if(M===0){var O=n*(E.coordinate-n*R()/2-l);s[M]=E=pa(pa({},E),{},{tickCoord:O<0?E.coordinate-O*n:E.coordinate})}else s[M]=E=pa(pa({},E),{},{tickCoord:E.coordinate});var N=I1(n,E.tickCoord,R,l,u);N&&(l=E.tickCoord+n*(R()/2+i),s[M]=pa(pa({},E),{},{isShow:!0}))},x=0;x<b;x++)w(x);return s}function UN(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,s=n.minTickGap,o=n.orientation,l=n.interval,u=n.tickFormatter,f=n.unit,h=n.angle;if(!i||!i.length||!r)return[];if(ft(l)||Hf.isSsr)return kse(i,typeof l=="number"&&ft(l)?l:0);var m=[],y=o==="top"||o==="bottom"?"width":"height",b=f&&y==="width"?bv(f,{fontSize:e,letterSpacing:t}):{width:0,height:0},w=function(E,A){var R=on(u)?u(E.value,A):E.value;return y==="width"?Ose(bv(R,{fontSize:e,letterSpacing:t}),b,h):bv(R,{fontSize:e,letterSpacing:t})[y]},x=i.length>=2?ka(i[1].coordinate-i[0].coordinate):1,_=Rse(a,x,y);return l==="equidistantPreserveStart"?jse(x,_,w,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=Fse(x,_,w,i,s,l==="preserveStartEnd"):m=Use(x,_,w,i,s),m.filter(function(M){return M.isShow}))}var zse=["viewBox"],Bse=["viewBox"],Hse=["ticks"];function pm(n){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(n)}function Op(){return Op=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Op.apply(this,arguments)}function EU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ti(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(t),!0).forEach(function(r){FN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YT(n,e){if(n==null)return{};var t=Vse(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Vse(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Wse(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,O6(r.key),r)}}function Gse(n,e,t){return e&&TU(n.prototype,e),t&&TU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function $se(n,e,t){return e=L1(e),qse(n,N6()?Reflect.construct(e,t||[],L1(n).constructor):e.apply(n,t))}function qse(n,e){if(e&&(pm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xse(n)}function Xse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function N6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N6=function(){return!!n})()}function L1(n){return L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L1(n)}function Yse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_C(n,e)}function _C(n,e){return _C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_C(n,e)}function FN(n,e,t){return e=O6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O6(n){var e=Kse(n,"string");return pm(e)=="symbol"?e:e+""}function Kse(n,e){if(pm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Lm=(function(n){function e(t){var r;return Wse(this,e),r=$se(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return Yse(e,n),Gse(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=YT(r,zse),o=this.props,l=o.viewBox,u=YT(o,Bse);return!zp(a,l)||!zp(s,u)||!zp(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,f=i.tickSize,h=i.mirror,m=i.tickMargin,y,b,w,x,_,M,E=h?-1:1,A=r.tickSize||f,R=ft(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":y=b=r.coordinate,x=s+ +!h*l,w=x-E*A,M=w-E*m,_=R;break;case"left":w=x=r.coordinate,b=a+ +!h*o,y=b-E*A,_=y-E*m,M=R;break;case"right":w=x=r.coordinate,b=a+ +h*o,y=b+E*A,_=y+E*m,M=R;break;default:y=b=r.coordinate,x=s+ +h*l,w=x+E*A,M=w+E*m,_=R;break}return{line:{x1:y,y1:w,x2:b,y2:x},tick:{x:_,y:M}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,f=r.axisLine,h=Ti(Ti(Ti({},en(this.props,!1)),en(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var m=+(l==="top"&&!u||l==="bottom"&&u);h=Ti(Ti({},h),{},{x1:i,y1:a+m*o,x2:i+s,y2:a+m*o})}else{var y=+(l==="left"&&!u||l==="right"&&u);h=Ti(Ti({},h),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+o})}return ye.createElement("line",Op({},h,{className:Cn("recharts-cartesian-axis-line",Es(f,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,f=o.tick,h=o.tickFormatter,m=o.unit,y=UN(Ti(Ti({},this.props),{},{ticks:r}),i,a),b=this.getTickTextAnchor(),w=this.getTickVerticalAnchor(),x=en(this.props,!1),_=en(f,!1),M=Ti(Ti({},x),{},{fill:"none"},en(l,!1)),E=y.map(function(A,R){var O=s.getTickLineCoord(A),N=O.line,L=O.tick,T=Ti(Ti(Ti(Ti({textAnchor:b,verticalAnchor:w},x),{},{stroke:"none",fill:u},_),L),{},{index:R,payload:A,visibleTicksCount:y.length,tickFormatter:h});return ye.createElement($n,Op({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Nf(s.props,A,R)),l&&ye.createElement("line",Op({},M,N,{className:Cn("recharts-cartesian-axis-tick-line",Es(l,"className"))})),f&&e.renderTickItem(f,T,"".concat(on(h)?h(A.value,R):A.value).concat(m||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var h=this.props,m=h.ticks,y=YT(h,Hse),b=m;return on(l)&&(b=m&&m.length>0?l(this.props):l(y)),s<=0||o<=0||!b||!b.length?null:ye.createElement($n,{className:Cn("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Wi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=Cn(i.className,"recharts-cartesian-axis-tick-value");return ye.isValidElement(r)?s=ye.cloneElement(r,Ti(Ti({},i),{},{className:o})):on(r)?s=r(Ti(Ti({},i),{},{className:o})):s=ye.createElement(Of,Op({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(z.Component);FN(Lm,"displayName","CartesianAxis");FN(Lm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zse=["x1","y1","x2","y2","key"],Jse=["offset"];function If(n){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(n)}function AU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ma(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(t),!0).forEach(function(r){Qse(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qse(n,e,t){return e=eoe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eoe(n){var e=toe(n,"string");return If(e)=="symbol"?e:e+""}function toe(n,e){if(If(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function df(){return df=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},df.apply(this,arguments)}function CU(n,e){if(n==null)return{};var t=noe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function noe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var roe=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return ye.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function R6(n,e){var t;if(ye.isValidElement(n))t=ye.cloneElement(n,e);else if(on(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=CU(e,Zse),u=en(l,!1);u.offset;var f=CU(u,Jse);t=ye.createElement("line",df({},f,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return t}function ioe(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=ma(ma({},n),{},{x1:e,y1:o,x2:e+t,y2:o,key:"line-".concat(l),index:l});return R6(i,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function aoe(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=ma(ma({},n),{},{x1:o,y1:e,x2:o,y2:e+t,key:"line-".concat(l),index:l});return R6(i,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function soe(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,s=n.height,o=n.horizontalPoints,l=n.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var f=o.map(function(m){return Math.round(m+i-i)}).sort(function(m,y){return m-y});i!==f[0]&&f.unshift(0);var h=f.map(function(m,y){var b=!f[y+1],w=b?i+s-m:f[y+1]-m;if(w<=0)return null;var x=y%e.length;return ye.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:w,width:a,stroke:"none",fill:e[x],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function ooe(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,s=n.y,o=n.width,l=n.height,u=n.verticalPoints;if(!t||!r||!r.length)return null;var f=u.map(function(m){return Math.round(m+a-a)}).sort(function(m,y){return m-y});a!==f[0]&&f.unshift(0);var h=f.map(function(m,y){var b=!f[y+1],w=b?a+o-m:f[y+1]-m;if(w<=0)return null;var x=y%r.length;return ye.createElement("rect",{key:"react-".concat(y),x:m,y:s,width:w,height:l,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var loe=function(e,t){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return RB(UN(ma(ma(ma({},Lm.defaultProps),r),{},{ticks:uc(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,t)},coe=function(e,t){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return RB(UN(ma(ma(ma({},Lm.defaultProps),r),{},{ticks:uc(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,t)},Jh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function D1(n){var e,t,r,i,a,s,o=jN(),l=IN(),u=Kae(),f=ma(ma({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:Jh.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:Jh.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:Jh.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:Jh.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:Jh.vertical,verticalFill:(s=n.verticalFill)!==null&&s!==void 0?s:Jh.verticalFill,x:ft(n.x)?n.x:u.left,y:ft(n.y)?n.y:u.top,width:ft(n.width)?n.width:u.width,height:ft(n.height)?n.height:u.height}),h=f.x,m=f.y,y=f.width,b=f.height,w=f.syncWithTicks,x=f.horizontalValues,_=f.verticalValues,M=qae(),E=Xae();if(!ft(y)||y<=0||!ft(b)||b<=0||!ft(h)||h!==+h||!ft(m)||m!==+m)return null;var A=f.verticalCoordinatesGenerator||loe,R=f.horizontalCoordinatesGenerator||coe,O=f.horizontalPoints,N=f.verticalPoints;if((!O||!O.length)&&on(R)){var L=x&&x.length,T=R({yAxis:E?ma(ma({},E),{},{ticks:L?x:E.ticks}):void 0,width:o,height:l,offset:u},L?!0:w);Do(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(If(T),"]")),Array.isArray(T)&&(O=T)}if((!N||!N.length)&&on(A)){var j=_&&_.length,U=A({xAxis:M?ma(ma({},M),{},{ticks:j?_:M.ticks}):void 0,width:o,height:l,offset:u},j?!0:w);Do(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(If(U),"]")),Array.isArray(U)&&(N=U)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(roe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ye.createElement(ioe,df({},f,{offset:u,horizontalPoints:O,xAxis:M,yAxis:E})),ye.createElement(aoe,df({},f,{offset:u,verticalPoints:N,xAxis:M,yAxis:E})),ye.createElement(soe,df({},f,{horizontalPoints:O})),ye.createElement(ooe,df({},f,{verticalPoints:N})))}D1.displayName="CartesianGrid";var uoe=["type","layout","connectNulls","ref"],doe=["key"];function mm(n){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(n)}function PU(n,e){if(n==null)return{};var t=foe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function foe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Tv(){return Tv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tv.apply(this,arguments)}function NU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(t),!0).forEach(function(r){Ro(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qh(n){return goe(n)||moe(n)||poe(n)||hoe()}function hoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function poe(n,e){if(n){if(typeof n=="string")return SC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return SC(n,e)}}function moe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function goe(n){if(Array.isArray(n))return SC(n)}function SC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function voe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function OU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,j6(r.key),r)}}function yoe(n,e,t){return e&&OU(n.prototype,e),t&&OU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function xoe(n,e,t){return e=U1(e),boe(n,k6()?Reflect.construct(e,t||[],U1(n).constructor):e.apply(n,t))}function boe(n,e){if(e&&(mm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return woe(n)}function woe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function k6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k6=function(){return!!n})()}function U1(n){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U1(n)}function _oe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&MC(n,e)}function MC(n,e){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MC(n,e)}function Ro(n,e,t){return e=j6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j6(n){var e=Soe(n,"string");return mm(e)=="symbol"?e:e+""}function Soe(n,e){if(mm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Pu=(function(n){function e(){var t;voe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=xoe(this,e,[].concat(i)),Ro(t,"state",{isAnimationFinished:!0,totalLength:0}),Ro(t,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Ro(t,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(_,M){return _+M});if(!u)return t.generateSimpleStrokeDasharray(o,s);for(var f=Math.floor(s/u),h=s%u,m=o-s,y=[],b=0,w=0;b<l.length;w+=l[b],++b)if(w+l[b]>h){y=[].concat(Qh(l.slice(0,b)),[h-w]);break}var x=y.length%2===0?[0,m]:[m];return[].concat(Qh(e.repeat(l,f)),Qh(y),x).map(function(_){return"".concat(_,"px")}).join(", ")}),Ro(t,"id",Om("recharts-line-")),Ro(t,"pathRef",function(s){t.mainCurve=s}),Ro(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),Ro(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return _oe(e,n),yoe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,h=Ts(f,Qy);if(!h)return null;var m=function(w,x){return{x:w.x,y:w.y,value:w.value,errorVal:Pi(w.payload,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ye.createElement($n,y,h.map(function(b){return ye.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,f=o.dataKey,h=en(this.props,!1),m=en(l,!0),y=u.map(function(w,x){var _=xs(xs(xs({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:w.x,cy:w.y,value:w.value,dataKey:f,payload:w.payload,points:u});return e.renderDotItem(l,_)}),b={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return ye.createElement($n,Tv({className:"recharts-line-dots",key:"dots"},b),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,u=o.layout,f=o.connectNulls;o.ref;var h=PU(o,uoe),m=xs(xs(xs({},en(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:f});return ye.createElement(v1,Tv({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,f=s.animationBegin,h=s.animationDuration,m=s.animationEasing,y=s.animationId,b=s.animateNewValues,w=s.width,x=s.height,_=this.state,M=_.prevPoints,E=_.totalLength;return ye.createElement(fl,{begin:f,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var R=A.t;if(M){var O=M.length/o.length,N=o.map(function(B,V){var W=Math.floor(V*O);if(M[W]){var Y=M[W],Q=_s(Y.x,B.x),se=_s(Y.y,B.y);return xs(xs({},B),{},{x:Q(R),y:se(R)})}if(b){var G=_s(w*2,B.x),J=_s(x/2,B.y);return xs(xs({},B),{},{x:G(R),y:J(R)})}return xs(xs({},B),{},{x:B.x,y:B.y})});return a.renderCurveStatically(N,r,i)}var L=_s(0,E),T=L(R),j;if(l){var U="".concat(l).split(/[,\s]+/gim).map(function(B){return parseFloat(B)});j=a.getStrokeDasharray(T,E,U)}else j=a.generateSimpleStrokeDasharray(E,T);return a.renderCurveStatically(o,r,i,{strokeDasharray:j})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return o&&s&&s.length&&(!u&&f>0||!Jy(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,f=i.yAxis,h=i.top,m=i.left,y=i.width,b=i.height,w=i.isAnimationActive,x=i.id;if(a||!o||!o.length)return null;var _=this.state.isAnimationFinished,M=o.length===1,E=Cn("recharts-line",l),A=u&&u.allowDataOverflow,R=f&&f.allowDataOverflow,O=A||R,N=yn(x)?this.id:x,L=(r=en(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=L.r,j=T===void 0?3:T,U=L.strokeWidth,B=U===void 0?2:U,V=t9(s)?s:{},W=V.clipDot,Y=W===void 0?!0:W,Q=j*2+B;return ye.createElement($n,{className:E},A||R?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(N)},ye.createElement("rect",{x:A?m:m-y/2,y:R?h:h-b/2,width:A?y:y*2,height:R?b:b*2})),!Y&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(N)},ye.createElement("rect",{x:m-Q/2,y:h-Q/2,width:y+Q,height:b+Q}))):null,!M&&this.renderCurve(O,N),this.renderErrorBar(O,N),(M||s)&&this.renderDots(O,Y,N),(!w||_)&&mc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Qh(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Qh(s),Qh(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(ye.isValidElement(r))a=ye.cloneElement(r,i);else if(on(r))a=r(i);else{var s=i.key,o=PU(i,doe),l=Cn("recharts-line-dot",typeof r!="boolean"?r.className:"");a=ye.createElement(Cw,Tv({key:s},o,{className:l}))}return a}}])})(z.PureComponent);Ro(Pu,"displayName","Line");Ro(Pu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Hf.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ro(Pu,"getComposedData",function(n){var e=n.props,t=n.xAxis,r=n.yAxis,i=n.xAxisTicks,a=n.yAxisTicks,s=n.dataKey,o=n.bandSize,l=n.displayedData,u=n.offset,f=e.layout,h=l.map(function(m,y){var b=Pi(m,s);return f==="horizontal"?{x:kL({axis:t,ticks:i,bandSize:o,entry:m,index:y}),y:yn(b)?null:r.scale(b),value:b,payload:m}:{x:yn(b)?null:t.scale(b),y:kL({axis:r,ticks:a,bandSize:o,entry:m,index:y}),value:b,payload:m}});return xs({points:h,layout:f},u)});function gm(n){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(n)}function Moe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Eoe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,D6(r.key),r)}}function Toe(n,e,t){return e&&Eoe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aoe(n,e,t){return e=F1(e),Coe(n,I6()?Reflect.construct(e,t||[],F1(n).constructor):e.apply(n,t))}function Coe(n,e){if(e&&(gm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(n)}function Poe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function I6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I6=function(){return!!n})()}function F1(n){return F1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F1(n)}function Noe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&EC(n,e)}function EC(n,e){return EC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EC(n,e)}function L6(n,e,t){return e=D6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D6(n){var e=Ooe(n,"string");return gm(e)=="symbol"?e:e+""}function Ooe(n,e){if(gm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function TC(){return TC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TC.apply(this,arguments)}function Roe(n){var e=n.xAxisId,t=jN(),r=IN(),i=w6(e);return i==null?null:z.createElement(Lm,TC({},i,{className:Cn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(s){return uc(s,!0)}}))}var Lf=(function(n){function e(){return Moe(this,e),Aoe(this,e,arguments)}return Noe(e,n),Toe(e,[{key:"render",value:function(){return z.createElement(Roe,this.props)}}])})(z.Component);L6(Lf,"displayName","XAxis");L6(Lf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function vm(n){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(n)}function koe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function joe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,z6(r.key),r)}}function Ioe(n,e,t){return e&&joe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Loe(n,e,t){return e=z1(e),Doe(n,U6()?Reflect.construct(e,t||[],z1(n).constructor):e.apply(n,t))}function Doe(n,e){if(e&&(vm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uoe(n)}function Uoe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function U6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!n})()}function z1(n){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z1(n)}function Foe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&AC(n,e)}function AC(n,e){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AC(n,e)}function F6(n,e,t){return e=z6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z6(n){var e=zoe(n,"string");return vm(e)=="symbol"?e:e+""}function zoe(n,e){if(vm(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function CC(){return CC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CC.apply(this,arguments)}var Boe=function(e){var t=e.yAxisId,r=jN(),i=IN(),a=_6(t);return a==null?null:z.createElement(Lm,CC({},a,{className:Cn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return uc(o,!0)}}))},Df=(function(n){function e(){return koe(this,e),Loe(this,e,arguments)}return Foe(e,n),Ioe(e,[{key:"render",value:function(){return z.createElement(Boe,this.props)}}])})(z.Component);F6(Df,"displayName","YAxis");F6(Df,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function RU(n){return Goe(n)||Woe(n)||Voe(n)||Hoe()}function Hoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Voe(n,e){if(n){if(typeof n=="string")return PC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PC(n,e)}}function Woe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Goe(n){if(Array.isArray(n))return PC(n)}function PC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var NC=function(e,t,r,i,a){var s=Ts(e,DN),o=Ts(e,Dw),l=[].concat(RU(s),RU(o)),u=Ts(e,Fw),f="".concat(i,"Id"),h=i[0],m=t;if(l.length&&(m=l.reduce(function(w,x){if(x.props[f]===r&&ol(x.props,"extendDomain")&&ft(x.props[h])){var _=x.props[h];return[Math.min(w[0],_),Math.max(w[1],_)]}return w},m)),u.length){var y="".concat(h,"1"),b="".concat(h,"2");m=u.reduce(function(w,x){if(x.props[f]===r&&ol(x.props,"extendDomain")&&ft(x.props[y])&&ft(x.props[b])){var _=x.props[y],M=x.props[b];return[Math.min(w[0],_,M),Math.max(w[1],_,M)]}return w},m)}return a&&a.length&&(m=a.reduce(function(w,x){return ft(x)?[Math.min(w[0],x),Math.max(w[1],x)]:w},m)),m},KT={exports:{}},kU;function $oe(){return kU||(kU=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function a(l,u,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new i(f,h||l,m),b=t?t+u:u;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],y]:l._events[b].push(y):(l._events[b]=y,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=t?t+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,y=h.length,b=new Array(y);m<y;m++)b[m]=h[m].fn;return b},o.prototype.listenerCount=function(u){var f=t?t+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,m,y,b){var w=t?t+u:u;if(!this._events[w])return!1;var x=this._events[w],_=arguments.length,M,E;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),_){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,h),!0;case 4:return x.fn.call(x.context,f,h,m),!0;case 5:return x.fn.call(x.context,f,h,m,y),!0;case 6:return x.fn.call(x.context,f,h,m,y,b),!0}for(E=1,M=new Array(_-1);E<_;E++)M[E-1]=arguments[E];x.fn.apply(x.context,M)}else{var A=x.length,R;for(E=0;E<A;E++)switch(x[E].once&&this.removeListener(u,x[E].fn,void 0,!0),_){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,f);break;case 3:x[E].fn.call(x[E].context,f,h);break;case 4:x[E].fn.call(x[E].context,f,h,m);break;default:if(!M)for(R=1,M=new Array(_-1);R<_;R++)M[R-1]=arguments[R];x[E].fn.apply(x[E].context,M)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,m){var y=t?t+u:u;if(!this._events[y])return this;if(!f)return s(this,y),this;var b=this._events[y];if(b.fn)b.fn===f&&(!m||b.once)&&(!h||b.context===h)&&s(this,y);else{for(var w=0,x=[],_=b.length;w<_;w++)(b[w].fn!==f||m&&!b[w].once||h&&b[w].context!==h)&&x.push(b[w]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(KT)),KT.exports}var qoe=$oe();const Xoe=Kn(qoe);var ZT=new Xoe,JT="recharts.syncMouseEvents";function by(n){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(n)}function Yoe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Koe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,B6(r.key),r)}}function Zoe(n,e,t){return e&&Koe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function QT(n,e,t){return e=B6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B6(n){var e=Joe(n,"string");return by(e)=="symbol"?e:e+""}function Joe(n,e){if(by(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(by(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Qoe=(function(){function n(){Yoe(this,n),QT(this,"activeIndex",0),QT(this,"coordinateList",[]),QT(this,"layout","horizontal")}return Zoe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,s=t.container,o=s===void 0?null:s,l=t.layout,u=l===void 0?null:l,f=t.offset,h=f===void 0?null:f,m=t.mouseHandlerCallback,y=m===void 0?null:m;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((t=window)===null||t===void 0?void 0:t.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+l+u,m=s+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])})();function ele(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n?.[0],i=n?.[1];if(r&&i&&ft(r)&&ft(i))return!0}return!1}function tle(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function H6(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,s=Cr(e,t,r,i),o=Cr(e,t,r,a);return{points:[s,o],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function nle(n,e,t){var r,i,a,s;if(n==="horizontal")r=e.x,a=r,i=t.top,s=t.top+t.height;else if(n==="vertical")i=e.y,s=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,f=e.outerRadius,h=e.angle,m=Cr(o,l,u,h),y=Cr(o,l,f,h);r=m.x,i=m.y,a=y.x,s=y.y}else return H6(e);return[{x:r,y:i},{x:a,y:s}]}function wy(n){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(n)}function jU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(t),!0).forEach(function(r){rle(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rle(n,e,t){return e=ile(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ile(n){var e=ale(n,"string");return wy(e)=="symbol"?e:e+""}function ale(n,e){if(wy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sle(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,s=n.activeCoordinate,o=n.activePayload,l=n.offset,u=n.activeTooltipIndex,f=n.tooltipAxisBandSize,h=n.layout,m=n.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!y||!a||!s||m!=="ScatterChart"&&i!=="axis")return null;var b,w=v1;if(m==="ScatterChart")b=s,w=Cre;else if(m==="BarChart")b=tle(h,s,l,f),w=NN;else if(h==="radial"){var x=H6(s),_=x.cx,M=x.cy,E=x.radius,A=x.startAngle,R=x.endAngle;b={cx:_,cy:M,startAngle:A,endAngle:R,innerRadius:E,outerRadius:E},w=VB}else b={points:nle(h,s,l)},w=v1;var O=wx(wx(wx(wx({stroke:"#ccc",pointerEvents:"none"},l),b),en(y,!1)),{},{payload:o,payloadIndex:u,className:Cn("recharts-tooltip-cursor",y.className)});return z.isValidElement(y)?z.cloneElement(y,O):z.createElement(w,O)}var ole=["item"],lle=["children","className","width","height","style","compact","title","desc"];function ym(n){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(n)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rp.apply(this,arguments)}function IU(n,e){return dle(n)||ule(n,e)||W6(n,e)||cle()}function cle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ule(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function dle(n){if(Array.isArray(n))return n}function LU(n,e){if(n==null)return{};var t=fle(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fle(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hle(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ple(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,G6(r.key),r)}}function mle(n,e,t){return e&&ple(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function gle(n,e,t){return e=B1(e),vle(n,V6()?Reflect.construct(e,t||[],B1(n).constructor):e.apply(n,t))}function vle(n,e){if(e&&(ym(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yle(n)}function yle(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function V6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V6=function(){return!!n})()}function B1(n){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B1(n)}function xle(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&OC(n,e)}function OC(n,e){return OC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OC(n,e)}function xm(n){return _le(n)||wle(n)||W6(n)||ble()}function ble(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6(n,e){if(n){if(typeof n=="string")return RC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return RC(n,e)}}function wle(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _le(n){if(Array.isArray(n))return RC(n)}function RC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function DU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(t),!0).forEach(function(r){an(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function an(n,e,t){return e=G6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G6(n){var e=Sle(n,"string");return ym(e)=="symbol"?e:e+""}function Sle(n,e){if(ym(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mle={xAxis:["bottom","top"],yAxis:["left","right"]},Ele={width:"100%",height:"100%"},$6={x:0,y:0};function _x(n){return n}var Tle=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},Ale=function(e,t,r,i){var a=t.find(function(f){return f&&f.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return Ge(Ge(Ge({},i),Cr(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return Ge(Ge(Ge({},i),Cr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return $6},zw=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(xm(o),xm(u)):o},[]);return s.length>0?s:e&&e.length&&ft(i)&&ft(a)?e.slice(i,a+1):[]};function q6(n){return n==="number"?[0,"auto"]:void 0}var kC=function(e,t,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=zw(t,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var f,h=(f=u.props.data)!==null&&f!==void 0?f:t;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(s.dataKey&&!s.allowDuplicatedCategory){var y=h===void 0?o:h;m=Vb(y,s.dataKey,i)}else m=h&&h[r]||o[r];return m?[].concat(xm(l),[DB(u,m)]):l},[])},UU=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Tle(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,f=JQ(s,o,u,l);if(f>=0&&u){var h=u[f]&&u[f].value,m=kC(e,t,f,h),y=Ale(r,o,f,a);return{activeTooltipIndex:f,activeLabel:h,activePayload:m,activeCoordinate:y}}return null},Cle=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,s=t.axisIdKey,o=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,f=e.layout,h=e.children,m=e.stackOffset,y=OB(f,a);return r.reduce(function(b,w){var x,_=w.type.defaultProps!==void 0?Ge(Ge({},w.type.defaultProps),w.props):w.props,M=_.type,E=_.dataKey,A=_.allowDataOverflow,R=_.allowDuplicatedCategory,O=_.scale,N=_.ticks,L=_.includeHidden,T=_[s];if(b[T])return b;var j=zw(e.data,{graphicalItems:i.filter(function(te){var ce,le=s in te.props?te.props[s]:(ce=te.type.defaultProps)===null||ce===void 0?void 0:ce[s];return le===T}),dataStartIndex:l,dataEndIndex:u}),U=j.length,B,V,W;ele(_.domain,A,M)&&(B=q2(_.domain,null,A),y&&(M==="number"||O!=="auto")&&(W=_v(j,E,"category")));var Y=q6(M);if(!B||B.length===0){var Q,se=(Q=_.domain)!==null&&Q!==void 0?Q:Y;if(E){if(B=_v(j,E,M),M==="category"&&y){var G=G7(B);R&&G?(V=B,B=A1(0,U)):R||(B=DL(se,B,w).reduce(function(te,ce){return te.indexOf(ce)>=0?te:[].concat(xm(te),[ce])},[]))}else if(M==="category")R?B=B.filter(function(te){return te!==""&&!yn(te)}):B=DL(se,B,w).reduce(function(te,ce){return te.indexOf(ce)>=0||ce===""||yn(ce)?te:[].concat(xm(te),[ce])},[]);else if(M==="number"){var J=ree(j,i.filter(function(te){var ce,le,be=s in te.props?te.props[s]:(ce=te.type.defaultProps)===null||ce===void 0?void 0:ce[s],Se="hide"in te.props?te.props.hide:(le=te.type.defaultProps)===null||le===void 0?void 0:le.hide;return be===T&&(L||!Se)}),E,a,f);J&&(B=J)}y&&(M==="number"||O!=="auto")&&(W=_v(j,E,"category"))}else y?B=A1(0,U):o&&o[T]&&o[T].hasStack&&M==="number"?B=m==="expand"?[0,1]:LB(o[T].stackGroups,l,u):B=NB(j,i.filter(function(te){var ce=s in te.props?te.props[s]:te.type.defaultProps[s],le="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return ce===T&&(L||!le)}),M,f,!0);if(M==="number")B=NC(h,B,T,a,N),se&&(B=q2(se,B,A));else if(M==="category"&&se){var Z=se,X=B.every(function(te){return Z.indexOf(te)>=0});X&&(B=Z)}}return Ge(Ge({},b),{},an({},T,Ge(Ge({},_),{},{axisType:a,domain:B,categoricalDomain:W,duplicateDomain:V,originalDomain:(x=_.domain)!==null&&x!==void 0?x:Y,isCategorical:y,layout:f})))},{})},Ple=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,s=t.axisIdKey,o=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,f=e.layout,h=e.children,m=zw(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),y=m.length,b=OB(f,a),w=-1;return r.reduce(function(x,_){var M=_.type.defaultProps!==void 0?Ge(Ge({},_.type.defaultProps),_.props):_.props,E=M[s],A=q6("number");if(!x[E]){w++;var R;return b?R=A1(0,y):o&&o[E]&&o[E].hasStack?(R=LB(o[E].stackGroups,l,u),R=NC(h,R,E,a)):(R=q2(A,NB(m,r.filter(function(O){var N,L,T=s in O.props?O.props[s]:(N=O.type.defaultProps)===null||N===void 0?void 0:N[s],j="hide"in O.props?O.props.hide:(L=O.type.defaultProps)===null||L===void 0?void 0:L.hide;return T===E&&!j}),"number",f),i.defaultProps.allowDataOverflow),R=NC(h,R,E,a)),Ge(Ge({},x),{},an({},E,Ge(Ge({axisType:a},i.defaultProps),{},{hide:!0,orientation:Es(Mle,"".concat(a,".").concat(w%2),null),domain:R,originalDomain:A,isCategorical:b,layout:f})))}return x},{})},Nle=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,o=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,f=e.children,h="".concat(i,"Id"),m=Ts(f,a),y={};return m&&m.length?y=Cle(e,{axes:m,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(y=Ple(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),y},Ole=function(e){var t=Mu(e),r=uc(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:rN(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:p1(t,r)}},FU=function(e){var t=e.children,r=e.defaultShowTooltip,i=ws(t,cm),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Rle=function(e){return!e||!e.length?!1:e.some(function(t){var r=hc(t&&t.type);return r&&r.indexOf("Bar")>=0})},zU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kle=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,f=r.height,h=r.children,m=r.margin||{},y=ws(h,cm),b=ws(h,ku),w=Object.keys(l).reduce(function(R,O){var N=l[O],L=N.orientation;return!N.mirror&&!N.hide?Ge(Ge({},R),{},an({},L,R[L]+N.width)):R},{left:m.left||0,right:m.right||0}),x=Object.keys(s).reduce(function(R,O){var N=s[O],L=N.orientation;return!N.mirror&&!N.hide?Ge(Ge({},R),{},an({},L,Es(R,"".concat(L))+N.height)):R},{top:m.top||0,bottom:m.bottom||0}),_=Ge(Ge({},x),w),M=_.bottom;y&&(_.bottom+=y.props.height||cm.defaultProps.height),b&&t&&(_=tee(_,i,r,t));var E=u-_.left-_.right,A=f-_.top-_.bottom;return Ge(Ge({brushBottom:M},_),{},{width:Math.max(E,0),height:Math.max(A,0)})},jle=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},zN=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,h=e.defaultProps,m=function(_,M){var E=M.graphicalItems,A=M.stackGroups,R=M.offset,O=M.updateId,N=M.dataStartIndex,L=M.dataEndIndex,T=_.barSize,j=_.layout,U=_.barGap,B=_.barCategoryGap,V=_.maxBarSize,W=zU(j),Y=W.numericAxisName,Q=W.cateAxisName,se=Rle(E),G=[];return E.forEach(function(J,Z){var X=zw(_.data,{graphicalItems:[J],dataStartIndex:N,dataEndIndex:L}),te=J.type.defaultProps!==void 0?Ge(Ge({},J.type.defaultProps),J.props):J.props,ce=te.dataKey,le=te.maxBarSize,be=te["".concat(Y,"Id")],Se=te["".concat(Q,"Id")],Ie={},qe=l.reduce(function(Te,Ze){var Je=M["".concat(Ze.axisType,"Map")],Ye=te["".concat(Ze.axisType,"Id")];Je&&Je[Ye]||Ze.axisType==="zAxis"||kf();var Tt=Je[Ye];return Ge(Ge({},Te),{},an(an({},Ze.axisType,Tt),"".concat(Ze.axisType,"Ticks"),uc(Tt)))},Ie),Pe=qe[Q],Fe=qe["".concat(Q,"Ticks")],$e=A&&A[be]&&A[be].hasStack&&fee(J,A[be].stackGroups),ne=hc(J.type).indexOf("Bar")>=0,Ve=p1(Pe,Fe),Ne=[],Ke=se&&QQ({barSize:T,stackGroups:A,totalSize:jle(qe,Q)});if(ne){var De,vt,dt=yn(le)?V:le,ie=(De=(vt=p1(Pe,Fe,!0))!==null&&vt!==void 0?vt:dt)!==null&&De!==void 0?De:0;Ne=eee({barGap:U,barCategoryGap:B,bandSize:ie!==Ve?ie:Ve,sizeList:Ke[Se],maxBarSize:dt}),ie!==Ve&&(Ne=Ne.map(function(Te){return Ge(Ge({},Te),{},{position:Ge(Ge({},Te.position),{},{offset:Te.position.offset-ie/2})})}))}var ee=J&&J.type&&J.type.getComposedData;ee&&G.push({props:Ge(Ge({},ee(Ge(Ge({},qe),{},{displayedData:X,props:_,dataKey:ce,item:J,bandSize:Ve,barPosition:Ne,offset:R,stackedData:$e,layout:j,dataStartIndex:N,dataEndIndex:L}))),{},an(an(an({key:J.key||"item-".concat(Z)},Y,qe[Y]),Q,qe[Q]),"animationId",O)),childIndex:i9(J,_.children),item:J})}),G},y=function(_,M){var E=_.props,A=_.dataStartIndex,R=_.dataEndIndex,O=_.updateId;if(!Zk({props:E}))return null;var N=E.children,L=E.layout,T=E.stackOffset,j=E.data,U=E.reverseStackOrder,B=zU(L),V=B.numericAxisName,W=B.cateAxisName,Y=Ts(N,r),Q=uee(j,Y,"".concat(V,"Id"),"".concat(W,"Id"),T,U),se=l.reduce(function(te,ce){var le="".concat(ce.axisType,"Map");return Ge(Ge({},te),{},an({},le,Nle(E,Ge(Ge({},ce),{},{graphicalItems:Y,stackGroups:ce.axisType===V&&Q,dataStartIndex:A,dataEndIndex:R}))))},{}),G=kle(Ge(Ge({},se),{},{props:E,graphicalItems:Y}),M?.legendBBox);Object.keys(se).forEach(function(te){se[te]=f(E,se[te],G,te.replace("Map",""),t)});var J=se["".concat(W,"Map")],Z=Ole(J),X=m(E,Ge(Ge({},se),{},{dataStartIndex:A,dataEndIndex:R,updateId:O,graphicalItems:Y,stackGroups:Q,offset:G}));return Ge(Ge({formattedGraphicalItems:X,graphicalItems:Y,offset:G,stackGroups:Q},Z),se)},b=(function(x){function _(M){var E,A,R;return hle(this,_),R=gle(this,_,[M]),an(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),an(R,"accessibilityManager",new Qoe),an(R,"handleLegendBBoxUpdate",function(O){if(O){var N=R.state,L=N.dataStartIndex,T=N.dataEndIndex,j=N.updateId;R.setState(Ge({legendBBox:O},y({props:R.props,dataStartIndex:L,dataEndIndex:T,updateId:j},Ge(Ge({},R.state),{},{legendBBox:O}))))}}),an(R,"handleReceiveSyncEvent",function(O,N,L){if(R.props.syncId===O){if(L===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(N)}}),an(R,"handleBrushChange",function(O){var N=O.startIndex,L=O.endIndex;if(N!==R.state.dataStartIndex||L!==R.state.dataEndIndex){var T=R.state.updateId;R.setState(function(){return Ge({dataStartIndex:N,dataEndIndex:L},y({props:R.props,dataStartIndex:N,dataEndIndex:L,updateId:T},R.state))}),R.triggerSyncEvent({dataStartIndex:N,dataEndIndex:L})}}),an(R,"handleMouseEnter",function(O){var N=R.getMouseInfo(O);if(N){var L=Ge(Ge({},N),{},{isTooltipActive:!0});R.setState(L),R.triggerSyncEvent(L);var T=R.props.onMouseEnter;on(T)&&T(L,O)}}),an(R,"triggeredAfterMouseMove",function(O){var N=R.getMouseInfo(O),L=N?Ge(Ge({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(L),R.triggerSyncEvent(L);var T=R.props.onMouseMove;on(T)&&T(L,O)}),an(R,"handleItemMouseEnter",function(O){R.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),an(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),an(R,"handleMouseMove",function(O){O.persist(),R.throttleTriggeredAfterMouseMove(O)}),an(R,"handleMouseLeave",function(O){R.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};R.setState(N),R.triggerSyncEvent(N);var L=R.props.onMouseLeave;on(L)&&L(N,O)}),an(R,"handleOuterEvent",function(O){var N=r9(O),L=Es(R.props,"".concat(N));if(N&&on(L)){var T,j;/.*touch.*/i.test(N)?j=R.getMouseInfo(O.changedTouches[0]):j=R.getMouseInfo(O),L((T=j)!==null&&T!==void 0?T:{},O)}}),an(R,"handleClick",function(O){var N=R.getMouseInfo(O);if(N){var L=Ge(Ge({},N),{},{isTooltipActive:!0});R.setState(L),R.triggerSyncEvent(L);var T=R.props.onClick;on(T)&&T(L,O)}}),an(R,"handleMouseDown",function(O){var N=R.props.onMouseDown;if(on(N)){var L=R.getMouseInfo(O);N(L,O)}}),an(R,"handleMouseUp",function(O){var N=R.props.onMouseUp;if(on(N)){var L=R.getMouseInfo(O);N(L,O)}}),an(R,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),an(R,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.handleMouseDown(O.changedTouches[0])}),an(R,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.handleMouseUp(O.changedTouches[0])}),an(R,"handleDoubleClick",function(O){var N=R.props.onDoubleClick;if(on(N)){var L=R.getMouseInfo(O);N(L,O)}}),an(R,"handleContextMenu",function(O){var N=R.props.onContextMenu;if(on(N)){var L=R.getMouseInfo(O);N(L,O)}}),an(R,"triggerSyncEvent",function(O){R.props.syncId!==void 0&&ZT.emit(JT,R.props.syncId,O,R.eventEmitterSymbol)}),an(R,"applySyncEvent",function(O){var N=R.props,L=N.layout,T=N.syncMethod,j=R.state.updateId,U=O.dataStartIndex,B=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)R.setState(Ge({dataStartIndex:U,dataEndIndex:B},y({props:R.props,dataStartIndex:U,dataEndIndex:B,updateId:j},R.state)));else if(O.activeTooltipIndex!==void 0){var V=O.chartX,W=O.chartY,Y=O.activeTooltipIndex,Q=R.state,se=Q.offset,G=Q.tooltipTicks;if(!se)return;if(typeof T=="function")Y=T(G,O);else if(T==="value"){Y=-1;for(var J=0;J<G.length;J++)if(G[J].value===O.activeLabel){Y=J;break}}var Z=Ge(Ge({},se),{},{x:se.left,y:se.top}),X=Math.min(V,Z.x+Z.width),te=Math.min(W,Z.y+Z.height),ce=G[Y]&&G[Y].value,le=kC(R.state,R.props.data,Y),be=G[Y]?{x:L==="horizontal"?G[Y].coordinate:X,y:L==="horizontal"?te:G[Y].coordinate}:$6;R.setState(Ge(Ge({},O),{},{activeLabel:ce,activeCoordinate:be,activePayload:le,activeTooltipIndex:Y}))}else R.setState(O)}),an(R,"renderCursor",function(O){var N,L=R.state,T=L.isTooltipActive,j=L.activeCoordinate,U=L.activePayload,B=L.offset,V=L.activeTooltipIndex,W=L.tooltipAxisBandSize,Y=R.getTooltipEventType(),Q=(N=O.props.active)!==null&&N!==void 0?N:T,se=R.props.layout,G=O.key||"_recharts-cursor";return ye.createElement(sle,{key:G,activeCoordinate:j,activePayload:U,activeTooltipIndex:V,chartName:t,element:O,isActive:Q,layout:se,offset:B,tooltipAxisBandSize:W,tooltipEventType:Y})}),an(R,"renderPolarAxis",function(O,N,L){var T=Es(O,"type.axisType"),j=Es(R.state,"".concat(T,"Map")),U=O.type.defaultProps,B=U!==void 0?Ge(Ge({},U),O.props):O.props,V=j&&j[B["".concat(T,"Id")]];return z.cloneElement(O,Ge(Ge({},V),{},{className:Cn(T,V.className),key:O.key||"".concat(N,"-").concat(L),ticks:uc(V,!0)}))}),an(R,"renderPolarGrid",function(O){var N=O.props,L=N.radialLines,T=N.polarAngles,j=N.polarRadius,U=R.state,B=U.radiusAxisMap,V=U.angleAxisMap,W=Mu(B),Y=Mu(V),Q=Y.cx,se=Y.cy,G=Y.innerRadius,J=Y.outerRadius;return z.cloneElement(O,{polarAngles:Array.isArray(T)?T:uc(Y,!0).map(function(Z){return Z.coordinate}),polarRadius:Array.isArray(j)?j:uc(W,!0).map(function(Z){return Z.coordinate}),cx:Q,cy:se,innerRadius:G,outerRadius:J,key:O.key||"polar-grid",radialLines:L})}),an(R,"renderLegend",function(){var O=R.state.formattedGraphicalItems,N=R.props,L=N.children,T=N.width,j=N.height,U=R.props.margin||{},B=T-(U.left||0)-(U.right||0),V=CB({children:L,formattedGraphicalItems:O,legendWidth:B,legendContent:u});if(!V)return null;var W=V.item,Y=LU(V,ole);return z.cloneElement(W,Ge(Ge({},Y),{},{chartWidth:T,chartHeight:j,margin:U,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),an(R,"renderTooltip",function(){var O,N=R.props,L=N.children,T=N.accessibilityLayer,j=ws(L,es);if(!j)return null;var U=R.state,B=U.isTooltipActive,V=U.activeCoordinate,W=U.activePayload,Y=U.activeLabel,Q=U.offset,se=(O=j.props.active)!==null&&O!==void 0?O:B;return z.cloneElement(j,{viewBox:Ge(Ge({},Q),{},{x:Q.left,y:Q.top}),active:se,label:Y,payload:se?W:[],coordinate:V,accessibilityLayer:T})}),an(R,"renderBrush",function(O){var N=R.props,L=N.margin,T=N.data,j=R.state,U=j.offset,B=j.dataStartIndex,V=j.dataEndIndex,W=j.updateId;return z.cloneElement(O,{key:O.key||"_recharts-brush",onChange:vx(R.handleBrushChange,O.props.onChange),data:T,x:ft(O.props.x)?O.props.x:U.left,y:ft(O.props.y)?O.props.y:U.top+U.height+U.brushBottom-(L.bottom||0),width:ft(O.props.width)?O.props.width:U.width,startIndex:B,endIndex:V,updateId:"brush-".concat(W)})}),an(R,"renderReferenceElement",function(O,N,L){if(!O)return null;var T=R,j=T.clipPathId,U=R.state,B=U.xAxisMap,V=U.yAxisMap,W=U.offset,Y=O.type.defaultProps||{},Q=O.props,se=Q.xAxisId,G=se===void 0?Y.xAxisId:se,J=Q.yAxisId,Z=J===void 0?Y.yAxisId:J;return z.cloneElement(O,{key:O.key||"".concat(N,"-").concat(L),xAxis:B[G],yAxis:V[Z],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:j})}),an(R,"renderActivePoints",function(O){var N=O.item,L=O.activePoint,T=O.basePoint,j=O.childIndex,U=O.isRange,B=[],V=N.props.key,W=N.item.type.defaultProps!==void 0?Ge(Ge({},N.item.type.defaultProps),N.item.props):N.item.props,Y=W.activeDot,Q=W.dataKey,se=Ge(Ge({index:j,dataKey:Q,cx:L.x,cy:L.y,r:4,fill:PN(N.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value},en(Y,!1)),Wb(Y));return B.push(_.renderActiveDot(Y,se,"".concat(V,"-activePoint-").concat(j))),T?B.push(_.renderActiveDot(Y,Ge(Ge({},se),{},{cx:T.x,cy:T.y}),"".concat(V,"-basePoint-").concat(j))):U&&B.push(null),B}),an(R,"renderGraphicChild",function(O,N,L){var T=R.filterFormatItem(O,N,L);if(!T)return null;var j=R.getTooltipEventType(),U=R.state,B=U.isTooltipActive,V=U.tooltipAxis,W=U.activeTooltipIndex,Y=U.activeLabel,Q=R.props.children,se=ws(Q,es),G=T.props,J=G.points,Z=G.isRange,X=G.baseLine,te=T.item.type.defaultProps!==void 0?Ge(Ge({},T.item.type.defaultProps),T.item.props):T.item.props,ce=te.activeDot,le=te.hide,be=te.activeBar,Se=te.activeShape,Ie=!!(!le&&B&&se&&(ce||be||Se)),qe={};j!=="axis"&&se&&se.props.trigger==="click"?qe={onClick:vx(R.handleItemMouseEnter,O.props.onClick)}:j!=="axis"&&(qe={onMouseLeave:vx(R.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:vx(R.handleItemMouseEnter,O.props.onMouseEnter)});var Pe=z.cloneElement(O,Ge(Ge({},T.props),qe));function Fe(Ze){return typeof V.dataKey=="function"?V.dataKey(Ze.payload):null}if(Ie)if(W>=0){var $e,ne;if(V.dataKey&&!V.allowDuplicatedCategory){var Ve=typeof V.dataKey=="function"?Fe:"payload.".concat(V.dataKey.toString());$e=Vb(J,Ve,Y),ne=Z&&X&&Vb(X,Ve,Y)}else $e=J?.[W],ne=Z&&X&&X[W];if(Se||be){var Ne=O.props.activeIndex!==void 0?O.props.activeIndex:W;return[z.cloneElement(O,Ge(Ge(Ge({},T.props),qe),{},{activeIndex:Ne})),null,null]}if(!yn($e))return[Pe].concat(xm(R.renderActivePoints({item:T,activePoint:$e,basePoint:ne,childIndex:W,isRange:Z})))}else{var Ke,De=(Ke=R.getItemByXY(R.state.activeCoordinate))!==null&&Ke!==void 0?Ke:{graphicalItem:Pe},vt=De.graphicalItem,dt=vt.item,ie=dt===void 0?O:dt,ee=vt.childIndex,Te=Ge(Ge(Ge({},T.props),qe),{},{activeIndex:ee});return[z.cloneElement(ie,Te),null,null]}return Z?[Pe,null,null]:[Pe,null]}),an(R,"renderCustomized",function(O,N,L){return z.cloneElement(O,Ge(Ge({key:"recharts-customized-".concat(L)},R.props),R.state))}),an(R,"renderMap",{CartesianGrid:{handler:_x,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:_x},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:_x},YAxis:{handler:_x},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((E=M.id)!==null&&E!==void 0?E:Om("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=A5(R.triggeredAfterMouseMove,(A=M.throttleDelay)!==null&&A!==void 0?A:1e3/60),R.state={},R}return xle(_,x),mle(_,[{key:"componentDidMount",value:function(){var E,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,A=E.children,R=E.data,O=E.height,N=E.layout,L=ws(A,es);if(L){var T=L.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,U=kC(this.state,R,T,j),B=this.state.tooltipTicks[T].coordinate,V=(this.state.offset.top+O)/2,W=N==="horizontal",Y=W?{x:B,y:V}:{y:B,x:V},Q=this.state.formattedGraphicalItems.find(function(G){var J=G.item;return J.type.name==="Scatter"});Q&&(Y=Ge(Ge({},Y),Q.props.points[T].tooltipPosition),U=Q.props.points[T].tooltipPayload);var se={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:j,activePayload:U,activeCoordinate:Y};this.setState(se),this.renderCursor(L),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var R,O;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(E){m2([ws(E.children,es)],[ws(this.props.children,es)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=ws(this.props.children,es);if(E&&typeof E.props.shared=="boolean"){var A=E.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var A=this.container,R=A.getBoundingClientRect(),O=WY(R),N={chartX:Math.round(E.pageX-O.left),chartY:Math.round(E.pageY-O.top)},L=R.width/A.offsetWidth||1,T=this.inRange(N.chartX,N.chartY,L);if(!T)return null;var j=this.state,U=j.xAxisMap,B=j.yAxisMap,V=this.getTooltipEventType(),W=UU(this.state,this.props.data,this.props.layout,T);if(V!=="axis"&&U&&B){var Y=Mu(U).scale,Q=Mu(B).scale,se=Y&&Y.invert?Y.invert(N.chartX):null,G=Q&&Q.invert?Q.invert(N.chartY):null;return Ge(Ge({},N),{},{xValue:se,yValue:G},W)}return W?Ge(Ge({},N),W):null}},{key:"inRange",value:function(E,A){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,N=E/R,L=A/R;if(O==="horizontal"||O==="vertical"){var T=this.state.offset,j=N>=T.left&&N<=T.left+T.width&&L>=T.top&&L<=T.top+T.height;return j?{x:N,y:L}:null}var U=this.state,B=U.angleAxisMap,V=U.radiusAxisMap;if(B&&V){var W=Mu(B);return zL({x:N,y:L},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,A=this.getTooltipEventType(),R=ws(E,es),O={};R&&A==="axis"&&(R.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Wb(this.props,this.handleOuterEvent);return Ge(Ge({},N),O)}},{key:"addListener",value:function(){ZT.on(JT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ZT.removeListener(JT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,A,R){for(var O=this.state.formattedGraphicalItems,N=0,L=O.length;N<L;N++){var T=O[N];if(T.item===E||T.props.key===E.key||A===hc(T.item.type)&&R===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,A=this.state.offset,R=A.left,O=A.top,N=A.height,L=A.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:E},ye.createElement("rect",{x:R,y:O,height:N,width:L})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(A,R){var O=IU(R,2),N=O[0],L=O[1];return Ge(Ge({},A),{},an({},N,L.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(A,R){var O=IU(R,2),N=O[0],L=O[1];return Ge(Ge({},A),{},an({},N,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[E])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(E){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[E])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(E){var A=this.state,R=A.formattedGraphicalItems,O=A.activeItem;if(R&&R.length)for(var N=0,L=R.length;N<L;N++){var T=R[N],j=T.props,U=T.item,B=U.type.defaultProps!==void 0?Ge(Ge({},U.type.defaultProps),U.props):U.props,V=hc(U.type);if(V==="Bar"){var W=(j.data||[]).find(function(G){return lre(E,G)});if(W)return{graphicalItem:T,payload:W}}else if(V==="RadialBar"){var Y=(j.data||[]).find(function(G){return zL(E,G)});if(Y)return{graphicalItem:T,payload:Y}}else if(kw(T,O)||jw(T,O)||my(T,O)){var Q=Oie({graphicalItem:T,activeTooltipItem:O,itemData:B.data}),se=B.activeIndex===void 0?Q:B.activeIndex;return{graphicalItem:Ge(Ge({},T),{},{childIndex:se}),payload:my(T,O)?B.data[Q]:T.props.data[Q]}}}return null}},{key:"render",value:function(){var E=this;if(!Zk(this))return null;var A=this.props,R=A.children,O=A.className,N=A.width,L=A.height,T=A.style,j=A.compact,U=A.title,B=A.desc,V=LU(A,lle),W=en(V,!1);if(j)return ye.createElement(gU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(v2,Rp({},W,{width:N,height:L,title:U,desc:B}),this.renderClipPath(),Qk(R,this.renderMap)));if(this.props.accessibilityLayer){var Y,Q;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(Q=this.props.role)!==null&&Q!==void 0?Q:"application",W.onKeyDown=function(G){E.accessibilityManager.keyboardEvent(G)},W.onFocus=function(){E.accessibilityManager.focus()}}var se=this.parseEventsOfWrapper();return ye.createElement(gU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",Rp({className:Cn("recharts-wrapper",O),style:Ge({position:"relative",cursor:"default",width:N,height:L},T)},se,{ref:function(J){E.container=J}}),ye.createElement(v2,Rp({},W,{width:N,height:L,title:U,desc:B,style:Ele}),this.renderClipPath(),Qk(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(z.Component);an(b,"displayName",t),an(b,"defaultProps",Ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),an(b,"getDerivedStateFromProps",function(x,_){var M=x.dataKey,E=x.data,A=x.children,R=x.width,O=x.height,N=x.layout,L=x.stackOffset,T=x.margin,j=_.dataStartIndex,U=_.dataEndIndex;if(_.updateId===void 0){var B=FU(x);return Ge(Ge(Ge({},B),{},{updateId:0},y(Ge(Ge({props:x},B),{},{updateId:0}),_)),{},{prevDataKey:M,prevData:E,prevWidth:R,prevHeight:O,prevLayout:N,prevStackOffset:L,prevMargin:T,prevChildren:A})}if(M!==_.prevDataKey||E!==_.prevData||R!==_.prevWidth||O!==_.prevHeight||N!==_.prevLayout||L!==_.prevStackOffset||!zp(T,_.prevMargin)){var V=FU(x),W={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Y=Ge(Ge({},UU(_,E,N)),{},{updateId:_.updateId+1}),Q=Ge(Ge(Ge({},V),W),Y);return Ge(Ge(Ge({},Q),y(Ge({props:x},Q),_)),{},{prevDataKey:M,prevData:E,prevWidth:R,prevHeight:O,prevLayout:N,prevStackOffset:L,prevMargin:T,prevChildren:A})}if(!m2(A,_.prevChildren)){var se,G,J,Z,X=ws(A,cm),te=X&&(se=(G=X.props)===null||G===void 0?void 0:G.startIndex)!==null&&se!==void 0?se:j,ce=X&&(J=(Z=X.props)===null||Z===void 0?void 0:Z.endIndex)!==null&&J!==void 0?J:U,le=te!==j||ce!==U,be=!yn(E),Se=be&&!le?_.updateId:_.updateId+1;return Ge(Ge({updateId:Se},y(Ge(Ge({props:x},_),{},{updateId:Se,dataStartIndex:te,dataEndIndex:ce}),_)),{},{prevChildren:A,dataStartIndex:te,dataEndIndex:ce})}return null}),an(b,"renderActiveDot",function(x,_,M){var E;return z.isValidElement(x)?E=z.cloneElement(x,_):on(x)?E=x(_):E=ye.createElement(Cw,_),ye.createElement($n,{className:"recharts-active-dot",key:M},E)});var w=z.forwardRef(function(_,M){return ye.createElement(b,Rp({},_,{ref:M}))});return w.displayName=b.displayName,w},Ile=zN({chartName:"LineChart",GraphicalChild:Pu,axisComponents:[{axisType:"xAxis",AxisComp:Lf},{axisType:"yAxis",AxisComp:Df}],formatAxisMap:h6}),X6=zN({chartName:"BarChart",GraphicalChild:Xu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Lf},{axisType:"yAxis",AxisComp:Df}],formatAxisMap:h6}),Y6=zN({chartName:"PieChart",GraphicalChild:gl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Rw},{axisType:"radiusAxis",AxisComp:Nw}],formatAxisMap:_ee,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function H1(n){"@babel/helpers - typeof";return H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H1(n)}function wc(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ur(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function tr(n){ur(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||H1(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Lle(n,e){ur(2,arguments);var t=tr(n).getTime(),r=wc(e);return new Date(t+r)}var Dle={};function $f(){return Dle}function Ule(n,e){var t,r,i,a,s,o,l,u;ur(1,arguments);var f=$f(),h=wc((t=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=tr(n),y=m.getDay(),b=(y<h?7:0)+y-h;return m.setDate(m.getDate()-b),m.setHours(0,0,0,0),m}function jC(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function eA(n){ur(1,arguments);var e=tr(n);return e.setHours(0,0,0,0),e}function _b(n,e){ur(2,arguments);var t=tr(n),r=tr(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Fle(n){return ur(1,arguments),n instanceof Date||H1(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function zle(n){if(ur(1,arguments),!Fle(n)&&typeof n!="number")return!1;var e=tr(n);return!isNaN(Number(e))}function Ble(n,e){ur(2,arguments);var t=tr(n),r=tr(e),i=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return i*12+a}function Hle(n,e){return ur(2,arguments),tr(n).getTime()-tr(e).getTime()}var Vle={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Wle="trunc";function Gle(n){return Vle[Wle]}function Sb(n){ur(1,arguments);var e=tr(n);return e.setHours(23,59,59,999),e}function K6(n){ur(1,arguments);var e=tr(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function $le(n){ur(1,arguments);var e=tr(n);return Sb(e).getTime()===K6(e).getTime()}function qle(n,e){ur(2,arguments);var t=tr(n),r=tr(e),i=_b(t,r),a=Math.abs(Ble(t,r)),s;if(a<1)s=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*a);var o=_b(t,r)===-i;$le(tr(n))&&a===1&&_b(n,r)===1&&(o=!1),s=i*(a-Number(o))}return s===0?0:s}function Xle(n,e,t){ur(2,arguments);var r=Hle(n,e)/1e3;return Gle()(r)}function Yle(n){ur(1,arguments);var e=tr(n);return e.setDate(1),e.setHours(0,0,0,0),e}function Kle(n,e){var t,r,i,a,s,o,l,u;ur(1,arguments);var f=$f(),h=wc((t=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=tr(n),y=m.getDay(),b=(y<h?-7:0)+6-(y-h);return m.setDate(m.getDate()+b),m.setHours(23,59,59,999),m}function Zle(n,e){ur(2,arguments);var t=wc(e);return Lle(n,-t)}var Jle=864e5;function Qle(n){ur(1,arguments);var e=tr(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/Jle)+1}function V1(n){ur(1,arguments);var e=1,t=tr(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Z6(n){ur(1,arguments);var e=tr(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=V1(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var s=V1(a);return e.getTime()>=i.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function ece(n){ur(1,arguments);var e=Z6(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=V1(t);return r}var tce=6048e5;function nce(n){ur(1,arguments);var e=tr(n),t=V1(e).getTime()-ece(e).getTime();return Math.round(t/tce)+1}function W1(n,e){var t,r,i,a,s,o,l,u;ur(1,arguments);var f=$f(),h=wc((t=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=tr(n),y=m.getUTCDay(),b=(y<h?7:0)+y-h;return m.setUTCDate(m.getUTCDate()-b),m.setUTCHours(0,0,0,0),m}function J6(n,e){var t,r,i,a,s,o,l,u;ur(1,arguments);var f=tr(n),h=f.getUTCFullYear(),m=$f(),y=wc((t=(r=(i=(a=e?.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(h+1,0,y),b.setUTCHours(0,0,0,0);var w=W1(b,e),x=new Date(0);x.setUTCFullYear(h,0,y),x.setUTCHours(0,0,0,0);var _=W1(x,e);return f.getTime()>=w.getTime()?h+1:f.getTime()>=_.getTime()?h:h-1}function rce(n,e){var t,r,i,a,s,o,l,u;ur(1,arguments);var f=$f(),h=wc((t=(r=(i=(a=e?.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),m=J6(n,e),y=new Date(0);y.setUTCFullYear(m,0,h),y.setUTCHours(0,0,0,0);var b=W1(y,e);return b}var ice=6048e5;function ace(n,e){ur(1,arguments);var t=tr(n),r=W1(t,e).getTime()-rce(t,e).getTime();return Math.round(r/ice)+1}function sr(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var du={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return sr(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):sr(r+1,2)},d:function(e,t){return sr(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return sr(e.getUTCHours()%12||12,t.length)},H:function(e,t){return sr(e.getUTCHours(),t.length)},m:function(e,t){return sr(e.getUTCMinutes(),t.length)},s:function(e,t){return sr(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return sr(a,t.length)}},ep={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sce={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return du.y(e,t)},Y:function(e,t,r,i){var a=J6(e,i),s=a>0?a:1-a;if(t==="YY"){var o=s%100;return sr(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):sr(s,t.length)},R:function(e,t){var r=Z6(e);return sr(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return sr(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return sr(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return sr(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return du.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return sr(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var a=ace(e,i);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):sr(a,t.length)},I:function(e,t,r){var i=nce(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):sr(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):du.d(e,t)},D:function(e,t,r){var i=Qle(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):sr(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var a=e.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return sr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var a=e.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return sr(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return sr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),a;switch(i===12?a=ep.noon:i===0?a=ep.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),a;switch(i>=17?a=ep.evening:i>=12?a=ep.afternoon:i>=4?a=ep.morning:a=ep.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return du.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):du.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):sr(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):sr(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):du.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):du.s(e,t)},S:function(e,t){return du.S(e,t)},X:function(e,t,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return HU(s);case"XXXX":case"XX":return ef(s);case"XXXXX":case"XXX":default:return ef(s,":")}},x:function(e,t,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(t){case"x":return HU(s);case"xxxx":case"xx":return ef(s);case"xxxxx":case"xxx":default:return ef(s,":")}},O:function(e,t,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+BU(s,":");case"OOOO":default:return"GMT"+ef(s,":")}},z:function(e,t,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+BU(s,":");case"zzzz":default:return"GMT"+ef(s,":")}},t:function(e,t,r,i){var a=i._originalDate||e,s=Math.floor(a.getTime()/1e3);return sr(s,t.length)},T:function(e,t,r,i){var a=i._originalDate||e,s=a.getTime();return sr(s,t.length)}};function BU(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),a=r%60;if(a===0)return t+String(i);var s=e;return t+String(i)+s+sr(a,2)}function HU(n,e){if(n%60===0){var t=n>0?"-":"+";return t+sr(Math.abs(n)/60,2)}return ef(n,e)}function ef(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),a=sr(Math.floor(i/60),2),s=sr(i%60,2);return r+a+t+s}var VU=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Q6=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},oce=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return VU(e,t);var s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",VU(i,t)).replace("{{time}}",Q6(a,t))},lce={p:Q6,P:oce},cce=["D","DD"],uce=["YY","YYYY"];function dce(n){return cce.indexOf(n)!==-1}function fce(n){return uce.indexOf(n)!==-1}function WU(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pce=function(e,t,r){var i,a=hce[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function tA(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var mce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yce={date:tA({formats:mce,defaultWidth:"full"}),time:tA({formats:gce,defaultWidth:"full"}),dateTime:tA({formats:vce,defaultWidth:"full"})},xce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bce=function(e,t,r,i){return xce[e]};function qg(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var a=n.defaultFormattingWidth||n.defaultWidth,s=t!=null&&t.width?String(t.width):a;i=n.formattingValues[s]||n.formattingValues[a]}else{var o=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[o]}var u=n.argumentCallback?n.argumentCallback(e):e;return i[u]}}var wce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_ce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ece={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ace=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Cce={ordinalNumber:Ace,era:qg({values:wce,defaultWidth:"wide"}),quarter:qg({values:_ce,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:qg({values:Sce,defaultWidth:"wide"}),day:qg({values:Mce,defaultWidth:"wide"}),dayPeriod:qg({values:Ece,defaultWidth:"wide",formattingValues:Tce,defaultFormattingWidth:"wide"})};function Xg(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;var s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Nce(o,function(h){return h.test(s)}):Pce(o,function(h){return h.test(s)}),u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var f=e.slice(s.length);return{value:u,rest:f}}}function Pce(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Nce(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Oce(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],a=e.match(n.parsePattern);if(!a)return null;var s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;var o=e.slice(i.length);return{value:s,rest:o}}}var Rce=/^(\d+)(th|st|nd|rd)?/i,kce=/\d+/i,jce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ice={any:[/^b/i,/^(a|c)/i]},Lce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dce={any:[/1/i,/2/i,/3/i,/4/i]},Uce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Wce={ordinalNumber:Oce({matchPattern:Rce,parsePattern:kce,valueCallback:function(e){return parseInt(e,10)}}),era:Xg({matchPatterns:jce,defaultMatchWidth:"wide",parsePatterns:Ice,defaultParseWidth:"any"}),quarter:Xg({matchPatterns:Lce,defaultMatchWidth:"wide",parsePatterns:Dce,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Xg({matchPatterns:Uce,defaultMatchWidth:"wide",parsePatterns:Fce,defaultParseWidth:"any"}),day:Xg({matchPatterns:zce,defaultMatchWidth:"wide",parsePatterns:Bce,defaultParseWidth:"any"}),dayPeriod:Xg({matchPatterns:Hce,defaultMatchWidth:"any",parsePatterns:Vce,defaultParseWidth:"any"})},e8={code:"en-US",formatDistance:pce,formatLong:yce,formatRelative:bce,localize:Cce,match:Wce,options:{weekStartsOn:0,firstWeekContainsDate:1}},Gce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$ce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qce=/^'([^]*?)'?$/,Xce=/''/g,Yce=/[a-zA-Z]/;function fn(n,e,t){var r,i,a,s,o,l,u,f,h,m,y,b,w,x;ur(2,arguments);var _=String(e),M=$f(),E=(r=(i=void 0)!==null&&i!==void 0?i:M.locale)!==null&&r!==void 0?r:e8,A=wc((a=(s=(o=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&o!==void 0?o:M.firstWeekContainsDate)!==null&&s!==void 0?s:(u=M.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=wc((h=(m=(y=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&y!==void 0?y:M.weekStartsOn)!==null&&m!==void 0?m:(w=M.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&h!==void 0?h:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var O=tr(n);if(!zle(O))throw new RangeError("Invalid time value");var N=jC(O),L=Zle(O,N),T={firstWeekContainsDate:A,weekStartsOn:R,locale:E,_originalDate:O},j=_.match($ce).map(function(U){var B=U[0];if(B==="p"||B==="P"){var V=lce[B];return V(U,E.formatLong)}return U}).join("").match(Gce).map(function(U){if(U==="''")return"'";var B=U[0];if(B==="'")return Kce(U);var V=sce[B];if(V)return fce(U)&&WU(U,e,String(n)),dce(U)&&WU(U,e,String(n)),V(L,U,E.localize,T);if(B.match(Yce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return U}).join("");return j}function Kce(n){var e=n.match(qce);return e?e[1].replace(Xce,"'"):n}function t8(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function Zce(n){return t8({},n)}var GU=1440,Jce=2520,nA=43200,Qce=86400;function eue(n,e,t){var r,i;ur(2,arguments);var a=$f(),s=(r=(i=void 0)!==null&&i!==void 0?i:a.locale)!==null&&r!==void 0?r:e8;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=_b(n,e);if(isNaN(o))throw new RangeError("Invalid time value");var l=t8(Zce(t),{addSuffix:!1,comparison:o}),u,f;o>0?(u=tr(e),f=tr(n)):(u=tr(n),f=tr(e));var h=Xle(f,u),m=(jC(f)-jC(u))/1e3,y=Math.round((h-m)/60),b;if(y<2)return y===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",y,l);if(y<45)return s.formatDistance("xMinutes",y,l);if(y<90)return s.formatDistance("aboutXHours",1,l);if(y<GU){var w=Math.round(y/60);return s.formatDistance("aboutXHours",w,l)}else{if(y<Jce)return s.formatDistance("xDays",1,l);if(y<nA){var x=Math.round(y/GU);return s.formatDistance("xDays",x,l)}else if(y<Qce)return b=Math.round(y/nA),s.formatDistance("aboutXMonths",b,l)}if(b=qle(f,u),b<12){var _=Math.round(y/nA);return s.formatDistance("xMonths",_,l)}else{var M=b%12,E=Math.floor(b/12);return M<3?s.formatDistance("aboutXYears",E,l):M<9?s.formatDistance("overXYears",E,l):s.formatDistance("almostXYears",E+1,l)}}function tue(n,e){return ur(1,arguments),eue(n,Date.now(),e)}const nue=()=>{const{user:n}=Fr(),e=Ua(),t=n?.role==="admin"||n?.role==="agent",r=T=>({"Total Tickets":null,Open:"open","Approval Pending":"approval-pending",Approved:"approved",Rejected:"rejected","In Progress":"in-progress",Resolved:"resolved",Closed:"closed",Overdue:null,"Pending Tickets":"open","Closed Tickets":"closed"})[T]||null,i=T=>{const j=r(T);j?e(`/tickets?status=${j}`):(T==="Total Tickets"||T==="Overdue")&&e("/tickets")},[a,s]=z.useState({totalTickets:0,pendingTickets:0,closedTickets:0,overdueTickets:0}),[o,l]=z.useState([]),[u,f]=z.useState([]),[h,m]=z.useState([]),[y,b]=z.useState([]),[w,x]=z.useState(!0),[_,M]=z.useState(null),[E,A]=z.useState([]);z.useEffect(()=>{t&&R(),O();const T=setInterval(()=>{O()},3e4);return()=>clearInterval(T)},[_,n,t]);const R=async()=>{try{const{organizationsAPI:T}=await n7(async()=>{const{organizationsAPI:U}=await Promise.resolve().then(()=>y$);return{organizationsAPI:U}},void 0),j=await T.getAll();A(j)}catch(T){console.error("Failed to load organizations",T)}},O=async()=>{try{x(!0);const T=await Vi.getDashboardStats(_);if(t){s({totalTickets:T.totalTickets||0,openTickets:T.openTickets||0,approvalPendingTickets:T.approvalPendingTickets||0,approvedTickets:T.approvedTickets||0,rejectedTickets:T.rejectedTickets||0,inProgressTickets:T["in-progress"]||0,resolvedTickets:T.resolvedTickets||0,closedTickets:T.closedTickets||0,pendingTickets:T.pendingTickets||0,overdueTickets:T.overdueTickets||0}),l(T.recentTickets||[]);let j=T.myOpenTickets||[];if(j.length===0&&T.recentTickets&&T.recentTickets.length>0){const V=T.recentTickets.filter(W=>W.status==="open"||W.status==="in-progress");V.length>0&&(j=V)}f(j),m(T.statusDistribution||[]);const U=(T.priorityDistribution||[]).reduce((V,W)=>V+W.value,0),B=(T.priorityDistribution||[]).map(V=>({...V,percentage:U>0?Math.round(V.value/U*100):0}));b(B)}else{const j=T.myOpenTickets||[],U=await Vi.getAll(),B={totalTickets:T.totalTickets||0,pendingTickets:T.pendingTickets||0,closedTickets:T.closedTickets||0,overdueTickets:T.overdueTickets||0};s(B),f(j),l([]);const V={};U.forEach(se=>{V[se.status]=(V[se.status]||0)+1}),m(Object.entries(V).map(([se,G])=>({name:se,value:G})));const W={};U.forEach(se=>{W[se.priority]=(W[se.priority]||0)+1});const Y=Object.values(W).reduce((se,G)=>se+G,0),Q=Object.entries(W).map(([se,G])=>({name:se,value:G,percentage:Y>0?Math.round(G/Y*100):0}));b(Q)}}catch(T){console.error("Dashboard data error:",T),ve.error("Failed to load dashboard data. Showing default view."),s({totalTickets:0,pendingTickets:0,closedTickets:0,overdueTickets:0}),l([]),f([]),m([]),b([])}finally{x(!1)}},N=t?[{label:"Total Tickets",value:a.totalTickets.toLocaleString(),icon:Fp,color:"text-primary-600",bgGradient:"from-primary-50 to-primary-100/50",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",borderColor:"border-primary-200",shadow:"shadow-primary-200/50"},{label:"Open",value:(a.openTickets||0).toLocaleString(),icon:Fp,color:"text-blue-600",bgGradient:"from-blue-50 to-blue-100/50",iconBg:"bg-gradient-to-br from-blue-500 to-blue-600",borderColor:"border-blue-200",shadow:"shadow-blue-200/50"},{label:"Approval Pending",value:(a.approvalPendingTickets||0).toLocaleString(),icon:Js,color:"text-orange-600",bgGradient:"from-orange-50 to-orange-100/50",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600",borderColor:"border-orange-200",shadow:"shadow-orange-200/50"},{label:"Approved",value:(a.approvedTickets||0).toLocaleString(),icon:Ra,color:"text-green-600",bgGradient:"from-green-50 to-green-100/50",iconBg:"bg-gradient-to-br from-green-500 to-green-600",borderColor:"border-green-200",shadow:"shadow-green-200/50"},{label:"Rejected",value:(a.rejectedTickets||0).toLocaleString(),icon:Dv,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"},{label:"In Progress",value:(a.inProgressTickets||0).toLocaleString(),icon:Js,color:"text-yellow-600",bgGradient:"from-yellow-50 to-yellow-100/50",iconBg:"bg-gradient-to-br from-yellow-500 to-yellow-600",borderColor:"border-yellow-200",shadow:"shadow-yellow-200/50"},{label:"Resolved",value:(a.resolvedTickets||0).toLocaleString(),icon:Ra,color:"text-emerald-600",bgGradient:"from-emerald-50 to-emerald-100/50",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600",borderColor:"border-emerald-200",shadow:"shadow-emerald-200/50"},{label:"Closed",value:(a.closedTickets||0).toLocaleString(),icon:Ra,color:"text-gray-600",bgGradient:"from-gray-50 to-gray-100/50",iconBg:"bg-gradient-to-br from-gray-500 to-gray-600",borderColor:"border-gray-200",shadow:"shadow-gray-200/50"},{label:"Overdue",value:(a.overdueTickets||0).toLocaleString(),icon:d2,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"}]:[{label:"Total Tickets",value:a.totalTickets.toLocaleString(),icon:Fp,color:"text-primary-600",bgGradient:"from-primary-50 to-primary-100/50",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",borderColor:"border-primary-200",shadow:"shadow-primary-200/50"},{label:"Pending Tickets",value:a.pendingTickets.toLocaleString(),icon:Js,color:"text-orange-600",bgGradient:"from-orange-50 to-orange-100/50",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600",borderColor:"border-orange-200",shadow:"shadow-orange-200/50"},{label:"Closed Tickets",value:a.closedTickets.toLocaleString(),icon:Ra,color:"text-green-600",bgGradient:"from-green-50 to-green-100/50",iconBg:"bg-gradient-to-br from-green-500 to-green-600",borderColor:"border-green-200",shadow:"shadow-green-200/50"},{label:"Overdue Tickets",value:a.overdueTickets.toLocaleString(),icon:d2,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"}],L={open:"#3b82f6","in-progress":"#f59e0b",resolved:"#10b981",closed:"#6b7280",urgent:"#ef4444",high:"#f97316",medium:"#f59e0b",low:"#10b981"};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[w&&d.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}),!w&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 animate-slide-down",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Dashboard"}),d.jsx("p",{className:"text-sm text-gray-600",children:"System overview and statistics"})]}),t&&E.length>0&&d.jsx("div",{className:"w-full sm:w-64",children:d.jsx(_n,{label:"Filter by Organization",value:_||"",onChange:T=>M(T.target.value||null),options:[{value:"",label:"All Organizations"},...E.map(T=>({value:T._id||T.id,label:T.name}))]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map((T,j)=>{const U=T.icon,V=r(T.label)!==null||T.label==="Total Tickets";return d.jsx(jt,{className:`p-6 border-l-4 ${T.borderColor} bg-gradient-to-br ${T.bgGradient} animate-scale-in transition-all duration-300 ${V?"cursor-pointer hover:shadow-xl hover:scale-105 hover:-translate-y-1":""}`,style:{animationDelay:`${j*.1}s`},onClick:()=>V&&i(T.label),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider mb-2",children:T.label}),d.jsx("p",{className:`text-3xl font-bold ${T.color} drop-shadow-sm`,children:T.value}),V&&d.jsx("p",{className:"text-xs text-gray-500 mt-2 opacity-70",children:"Click to view"})]}),d.jsx("div",{className:`${T.iconBg} p-4 rounded-xl shadow-lg ${T.shadow}`,children:d.jsx(U,{className:"text-white",size:28})})]})},T.label)})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(jt,{title:"Tickets by Status",children:d.jsx(xv,{width:"100%",height:300,children:d.jsxs(X6,{data:h.length>0?h:[{name:"No Data",value:0}],children:[d.jsx(D1,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),d.jsx(Lf,{dataKey:"name",stroke:"#6b7280",tick:{fill:"#6b7280"}}),d.jsx(Df,{stroke:"#6b7280",tick:{fill:"#6b7280"}}),d.jsx(es,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",color:"#111827"}}),d.jsx(Xu,{dataKey:"value",name:"Tickets",radius:[8,8,0,0],children:h.map((T,j)=>d.jsx(Qp,{fill:L[T.name]||"#3b82f6"},`cell-${j}`))})]})})}),d.jsx(jt,{title:"Tickets by Priority",children:d.jsx(xv,{width:"100%",height:300,children:y.length>0?d.jsxs(Y6,{children:[d.jsx(gl,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percentage:j})=>`${T} ${j}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:y.map((T,j)=>d.jsx(Qp,{fill:L[T.name]||"#3b82f6"},`cell-${j}`))}),d.jsx(es,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",color:"#111827"},formatter:(T,j,U)=>[`${T} (${U.payload.percentage}%)`,j]})]}):d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-gray-500",children:"No priority data available"})})})})]}),!t&&d.jsx(jt,{title:"My Tickets",children:d.jsx("div",{className:"space-y-3",children:w?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):u.length===0?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"No tickets found"}):u.map(T=>d.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${T.ticketId}`),children:d.jsx("div",{className:"flex items-start justify-between mb-2",children:d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",T.ticketId]}),d.jsx(pn,{variant:T.priority==="urgent"||T.priority==="high"?"danger":T.priority==="medium"?"warning":"info",children:T.priority}),d.jsx(pn,{variant:T.status==="resolved"?"success":T.status==="in-progress"?"info":"warning",children:T.status})]}),d.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:T.title}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",fn(new Date(T.createdAt),"MMM dd, yyyy HH:mm"),T.dueDate&&d.jsxs(d.Fragment,{children:["  Due: ",fn(new Date(T.dueDate),"MMM dd, yyyy HH:mm")]})]})]})})},T._id))})}),t&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(jt,{title:"My Open Tickets",children:d.jsx("div",{className:"space-y-3",children:w?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):u.length===0?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"No open tickets"}):u.map(T=>d.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${T.ticketId}`),children:d.jsx("div",{className:"flex items-start justify-between mb-2",children:d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",T.ticketId]}),d.jsx(pn,{variant:T.priority==="urgent"||T.priority==="high"?"danger":T.priority==="medium"?"warning":"info",children:T.priority})]}),d.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:T.title}),d.jsxs("p",{className:"text-xs text-gray-500",children:[T.organization?.name||"No Organization","  ",fn(new Date(T.createdAt),"dd/MM/yyyy")]})]})})},T._id))})}),d.jsx(jt,{title:"Recent Activity",children:d.jsx("div",{className:"space-y-3",children:w?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):o.length===0?d.jsx("div",{className:"text-center text-gray-500 py-8",children:"No recent activity"}):o.map(T=>d.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${T.ticketId}`),children:d.jsx("div",{className:"flex items-start justify-between mb-2",children:d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",T.ticketId]}),d.jsx(pn,{variant:T.priority==="urgent"||T.priority==="high"?"danger":T.priority==="medium"?"warning":"info",children:T.priority})]}),d.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:T.title}),d.jsxs("p",{className:"text-xs text-gray-500",children:[T.organization?.name||"No Organization","  ",fn(new Date(T.createdAt),"dd/MM/yyyy")]})]})})},T._id))})})]}),t&&d.jsx(jt,{title:"Recent Tickets",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ticket"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Due"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Approved By"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Approved Status"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):o.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("p",{className:"text-sm font-medium",children:"No recent tickets"}),d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Tickets will appear here as they are created."})]})})}):o.map((T,j)=>{const U=T.dueDate&&new Date(T.dueDate)<new Date&&(T.status==="open"||T.status==="in-progress");return d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${j*.05}s`},onClick:()=>e(`/tickets/${T.ticketId}`),children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",T.ticketId]}),d.jsx("div",{className:"text-sm text-gray-500",children:T.title})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:T.priority==="urgent"||T.priority==="high"?"danger":T.priority==="medium"?"warning":"info",children:T.priority})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:T.status==="resolved"?"success":T.status==="in-progress"?"info":T.status==="approved"?"success":T.status==="rejected"?"danger":T.status==="approval-pending"?"warning":T.status==="open"?"info":T.status==="closed"?"secondary":"warning",children:T.status==="approval-pending"?"Approval Pending":T.status==="in-progress"?"In Progress":T.status==="open"?"Open":T.status==="closed"?"Closed":T.status==="resolved"?"Resolved":T.status==="approved"?"Approved":T.status==="rejected"?"Rejected":T.status})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.assignee?.name||d.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[d.jsx("div",{className:"font-medium",children:fn(new Date(T.createdAt),"MMM dd, yyyy")}),d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(T.createdAt),"HH:mm")})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:T.dueDate?d.jsxs("div",{children:[d.jsxs("div",{className:U?"text-red-600 font-medium":"text-gray-700",children:[fn(new Date(T.dueDate),"MMM dd, yyyy"),U&&d.jsx("span",{className:"ml-1 text-red-600",children:""})]}),d.jsx("div",{className:`text-xs ${U?"text-red-500":"text-gray-500"}`,children:fn(new Date(T.dueDate),"HH:mm")})]}):d.jsx("span",{className:"text-gray-400",children:""})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:T.approvedBy?d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-green-600",children:T.approvedBy?.name||"Unknown"}),T.approvedAt&&d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(T.approvedAt),"MMM dd, yyyy HH:mm")})]}):d.jsx("span",{className:"text-gray-400",children:""})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:T.status==="approved"?d.jsx(pn,{variant:"success",children:"Approved"}):T.status==="rejected"?d.jsx(pn,{variant:"danger",children:"Rejected"}):T.status==="approval-pending"?d.jsx(pn,{variant:"warning",children:"Pending"}):d.jsx("span",{className:"text-gray-400",children:""})})]},T._id)})})]})})})]})]})})},rue=()=>{const[n]=CG(),[e,t]=z.useState([]),[r,i]=z.useState(!0),[a,s]=z.useState(""),[o,l]=z.useState(n.get("status")||"all"),[u,f]=z.useState("all"),h=Ua();z.useEffect(()=>{const _=n.get("status");_&&l(_)},[n]),z.useEffect(()=>{m()},[o,u]),z.useEffect(()=>{const _=setTimeout(()=>{m()},500);return()=>clearTimeout(_)},[a]);const m=async()=>{try{i(!0);const _={};o&&o!=="all"&&(_.status=o),u&&u!=="all"&&(_.priority=u),a&&a.trim()&&(_.search=a.trim()),console.log("Loading tickets with filters:",_);const M=await Vi.getAll(_);console.log("Tickets received:",M?.length||0,M);const E=Array.isArray(M)?M:[];t(E);const A=E.filter(R=>R.status==="approved");A.length>0?console.log("Approved tickets found:",A.length,A):(o==="all"||!o)&&console.log("No approved tickets found in results")}catch(_){console.error("Error loading tickets:",_),e.length===0&&ve.error(_.message||"Failed to load tickets"),t([])}finally{i(!1)}},y=e,b=_=>_==="urgent"||_==="high"?"danger":_==="medium"?"warning":"info",w=_=>_==="resolved"?"success":_==="in-progress"?"info":_==="approved"?"success":_==="rejected"?"danger":_==="approval-pending"?"warning":_==="open"?"info":_==="closed"?"secondary":"warning",x=_=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[_]||_;return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[r&&d.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading tickets..."})]})}),!r&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 animate-slide-down",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Tickets"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage and track all support tickets"})]}),d.jsxs(nt,{transparent:!0,onClick:()=>h("/tickets/new"),className:"animate-scale-in",children:[d.jsx(Uo,{size:20,className:"mr-2"}),"New Ticket"]})]}),d.jsx(jt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[d.jsxs("div",{className:"relative md:col-span-2 lg:col-span-1",children:[d.jsx(Tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),d.jsx(bt,{placeholder:"Search tickets...",value:a,onChange:_=>s(_.target.value),className:"pl-10 w-full"})]}),d.jsx("div",{className:"w-full",children:d.jsx(_n,{label:"Status",value:o,onChange:_=>l(_.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"approval-pending",label:"Approval Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})}),d.jsx("div",{className:"w-full",children:d.jsx(_n,{label:"Priority",value:u,onChange:_=>f(_.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]})}),d.jsx("div",{className:"w-full",children:d.jsxs(nt,{variant:"outline",transparent:!0,className:"w-full",children:[d.jsx(bz,{size:20,className:"mr-2"}),"More Filters"]})})]})}),d.jsx(jt,{className:"animate-slide-down",style:{animationDelay:"0.2s"},children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"ID"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[200px]",children:"Title"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Priority"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Assignee"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Due"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Approved By"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Approved Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:11,className:"px-6 py-12 text-center text-gray-500",children:d.jsxs("div",{className:"flex flex-col items-center justify-center",children:[d.jsx("p",{className:"text-sm font-medium",children:"No tickets found matching your criteria."}),d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try adjusting your filters or create a new ticket."})]})})}):y.map((_,M)=>{const E=_.dueDate&&new Date(_.dueDate)<new Date&&(_.status==="open"||_.status==="in-progress");return d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${M*.05}s`},onClick:A=>{const R=A.target;R.tagName==="BUTTON"||R.closest("button")||R.closest("a")||R.closest(".badge")||h(`/tickets/${_.ticketId}`)},children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-middle",children:d.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",_.ticketId]})}),d.jsx("td",{className:"px-6 py-4 align-middle",children:d.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",title:_.title,children:_.title})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-middle",children:d.jsx("span",{className:"inline-block text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:_.category})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center align-middle",children:d.jsx("div",{className:"flex justify-center",children:d.jsx(pn,{variant:b(_.priority),children:_.priority})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center align-middle",children:d.jsx("div",{className:"flex justify-center",children:d.jsx(pn,{variant:w(_.status),children:x(_.status)})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 align-middle",children:d.jsx("div",{className:"max-w-[140px] truncate",title:_.assignee?.name||"Unassigned",children:_.assignee?.name||d.jsx("span",{className:"text-gray-400",children:"Unassigned"})})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:[d.jsx("div",{className:"font-medium",children:fn(new Date(_.createdAt),"MMM dd, yyyy")}),d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(_.createdAt),"HH:mm")})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:_.dueDate?d.jsxs("div",{children:[d.jsxs("div",{className:E?"text-red-600 font-medium":"text-gray-700",children:[fn(new Date(_.dueDate),"MMM dd, yyyy"),E&&d.jsx("span",{className:"ml-1 text-red-600",children:""})]}),d.jsx("div",{className:`text-xs ${E?"text-red-500":"text-gray-500"}`,children:fn(new Date(_.dueDate),"HH:mm")})]}):d.jsx("span",{className:"text-gray-400",children:""})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:_.approvedBy?d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-green-600 max-w-[150px] truncate",title:_.approvedBy?.name||"Unknown",children:_.approvedBy?.name||"Unknown"}),_.approvedAt&&d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(_.approvedAt),"MMM dd, yyyy HH:mm")})]}):d.jsx("span",{className:"text-gray-400",children:""})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:_.status==="approved"?d.jsx(pn,{variant:"success",children:"Approved"}):_.status==="rejected"?d.jsx(pn,{variant:"danger",children:"Rejected"}):_.status==="approval-pending"?d.jsx(pn,{variant:"warning",children:"Pending"}):d.jsx("span",{className:"text-gray-400",children:""})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-middle",children:d.jsx("button",{type:"button",onClick:A=>{A.preventDefault(),A.stopPropagation(),h(`/tickets/${_.ticketId}`)},className:"text-primary-600 hover:text-primary-700 transition-colors font-semibold px-2 py-1 rounded hover:bg-primary-50 relative z-10",children:"View"})})]},_._id)})})]})})})]})]})})},iue=()=>{const{user:n}=Fr(),e=Ua(),[t,r]=z.useState([]),[i,a]=z.useState(!1),[s,o]=z.useState({search:"",status:"all",priority:"all",category:"all",organization:"all",dateFrom:"",dateTo:"",assignee:"all"}),[l,u]=z.useState([]),[f,h]=z.useState(!1);z.useEffect(()=>{n?.role==="admin"&&m(),y()},[]),z.useEffect(()=>{const A=setTimeout(()=>{y()},500);return()=>clearTimeout(A)},[s]);const m=async()=>{try{const A=await ga.getAll();u(A)}catch(A){console.error("Failed to load organizations:",A)}},y=async()=>{try{a(!0);const A={status:s.status!=="all"?s.status:void 0,priority:s.priority!=="all"?s.priority:void 0,search:s.search||void 0,organization:s.organization!=="all"?s.organization:void 0};let O=await Vi.getAll(A)||[];if(s.category!=="all"&&(O=O.filter(N=>N.category===s.category)),s.dateFrom){const N=new Date(s.dateFrom);O=O.filter(L=>new Date(L.createdAt)>=N)}if(s.dateTo){const N=new Date(s.dateTo);N.setHours(23,59,59),O=O.filter(L=>new Date(L.createdAt)<=N)}s.assignee!=="all"&&(s.assignee==="unassigned"?O=O.filter(N=>!N.assignee):O=O.filter(N=>N.assignee?._id===s.assignee)),r(O)}catch(A){console.error("Error loading tickets:",A),ve.error("Failed to load tickets"),r([])}finally{a(!1)}},b=(A,R)=>{o(O=>({...O,[A]:R}))},w=()=>{o({search:"",status:"all",priority:"all",category:"all",organization:"all",dateFrom:"",dateTo:"",assignee:"all"})},x=A=>A==="urgent"||A==="high"?"danger":A==="medium"?"warning":"info",_=A=>A==="resolved"?"success":A==="in-progress"?"info":A==="approved"?"success":A==="rejected"?"danger":A==="approval-pending"?"warning":A==="open"?"info":A==="closed"?"secondary":"warning",M=A=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[A]||A,E=Object.values(s).some(A=>A!=="all"&&A!=="");return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Ticket Search"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Search and filter tickets with advanced options"})]})}),d.jsx(jt,{className:"animate-slide-down",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Tf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),d.jsx(bt,{placeholder:"Search by ticket ID, title, or description...",value:s.search,onChange:A=>b("search",A.target.value),className:"pl-12 pr-12"}),s.search&&d.jsx("button",{onClick:()=>b("search",""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d.jsx(Cf,{size:18})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsx(_n,{label:"Status",value:s.status,onChange:A=>b("status",A.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"approval-pending",label:"Approval Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),d.jsx(_n,{label:"Priority",value:s.priority,onChange:A=>b("priority",A.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]}),n?.role==="admin"&&d.jsx(_n,{label:"Organization",value:s.organization,onChange:A=>b("organization",A.target.value),options:[{value:"all",label:"All Organizations"},...l.map(A=>({value:A._id,label:A.name}))]})]}),d.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[d.jsxs(nt,{variant:"outline",transparent:!0,onClick:()=>h(!f),className:"flex items-center gap-2",children:[d.jsx(bz,{size:18}),f?"Hide":"Show"," Advanced Filters"]}),E&&d.jsxs(nt,{variant:"outline",transparent:!0,onClick:w,className:"text-red-600 hover:text-red-700",children:[d.jsx(Cf,{size:18,className:"mr-2"}),"Clear All"]})]}),f&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[d.jsx(Fb,{size:16,className:"inline mr-1"}),"Date From"]}),d.jsx(bt,{type:"date",value:s.dateFrom,onChange:A=>b("dateFrom",A.target.value)})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[d.jsx(Fb,{size:16,className:"inline mr-1"}),"Date To"]}),d.jsx(bt,{type:"date",value:s.dateTo,onChange:A=>b("dateTo",A.target.value)})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[d.jsx(Hb,{size:16,className:"inline mr-1"}),"Category"]}),d.jsx(_n,{value:s.category,onChange:A=>b("category",A.target.value),options:[{value:"all",label:"All Categories"},{value:"IT Support",label:"IT Support"},{value:"Hardware",label:"Hardware"},{value:"Software",label:"Software"},{value:"Network",label:"Network"},{value:"General",label:"General"}]})]})]})]})}),d.jsxs(jt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Search Results (",t.length,")"]})}),i?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Searching tickets..."})]}):t.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Tf,{className:"mx-auto text-gray-400 mb-4",size:48}),d.jsx("p",{className:"text-gray-600 font-medium",children:"No tickets found"}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your search criteria"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Title"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(A=>d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300",onClick:()=>e(`/tickets/${A.ticketId}`),children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",A.ticketId]})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:A.category})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:x(A.priority),children:A.priority})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:_(A.status),children:M(A.status)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.assignee?.name||d.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[d.jsx("div",{className:"font-medium",children:fn(new Date(A.createdAt),"MMM dd, yyyy")}),d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(A.createdAt),"HH:mm")})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsx("button",{onClick:R=>{R.stopPropagation(),e(`/tickets/${A.ticketId}`)},className:"text-primary-600 hover:text-primary-700 transition-colors font-semibold",children:"View"})})]},A._id))})]})})]})]})})},BN=z.forwardRef(({label:n,error:e,className:t="",required:r=!1,rows:i=4,...a},s)=>d.jsxs("div",{className:"mb-4",children:[n&&d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[n,r&&d.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d.jsx("textarea",{ref:s,rows:i,className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${t} resize-none`,...a}),e&&d.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:e})]})),Ns=({isOpen:n,onClose:e,title:t,children:r,size:i="md",footer:a})=>{if(!n)return null;const s={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[d.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900/90 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:`inline-block align-bottom bg-white rounded-xl shadow-2xl text-left overflow-hidden transform transition-all sm:my-8 sm:align-middle w-full ${s[i]}`,onClick:o=>o.stopPropagation(),children:[d.jsxs("div",{className:"px-6 pt-6 pb-4 sm:p-6 relative z-10",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 uppercase tracking-wider",children:t}),d.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 focus:outline-none transition-colors duration-300 hover:scale-110",children:d.jsx(Cf,{size:24})})]}),d.jsx("div",{className:"text-gray-700",children:r})]}),a&&d.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 sm:px-6 sm:flex sm:flex-row-reverse relative z-10",children:a})]})]})})},aue=async(n,e)=>(console.log("Sending ticket created email...",{to:e,subject:`Ticket Created: #${n.id} - ${n.title}`,body:lue(n)}),{success:!0}),sue=async(n,e,t)=>(console.log("Sending ticket updated email...",{to:e,subject:`Ticket Updated: #${n.id} - ${n.title}`,body:cue(n,t)}),{success:!0}),oue=async(n,e,t)=>(console.log("Sending ticket comment email...",{to:e,subject:`New Comment on Ticket #${n.id}`,body:uue(n,t)}),{success:!0}),lue=n=>`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .ticket-id { font-size: 24px; font-weight: bold; color: #0ea5e9; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Ticket Created Successfully</h1>
        </div>
        <div class="content">
          <p>Your support ticket has been created successfully. Here are the details:</p>
          
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${n.id}</div>
            <h2>${n.title}</h2>
            <p><strong>Category:</strong> ${n.category}</p>
            <p><strong>Priority:</strong> <span style="text-transform: capitalize;">${n.priority}</span></p>
            <p><strong>Status:</strong> <span style="text-transform: capitalize;">${n.status}</span></p>
            <p><strong>Created:</strong> ${new Date(n.created).toLocaleString()}</p>
            ${n.assignee?`<p><strong>Assigned to:</strong> ${n.assignee}</p>`:""}
          </div>

          <div class="ticket-info">
            <h3>Description:</h3>
            <p>${n.description}</p>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${n.id}" class="button">View Ticket</a>
          </p>

          <p>You will receive email notifications when there are updates to this ticket.</p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `,cue=(n,e)=>{const t=Object.entries(e).map(([r,i])=>`<li><strong>${r}:</strong> ${i}</li>`).join("");return`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .ticket-id { font-size: 24px; font-weight: bold; color: #0ea5e9; }
        .changes { background: #fff3cd; padding: 15px; margin: 15px 0; border-left: 4px solid #ffc107; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Ticket Updated</h1>
        </div>
        <div class="content">
          <p>Your ticket has been updated. Here are the changes:</p>
          
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${n.id}</div>
            <h2>${n.title}</h2>
          </div>

          <div class="changes">
            <h3>Changes Made:</h3>
            <ul>
              ${t}
            </ul>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${n.id}" class="button">View Ticket</a>
          </p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `},uue=(n,e)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .comment { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #10b981; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>New Comment on Ticket</h1>
        </div>
        <div class="content">
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${n.id}</div>
            <h2>${n.title}</h2>
          </div>

          <div class="comment">
            <p><strong>${e.author}</strong> added a comment:</p>
            <p>${e.content}</p>
            <p style="color: #666; font-size: 12px;">${new Date(e.created).toLocaleString()}</p>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${n.id}" class="button">View Ticket</a>
          </p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `,due=()=>{const{user:n}=Fr(),[e,t]=z.useState({title:"",description:"",category:"",priority:"",assignee:"",ticketId:""}),[r,i]=z.useState([]),[a,s]=z.useState([]),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState([]),y=Ua();z.useEffect(()=>{b(),w()},[]);const b=async()=>{try{const A=await Tp.getAll();i(A)}catch(A){console.error("Failed to load categories:",A),i([{_id:"it-support",name:"IT Support"},{_id:"hardware",name:"Hardware"},{_id:"software",name:"Software"},{_id:"network",name:"Network"},{_id:"email",name:"Email"},{_id:"other",name:"Other"}])}},w=async()=>{try{const R=(await nl.getAll()).filter(O=>(O.role==="agent"||O.role==="admin")&&O.status==="active");s(R)}catch(A){console.error("Failed to load assignees:",A),s([])}},x=A=>{const O=Array.from(A.target.files).filter(N=>N.size>10*1024*1024?(ve.error(`${N.name} is too large. Maximum size is 10MB.`),!1):!0).slice(0,10-h.length);m([...h,...O])},_=A=>{m(h.filter((R,O)=>O!==A))},M=async A=>{if(A.preventDefault(),A.stopPropagation(),!e.title||!e.description||!e.category||!e.priority){ve.error("Please fill in all required fields");return}f(!0);try{const R=new FormData;R.append("title",e.title.trim()),R.append("description",e.description.trim()),R.append("category",e.category),R.append("priority",e.priority),e.assignee&&R.append("assignee",e.assignee),e.ticketId&&e.ticketId.trim()!==""&&R.append("ticketId",parseInt(e.ticketId)),h.forEach(N=>{R.append("attachments",N)});const O=await Vi.createWithFiles(R);if(n?.email)try{await aue(O,n.email),ve.success(`Ticket #${O.ticketId} created successfully! Email notification sent.`)}catch(N){console.error("Email error:",N),ve.success(`Ticket #${O.ticketId} created successfully!`)}else ve.success(`Ticket #${O.ticketId} created successfully!`);setTimeout(()=>{y(`/tickets/${O.ticketId}`)},500)}catch(R){console.error("Ticket creation error:",R);const O=R.message||"Failed to create ticket. Please try again.";ve.error(O),f(!1)}},E=A=>{t({...e,[A.target.name]:A.target.value})};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Create New Ticket"}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Fill in the details below to create a new support ticket"})]}),d.jsx(jt,{children:d.jsxs("form",{onSubmit:M,className:"space-y-6",noValidate:!0,children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("button",{type:"button",onClick:()=>l(!o),className:"text-sm text-primary-600 hover:text-primary-700",children:[o?"Hide":"Set"," Manual Ticket ID (Optional)"]}),o&&d.jsxs("div",{className:"mt-2",children:[d.jsx(bt,{name:"ticketId",label:"Ticket ID (Optional - leave empty for auto-increment)",placeholder:"e.g., 1000",type:"number",value:e.ticketId,onChange:E,min:"1"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If provided, this will be used as the ticket ID. Otherwise, it will auto-increment from the highest existing ticket ID."})]})]}),d.jsx(bt,{name:"title",label:"Title",placeholder:"Brief description of the issue",value:e.title,onChange:E,required:!0}),d.jsx(BN,{name:"description",label:"Description",placeholder:"Provide detailed information about the issue...",value:e.description,onChange:E,rows:8,required:!0}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(_n,{name:"category",label:"Category *",value:e.category,onChange:E,options:[{value:"",label:"Select an option"},...r.map(A=>({value:A.name,label:A.name}))],required:!0}),d.jsx(_n,{name:"priority",label:"Priority",value:e.priority,onChange:E,options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],required:!0})]}),d.jsx(_n,{name:"assignee",label:"Assignee (Optional)",value:e.assignee,onChange:E,options:[{value:"",label:"Unassigned"},...a.map(A=>({value:A._id||A.id,label:A.name}))]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-cyber font-semibold text-cyber-neon-cyan mb-2 uppercase tracking-wider",children:"Attachments (Optional)"}),d.jsxs("div",{className:"border-2 border-cyber-neon-cyan/30 rounded-lg p-4 bg-cyber-darker/30",children:[d.jsxs("label",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-cyber-neon-cyan/50 rounded-lg cursor-pointer hover:border-cyber-neon-cyan transition-all duration-300",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(fc,{size:24,className:"text-cyber-neon-cyan mb-2"}),d.jsx("span",{className:"text-sm text-cyber-neon-cyan/80 font-mono",children:"Click to upload or drag and drop"}),d.jsx("span",{className:"text-xs text-cyber-neon-cyan/60 font-mono mt-1",children:"PDF, Word, Excel, Images (Max 10MB per file, up to 10 files)"})]}),d.jsx("input",{type:"file",multiple:!0,onChange:x,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt,.csv"})]}),h.length>0&&d.jsx("div",{className:"mt-4 space-y-2",children:h.map((A,R)=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-cyber-darker/50 border border-cyber-neon-cyan/20 rounded",children:[d.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[d.jsx(P$,{size:16,className:"text-cyber-neon-cyan flex-shrink-0"}),d.jsx("span",{className:"text-sm text-cyber-neon-cyan/90 font-mono truncate",children:A.name}),d.jsxs("span",{className:"text-xs text-cyber-neon-cyan/60 font-mono",children:["(",(A.size/1024).toFixed(1)," KB)"]})]}),d.jsx("button",{type:"button",onClick:()=>_(R),className:"ml-2 text-cyber-neon-cyan/70 hover:text-cyber-neon-cyan transition-colors",children:d.jsx(Cf,{size:18})})]},R))})]})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",onClick:()=>y("/tickets"),className:"flex-1",children:"Cancel"}),d.jsx(nt,{type:"submit",disabled:u,className:"flex-1",children:u?"Creating...":"Create Ticket"})]})]})})]})})},fue=()=>{const{id:n}=ZW(),e=Ua(),{user:t}=Fr(),[r,i]=z.useState(null),[a,s]=z.useState(!0),[o,l]=z.useState(""),[u,f]=z.useState(!1),[h,m]=z.useState(!1),[y,b]=z.useState(""),[w,x]=z.useState([]),[_,M]=z.useState(!1),[E,A]=z.useState([]),[R,O]=z.useState(-1),[N,L]=z.useState(0),T=z.useRef(null),j=z.useRef(null),U=le=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[le]||le;z.useEffect(()=>{V(),B()},[n]);const B=async()=>{try{const le=await nl.getMentions();x(le)}catch(le){console.error("Failed to load users for mentions:",le)}},V=async()=>{try{s(!0);const le=await Vi.getById(n);i(le)}catch{ve.error("Failed to load ticket"),e("/tickets")}finally{s(!1)}},W=le=>{const be=le.target.value;l(be);const Se=le.target.selectionStart,Ie=be.substring(0,Se),qe=Ie.lastIndexOf("@");if(qe!==-1){const Pe=Ie.substring(qe+1);if(!Pe.includes(" ")&&!Pe.includes(`
`)){const Fe=Pe.toLowerCase(),$e=w.filter(ne=>ne.name.toLowerCase().includes(Fe)||ne.email.toLowerCase().includes(Fe));A($e),O(qe),M(!0),L(0);return}}M(!1),O(-1)},Y=le=>{if(R===-1)return;const be=o.substring(0,R),Se=o.substring(R),Ie=Se.substring(1).split(/[\s\n]/)[0],qe=Se.substring(Ie.length+1),Pe=`${be}@${le.name}${qe}`;l(Pe),M(!1),O(-1),setTimeout(()=>{if(T.current){const Fe=be.length+le.name.length+1;T.current.focus(),T.current.setSelectionRange(Fe,Fe)}},0)},Q=le=>{if(_&&E.length>0)if(le.key==="ArrowDown"){if(le.preventDefault(),L(be=>be<E.length-1?be+1:be),j.current){const be=j.current.children[N+1];be&&be.scrollIntoView({block:"nearest"})}}else if(le.key==="ArrowUp"){if(le.preventDefault(),L(be=>be>0?be-1:0),j.current){const be=j.current.children[N-1];be&&be.scrollIntoView({block:"nearest"})}}else le.key==="Enter"||le.key==="Tab"?(le.preventDefault(),Y(E[N])):le.key==="Escape"&&M(!1)},se=(le,be=[])=>{if(!be||be.length===0)return d.jsx("span",{children:le});const Se=[];let Ie=0;const qe=new Map(be.map($e=>[$e.name.toLowerCase(),$e])),Pe=/@(\w+)/g;let Fe;for(;(Fe=Pe.exec(le))!==null;){Fe.index>Ie&&Se.push(d.jsx("span",{children:le.substring(Ie,Fe.index)},`text-${Ie}`));const $e=Fe[1],ne=qe.get($e.toLowerCase());ne?Se.push(d.jsxs("span",{className:"bg-cyber-neon-cyan/20 text-cyber-neon-cyan px-1 rounded font-semibold",children:["@",ne.name]},`mention-${Fe.index}`)):Se.push(d.jsxs("span",{children:["@",$e]},`mention-${Fe.index}`)),Ie=Fe.index+Fe[0].length}return Ie<le.length&&Se.push(d.jsx("span",{children:le.substring(Ie)},`text-${Ie}`)),d.jsx(d.Fragment,{children:Se})},G=async le=>{if(le.preventDefault(),!!o.trim()){f(!0);try{const be=await Vi.addComment(n,{content:o,attachments:[]});i(be),l(""),M(!1);try{const Se=r?.creator?.email;if(Se){const Ie=be.comments[be.comments.length-1];await oue(r,Se,Ie),ve.success("Comment added successfully! Email notification sent.")}else ve.success("Comment added successfully!")}catch{ve.success("Comment added successfully!")}}catch(be){ve.error(be.message||"Failed to add comment. Please try again.")}finally{f(!1)}}},J=async le=>{const be=le.target.value,Se=r.status;try{const Ie=await Vi.update(n,{status:be});i(Ie);try{const qe={Status:`${Se}  ${be}`},Pe=r?.creator?.email;Pe?(await sue(Ie,Pe,qe),ve.success(`Ticket status updated to ${be}. Email notification sent.`)):ve.success(`Ticket status updated to ${be}`)}catch{ve.success(`Ticket status updated to ${be}`)}}catch(Ie){ve.error(Ie.message||"Failed to update ticket status"),le.target.value=Se}};if(a||!r)return d.jsx(Ln,{children:d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})});const Z=le=>le==="urgent"||le==="high"?"danger":le==="medium"?"warning":"info",X=le=>le==="resolved"?"success":le==="in-progress"?"info":le==="approved"?"success":le==="rejected"?"danger":"warning",te=async()=>{try{const le=await Vi.approveTicket(n);i(le),ve.success("Ticket approved successfully!")}catch(le){ve.error(le.message||"Failed to approve ticket")}},ce=async()=>{const le=window.prompt("Please provide a reason for rejection:");if(le===null||!le.trim()){le!==null&&ve.error("Rejection reason is required");return}try{const be=await Vi.rejectTicket(n,le);i(be),ve.success("Ticket rejected")}catch(be){ve.error(be.message||"Failed to reject ticket")}};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(nt,{variant:"outline",onClick:()=>e("/tickets"),children:[d.jsx(iw,{size:16,className:"mr-2"}),"Back"]}),d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Ticket #",r.ticketId]}),d.jsx("p",{className:"text-gray-600 mt-1",children:r.title})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[d.jsx(jt,{children:d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),d.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description})]})})}),d.jsx(jt,{title:"Comments",children:d.jsxs("div",{className:"space-y-6",children:[r.comments&&r.comments.map(le=>d.jsx("div",{className:"border-b border-gray-200 pb-6 last:border-0 last:pb-0",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white font-medium flex-shrink-0",children:le.author?.name?.charAt(0)||"U"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("span",{className:"font-medium text-gray-900",children:le.author?.name||"Unknown"}),d.jsx("span",{className:"text-sm text-gray-500",children:fn(new Date(le.createdAt),"MMM dd, yyyy HH:mm")})]}),d.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:se(le.content,le.mentions)}),le.mentions&&le.mentions.length>0&&d.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:le.mentions.map((be,Se)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-cyber-neon-cyan/10 text-cyber-neon-cyan border border-cyber-neon-cyan/30",children:["@",be.name||be.email]},Se))}),le.attachments&&le.attachments.length>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:le.attachments.map((be,Se)=>d.jsxs("button",{className:"flex items-center space-x-2 text-sm text-primary-600 hover:text-primary-700",children:[d.jsx(Mz,{size:16}),d.jsx("span",{children:be.filename})]},Se))})]})]})},le._id)),d.jsxs("form",{onSubmit:G,className:"pt-4 border-t border-gray-200",children:[d.jsxs("div",{className:"relative",children:[d.jsx(BN,{ref:T,label:"Add a comment",placeholder:"Type your comment here... Use @ to mention users",value:o,onChange:W,onKeyDown:Q,rows:4,required:!0}),_&&E.length>0&&d.jsx("div",{ref:j,className:"absolute z-10 mt-1 w-full bg-cyber-darker border-2 border-cyber-neon-cyan/50 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:E.map((le,be)=>d.jsxs("button",{type:"button",onClick:()=>Y(le),className:`w-full text-left px-4 py-2 hover:bg-cyber-neon-cyan/20 transition-colors ${be===N?"bg-cyber-neon-cyan/30":""}`,children:[d.jsx("div",{className:"font-medium text-cyber-neon-cyan",children:le.name}),d.jsx("div",{className:"text-xs text-cyber-neon-cyan/70",children:le.email})]},le._id||le.id))})]}),d.jsxs("div",{className:"flex items-center justify-between mt-4",children:[d.jsx("div",{className:"flex items-center space-x-2 text-sm text-cyber-neon-cyan/70",children:d.jsx("span",{children:"Tip: Type @ to mention users"})}),d.jsx(nt,{type:"submit",disabled:u||!o.trim(),children:u?"Posting...":"Post Comment"})]})]})]})})]}),d.jsx("div",{className:"space-y-6",children:d.jsx(jt,{title:"Details",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Status"}),t?.role==="admin"||t?.role==="agent"||t?.role==="technician"?d.jsxs("select",{value:r.status,onChange:J,className:"input w-full",children:[d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"approval-pending",children:"Approval Pending"}),d.jsx("option",{value:"approved",children:"Approved"}),d.jsx("option",{value:"rejected",children:"Rejected"}),d.jsx("option",{value:"in-progress",children:"In Progress"}),d.jsx("option",{value:"resolved",children:"Resolved"}),d.jsx("option",{value:"closed",children:"Closed"})]}):d.jsx(pn,{variant:X(r.status),children:U(r.status)}),t?.role==="department-head"&&r.status==="approval-pending"&&d.jsxs("div",{className:"mt-3 flex gap-2",children:[d.jsx(nt,{transparent:!0,onClick:te,className:"flex-1 bg-green-500 hover:bg-green-600 text-white",children:"Approve"}),d.jsx(nt,{transparent:!0,onClick:ce,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",children:"Reject"})]}),r.approvedBy&&d.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[r.status==="approved"?"Approved":r.status==="rejected"?"Rejected":""," by ",r.approvedBy?.name||"Unknown",r.approvedAt&&` on ${fn(new Date(r.approvedAt),"MMM dd, yyyy HH:mm")}`]}),r.rejectionReason&&d.jsxs("div",{className:"mt-2 text-xs text-red-600",children:["Reason: ",r.rejectionReason]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Priority"}),d.jsx(pn,{variant:Z(r.priority),children:r.priority})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Category"}),d.jsx("p",{className:"text-gray-900",children:r.category})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Assignee"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(qp,{size:16,className:"text-gray-400"}),d.jsx("p",{className:"text-gray-900",children:r.assignee?.name||"Unassigned"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Due Date"}),t?.role==="admin"||t?.role==="agent"?d.jsxs(d.Fragment,{children:[d.jsxs("button",{type:"button",onClick:()=>{b(r.dueDate?new Date(r.dueDate).toISOString().slice(0,10):""),m(!0)},className:"w-full flex items-center justify-between px-4 py-2 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan hover:border-cyber-neon-cyan transition-all duration-300",children:[d.jsxs("span",{className:"flex items-center space-x-2",children:[d.jsx(Fb,{size:16}),d.jsx("span",{children:r.dueDate?fn(new Date(r.dueDate),"MMM dd, yyyy"):"Select Due Date"})]}),d.jsx(Fb,{size:16,className:"opacity-50"})]}),d.jsx(Ns,{isOpen:h,onClose:()=>m(!1),title:"Select Due Date",size:"sm",footer:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(nt,{variant:"outline",onClick:()=>{b(""),m(!1)},children:"Clear"}),d.jsx(nt,{onClick:async()=>{const le=y?new Date(y+"T00:00:00").toISOString():null;try{const be=await Vi.update(r.ticketId,{dueDate:le});i(be),m(!1),ve.success("Due date updated")}catch(be){console.error("Due date update error:",be),ve.error(be.message||"Failed to update due date")}},children:"Set Date"})]}),children:d.jsx("div",{className:"py-4",children:d.jsx("input",{type:"date",value:y,onChange:le=>b(le.target.value),className:"input w-full text-center text-lg",min:new Date().toISOString().slice(0,10)})})})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Js,{size:16,className:"text-gray-400"}),d.jsx("p",{className:"text-gray-900",children:r.dueDate?fn(new Date(r.dueDate),"MMM dd, yyyy"):"Not set"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Created"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Js,{size:16,className:"text-gray-400"}),d.jsx("p",{className:"text-gray-900",children:fn(new Date(r.createdAt),"MMM dd, yyyy HH:mm")})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Last Updated"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Js,{size:16,className:"text-gray-400"}),d.jsx("p",{className:"text-gray-900",children:fn(new Date(r.updatedAt),"MMM dd, yyyy HH:mm")})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Created By"}),d.jsx("p",{className:"text-gray-900",children:r.creator?.name||"Unknown"})]})]})})})]})]})})},hue=()=>{const{user:n,updateUser:e}=Fr(),t=Ua(),[r,i]=z.useState({name:n?.name||"",email:n?.email||"",phone:"",department:""}),[a,s]=z.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=z.useState(!1),u=async m=>{m.preventDefault(),l(!0),setTimeout(()=>{e({...n,...r}),ve.success("Profile updated successfully!"),l(!1)},1e3)},f=async m=>{if(m.preventDefault(),a.newPassword!==a.confirmPassword){ve.error("New passwords do not match");return}if(a.newPassword.length<8){ve.error("Password must be at least 8 characters");return}l(!0),setTimeout(()=>{s({currentPassword:"",newPassword:"",confirmPassword:""}),ve.success("Password changed successfully!"),l(!1)},1e3)},h=m=>{i({...r,[m.target.name]:m.target.value})};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),d.jsx(jt,{title:"Profile Information",children:d.jsxs("form",{onSubmit:u,className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[d.jsx("div",{className:"w-24 h-24 bg-primary-600 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:n?.name?.charAt(0).toUpperCase()||"U"}),d.jsxs("div",{children:[d.jsx(nt,{variant:"outline",type:"button",children:"Change Photo"}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG, PNG or GIF. Max size 2MB"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{name:"name",label:"Full Name",value:r.name,onChange:h,required:!0,icon:d.jsx(qp,{size:20})}),d.jsx(bt,{name:"email",type:"email",label:"Email",value:r.email,onChange:h,required:!0,icon:d.jsx(Ef,{size:20})}),d.jsx(bt,{name:"phone",type:"tel",label:"Phone Number",value:r.phone,onChange:h,icon:d.jsx(L$,{size:20})}),d.jsx(bt,{name:"department",label:"Department",value:r.department,onChange:h})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsx(nt,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})})]})}),d.jsx(jt,{title:"Security",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Af,{className:"text-primary-600",size:24}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Multi-Factor Authentication"}),d.jsx("p",{className:"text-sm text-gray-600",children:n?.mfaEnabled?"MFA is enabled":"Add an extra layer of security to your account"})]})]}),n?.mfaEnabled?d.jsx(pn,{variant:"success",children:"Enabled"}):d.jsx(nt,{variant:"outline",onClick:()=>t("/mfa-setup"),children:"Enable MFA"})]}),d.jsxs("form",{onSubmit:f,className:"space-y-4 pt-4 border-t border-gray-200",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Change Password"}),d.jsx(bt,{type:"password",label:"Current Password",value:a.currentPassword,onChange:m=>s({...a,currentPassword:m.target.value}),required:!0,icon:d.jsx(yv,{size:20})}),d.jsx(bt,{type:"password",label:"New Password",value:a.newPassword,onChange:m=>s({...a,newPassword:m.target.value}),required:!0,icon:d.jsx(yv,{size:20})}),d.jsx(bt,{type:"password",label:"Confirm New Password",value:a.confirmPassword,onChange:m=>s({...a,confirmPassword:m.target.value}),required:!0,icon:d.jsx(yv,{size:20})}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsx(nt,{type:"submit",disabled:o,children:o?"Changing...":"Change Password"})})]})]})})]})})},pue=()=>{const{user:n}=Fr(),{enabled:e,setEnabled:t}=xz(),[r,i]=z.useState({email:!0,push:!1,ticketUpdates:!0,comments:!0}),[a,s]=z.useState({language:"en",timezone:"UTC",theme:"light"}),[o,l]=z.useState(!1),u=m=>{i({...r,[m]:!r[m]})},f=(m,y)=>{s({...a,[m]:y})},h=async()=>{l(!0),setTimeout(()=>{ve.success("Settings saved successfully!"),l(!1)},1e3)};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),d.jsx(jt,{title:"Notification Preferences",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(fv,{className:"text-primary-600",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Email Notifications"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.email,onChange:()=>u("email"),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(fv,{className:"text-primary-600",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Push Notifications"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.push,onChange:()=>u("push"),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(fv,{className:"text-primary-600",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Ticket Updates"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when tickets are updated"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.ticketUpdates,onChange:()=>u("ticketUpdates"),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(fv,{className:"text-primary-600",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"New Comments"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when new comments are added"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.comments,onChange:()=>u("comments"),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})}),d.jsx(jt,{title:"General Preferences",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(_n,{label:"Language",value:a.language,onChange:m=>f("language",m.target.value),options:[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"}]}),d.jsx(_n,{label:"Timezone",value:a.timezone,onChange:m=>f("timezone",m.target.value),options:[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"}]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsxs("button",{onClick:()=>f("theme","light"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-colors ${a.theme==="light"?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300"}`,children:[d.jsx(F$,{size:20}),d.jsx("span",{children:"Light"})]}),d.jsxs("button",{onClick:()=>f("theme","dark"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-colors ${a.theme==="dark"?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300"}`,children:[d.jsx(I$,{size:20}),d.jsx("span",{children:"Dark"})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[e?d.jsx(z$,{className:"text-primary-600",size:20}):d.jsx(B$,{className:"text-gray-400",size:20}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Button Sounds"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Enable or disable sound effects for button clicks"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e,onChange:m=>{t(m.target.checked),ve.success(`Button sounds ${m.target.checked?"enabled":"disabled"}`)},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})}),d.jsx(jt,{title:"Account Information",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("p",{className:"text-gray-900",children:n?.email||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsx(pn,{variant:n?.role==="admin"?"danger":(n?.role==="agent","info"),children:n?.role||"user"})]})]})}),d.jsx("div",{className:"flex justify-end",children:d.jsx(nt,{onClick:h,disabled:o,children:o?"Saving...":"Save Settings"})})]})})},mue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState([]),[i,a]=z.useState([]),[s,o]=z.useState(!0),[l,u]=z.useState(!1),[f,h]=z.useState(null),[m,y]=z.useState(""),[b,w]=z.useState({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""});z.useEffect(()=>{x(),_(),M()},[]),z.useEffect(()=>{b.organization?M(b.organization):a([])},[b.organization]);const x=async()=>{try{o(!0);const j=await nl.getAll();e(j)}catch(j){ve.error("Failed to load users"),console.error(j)}finally{o(!1)}},_=async()=>{try{const j=await ga.getAll();r(j)}catch(j){console.error("Failed to load organizations",j)}},M=async(j=null)=>{try{const U=await Au.getAll(),B=j?U.filter(V=>(V.organization?._id||V.organization)===j):U;a(B)}catch(U){console.error("Failed to load departments",U)}},E=n.filter(j=>j.name.toLowerCase().includes(m.toLowerCase())||j.email.toLowerCase().includes(m.toLowerCase())),A=(j=null)=>{j?(h(j),w({name:j.name,email:j.email,password:"",role:j.role,status:j.status,organization:j.organization?._id||j.organization||"",department:j.department?._id||j.department||""}),(j.organization?._id||j.organization)&&M(j.organization?._id||j.organization)):(h(null),w({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""})),u(!0)},R=()=>{u(!1),h(null),w({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""}),a([])},O=async j=>{j.preventDefault();try{const U={...b};if(f&&!U.password&&delete U.password,f)await nl.update(f._id||f.id,U),ve.success("User updated successfully!");else{if(!U.password){ve.error("Password is required for new users");return}if(!U.organization){ve.error("Organization is required for new users");return}await nl.create(U),ve.success("User created successfully!")}R(),x()}catch(U){ve.error(U.message||"Failed to save user")}},N=async j=>{if(window.confirm("Are you sure you want to delete this user?"))try{await nl.delete(j),ve.success("User deleted successfully!"),x()}catch(U){ve.error(U.message||"Failed to delete user")}},L=()=>{const j=["Name","Email","Password","Role","Status","Organization","Department"],U=n.map(Q=>[Q.name,Q.email,"",Q.role,Q.status,Q.organization?.name||"N/A",Q.department?.name||"N/A"]),B=[j.join(","),...U.map(Q=>Q.map(se=>`"${se}"`).join(","))].join(`
`),V=new Blob([B],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),Y=URL.createObjectURL(V);W.setAttribute("href",Y),W.setAttribute("download",`users-export-${fn(new Date,"yyyy-MM-dd")}.csv`),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W),ve.success("Users exported successfully!")},T=async j=>{const U=j.target.files[0];if(U)try{const V=(await U.text()).split(`
`).filter(be=>be.trim());if(V.length<2){ve.error("CSV file must contain at least a header row and one data row");return}const W=V[0].split(",").map(be=>be.replace(/"/g,"").trim()),Y=W.indexOf("Name"),Q=W.indexOf("Email"),se=W.indexOf("Password"),G=W.indexOf("Role"),J=W.indexOf("Status"),Z=W.indexOf("Organization"),X=W.indexOf("Department");if(Y===-1||Q===-1){ve.error("CSV must contain Name and Email columns");return}const te=[];for(let be=1;be<V.length;be++){const Se=V[be].split(",").map($e=>$e.replace(/"/g,"").trim()),Ie=Se[Y],qe=Se[Q];if(!Ie||!qe)continue;let Pe="";if(Z!==-1&&Se[Z]){const $e=t.find(ne=>ne.name===Se[Z]);if($e)Pe=$e._id||$e.id;else{ve.error(`Organization "${Se[Z]}" not found for user ${qe}`);continue}}let Fe="";if(X!==-1&&Se[X]&&Pe){const $e=i.find(ne=>ne.name===Se[X]&&(ne.organization?._id||ne.organization)===Pe);$e&&(Fe=$e._id||$e.id)}te.push({name:Ie,email:qe,password:se!==-1&&Se[se]?Se[se]:"TempPassword123!",role:G!==-1&&Se[G]?Se[G]:"user",status:J!==-1&&Se[J]?Se[J]:"active",organization:Pe||t[0]?._id||t[0]?.id,department:Fe||""})}if(te.length===0){ve.error("No valid users found in CSV");return}let ce=0,le=0;for(const be of te)try{await nl.create(be),ce++}catch(Se){le++,console.error(`Failed to import user ${be.email}:`,Se)}ve.success(`Imported ${ce} users${le>0?`, ${le} failed`:""}`),x(),j.target.value=""}catch(B){ve.error("Failed to import users: "+B.message),console.error(B)}};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"User Management"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage system users and their permissions"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs(nt,{transparent:!0,variant:"outline",onClick:L,children:[d.jsx(Uv,{size:20,className:"mr-2"}),"Export CSV"]}),d.jsxs("label",{className:"btn btn-outline cursor-pointer",children:[d.jsx(fc,{size:20,className:"mr-2"}),"Import CSV",d.jsx("input",{type:"file",accept:".csv",onChange:T,className:"hidden"})]}),d.jsxs(nt,{onClick:()=>A(),transparent:!0,children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add User"]})]})]}),d.jsxs(jt,{className:"p-6",children:[d.jsx("div",{className:"mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx(Tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),d.jsx(bt,{placeholder:"Search users...",value:m,onChange:j=>y(j.target.value),className:"pl-10"})]})}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50/80 backdrop-blur-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):E.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):E.map(j=>d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300 border-l-4 border-transparent hover:border-primary-500",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-primary-100/80 backdrop-blur-sm text-primary-700 border border-primary-200",children:j.name})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:j.organization?.name||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:j.department?.name||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:j.role==="admin"?"danger":j.role==="agent"?"info":j.role==="department-head"?"warning":"info",children:j.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:j.status==="active"?"success":"warning",children:j.status})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:fn(new Date(j.createdAt),"MMM dd, yyyy")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[d.jsx("button",{onClick:()=>A(j),className:"text-primary-600 hover:text-primary-700 transition-colors p-2 rounded-lg hover:bg-primary-50/50 backdrop-blur-sm",children:d.jsx(Tc,{size:18})}),d.jsx("button",{onClick:()=>N(j._id||j.id),className:"text-red-600 hover:text-red-700 transition-colors p-2 rounded-lg hover:bg-red-50/50 backdrop-blur-sm",children:d.jsx(Fo,{size:18})})]})})]},j._id||j.id))})]})})]}),d.jsx(Ns,{isOpen:l,onClose:R,title:f?"Edit User":"Add New User",footer:d.jsxs(d.Fragment,{children:[d.jsx(nt,{variant:"outline",transparent:!0,onClick:R,children:"Cancel"}),d.jsx(nt,{transparent:!0,onClick:O,children:"Save"})]}),children:d.jsxs("form",{onSubmit:O,className:"space-y-4",children:[d.jsx(bt,{label:"Name",value:b.name,onChange:j=>w({...b,name:j.target.value}),required:!0}),d.jsx(bt,{type:"email",label:"Email",value:b.email,onChange:j=>w({...b,email:j.target.value}),required:!0}),d.jsx(bt,{type:"password",label:f?"Password (Leave empty to keep current)":"Password *",value:b.password,onChange:j=>w({...b,password:j.target.value}),required:!f,placeholder:f?"Enter new password or leave empty":"Enter password"}),d.jsx(_n,{label:"Organization *",value:b.organization,onChange:j=>w({...b,organization:j.target.value,department:""}),options:t.map(j=>({value:j._id||j.id,label:j.name})),required:!0}),d.jsx(_n,{label:"Department (Optional)",value:b.department,onChange:j=>w({...b,department:j.target.value}),options:[{value:"",label:"No Department"},...i.map(j=>({value:j._id||j.id,label:j.name}))],disabled:!b.organization}),d.jsx(_n,{label:"Role",value:b.role,onChange:j=>w({...b,role:j.target.value}),options:[{value:"user",label:"User"},{value:"agent",label:"Agent"},{value:"admin",label:"Admin"},{value:"department-head",label:"Department Head"},{value:"technician",label:"Technician"}],required:!0}),d.jsx(_n,{label:"Status",value:b.status,onChange:j=>w({...b,status:j.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],required:!0})]})})]})})},gue=[{id:1,name:"Admin",description:"Full system access",permissions:["all"],userCount:2},{id:2,name:"Agent",description:"Can manage tickets and respond to users",permissions:["tickets:read","tickets:write","comments:write"],userCount:5},{id:3,name:"User",description:"Can create and view own tickets",permissions:["tickets:read","tickets:create"],userCount:50}],vue=[{id:"tickets:read",label:"View Tickets"},{id:"tickets:create",label:"Create Tickets"},{id:"tickets:write",label:"Edit Tickets"},{id:"tickets:delete",label:"Delete Tickets"},{id:"comments:write",label:"Add Comments"},{id:"users:read",label:"View Users"},{id:"users:write",label:"Manage Users"},{id:"admin:access",label:"Admin Access"}],yue=()=>{const[n,e]=z.useState(gue),[t,r]=z.useState(!1),[i,a]=z.useState(null),[s,o]=z.useState({name:"",description:"",permissions:[]}),l=(y=null)=>{y?(a(y),o({name:y.name,description:y.description,permissions:y.permissions})):(a(null),o({name:"",description:"",permissions:[]})),r(!0)},u=()=>{r(!1),a(null),o({name:"",description:"",permissions:[]})},f=y=>{if(y==="all")o({...s,permissions:["all"]});else{const b=s.permissions.includes(y)?s.permissions.filter(w=>w!==y&&w!=="all"):[...s.permissions.filter(w=>w!=="all"),y];o({...s,permissions:b})}},h=y=>{if(y.preventDefault(),i)e(n.map(b=>b.id===i.id?{...b,...s}:b)),ve.success("Role updated successfully!");else{const b={...s,id:n.length+1,userCount:0};e([...n,b]),ve.success("Role created successfully!")}u()},m=y=>{window.confirm("Are you sure you want to delete this role?")&&(e(n.filter(b=>b.id!==y)),ve.success("Role deleted successfully!"))};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Define roles and their permissions"})]}),d.jsxs(nt,{onClick:()=>l(),children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add Role"]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(y=>d.jsxs(jt,{children:[d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:d.jsx(Af,{className:"text-primary-600",size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:y.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[y.userCount," users"]})]})]})}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:y.description}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[y.permissions.slice(0,3).map(b=>d.jsx(pn,{variant:"info",className:"text-xs",children:b==="all"?"All Permissions":b},b)),y.permissions.length>3&&d.jsxs(pn,{variant:"info",className:"text-xs",children:["+",y.permissions.length-3," more"]})]}),d.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[d.jsxs(nt,{variant:"outline",size:"sm",onClick:()=>l(y),className:"flex-1",children:[d.jsx(Tc,{size:16,className:"mr-1"}),"Edit"]}),d.jsxs(nt,{variant:"danger",size:"sm",onClick:()=>m(y.id),className:"flex-1",children:[d.jsx(Fo,{size:16,className:"mr-1"}),"Delete"]})]})]},y.id))}),d.jsx(Ns,{isOpen:t,onClose:u,title:i?"Edit Role":"Add New Role",size:"lg",footer:d.jsxs(d.Fragment,{children:[d.jsx(nt,{variant:"outline",onClick:u,children:"Cancel"}),d.jsx(nt,{onClick:h,children:"Save"})]}),children:d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsx(bt,{label:"Role Name",value:s.name,onChange:y=>o({...s,name:y.target.value}),required:!0}),d.jsx(BN,{label:"Description",value:s.description,onChange:y=>o({...s,description:y.target.value}),rows:3}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),d.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-4",children:[vue.map(y=>d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:s.permissions.includes(y.id)||s.permissions.includes("all"),onChange:()=>f(y.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),d.jsx("span",{className:"text-sm text-gray-700",children:y.label})]},y.id)),d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer pt-2 border-t border-gray-200",children:[d.jsx("input",{type:"checkbox",checked:s.permissions.includes("all"),onChange:()=>f("all"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),d.jsx("span",{className:"text-sm font-medium text-gray-900",children:"All Permissions"})]})]})]})]})})]})})},xue=()=>{const{user:n}=Fr(),[e,t]=z.useState({host:"",port:"587",encryption:"tls",username:"",password:"",fromEmail:"",fromName:"Ticketing Tool"}),[r,i]=z.useState({host:"",port:"993",encryption:"ssl",username:"",password:"",folder:"INBOX"}),[a,s]=z.useState(n?.email||""),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState(!1);z.useEffect(()=>{y()},[]);const y=async()=>{try{const M=await gr.getEmailSettings();if(M.smtp){let E="none";(M.smtp.secure||M.smtp.port===587||M.smtp.port===465)&&(E=M.smtp.port===465?"ssl":"tls"),M.smtp.host&&(M.smtp.host.includes("office365.com")||M.smtp.host.includes("outlook.com"))&&E==="none"&&(E="tls"),t({host:M.smtp.host||"",port:M.smtp.port?.toString()||"587",encryption:E,username:M.smtp.auth?.user||"",password:M.smtp.auth?.pass||"",fromEmail:M.smtp.fromEmail||M.smtp.auth?.user||"",fromName:M.smtp.fromName||"Ticketing Tool"})}if(M.imap){const E=M.imap.secure?"ssl":"none";i({host:M.imap.host||"",port:M.imap.port?.toString()||"993",encryption:E,username:M.imap.auth?.user||"",password:M.imap.auth?.pass||"",folder:M.imap.folder||"INBOX"})}}catch(M){console.error("Failed to load email settings:",M)}},b=async M=>{M.preventDefault(),l(!0);try{await gr.updateEmailSettings({smtp:e}),ve.success("SMTP settings saved successfully!")}catch(E){ve.error(E.message||"Failed to save SMTP settings")}finally{l(!1)}},w=async M=>{M.preventDefault(),l(!0);try{await gr.updateEmailSettings({imap:r}),ve.success("IMAP settings saved successfully!")}catch(E){ve.error(E.message||"Failed to save IMAP settings")}finally{l(!1)}},x=async()=>{if(!a){ve.error("Please enter an email address to send test email");return}if(!e.host||!e.username||!e.password){ve.error("Please fill in all required SMTP fields before testing");return}if(e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))){if(e.encryption!=="tls"){ve.error("Office365 requires TLS encryption. Please change Encryption to TLS.",{duration:6e3});return}if(e.port!=="587"){ve.error("Office365 requires port 587 with TLS. Please change Port to 587.",{duration:6e3});return}}f(!0);try{const E=e.encryption==="ssl"&&e.port==="465",A={host:e.host,port:e.port,secure:E,auth:{user:e.username,pass:e.password},fromEmail:e.fromEmail,fromName:e.fromName},R=await gr.testSMTP(a,A);ve.success(R.message||"Test email sent successfully! Please check your inbox.")}catch(E){const A=E.message||"Failed to send test email. Please check your SMTP settings.";if(A.includes("535")||A.includes("Authentication unsuccessful")||A.includes("EAUTH")){const R=A.split(`
`).join(" | ");ve.error("Office365 Authentication Failed! Please verify: 1) App Password is 16 characters (no spaces), 2) SMTP AUTH enabled for your mailbox, 3) Try creating a new App Password",{duration:12e3}),console.error("Detailed error:",R),console.log("Office365 Troubleshooting:"),console.log("1. App Password should be exactly 16 characters"),console.log("2. No spaces before or after the password"),console.log('3. SMTP AUTH must be enabled: Set-CASMailbox -Identity "your-email" -SmtpClientAuthenticationDisabled $false'),console.log("4. Try creating a new App Password from Microsoft Account Security")}else ve.error(A,{duration:6e3})}finally{f(!1)}},_=async()=>{if(!r.host||!r.username||!r.password){ve.error("Please fill in all required IMAP fields before testing");return}m(!0);try{const M={host:r.host,port:r.port,secure:r.encryption==="ssl"||r.encryption==="tls",auth:{user:r.username,pass:r.password},folder:r.folder||"INBOX"},E=await gr.testIMAP(M);ve.success(E.message||"IMAP connection successful!")}catch(M){ve.error(M.message||"Failed to connect to IMAP server. Please check your IMAP settings.")}finally{m(!1)}};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Settings"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Configure SMTP and IMAP settings for email notifications and ticket creation"})]}),d.jsx(jt,{title:"SMTP Settings (Outgoing Email)",children:d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{label:"SMTP Host *",value:e.host,onChange:M=>t({...e,host:M.target.value}),required:!0,icon:d.jsx(BR,{size:20}),placeholder:"smtp.office365.com"}),d.jsx(bt,{label:"SMTP Port *",type:"number",value:e.port,onChange:M=>t({...e,port:M.target.value}),required:!0,placeholder:"587"})]}),d.jsx(_n,{label:"Encryption *",value:e.encryption,onChange:M=>t({...e,encryption:M.target.value}),options:[{value:"none",label:"None"},{value:"tls",label:"TLS (Required for Office365)"},{value:"ssl",label:"SSL"}],required:!0}),e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))&&e.encryption==="none"&&d.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-xs text-red-800",children:[d.jsx("p",{className:"font-medium",children:" Office365 requires TLS encryption!"}),d.jsx("p",{children:'Please change Encryption to "TLS" for Office365 to work properly.'})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{label:"Username *",value:e.username,onChange:M=>t({...e,username:M.target.value}),required:!0,icon:d.jsx(Ef,{size:20}),placeholder:"your-email@example.com"}),d.jsx(bt,{type:"password",label:"Password *",value:e.password,onChange:M=>t({...e,password:M.target.value}),required:!0,icon:d.jsx(f2,{size:20})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{type:"email",label:"From Email *",value:e.fromEmail,onChange:M=>t({...e,fromEmail:M.target.value}),required:!0,placeholder:"noreply@example.com"}),d.jsx(bt,{label:"From Name *",value:e.fromName,onChange:M=>t({...e,fromName:M.target.value}),required:!0,placeholder:"Ticketing Tool"})]}),d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Send Test Email"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(bt,{type:"email",placeholder:"Enter email address to receive test email",value:a,onChange:M=>s(M.target.value),className:"flex-1"}),d.jsxs(nt,{type:"button",variant:"outline",onClick:x,disabled:u||!a,children:[d.jsx(IP,{size:16,className:"mr-2"}),u?"Sending...":"Send Test Email"]})]}),d.jsx("p",{className:"text-xs text-gray-600 mt-2",children:'Enter your email address and click "Send Test Email" to verify your SMTP configuration.'}),e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))&&d.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[d.jsx("p",{className:"font-medium mb-1",children:" Office365 Authentication Requirements:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[d.jsxs("li",{children:["Use an ",d.jsx("strong",{children:"App Password"})," (not your regular password) if MFA is enabled"]}),d.jsx("li",{children:"Copy the App Password exactly (no spaces before/after)"}),d.jsx("li",{children:"Make sure SMTP AUTH is enabled in your Office365 admin center"}),d.jsx("li",{children:"Port 587 with TLS is required for Office365"})]}),d.jsxs("p",{className:"mt-2",children:["Create App Password: ",d.jsx("a",{href:"https://account.microsoft.com/security",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Microsoft Account Security"}),"  App passwords"]})]})]}),d.jsx("div",{className:"flex space-x-3 pt-4",children:d.jsx(nt,{type:"submit",disabled:o,children:o?"Saving...":"Save SMTP Settings"})})]})}),d.jsx(jt,{title:"IMAP Settings (Incoming Email)",children:d.jsxs("form",{onSubmit:w,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{label:"IMAP Host *",value:r.host,onChange:M=>i({...r,host:M.target.value}),required:!0,icon:d.jsx(BR,{size:20}),placeholder:"imap.office365.com"}),d.jsx(bt,{label:"IMAP Port *",type:"number",value:r.port,onChange:M=>i({...r,port:M.target.value}),required:!0,placeholder:"993"})]}),d.jsx(_n,{label:"Encryption *",value:r.encryption,onChange:M=>i({...r,encryption:M.target.value}),options:[{value:"none",label:"None"},{value:"ssl",label:"SSL"},{value:"tls",label:"TLS"}],required:!0}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(bt,{label:"Username *",value:r.username,onChange:M=>i({...r,username:M.target.value}),required:!0,icon:d.jsx(Ef,{size:20}),placeholder:"your-email@example.com"}),d.jsx(bt,{type:"password",label:"Password *",value:r.password,onChange:M=>i({...r,password:M.target.value}),required:!0,icon:d.jsx(f2,{size:20})})]}),d.jsx(bt,{label:"Folder",value:r.folder,onChange:M=>i({...r,folder:M.target.value}),placeholder:"INBOX"}),d.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium mb-2",children:"IMAP Configuration Notes:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[d.jsx("li",{children:"Emails sent to the configured address will automatically create tickets"}),d.jsx("li",{children:"Email subject becomes ticket title"}),d.jsx("li",{children:"Email body becomes ticket description"}),d.jsx("li",{children:"Replies to ticket emails will be added as comments"})]})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",onClick:_,disabled:h,children:h?"Testing...":"Test Connection"}),d.jsx(nt,{type:"submit",disabled:o,children:o?"Saving...":"Save IMAP Settings"})]})]})})]})})},bue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState(!0),[i,a]=z.useState(!1),[s,o]=z.useState(!1),[l,u]=z.useState(null),[f,h]=z.useState(""),[m,y]=z.useState({name:"",type:"ticket-created",subject:"",htmlBody:"",textBody:"",isActive:!0}),b=[{value:"ticket-created",label:"Ticket Created (Auto Reply)"},{value:"ticket-updated",label:"Ticket Status Updated"},{value:"ticket-assigned",label:"Ticket Assigned"},{value:"ticket-resolved",label:"Ticket Resolved"},{value:"custom",label:"Custom Template"}];z.useEffect(()=>{w()},[]);const w=async()=>{try{r(!0);const T=await Ap.getAll();e(T)}catch(T){ve.error("Failed to load email templates"),console.error(T)}finally{r(!1)}},x=(T=null)=>{T?(u(T),y({name:T.name||"",type:T.type||"ticket-created",subject:T.subject||"",htmlBody:T.htmlBody||"",textBody:T.textBody||"",isActive:T.isActive!==void 0?T.isActive:!0})):(u(null),y({name:"",type:"ticket-created",subject:"",htmlBody:A("ticket-created"),textBody:"",isActive:!0})),a(!0)},_=()=>{a(!1),u(null),y({name:"",type:"ticket-created",subject:"",htmlBody:"",textBody:"",isActive:!0})},M=T=>{y({...m,type:T,htmlBody:A(T),subject:E(T)})},E=T=>({"ticket-created":"Ticket #{{ticketId}} Created - {{ticketTitle}}","ticket-updated":"Ticket #{{ticketId}} Updated - {{ticketTitle}}","ticket-assigned":"Ticket #{{ticketId}} Assigned to You - {{ticketTitle}}","ticket-resolved":"Ticket #{{ticketId}} Resolved - {{ticketTitle}}",custom:"Custom Email Template"})[T]||"",A=T=>T==="ticket-created"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background-color: #f5f5f5; padding: 20px; }
    .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .header-banner { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 30px 20px; text-align: center; }
    .header-banner h1 { font-size: 28px; font-weight: 600; margin: 0; }
    .content { padding: 30px 20px; background: #ffffff; }
    .greeting { font-size: 16px; color: #1f2937; margin-bottom: 15px; }
    .ticket-details { background: #f9fafb; padding: 20px; margin: 25px 0; border-radius: 6px; border: 1px solid #e5e7eb; }
    .detail-row { margin-bottom: 12px; font-size: 14px; }
    .detail-label { font-weight: 600; color: #374151; display: inline-block; min-width: 120px; }
    .footer-note { text-align: center; padding: 20px; background: #f9fafb; border-top: 1px solid #e5e7eb; font-size: 12px; color: #9ca3af; }
  </style>
</head>
<body>
  <div class="email-container">
    <div class="header-banner">
      <h1>Ticket Created Successfully</h1>
    </div>
    <div class="content">
      <p class="greeting">Dear Customer,</p>
      <p>Thank you for contacting us. We have received your request and created a support ticket for you.</p>
      <div class="ticket-details">
        <h3>Ticket Details:</h3>
        <div class="detail-row">
          <span class="detail-label">Ticket ID:</span>
          <span>#{{ticketId}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Title:</span>
          <span>{{ticketTitle}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Category:</span>
          <span>{{ticketCategory}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Priority:</span>
          <span>{{ticketPriority}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Status:</span>
          <span>{{ticketStatus}}</span>
        </div>
      </div>
      <p>Our support team will review your ticket and respond as soon as possible.</p>
      <p><strong>Best regards,</strong><br>Support Team</p>
    </div>
    <div class="footer-note">
      <p>This is an automated message.</p>
    </div>
  </div>
</body>
</html>`:T==="ticket-updated"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background-color: #f5f5f5; padding: 20px; }
    .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .header-banner { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px 20px; text-align: center; }
    .header-banner h1 { font-size: 28px; font-weight: 600; margin: 0; }
    .content { padding: 30px 20px; background: #ffffff; }
    .ticket-details { background: #f9fafb; padding: 20px; margin: 25px 0; border-radius: 6px; border: 1px solid #e5e7eb; }
  </style>
</head>
<body>
  <div class="email-container">
    <div class="header-banner">
      <h1>Ticket Updated</h1>
    </div>
    <div class="content">
      <p>Dear Customer,</p>
      <p>Your ticket #{{ticketId}} has been updated.</p>
      <div class="ticket-details">
        <h3>Current Status:</h3>
        <p><strong>Ticket ID:</strong> #{{ticketId}}</p>
        <p><strong>Title:</strong> {{ticketTitle}}</p>
        <p><strong>Status:</strong> {{ticketStatus}}</p>
        <p><strong>Priority:</strong> {{ticketPriority}}</p>
      </div>
      <p><strong>Best regards,</strong><br>Support Team</p>
    </div>
  </div>
</body>
</html>`:"",R=async T=>{T.preventDefault();try{l?(await Ap.update(l._id,m),ve.success("Email template updated successfully!")):(await Ap.create(m),ve.success("Email template created successfully!")),_(),w()}catch(j){ve.error(j.message||"Failed to save email template")}},O=async T=>{if(window.confirm("Are you sure you want to delete this email template?"))try{await Ap.delete(T),ve.success("Email template deleted successfully!"),w()}catch(j){ve.error(j.message||"Failed to delete email template")}},N=async()=>{let T=m.htmlBody;const j={ticketId:"1006",ticketTitle:"Sample Ticket Title",ticketCategory:"Hardware",ticketPriority:"medium",ticketStatus:"open",customerName:"John Doe",assigneeName:"Support Agent"};Object.keys(j).forEach(U=>{const B=new RegExp(`\\{\\{${U}\\}\\}`,"g");T=T.replace(B,j[U])}),h(T),o(!0)},L=T=>({"ticket-created":"info","ticket-updated":"success","ticket-assigned":"warning","ticket-resolved":"success",custom:"info"})[T]||"info";return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Email Templates"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage auto-reply email templates for ticket creation and updates"})]}),d.jsxs(nt,{transparent:!0,onClick:()=>x(),children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Create Template"]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading templates..."})]}):n.length===0?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx(Ef,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600 mb-2",children:"No email templates found"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Create your first template to get started"})]}):n.map(T=>d.jsx(jt,{className:"p-6 hover:shadow-lg transition-all",children:d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.name}),d.jsx(pn,{variant:L(T.type),children:b.find(j=>j.value===T.type)?.label||T.type})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:T.subject}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsx(pn,{variant:T.isActive?"success":"warning",children:T.isActive?"Active":"Inactive"})})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>x(T),className:"text-primary-600 hover:text-primary-700 transition-colors p-1",title:"Edit",children:d.jsx(Tc,{size:18})}),d.jsx("button",{onClick:()=>O(T._id),className:"text-red-600 hover:text-red-700 transition-colors p-1",title:"Delete",children:d.jsx(Fo,{size:18})})]})]})},T._id))}),d.jsx(Ns,{isOpen:i,onClose:_,title:l?"Edit Email Template":"Create Email Template",size:"xl",children:d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsx(bt,{label:"Template Name",placeholder:"e.g., Ticket Created Auto Reply",value:m.name,onChange:T=>y({...m,name:T.target.value}),required:!0}),d.jsx(_n,{label:"Template Type",value:m.type,onChange:T=>M(T.target.value),options:b,required:!0}),d.jsx(bt,{label:"Email Subject",placeholder:"e.g., Ticket #{{ticketId}} Created - {{ticketTitle}}",value:m.subject,onChange:T=>y({...m,subject:T.target.value}),required:!0}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["HTML Body (Use ",{variableName}," for dynamic content)"]}),d.jsx("textarea",{value:m.htmlBody,onChange:T=>y({...m,htmlBody:T.target.value}),className:"w-full h-96 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter HTML template...",required:!0}),d.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Available variables: ","{{ticketId}}",", ","{{ticketTitle}}",", ","{{ticketCategory}}",", ","{{ticketPriority}}",", ","{{ticketStatus}}",", ","{{customerName}}",", ","{{assigneeName}}"]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:T=>y({...m,isActive:T.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),d.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsxs(nt,{type:"button",variant:"outline",transparent:!0,onClick:N,className:"flex-1",children:[d.jsx($p,{size:20,className:"mr-2"}),"Preview"]}),d.jsx(nt,{type:"button",variant:"outline",transparent:!0,onClick:_,className:"flex-1",children:"Cancel"}),d.jsxs(nt,{type:"submit",transparent:!0,className:"flex-1",children:[d.jsx(jP,{size:20,className:"mr-2"}),l?"Update":"Create"]})]})]})}),d.jsx(Ns,{isOpen:s,onClose:()=>o(!1),title:"Email Template Preview",size:"xl",children:d.jsx("div",{className:"border rounded-lg overflow-hidden",children:d.jsx("iframe",{srcDoc:f,className:"w-full h-[600px] border-0",title:"Email Preview"})})})]})})},wue=()=>{const{ssoSettings:n,updateSSOSettings:e}=vz(),[t,r]=z.useState(n.azureEnabled),[i,a]=z.useState(n.googleEnabled),[s,o]=z.useState({tenantId:"",clientId:"",clientSecret:"",redirectUri:window.location.origin+"/sso/azure/callback"}),[l,u]=z.useState({clientId:"",clientSecret:"",redirectUri:window.location.origin+"/sso/google/callback"}),[f,h]=z.useState(!1);z.useEffect(()=>{m()},[]);const m=async()=>{try{const M=await gr.getSSOConfig(),E=M.find(R=>R.provider==="azure"),A=M.find(R=>R.provider==="google");E&&E.config&&(o({...s,...E.config}),r(E.enabled)),A&&A.config&&(u({...l,...A.config}),a(A.enabled))}catch(M){console.error("Failed to load SSO configs:",M)}},y=async M=>{try{r(M),await e({azureEnabled:M}),await gr.updateSSOConfig({provider:"azure",enabled:M,config:s}),ve.success(`Azure AD ${M?"enabled":"disabled"}`)}catch{ve.error("Failed to update Azure AD settings")}},b=async M=>{try{a(M),await e({googleEnabled:M}),await gr.updateSSOConfig({provider:"google",enabled:M,config:l}),ve.success(`Google Workspace ${M?"enabled":"disabled"}`)}catch{ve.error("Failed to update Google Workspace settings")}},w=async M=>{M.preventDefault(),h(!0);try{await gr.updateSSOConfig({provider:"azure",enabled:t,config:s}),ve.success("Azure AD configuration saved successfully!")}catch(E){ve.error(E.message||"Failed to save Azure AD configuration")}finally{h(!1)}},x=async M=>{M.preventDefault(),h(!0);try{await gr.updateSSOConfig({provider:"google",enabled:i,config:l}),ve.success("Google Workspace configuration saved successfully!")}catch(E){ve.error(E.message||"Failed to save Google Workspace configuration")}finally{h(!1)}},_=M=>{ve.loading(`Testing ${M} connection...`),setTimeout(()=>{ve.dismiss(),ve.success(`${M} connection successful!`)},2e3)};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SSO Configuration"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Configure and manage Single Sign-On authentication methods"})]}),d.jsxs(jt,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-12 h-12 bg-[#0078D4] rounded-lg flex items-center justify-center",children:d.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"white"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Microsoft Azure AD"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Configure Azure Entra ID single sign-on"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(pn,{variant:t?"success":"warning",children:t?"Enabled":"Disabled"}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:t,onChange:M=>y(M.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),t&&d.jsxs("form",{onSubmit:w,className:"space-y-4",children:[d.jsx(bt,{label:"Tenant ID",value:s.tenantId,onChange:M=>o({...s,tenantId:M.target.value}),placeholder:"your-tenant-id",required:!0}),d.jsx(bt,{label:"Client ID (Application ID)",value:s.clientId,onChange:M=>o({...s,clientId:M.target.value}),placeholder:"your-application-id",required:!0}),d.jsx(bt,{type:"password",label:"Client Secret",value:s.clientSecret,onChange:M=>o({...s,clientSecret:M.target.value}),placeholder:"your-client-secret",required:!0}),d.jsx(bt,{label:"Redirect URI",value:s.redirectUri,onChange:M=>o({...s,redirectUri:M.target.value}),required:!0}),d.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium mb-2",children:"Azure AD Setup Instructions:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[d.jsx("li",{children:"Register your application in Azure Portal"}),d.jsxs("li",{children:["Configure redirect URI: ",s.redirectUri]}),d.jsx("li",{children:"Grant necessary API permissions (User.Read, openid, profile)"}),d.jsx("li",{children:"Configure app roles for user mapping"}),d.jsx("li",{children:"Copy Tenant ID, Client ID, and create a Client Secret"})]})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",onClick:()=>_("Azure AD"),children:"Test Connection"}),d.jsx(nt,{type:"submit",disabled:f,children:f?"Saving...":"Save Azure AD Settings"})]})]})]}),d.jsxs(jt,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-12 h-12 bg-white border-2 border-gray-200 rounded-lg flex items-center justify-center",children:d.jsxs("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Google Workspace"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Configure Google Workspace single sign-on"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(pn,{variant:i?"success":"warning",children:i?"Enabled":"Disabled"}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:i,onChange:M=>b(M.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),i&&d.jsxs("form",{onSubmit:x,className:"space-y-4",children:[d.jsx(bt,{label:"Client ID",value:l.clientId,onChange:M=>u({...l,clientId:M.target.value}),placeholder:"your-google-client-id",required:!0}),d.jsx(bt,{type:"password",label:"Client Secret",value:l.clientSecret,onChange:M=>u({...l,clientSecret:M.target.value}),placeholder:"your-google-client-secret",required:!0}),d.jsx(bt,{label:"Redirect URI",value:l.redirectUri,onChange:M=>u({...l,redirectUri:M.target.value}),required:!0}),d.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium mb-2",children:"Google Workspace Setup Instructions:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[d.jsx("li",{children:"Go to Google Cloud Console and create a new project"}),d.jsx("li",{children:"Enable Google+ API and Google Workspace API"}),d.jsx("li",{children:"Create OAuth 2.0 credentials (Web application)"}),d.jsxs("li",{children:["Configure authorized redirect URI: ",l.redirectUri]}),d.jsx("li",{children:"Copy Client ID and Client Secret"}),d.jsx("li",{children:"Configure OAuth consent screen with your organization details"})]})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",onClick:()=>_("Google Workspace"),children:"Test Connection"}),d.jsx(nt,{type:"submit",disabled:f,children:f?"Saving...":"Save Google Workspace Settings"})]})]})]}),d.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx("strong",{children:"Security Note:"})," SSO authentication methods use industry-standard OAuth 2.0 and OpenID Connect protocols. All authentication flows are secured with CSRF tokens and follow cybersecurity best practices."]})})]})})},_ue=()=>{const[n,e]=z.useState(null),[t,r]=z.useState("/logo.svg"),[i,a]=z.useState(""),[s,o]=z.useState(!0),[l,u]=z.useState(""),[f,h]=z.useState(!1),{updateLogo:m,updateShowOnLogin:y,updateLoginTitle:b,reloadLogo:w}=rw();z.useEffect(()=>{x()},[]);const x=async()=>{try{const L=await gr.getLogo();L.logo?r(L.logo):r("/logo.svg"),L.showOnLogin!==void 0&&o(L.showOnLogin),L.loginTitle!==void 0&&u(L.loginTitle||"")}catch(L){console.error("Failed to load logo:",L),r("/logo.svg")}},_=L=>{const T=L.target.files[0];if(T){if(!T.type.startsWith("image/")){ve.error("Please select an image file");return}if(T.size>2*1024*1024){ve.error("Image size should be less than 2MB");return}e(T);const j=new FileReader;j.onloadend=()=>{r(j.result)},j.readAsDataURL(T)}},M=L=>{a(L.target.value)},E=()=>{if(!i){ve.error("Please enter a valid URL");return}r(i),ve.success("Logo loaded from URL")},A=async()=>{h(!0);try{await gr.updateLogo(t,n?.name||"logo",s,l||null),m(t),y(s),b(l||null),await w(),ve.success("Logo settings saved successfully!"),e(null)}catch(L){ve.error(L.message||"Failed to save logo")}finally{h(!1)}},R=async()=>{if(window.confirm("Are you sure you want to remove the logo from the login page? This will hide it but keep the logo file.")){o(!1);try{await gr.updateLogo(t,n?.name||"logo",!1),y(!1),await w(),ve.success("Logo removed from login page")}catch{ve.error("Failed to update logo settings"),o(!0)}}},O=async()=>{o(!0);try{await gr.updateLogo(t,n?.name||"logo",!0),y(!0),await w(),ve.success("Logo will now be shown on login page")}catch{ve.error("Failed to update logo settings"),o(!1)}},N=async()=>{try{r("/logo.svg"),e(null),a(""),ve.success("Logo reset to default")}catch{ve.error("Failed to reset logo")}};return d.jsx(Ln,{children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Logo Management"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Upload and manage your organization's logo"})]}),d.jsxs(jt,{title:"Current Logo",children:[d.jsx("div",{className:"flex items-center justify-center p-8 bg-gradient-to-br from-gray-50 to-gray-100/50 rounded-xl mb-6 border border-gray-200",children:d.jsx("img",{src:t,alt:"Logo Preview",className:"max-h-32 max-w-full object-contain",onError:()=>{r("/logo.svg"),ve.error("Failed to load logo, using default")}})}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary-50/50 to-primary-100/30 rounded-xl border border-primary-200/50 backdrop-blur-sm",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[s?d.jsx($p,{className:"text-primary-600",size:20}):d.jsx(zb,{className:"text-gray-400",size:20}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Show Logo on Login Page"}),d.jsx("p",{className:"text-xs text-gray-600",children:s?"Logo is currently visible on the login page":"Logo is hidden on the login page"})]})]}),d.jsx("div",{className:"flex items-center space-x-2",children:s?d.jsxs(nt,{variant:"outline",transparent:!0,onClick:R,className:"flex items-center gap-2",children:[d.jsx(zb,{size:16}),"Remove from Login"]}):d.jsxs(nt,{transparent:!0,onClick:O,className:"flex items-center gap-2",children:[d.jsx($p,{size:16}),"Show on Login"]})})]}),d.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary-50/50 to-primary-100/30 rounded-xl border border-primary-200/50 backdrop-blur-sm",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Login Page Welcome Title (Optional)"}),d.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Enter a custom welcome title to display on the login page. Leave empty to hide the title."}),d.jsx(bt,{type:"text",placeholder:"e.g., Welcome to Rezilyens",value:l,onChange:L=>u(L.target.value),className:"w-full"}),d.jsx("p",{className:"text-xs text-gray-500 mt-2",children:l?`Title will show as: "${l}"`:"No title will be displayed on login page"})]})]}),d.jsx(jt,{title:"Upload Logo",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Logo File"}),d.jsx("div",{className:"flex items-center space-x-4",children:d.jsxs("label",{className:"flex-1 cursor-pointer",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"}),d.jsx("div",{className:"flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-primary-500 transition-all duration-300 bg-white/50 backdrop-blur-sm hover:bg-white/80",children:d.jsxs("div",{className:"text-center",children:[d.jsx(fc,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),d.jsx("span",{className:"text-sm text-gray-600",children:n?n.name:"Click to upload or drag and drop"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, SVG up to 2MB"})]})})]})})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Or Enter Logo URL"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(bt,{type:"url",placeholder:"https://example.com/logo.png",value:i,onChange:M,className:"flex-1"}),d.jsxs(nt,{type:"button",variant:"outline",transparent:!0,onClick:E,children:[d.jsx(_z,{size:20,className:"mr-2"}),"Load"]})]})]}),d.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[d.jsxs(nt,{variant:"outline",transparent:!0,onClick:N,className:"flex-1",children:[d.jsx(Cf,{size:20,className:"mr-2"}),"Reset to Default"]}),d.jsxs(nt,{transparent:!0,onClick:A,disabled:f,className:"flex-1",children:[d.jsx(jP,{size:20,className:"mr-2"}),f?"Saving...":"Save Logo"]})]}),d.jsx("div",{className:"bg-blue-50/80 backdrop-blur-sm border border-blue-200 rounded-xl p-4",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx("strong",{children:"Note:"})," The logo will be displayed in the sidebar and optionally on the login page. Recommended size: 200x60px or similar aspect ratio. Supported formats: PNG, JPG, SVG."]})})]})})]})})},Sue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState(!0),[i,a]=z.useState(!1),[s,o]=z.useState(null),[l,u]=z.useState({name:"",domain:"",description:"",status:"active"});z.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const w=await ga.getAll();e(w)}catch(w){ve.error("Failed to load organizations"),console.error(w)}finally{r(!1)}},h=(w=null)=>{try{w?(o(w),u({name:w.name||"",domain:w.domain||"",description:w.description||"",status:w.status||"active"})):(o(null),u({name:"",domain:"",description:"",status:"active"})),a(!0)}catch(x){console.error("Error opening modal:",x),ve.error("Failed to open edit form")}},m=()=>{a(!1),o(null),u({name:"",domain:"",description:"",status:"active"})},y=async w=>{w.preventDefault();try{if(s){const x=s._id||s.id;if(!x){ve.error("Invalid organization ID"),console.error("Editing org:",s);return}console.log("Updating organization:",x,l),await ga.update(x,l),ve.success("Organization updated successfully!")}else await ga.create(l),ve.success("Organization created successfully!");m(),f()}catch(x){console.error("Error saving organization:",x),ve.error(x.message||"Failed to save organization")}},b=async w=>{if(!w){ve.error("Invalid organization ID"),console.error("No organization ID provided");return}if(window.confirm("Are you sure you want to delete this organization? This action cannot be undone."))try{console.log("Deleting organization:",w),await ga.delete(w),ve.success("Organization deleted successfully!"),f()}catch(x){console.error("Delete error:",x),ve.error(x.message||"Failed to delete organization")}};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Organizations"}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Manage Multi-Tenant Organizations"})]}),d.jsxs(nt,{onClick:()=>h(),className:"btn-primary",children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add Organization"]})]}),d.jsx(jt,{className:"p-6",children:d.jsx("div",{className:"overflow-x-auto",children:t?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-4xl mb-4",children:""}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"Loading organizations..."})]}):n.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Ub,{className:"mx-auto text-cyber-neon-cyan/50 mb-4",size:48}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"No organizations found"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(w=>d.jsxs("div",{className:"card p-6 border-2 border-cyber-neon-cyan/30 hover:border-cyber-neon-cyan/50 transition-all duration-300 cyber-3d relative",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"bg-cyber-neon-cyan/20 p-3 rounded-lg border-2 border-cyber-neon-cyan/30",children:d.jsx(Ub,{className:"text-cyber-neon-cyan",size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan neon-text",children:w.name}),w.domain&&d.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:w.domain})]})]}),d.jsx(pn,{variant:w.status==="active"?"success":"warning",children:w.status})]}),w.description&&d.jsx("p",{className:"text-sm text-cyber-neon-cyan/80 font-mono mb-4 line-clamp-2",children:w.description}),w.stats&&d.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 pt-4 border-t-2 border-cyber-neon-cyan/20",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Users"}),d.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan",children:w.stats.users||0})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Tickets"}),d.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan",children:w.stats.tickets||0})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Open"}),d.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-yellow",children:w.stats.openTickets||0})]})]}),d.jsxs("div",{className:"flex items-center justify-between pt-4 border-t-2 border-cyber-neon-cyan/20",children:[d.jsx("p",{className:"text-xs text-cyber-neon-cyan/50 font-mono",children:fn(new Date(w.createdAt),"MMM dd, yyyy")}),d.jsxs("div",{className:"flex items-center space-x-2 relative z-10",children:[d.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),w&&h(w)},className:"p-2 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors cursor-pointer",title:"Edit Organization",children:d.jsx(Tc,{size:18})}),d.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation();const _=w._id||w.id;_&&b(_)},className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Delete Organization",children:d.jsx(Fo,{size:18})})]})]})]},w._id||w.id))})})}),d.jsx(Ns,{isOpen:i,onClose:m,title:s?"Edit Organization":"Add New Organization",children:d.jsxs("form",{onSubmit:y,className:"space-y-4",children:[d.jsx(bt,{label:"Organization Name *",value:l.name,onChange:w=>u({...l,name:w.target.value}),required:!0}),d.jsx(bt,{label:"Domain (optional)",value:l.domain,onChange:w=>u({...l,domain:w.target.value}),placeholder:"example.com"}),d.jsx(bt,{label:"Description",value:l.description,onChange:w=>u({...l,description:w.target.value}),placeholder:"Organization description"}),d.jsx(_n,{label:"Status",value:l.status,onChange:w=>u({...l,status:w.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],required:!0}),d.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[d.jsx(nt,{type:"button",variant:"outline",transparent:!0,onClick:m,className:"flex-1",children:"Cancel"}),d.jsxs(nt,{type:"submit",transparent:!0,className:"flex-1",children:[s?"Update":"Create"," Organization"]})]})]})})]})})},Mue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState([]),[i,a]=z.useState(!0),[s,o]=z.useState(!1),[l,u]=z.useState(null),[f,h]=z.useState({name:"",description:"",color:"#00ffff",organization:"",status:"active"});z.useEffect(()=>{m(),y()},[]);const m=async()=>{try{a(!0);const M=await Tp.getAllAdmin();e(M)}catch(M){ve.error("Failed to load categories"),console.error(M)}finally{a(!1)}},y=async()=>{try{const M=await ga.getAll();r(M)}catch(M){console.error("Failed to load organizations",M)}},b=(M=null)=>{console.log("handleOpenModal called with:",M),M?(console.log("Setting editing category:",M),u(M),h({name:M.name,description:M.description||"",color:M.color||"#00ffff",organization:M.organization?._id||M.organization||"",status:M.status})):(u(null),h({name:"",description:"",color:"#00ffff",organization:"",status:"active"})),console.log("Opening modal, isModalOpen will be set to true"),o(!0)},w=()=>{o(!1),u(null),h({name:"",description:"",color:"#00ffff",organization:"",status:"active"})},x=async M=>{M.preventDefault();try{const E={...f};if(E.organization||delete E.organization,l){const A=l._id||l.id;if(!A){ve.error("Invalid category ID"),console.error("No category ID found:",l);return}console.log("Updating category:",A,E),await Tp.update(A,E),ve.success("Category updated successfully!")}else await Tp.create(E),ve.success("Category created successfully!");w(),m()}catch(E){console.error("Error saving category:",E),ve.error(E.message||"Failed to save category")}},_=async M=>{if(console.log("handleDelete called with ID:",M),!M){console.error("No category ID provided"),ve.error("Invalid category ID");return}if(window.confirm("Are you sure you want to delete this category?"))try{console.log("Calling API to delete category:",M),await Tp.delete(M),console.log("Category deleted successfully"),ve.success("Category deleted successfully!"),m()}catch(E){console.error("Error deleting category:",E),ve.error(E.message||"Failed to delete category")}};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Categories"}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Manage Ticket Categories"})]}),d.jsxs(nt,{onClick:()=>b(),className:"btn-primary",children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add Category"]})]}),d.jsx(jt,{className:"p-6",children:d.jsx("div",{className:"overflow-x-auto",children:i?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-4xl mb-4",children:""}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"Loading categories..."})]}):n.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Hb,{className:"mx-auto text-cyber-neon-cyan/50 mb-4",size:48}),d.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"No categories found"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(M=>d.jsxs("div",{className:"card p-6 border-2 border-cyber-neon-cyan/30 hover:border-cyber-neon-cyan/50 transition-all duration-300 cyber-3d",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-3 rounded-lg border-2",style:{backgroundColor:`${M.color}20`,borderColor:`${M.color}50`},children:d.jsx(Hb,{size:24,style:{color:M.color}})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan neon-text",children:M.name}),M.organization&&d.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:M.organization.name||"Organization"}),!M.organization&&d.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:"Global"})]})]}),d.jsx(pn,{variant:M.status==="active"?"success":"warning",children:M.status})]}),M.description&&d.jsx("p",{className:"text-sm text-cyber-neon-cyan/80 font-mono mb-4 line-clamp-2",children:M.description}),d.jsxs("div",{className:"flex items-center justify-between pt-4 border-t-2 border-cyber-neon-cyan/20",children:[d.jsx("p",{className:"text-xs text-cyber-neon-cyan/50 font-mono",children:fn(new Date(M.createdAt),"MMM dd, yyyy")}),d.jsxs("div",{className:"flex items-center space-x-2",style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onClick:E=>{E.stopPropagation()},children:[d.jsx("button",{type:"button",onClick:E=>{E.preventDefault(),E.stopPropagation(),console.log("Edit button clicked for category:",M),b(M)},className:"text-cyber-neon-cyan hover:text-cyber-neon-cyan transition-colors p-2 rounded hover:bg-cyber-neon-cyan/10 cursor-pointer",title:"Edit Category",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:d.jsx(Tc,{size:18})}),d.jsx("button",{type:"button",onClick:E=>{E.preventDefault(),E.stopPropagation(),console.log("Delete button clicked for category:",M);const A=M._id||M.id;console.log("Category ID:",A),A?_(A):(console.error("Invalid category ID:",M),ve.error("Invalid category ID"))},className:"text-red-400 hover:text-red-300 transition-colors p-2 rounded hover:bg-red-400/10 cursor-pointer",title:"Delete Category",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:d.jsx(Fo,{size:18})})]})]})]},M._id||M.id))})})}),d.jsx(Ns,{isOpen:s,onClose:w,title:l?"Edit Category":"Add New Category",footer:d.jsxs(d.Fragment,{children:[d.jsx(nt,{variant:"outline",onClick:w,children:"Cancel"}),d.jsx(nt,{onClick:x,children:"Save"})]}),children:d.jsxs("form",{onSubmit:x,className:"space-y-4",children:[d.jsx(bt,{label:"Category Name *",value:f.name,onChange:M=>h({...f,name:M.target.value}),required:!0,placeholder:"e.g., IT Support"}),d.jsx(bt,{label:"Description",value:f.description,onChange:M=>h({...f,description:M.target.value}),placeholder:"Category description"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Color"}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"color",value:f.color,onChange:M=>h({...f,color:M.target.value}),className:"w-16 h-10 rounded border-2 border-cyber-neon-cyan/50 bg-cyber-darker cursor-pointer"}),d.jsx(bt,{value:f.color,onChange:M=>h({...f,color:M.target.value}),placeholder:"#00ffff",className:"flex-1"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Organization (Leave empty for global)"}),d.jsxs("select",{value:f.organization,onChange:M=>h({...f,organization:M.target.value}),className:"w-full px-4 py-3 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan focus:outline-none focus:border-cyber-neon-cyan focus:ring-2 focus:ring-cyber-neon-cyan/50 font-mono",children:[d.jsx("option",{value:"",children:"Global (All Organizations)"}),t.map(M=>d.jsx("option",{value:M._id||M.id,children:M.name},M._id||M.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Status"}),d.jsxs("select",{value:f.status,onChange:M=>h({...f,status:M.target.value}),className:"w-full px-4 py-3 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan focus:outline-none focus:border-cyber-neon-cyan focus:ring-2 focus:ring-cyber-neon-cyan/50 font-mono",children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})})]})})},Eue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState([]),[i,a]=z.useState(""),[s,o]=z.useState(!0),[l,u]=z.useState(!1),[f,h]=z.useState(null),[m,y]=z.useState({name:"",organization:"",priority:"",responseTimeHours:"",responseTimeMinutes:"",resolutionTimeHours:"",resolutionTimeMinutes:"",description:"",isActive:!0});z.useEffect(()=>{b()},[]),z.useEffect(()=>{w()},[i]);const b=async()=>{try{const T=await ga.getAll();r(T)}catch(T){console.error("Failed to load organizations",T)}},w=async()=>{try{o(!0);const T=await gr.getSLAPolicies(i||null);e(T)}catch(T){ve.error("Failed to load SLA policies"),console.error(T)}finally{o(!1)}},x=T=>{if(!T&&T!==0)return{hours:"",minutes:""};const j=Math.floor(T),U=Math.round((T-j)*60);return{hours:j.toString(),minutes:U.toString()}},_=(T,j)=>{const U=parseFloat(T)||0,B=parseFloat(j)||0;return U+B/60},M=(T=null)=>{if(T){h(T);const j=x(T.responseTime),U=x(T.resolutionTime);y({name:T.name||"",organization:T.organization?._id||T.organization||"",priority:T.priority||"",responseTimeHours:j.hours,responseTimeMinutes:j.minutes,resolutionTimeHours:U.hours,resolutionTimeMinutes:U.minutes,description:T.description||"",isActive:T.isActive!==void 0?T.isActive:!0})}else h(null),y({name:"",organization:i||"",priority:"",responseTimeHours:"",responseTimeMinutes:"0",resolutionTimeHours:"",resolutionTimeMinutes:"0",description:"",isActive:!0});u(!0)},E=()=>{u(!1),h(null),y({name:"",organization:i||"",priority:"",responseTimeHours:"",responseTimeMinutes:"",resolutionTimeHours:"",resolutionTimeMinutes:"",description:"",isActive:!0})},A=async T=>{T.preventDefault();try{const j=_(m.responseTimeHours,m.responseTimeMinutes),U=_(m.resolutionTimeHours,m.resolutionTimeMinutes);if(j<=0){ve.error("Response time must be greater than 0");return}if(U<=0){ve.error("Resolution time must be greater than 0");return}const B={...m,responseTime:j,resolutionTime:U};delete B.responseTimeHours,delete B.responseTimeMinutes,delete B.resolutionTimeHours,delete B.resolutionTimeMinutes,f?(await gr.updateSLAPolicy(f._id,B),ve.success("SLA Policy updated successfully!")):(await gr.createSLAPolicy(B),ve.success("SLA Policy created successfully!")),E(),w()}catch(j){ve.error(j.message||"Failed to save SLA Policy")}},R=async T=>{if(window.confirm("Are you sure you want to delete this SLA Policy?"))try{await gr.deleteSLAPolicy(T),ve.success("SLA Policy deleted successfully!"),w()}catch(j){ve.error(j.message||"Failed to delete SLA Policy")}},O=T=>{switch(T){case"urgent":return"danger";case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"info"}},N=[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],L=T=>{if(!T&&T!==0)return"0h 0m";const j=Math.floor(T),U=Math.round((T-j)*60);return j>0&&U>0?`${j}h ${U}m`:j>0?`${j}h`:U>0?`${U}m`:"0h 0m"};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"SLA Policies"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage Service Level Agreement policies by organization and priority"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_n,{label:"Filter by Organization",value:i,onChange:T=>a(T.target.value),options:[{value:"",label:"All Organizations (Global)"},...t.map(T=>({value:T._id||T.id,label:T.name}))],className:"w-64"}),d.jsxs(nt,{transparent:!0,onClick:()=>M(),children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add SLA Policy"]})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading SLA policies..."})]}):n.length===0?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx(Js,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600 mb-2",children:"No SLA policies found"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Create your first SLA policy to get started"})]}):n.map(T=>d.jsxs(jt,{className:"p-6 border-l-4 border-primary-500 hover:shadow-lg transition-all duration-300",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.name||`${T.priority} Priority`}),d.jsx(pn,{variant:O(T.priority),children:T.priority})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:T.organization?.name||"Global Policy"}),T.description&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.description})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>M(T),className:"text-primary-600 hover:text-primary-700 transition-colors p-1",children:d.jsx(Tc,{size:18})}),d.jsx("button",{onClick:()=>R(T._id),className:"text-red-600 hover:text-red-700 transition-colors p-1",children:d.jsx(Fo,{size:18})})]})]}),d.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Response Time:"}),d.jsx("span",{className:"text-sm font-semibold text-gray-900",children:L(T.responseTime)})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Resolution Time:"}),d.jsx("span",{className:"text-sm font-semibold text-gray-900",children:L(T.resolutionTime)})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),d.jsx(pn,{variant:T.isActive?"success":"warning",children:T.isActive?"Active":"Inactive"})]})]})]},T._id))}),d.jsx(Ns,{isOpen:l,onClose:E,title:f?"Edit SLA Policy":"Create SLA Policy",size:"lg",children:d.jsxs("form",{onSubmit:A,className:"space-y-4",children:[d.jsx(bt,{label:"Policy Name",placeholder:"e.g., Standard Urgent Policy",value:m.name,onChange:T=>y({...m,name:T.target.value}),required:!0}),d.jsx(_n,{label:"Organization (Leave empty for Global Policy)",value:m.organization,onChange:T=>y({...m,organization:T.target.value}),options:[{value:"",label:"Global (All Organizations)"},...t.map(T=>({value:T._id||T.id,label:T.name}))]}),d.jsx(_n,{label:"Priority",value:m.priority,onChange:T=>y({...m,priority:T.target.value}),options:N,required:!0}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Response Time *"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx(bt,{type:"number",min:"0",placeholder:"Hours",value:m.responseTimeHours,onChange:T=>y({...m,responseTimeHours:T.target.value}),required:!0}),d.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Hours"})]}),d.jsxs("div",{children:[d.jsx(bt,{type:"number",min:"0",max:"59",placeholder:"Minutes",value:m.responseTimeMinutes,onChange:T=>{const j=T.target.value;(j===""||parseInt(j)>=0&&parseInt(j)<=59)&&y({...m,responseTimeMinutes:j})}}),d.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Minutes (0-59)"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resolution Time *"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx(bt,{type:"number",min:"0",placeholder:"Hours",value:m.resolutionTimeHours,onChange:T=>y({...m,resolutionTimeHours:T.target.value}),required:!0}),d.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Hours"})]}),d.jsxs("div",{children:[d.jsx(bt,{type:"number",min:"0",max:"59",placeholder:"Minutes",value:m.resolutionTimeMinutes,onChange:T=>{const j=T.target.value;(j===""||parseInt(j)>=0&&parseInt(j)<=59)&&y({...m,resolutionTimeMinutes:j})}}),d.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Minutes (0-59)"})]})]})]})]}),d.jsx(bt,{label:"Description (Optional)",placeholder:"Brief description of this SLA policy",value:m.description,onChange:T=>y({...m,description:T.target.value})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:T=>y({...m,isActive:T.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),d.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",transparent:!0,onClick:E,className:"flex-1",children:"Cancel"}),d.jsx(nt,{type:"submit",transparent:!0,className:"flex-1",children:f?"Update Policy":"Create Policy"})]})]})})]})})},Tue=()=>{const{user:n}=Fr(),e=n?.role==="admin",[t,r]=z.useState([]),[i,a]=z.useState([]),[s,o]=z.useState([]),[l,u]=z.useState(!0),[f,h]=z.useState(!1),[m,y]=z.useState(null),[b,w]=z.useState({name:"",description:"",departmentHead:"",organization:"",isActive:!0});z.useEffect(()=>{x(),_(),M()},[]);const x=async()=>{try{u(!0);const N=await Au.getAll();r(N)}catch(N){ve.error("Failed to load departments"),console.error(N)}finally{u(!1)}},_=async()=>{try{const N=await ga.getAll();a(N)}catch(N){console.error("Failed to load organizations",N)}},M=async()=>{try{const N=await nl.getAll();o(N)}catch(N){console.error("Failed to load users",N)}},E=(N=null)=>{if(console.log("handleOpenModal called with:",N),N)console.log("Setting editing department:",N),y(N),w({name:N.name||"",description:N.description||"",departmentHead:N.departmentHead?._id||N.departmentHead||"",organization:N.organization?._id||N.organization||"",isActive:N.isActive!==void 0?N.isActive:!0});else{y(null);const L=e?i[0]?._id||i[0]?.id||"":n?.organization?._id||n?.organization||"";w({name:"",description:"",departmentHead:"",organization:L,isActive:!0})}console.log("Opening modal, isModalOpen will be set to true"),h(!0)},A=()=>{h(!1),y(null),w({name:"",description:"",departmentHead:"",organization:"",isActive:!0})},R=async N=>{N.preventDefault();try{if(m){const L=m._id||m.id;if(!L){ve.error("Invalid department ID");return}await Au.update(L,b),ve.success("Department updated successfully!")}else await Au.create(b),ve.success("Department created successfully!");A(),x(),M()}catch(L){console.error("Error saving department:",L),ve.error(L.message||"Failed to save department")}},O=async N=>{if(console.log("handleDelete called with ID:",N),!N){console.error("No department ID provided"),ve.error("Invalid department ID");return}if(window.confirm("Are you sure you want to delete this department? All users in this department will be unassigned."))try{console.log("Calling API to delete department:",N),await Au.delete(N),console.log("Department deleted successfully"),ve.success("Department deleted successfully!"),x(),M()}catch(L){console.error("Error deleting department:",L),ve.error(L.message||"Failed to delete department")}};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Departments"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage departments and assign department heads"})]}),d.jsxs(nt,{transparent:!0,onClick:()=>E(),children:[d.jsx(Uo,{size:20,className:"mr-2"}),"Add Department"]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading departments..."})]}):t.length===0?d.jsxs("div",{className:"col-span-full text-center py-12",children:[d.jsx(Ub,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600 mb-2",children:"No departments found"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Create your first department to get started"})]}):t.map(N=>d.jsx(jt,{className:"p-6 border-l-4 border-primary-500 hover:shadow-lg transition-all duration-300 relative",style:{position:"relative"},children:d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.name}),d.jsx(pn,{variant:N.isActive?"success":"warning",children:N.isActive?"Active":"Inactive"})]}),N.description&&d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:N.description}),d.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Organization: ",N.organization?.name||"N/A"]}),N.departmentHead?d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx(qp,{size:14,className:"text-gray-400"}),d.jsxs("span",{className:"text-xs text-gray-600",children:["Head: ",N.departmentHead?.name||"N/A"]})]}):d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"No department head assigned"})]}),d.jsxs("div",{className:"flex gap-2",style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onClick:L=>{L.stopPropagation()},children:[d.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),console.log("Edit button clicked for department:",N),E(N)},className:"text-primary-600 hover:text-primary-700 transition-colors p-2 rounded hover:bg-primary-50 cursor-pointer",title:"Edit Department",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:d.jsx(Tc,{size:18})}),e&&d.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),console.log("Delete button clicked for department:",N);const T=N._id||N.id;console.log("Department ID:",T),T?O(T):(console.error("Invalid department ID:",N),ve.error("Invalid department ID"))},className:"text-red-600 hover:text-red-700 transition-colors p-2 rounded hover:bg-red-50 cursor-pointer",title:"Delete Department",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:d.jsx(Fo,{size:18})})]})]})},N._id))}),d.jsx(Ns,{isOpen:f,onClose:A,title:m?"Edit Department":"Create Department",size:"lg",children:d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsx(bt,{label:"Department Name",placeholder:"e.g., IT Support, HR, Finance",value:b.name,onChange:N=>w({...b,name:N.target.value}),required:!0}),d.jsx(bt,{label:"Description (Optional)",placeholder:"Brief description of the department",value:b.description,onChange:N=>w({...b,description:N.target.value})}),d.jsx(_n,{label:"Organization",value:b.organization,onChange:N=>w({...b,organization:N.target.value}),options:i.filter(N=>e||(N._id||N.id)===(n?.organization?._id||n?.organization)).map(N=>({value:N._id||N.id,label:N.name})),required:!0,disabled:!e&&n?.organization}),d.jsx(_n,{label:"Department Head (Optional)",value:b.departmentHead,onChange:N=>w({...b,departmentHead:N.target.value}),options:[{value:"",label:"No Department Head"},...s.filter(N=>N.role!=="department-head"||N.department===b.departmentHead).map(N=>({value:N._id||N.id,label:`${N.name} (${N.email})`}))]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isActive",checked:b.isActive,onChange:N=>w({...b,isActive:N.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),d.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx(nt,{type:"button",variant:"outline",transparent:!0,onClick:A,className:"flex-1",children:"Cancel"}),d.jsx(nt,{type:"submit",transparent:!0,className:"flex-1",children:m?"Update Department":"Create Department"})]})]})})]})})},Aue=()=>{const[n,e]=z.useState(null),[t,r]=z.useState(!1),[i,a]=z.useState(null),[s,o]=z.useState(""),[l,u]=z.useState(!1),f=A=>{if(A)if(A.type==="application/json"||A.name.endsWith(".json")){e(A);const R=new FileReader;R.onload=O=>{try{const N=JSON.parse(O.target.result);o(JSON.stringify(N,null,2))}catch{ve.error("Invalid JSON file"),e(null)}},R.readAsText(A)}else A.type==="text/csv"||A.name.endsWith(".csv")?e(A):(ve.error("Please select a CSV or JSON file"),e(null))},h=A=>{const R=A.target.files[0];f(R)},m=A=>{A.preventDefault(),A.stopPropagation(),u(!0)},y=A=>{A.preventDefault(),A.stopPropagation(),u(!1)},b=A=>{A.preventDefault(),A.stopPropagation(),u(!1);const R=A.dataTransfer.files;if(R&&R.length>0){const O=R[0];f(O)}},w=async()=>{if(!n&&!s.trim()){ve.error("Please select a file or paste JSON data");return}try{r(!0),a(null);let A=[];if(s.trim())try{A=JSON.parse(s),Array.isArray(A)||(A=[A])}catch{ve.error("Invalid JSON format"),r(!1);return}else if(n){if(n.type==="application/json"||n.name.endsWith(".json")){const O=await n.text();A=JSON.parse(O),Array.isArray(A)||(A=[A])}else if(n.type==="text/csv"||n.name.endsWith(".csv")){const O=await n.text();A=_(O)}}const R=await Vi.importTickets(A);a(R),ve.success(`Successfully imported ${R.success} tickets`),R.errors&&R.errors.length>0&&ve.error(`${R.errors.length} tickets failed to import`)}catch(A){console.error("Import error:",A),ve.error(A.message||"Failed to import tickets")}finally{r(!1)}},x=A=>{const R=[];let O="",N=!1;for(let L=0;L<A.length;L++){const T=A[L],j=A[L+1];T==='"'?N&&j==='"'?(O+='"',L++):N=!N:T===","&&!N?(R.push(O.trim()),O=""):O+=T}return R.push(O.trim()),R},_=A=>{const R=A.split(`
`).filter(L=>L.trim());if(R.length<2)return[];const O=x(R[0]).map(L=>L.replace(/^"|"$/g,"").trim().toLowerCase()),N=[];for(let L=1;L<R.length;L++){const T=x(R[L]).map(U=>U.replace(/^"|"$/g,"").trim());if(T.length!==O.length)continue;const j={};O.forEach((U,B)=>{j[U]=T[B]}),N.push({ticketId:j.ticketid||j.id,title:j.title||j.subject,description:j.description||j.body||"",category:j.category||"General",priority:j.priority||"medium",status:j.status||"open",createdAt:j.createdat||j.created||new Date().toISOString(),dueDate:j.duedate||j.due||null})}return N},M=()=>{const A=[{ticketId:1001,title:"Sample Ticket Title",description:"Sample ticket description",category:"IT Support",priority:"medium",status:"open",createdAt:new Date().toISOString(),dueDate:null},{ticketId:1002,title:"Another Sample Ticket",description:"Another sample ticket description",category:"General",priority:"high",status:"in-progress",createdAt:new Date().toISOString(),dueDate:new Date(Date.now()+6048e5).toISOString()}],R=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),O=URL.createObjectURL(R),N=document.createElement("a");N.href=O,N.download="ticket-import-template.json",N.click(),URL.revokeObjectURL(O),ve.success("JSON template downloaded")},E=()=>{const A=["ticketId","title","description","category","priority","status","createdAt","dueDate"],R=[["1001","Sample Ticket Title","Sample ticket description","IT Support","medium","open",new Date().toISOString(),""],["1002","Another Sample Ticket","Another sample ticket description","General","high","in-progress",new Date().toISOString(),new Date(Date.now()+6048e5).toISOString()]],O=[A.join(","),...R.map(j=>j.map(U=>{const B=String(U||"");return B.includes(",")||B.includes('"')||B.includes(`
`)?`"${B.replace(/"/g,'""')}"`:B}).join(","))].join(`
`),N=new Blob([O],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(N),T=document.createElement("a");T.href=L,T.download="ticket-import-template.csv",T.click(),URL.revokeObjectURL(L),ve.success("CSV template downloaded")};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Import Tickets"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Import tickets from external ticketing systems"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs(nt,{transparent:!0,variant:"outline",onClick:E,className:"animate-scale-in",children:[d.jsx(Uv,{size:20,className:"mr-2"}),"Download CSV Template"]}),d.jsxs(nt,{transparent:!0,variant:"outline",onClick:M,className:"animate-scale-in",children:[d.jsx(Uv,{size:20,className:"mr-2"}),"Download JSON Template"]})]})]}),d.jsx(jt,{className:"animate-slide-down",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import from File"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a CSV or JSON file containing ticket data. The system will automatically continue the ticket ID sequence."}),d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[d.jsx("p",{className:"text-xs text-blue-800 font-semibold mb-2",children:" Supported Formats:"}),d.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"CSV Format:"})," First row must contain headers: ",d.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"ticketId, title, description, category, priority, status, createdAt, dueDate"})]}),d.jsxs("p",{children:[d.jsx("strong",{children:"JSON Format:"})," Array of ticket objects with fields: ",d.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"ticketId, title, description, category, priority, status, createdAt, dueDate"})]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Note:"})," Download templates above to see the exact format with sample data."]})]})]}),d.jsx("div",{className:"flex items-center space-x-4",children:d.jsxs("label",{className:"flex-1 cursor-pointer",children:[d.jsx("input",{type:"file",accept:".csv,.json",onChange:h,className:"hidden",id:"file-upload"}),d.jsx("div",{className:`flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-xl transition-all duration-300 ${l?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-500"} bg-white/50 backdrop-blur-sm hover:bg-white/80`,onDragOver:m,onDragLeave:y,onDrop:b,children:d.jsxs("div",{className:"text-center",children:[d.jsx(fc,{className:`mx-auto h-8 w-8 mb-2 transition-colors ${l?"text-primary-500":"text-gray-400"}`}),d.jsx("span",{className:"text-sm text-gray-600",children:n?n.name:"Click to upload or drag and drop"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or JSON files only"})]})})]})})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Or Paste JSON Data"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Paste ticket data in JSON format directly"}),d.jsx("textarea",{value:s,onChange:A=>o(A.target.value),placeholder:'[{"ticketId": 1001, "title": "Ticket Title", "description": "Description", "category": "IT Support", "priority": "medium", "status": "open"}]',className:"w-full h-48 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(nt,{transparent:!0,onClick:w,disabled:t||!n&&!s.trim(),className:"min-w-[120px]",children:t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin mr-2",children:""}),"Importing..."]}):d.jsxs(d.Fragment,{children:[d.jsx(fc,{size:20,className:"mr-2"}),"Import Tickets"]})})})]})}),i&&d.jsxs(jt,{className:"animate-slide-down",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Import Results"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[d.jsx(Ra,{size:20}),d.jsxs("span",{className:"font-medium",children:["Successfully imported: ",i.success," tickets"]})]}),i.errors&&i.errors.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[d.jsx(Dv,{size:20}),d.jsxs("span",{className:"font-medium",children:["Failed to import: ",i.errors.length," tickets"]})]}),d.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:d.jsx("ul",{className:"space-y-2 text-sm",children:i.errors.map((A,R)=>d.jsxs("li",{className:"text-red-700",children:[d.jsxs("strong",{children:["Ticket ",A.ticketId||R+1,":"]})," ",A.message]},R))})})]})]})]})]})})},$U=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],Cue=()=>{const{user:n}=Fr(),[e,t]=z.useState("month"),[r,i]=z.useState("all"),[a,s]=z.useState([]),[o,l]=z.useState(null),[u,f]=z.useState([]),[h,m]=z.useState([]),[y,b]=z.useState([]),[w,x]=z.useState(null),[_,M]=z.useState([]),[E,A]=z.useState(!1);z.useEffect(()=>{n?.role==="admin"&&R()},[n]),z.useEffect(()=>{O()},[e,r]);const R=async()=>{try{const N=await ga.getAll();s(N)}catch(N){console.error("Failed to load organizations",N)}},O=async()=>{try{A(!0);const N=r!=="all"?r:null,[L,T,j,U,B,V]=await Promise.all([Kd.getDashboard(e,N),Kd.getStatusWise(e,N),Kd.getDepartmentWise(e,N),Kd.getTechnicianPerformance(e,N),Kd.getSLACompliance(e,N),Kd.getTrends(e,N,"day")]);l(L),f(T.data||[]),m(j.data||[]),b(U.data||[]),x(B),M(V.data||[])}catch(N){console.error("Failed to load analytics data",N),ve.error("Failed to load analytics data")}finally{A(!1)}};return!n||n.role!=="admin"?d.jsx(Ln,{children:d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Dv,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})]})}):d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Analytics & Reports"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive reporting and analytics dashboard"})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Period"}),d.jsx(_n,{value:e,onChange:N=>t(N.target.value),options:[{value:"day",label:"Daily"},{value:"week",label:"Weekly"},{value:"month",label:"Monthly"},{value:"year",label:"Yearly"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:r,onChange:N=>i(N.target.value),options:[{value:"all",label:"All Organizations"},...a.map(N=>({value:N._id||N.id,label:N.name}))]})]})]})}),E?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]}):d.jsxs(d.Fragment,{children:[o&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(jt,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Tickets"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalTickets})]}),d.jsx(Bb,{className:"h-8 w-8 text-primary-600"})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"SLA Compliance"}),d.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.slaMetrics?.complianceRate||0,"%"]})]}),d.jsx(Ra,{className:"h-8 w-8 text-green-600"})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"SLA Breaches"}),d.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.slaMetrics?.breached||0})]}),d.jsx(Dv,{className:"h-8 w-8 text-red-600"})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Active Technicians"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.technicianPerformance?.length||0})]}),d.jsx(Tz,{className:"h-8 w-8 text-blue-600"})]})})]}),u.length>0&&d.jsxs(jt,{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status-wise Ticket Count"}),d.jsx(xv,{width:"100%",height:300,children:d.jsxs(X6,{data:u,children:[d.jsx(D1,{strokeDasharray:"3 3"}),d.jsx(Lf,{dataKey:"status"}),d.jsx(Df,{}),d.jsx(es,{}),d.jsx(ku,{}),d.jsx(Xu,{dataKey:"count",fill:"#3b82f6"})]})})]}),h.length>0&&d.jsxs(jt,{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department-wise Tickets"}),d.jsx(xv,{width:"100%",height:300,children:d.jsxs(Y6,{children:[d.jsx(gl,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({departmentName:N,count:L})=>`${N}: ${L}`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:h.map((N,L)=>d.jsx(Qp,{fill:$U[L%$U.length]},`cell-${L}`))}),d.jsx(es,{})]})})]}),w&&d.jsxs(jt,{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SLA Compliance Metrics"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response SLA"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Compliant:"}),d.jsx("span",{className:"font-semibold text-green-600",children:w.responseSLA?.compliant||0})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Breached:"}),d.jsx("span",{className:"font-semibold text-red-600",children:w.responseSLA?.breached||0})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Compliance Rate:"}),d.jsxs("span",{className:"font-semibold",children:[w.responseSLA?.complianceRate||0,"%"]})]})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resolution SLA"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Compliant:"}),d.jsx("span",{className:"font-semibold text-green-600",children:w.resolutionSLA?.compliant||0})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Breached:"}),d.jsx("span",{className:"font-semibold text-red-600",children:w.resolutionSLA?.breached||0})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Compliance Rate:"}),d.jsxs("span",{className:"font-semibold",children:[w.resolutionSLA?.complianceRate||0,"%"]})]})]})]})]})]}),y.length>0&&d.jsxs(jt,{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Technician Performance"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Technician"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Assigned"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Resolved"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closed"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Resolution Rate"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((N,L)=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N.technicianName||"Unknown"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.totalAssigned}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.resolved}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.closed}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsxs(pn,{variant:N.resolutionRate>=80?"success":N.resolutionRate>=60?"warning":"danger",children:[N.resolutionRate?.toFixed(1)||0,"%"]})})]},L))})]})})]}),_.length>0&&d.jsxs(jt,{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ticket Trends"}),d.jsx(xv,{width:"100%",height:300,children:d.jsxs(Ile,{data:_,children:[d.jsx(D1,{strokeDasharray:"3 3"}),d.jsx(Lf,{dataKey:"date"}),d.jsx(Df,{}),d.jsx(es,{}),d.jsx(ku,{}),d.jsx(Pu,{type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Total"}),d.jsx(Pu,{type:"monotone",dataKey:"open",stroke:"#f59e0b",name:"Open"}),d.jsx(Pu,{type:"monotone",dataKey:"resolved",stroke:"#10b981",name:"Resolved"}),d.jsx(Pu,{type:"monotone",dataKey:"closed",stroke:"#6b7280",name:"Closed"})]})})]})]})]})})},Pue=()=>{const{user:n}=Fr(),[e,t]=z.useState([]),[r,i]=z.useState([]),[a,s]=z.useState(!1),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState(null),[y,b]=z.useState({name:"",organization:"",permissions:["read"],expiresAt:"",rateLimit:1e3});z.useEffect(()=>{n?.role==="admin"&&(w(),x())},[n]);const w=async()=>{try{s(!0);const O=await Sp.getAll();t(O)}catch(O){console.error("Failed to load API keys",O),ve.error("Failed to load API keys")}finally{s(!1)}},x=async()=>{try{const O=await ga.getAll();i(O)}catch(O){console.error("Failed to load organizations",O)}},_=async()=>{try{if(!y.name){ve.error("API key name is required");return}const O={...y,organization:y.organization||null,expiresAt:y.expiresAt?new Date(y.expiresAt).toISOString():null},N=await Sp.create(O);m(N.key),l(!1),f(!0),b({name:"",organization:"",permissions:["read"],expiresAt:"",rateLimit:1e3}),w(),ve.success("API key created successfully!")}catch(O){console.error("Failed to create API key",O),ve.error(O.message||"Failed to create API key")}},M=O=>{navigator.clipboard.writeText(O),ve.success("Copied to clipboard!")},E=async O=>{if(window.confirm("Are you sure you want to delete this API key? This action cannot be undone."))try{await Sp.delete(O),ve.success("API key deleted successfully"),w()}catch(N){console.error("Failed to delete API key",N),ve.error("Failed to delete API key")}},A=async O=>{try{await Sp.revoke(O),ve.success("API key revoked successfully"),w()}catch(N){console.error("Failed to revoke API key",N),ve.error("Failed to revoke API key")}},R=async O=>{try{await Sp.activate(O),ve.success("API key activated successfully"),w()}catch(N){console.error("Failed to activate API key",N),ve.error("Failed to activate API key")}};return!n||n.role!=="admin"?d.jsx(Ln,{children:d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})}):d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"API Keys"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage API keys for external integrations"})]}),d.jsxs(nt,{transparent:!0,onClick:()=>l(!0),className:"flex items-center gap-2",children:[d.jsx(Uo,{size:18}),"Create API Key"]})]}),d.jsx(jt,{children:a?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading API keys..."})]}):e.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(yv,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No API keys found. Create one to get started."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Key"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permissions"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Used"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usage"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(O=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.name}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:[O.keyPrefix,d.jsx(nt,{transparent:!0,onClick:()=>M(O.keyPrefix),className:"ml-2 p-1",type:"button",children:d.jsx(zR,{size:14})})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.organization?.name||"Global"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"flex gap-1",children:O.permissions.map(N=>d.jsx(pn,{variant:"info",className:"text-xs",children:N},N))})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.isActive?d.jsxs(pn,{variant:"success",children:[d.jsx(Ra,{size:12,className:"mr-1"}),"Active"]}):d.jsxs(pn,{variant:"danger",children:[d.jsx(Fv,{size:12,className:"mr-1"}),"Revoked"]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.lastUsed?fn(new Date(O.lastUsed),"MMM dd, yyyy HH:mm"):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.usageCount||0}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex gap-2",children:[O.isActive?d.jsx(nt,{transparent:!0,onClick:()=>A(O._id),className:"text-red-600 hover:text-red-700",type:"button",children:"Revoke"}):d.jsx(nt,{transparent:!0,onClick:()=>R(O._id),className:"text-green-600 hover:text-green-700",type:"button",children:"Activate"}),d.jsx(nt,{transparent:!0,onClick:()=>E(O._id),className:"text-red-600 hover:text-red-700",type:"button",children:d.jsx(Fo,{size:16})})]})})]},O._id))})]})})}),d.jsx(Ns,{isOpen:o,onClose:()=>l(!1),title:"Create API Key",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name"}),d.jsx(bt,{value:y.name,onChange:O=>b({...y,name:O.target.value}),placeholder:"e.g., Production API Key"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:y.organization,onChange:O=>b({...y,organization:O.target.value}),options:[{value:"",label:"Global (All Organizations)"},...r.map(O=>({value:O._id||O.id,label:O.name}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Permissions"}),d.jsx(_n,{value:y.permissions.join(","),onChange:O=>b({...y,permissions:O.target.value.split(",")}),options:[{value:"read",label:"Read Only"},{value:"read,write",label:"Read & Write"},{value:"read,write,admin",label:"Full Access"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expires At (Optional)"}),d.jsx(bt,{type:"datetime-local",value:y.expiresAt,onChange:O=>b({...y,expiresAt:O.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rate Limit (requests/hour)"}),d.jsx(bt,{type:"number",value:y.rateLimit,onChange:O=>b({...y,rateLimit:parseInt(O.target.value)||1e3})})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(nt,{transparent:!0,onClick:()=>l(!1),variant:"outline",children:"Cancel"}),d.jsx(nt,{transparent:!0,onClick:_,children:"Create"})]})]})}),d.jsx(Ns,{isOpen:u,onClose:()=>f(!1),title:"API Key Created",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[d.jsx("p",{className:"text-sm text-yellow-800 font-semibold mb-2",children:" Important: Save this key now!"}),d.jsx("p",{className:"text-sm text-yellow-700",children:"This is the only time you'll be able to see the full API key. Make sure to copy and store it securely."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your API Key"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(bt,{value:h||"",readOnly:!0,className:"font-mono"}),d.jsxs(nt,{transparent:!0,onClick:()=>M(h),className:"flex items-center gap-2",type:"button",children:[d.jsx(zR,{size:16}),"Copy"]})]})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(nt,{transparent:!0,onClick:()=>f(!1),children:"I've Saved It"})})]})})]})})},Nue=()=>{const{user:n}=Fr(),[e,t]=z.useState([]),[r,i]=z.useState([]),[a,s]=z.useState([]),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState(null),[y,b]=z.useState({name:"",type:"daily-open-tickets",organization:"",isEnabled:!0,schedule:{time:"09:00",timezone:"UTC",dayOfWeek:null,dayOfMonth:null},recipients:{admins:!0,organizationManagers:!0,departmentHeads:!0,technicians:!1},reportFormat:["html"],emailTemplate:""});z.useEffect(()=>{n?.role==="admin"&&w()},[n]);const w=async()=>{try{l(!0);const[N,L,T]=await Promise.all([Zd.getAll(),Ap.getAll(),ga.getAll()]);t(N),i(L),s(T)}catch(N){console.error("Failed to load data",N),ve.error("Failed to load data")}finally{l(!1)}},x=()=>{m(null),b({name:"",type:"daily-open-tickets",organization:"",isEnabled:!0,schedule:{time:"09:00",timezone:"UTC",dayOfWeek:null,dayOfMonth:null},recipients:{admins:!0,organizationManagers:!0,departmentHeads:!0,technicians:!1},reportFormat:["html"],emailTemplate:""}),f(!0)},_=N=>{m(N),b({name:N.name,type:N.type,organization:N.organization?._id||N.organization||"",isEnabled:N.isEnabled,schedule:N.schedule,recipients:N.recipients,reportFormat:N.reportFormat,emailTemplate:N.emailTemplate?._id||N.emailTemplate||""}),f(!0)},M=async()=>{try{if(!y.name){ve.error("Name is required");return}const N={...y,organization:y.organization||null,emailTemplate:y.emailTemplate||null};h?(await Zd.update(h._id,N),ve.success("Automation updated successfully")):(await Zd.create(N),ve.success("Automation created successfully")),f(!1),w()}catch(N){console.error("Failed to save automation",N),ve.error(N.message||"Failed to save automation")}},E=async N=>{if(window.confirm("Are you sure you want to delete this automation?"))try{await Zd.delete(N),ve.success("Automation deleted successfully"),w()}catch(L){console.error("Failed to delete automation",L),ve.error("Failed to delete automation")}},A=async N=>{try{await Zd.run(N),ve.success("Automation run triggered successfully")}catch(L){console.error("Failed to run automation",L),ve.error("Failed to run automation")}},R=async N=>{try{await Zd.update(N._id,{isEnabled:!N.isEnabled}),ve.success(`Automation ${N.isEnabled?"disabled":"enabled"}`),w()}catch(L){console.error("Failed to toggle automation",L),ve.error("Failed to toggle automation")}};if(!n||n.role!=="admin")return d.jsx(Ln,{children:d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})});const O=N=>({"daily-open-tickets":"Daily Open Tickets","daily-report":"Daily Report","weekly-report":"Weekly Report","monthly-report":"Monthly Report"})[N]||N;return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Email Automation"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage automated email reports and notifications"})]}),d.jsxs(nt,{transparent:!0,onClick:x,className:"flex items-center gap-2",children:[d.jsx(Uo,{size:18}),"Create Automation"]})]}),d.jsx(jt,{children:o?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading automations..."})]}):e.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Ef,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No automations found. Create one to get started."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Schedule"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Sent"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(N=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O(N.type)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.organization?.name||"Global"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Js,{size:14}),N.schedule?.time||"N/A",N.type==="weekly-report"&&N.schedule?.dayOfWeek!==null&&d.jsxs("span",{className:"text-xs",children:["(Day ",N.schedule.dayOfWeek,")"]}),N.type==="monthly-report"&&N.schedule?.dayOfMonth!==null&&d.jsxs("span",{className:"text-xs",children:["(Day ",N.schedule.dayOfMonth,")"]})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.isEnabled?d.jsxs(pn,{variant:"success",children:[d.jsx(Ra,{size:12,className:"mr-1"}),"Enabled"]}):d.jsxs(pn,{variant:"danger",children:[d.jsx(Fv,{size:12,className:"mr-1"}),"Disabled"]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.lastSent?fn(new Date(N.lastSent),"MMM dd, yyyy HH:mm"):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(nt,{transparent:!0,onClick:()=>A(N._id),className:"text-blue-600 hover:text-blue-700",type:"button",title:"Run Now",children:d.jsx(Ez,{size:16})}),d.jsx(nt,{transparent:!0,onClick:()=>_(N),className:"text-primary-600 hover:text-primary-700",type:"button",title:"Edit",children:d.jsx(Tc,{size:16})}),d.jsx(nt,{transparent:!0,onClick:()=>R(N),className:N.isEnabled?"text-yellow-600 hover:text-yellow-700":"text-green-600 hover:text-green-700",type:"button",title:N.isEnabled?"Disable":"Enable",children:N.isEnabled?d.jsx(Fv,{size:16}):d.jsx(Ra,{size:16})}),d.jsx(nt,{transparent:!0,onClick:()=>E(N._id),className:"text-red-600 hover:text-red-700",type:"button",title:"Delete",children:d.jsx(Fo,{size:16})})]})})]},N._id))})]})})}),d.jsx(Ns,{isOpen:u,onClose:()=>f(!1),title:h?"Edit Automation":"Create Automation",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name"}),d.jsx(bt,{value:y.name,onChange:N=>b({...y,name:N.target.value}),placeholder:"e.g., Daily Open Tickets Report"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type"}),d.jsx(_n,{value:y.type,onChange:N=>{const L=N.target.value;b({...y,type:L,recipients:{...y.recipients,technicians:L==="daily-open-tickets"}})},options:[{value:"daily-open-tickets",label:"Daily Open Tickets"},{value:"daily-report",label:"Daily Report"},{value:"weekly-report",label:"Weekly Report"},{value:"monthly-report",label:"Monthly Report"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:y.organization,onChange:N=>b({...y,organization:N.target.value}),options:[{value:"",label:"Global (All Organizations)"},...a.map(N=>({value:N._id||N.id,label:N.name}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Schedule Time (HH:mm)"}),d.jsx(bt,{type:"time",value:y.schedule.time,onChange:N=>b({...y,schedule:{...y.schedule,time:N.target.value}})})]}),y.type==="weekly-report"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Day of Week (0=Sunday, 1=Monday, etc.)"}),d.jsx(bt,{type:"number",min:"0",max:"6",value:y.schedule.dayOfWeek||"",onChange:N=>b({...y,schedule:{...y.schedule,dayOfWeek:parseInt(N.target.value)||null}})})]}),y.type==="monthly-report"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Day of Month (1-31)"}),d.jsx(bt,{type:"number",min:"1",max:"31",value:y.schedule.dayOfMonth||"",onChange:N=>b({...y,schedule:{...y.schedule,dayOfMonth:parseInt(N.target.value)||null}})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Recipients"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:y.recipients.admins,onChange:N=>b({...y,recipients:{...y.recipients,admins:N.target.checked}}),className:"mr-2"}),"Admins"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:y.recipients.organizationManagers,onChange:N=>b({...y,recipients:{...y.recipients,organizationManagers:N.target.checked}}),className:"mr-2"}),"Organization Managers"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:y.recipients.departmentHeads,onChange:N=>b({...y,recipients:{...y.recipients,departmentHeads:N.target.checked}}),className:"mr-2"}),"Department Heads"]}),y.type==="daily-open-tickets"&&d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:y.recipients.technicians,onChange:N=>b({...y,recipients:{...y.recipients,technicians:N.target.checked}}),className:"mr-2"}),"Technicians"]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Template (Optional)"}),d.jsx(_n,{value:y.emailTemplate,onChange:N=>b({...y,emailTemplate:N.target.value}),options:[{value:"",label:"Use Default Template"},...r.filter(N=>N.type===y.type).map(N=>({value:N._id||N.id,label:N.name}))]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(nt,{transparent:!0,onClick:()=>f(!1),variant:"outline",children:"Cancel"}),d.jsx(nt,{transparent:!0,onClick:M,children:h?"Update":"Create"})]})]})})]})})},Oue=()=>{const{user:n}=Fr(),[e,t]=z.useState(null),[r,i]=z.useState([]),[a,s]=z.useState([]),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState(!1),[y,b]=z.useState(""),[w,x]=z.useState({isEnabled:!1,webhookUrl:"",botId:"",tenantId:"",channelId:"",channelName:"",notifications:{ticketCreated:!0,ticketUpdated:!0,ticketResolved:!0,ticketClosed:!0,slaBreach:!0,ticketAssigned:!0,ticketCommented:!1},workingHours:{enabled:!1,startTime:"09:00",endTime:"17:00",timezone:"UTC",daysOfWeek:[1,2,3,4,5]},departmentRouting:[]});z.useEffect(()=>{n?.role==="admin"&&_()},[n,y]);const _=async()=>{try{l(!0);const[T,j,U]=await Promise.all([dv.getConfig(y||null),ga.getAll(),Au.getAll()]);T._id?(t(T),x({isEnabled:T.isEnabled||!1,webhookUrl:T.webhookUrl||"",botId:T.botId||"",tenantId:T.tenantId||"",channelId:T.channelId||"",channelName:T.channelName||"",notifications:T.notifications||w.notifications,workingHours:T.workingHours||w.workingHours,departmentRouting:T.departmentRouting||[]})):t(null),i(j),s(U)}catch(T){console.error("Failed to load Teams settings",T),ve.error("Failed to load Teams settings")}finally{l(!1)}},M=async()=>{try{if(!w.webhookUrl&&w.isEnabled){ve.error("Webhook URL is required when integration is enabled");return}f(!0),e?._id?(await dv.updateConfig(e._id,w),ve.success("Teams integration settings updated successfully")):(await dv.saveConfig({...w,organization:y||null},y||null),ve.success("Teams integration settings saved successfully")),_()}catch(T){console.error("Failed to save Teams settings",T),ve.error(T.message||"Failed to save settings")}finally{f(!1)}},E=async()=>{try{if(!w.webhookUrl){ve.error("Please enter a webhook URL first");return}m(!0),await dv.testWebhook(w.webhookUrl,y||null),ve.success("Test message sent to Teams channel! Check your Teams channel to verify."),_()}catch(T){console.error("Failed to test Teams webhook",T),ve.error(T.message||"Failed to send test message. Please check your webhook URL.")}finally{m(!1)}},A=()=>{x({...w,isEnabled:!w.isEnabled})},R=()=>{x({...w,departmentRouting:[...w.departmentRouting,{department:"",channelId:"",channelName:""}]})},O=T=>{x({...w,departmentRouting:w.departmentRouting.filter((j,U)=>U!==T)})},N=(T,j,U)=>{const B=[...w.departmentRouting];B[T]={...B[T],[j]:U},x({...w,departmentRouting:B})};if(!n||n.role!=="admin")return d.jsx(Ln,{children:d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})});const L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Microsoft Teams Integration"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Configure Microsoft Teams bot and notifications"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(pn,{variant:w.isEnabled?"success":"danger",children:w.isEnabled?d.jsxs(d.Fragment,{children:[d.jsx(Ra,{size:12,className:"mr-1"}),"Enabled"]}):d.jsxs(d.Fragment,{children:[d.jsx(Fv,{size:12,className:"mr-1"}),"Disabled"]})}),d.jsx(nt,{transparent:!0,onClick:A,variant:"outline",className:"text-sm",children:w.isEnabled?"Disable":"Enable"})]})]}),d.jsx(jt,{className:"bg-blue-50 border-blue-200",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(N$,{className:"text-blue-600 mt-0.5",size:20}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"How to Get Your Webhook URL"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[d.jsx("li",{children:"Open Microsoft Teams and navigate to your channel"}),d.jsx("li",{children:"Click the three dots () next to the channel name"}),d.jsx("li",{children:'Select "Connectors" from the menu'}),d.jsx("li",{children:'Search for "Incoming Webhook" and click "Configure"'}),d.jsx("li",{children:'Give it a name and click "Create"'}),d.jsx("li",{children:"Copy the webhook URL and paste it below"})]})]})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Integration Settings"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Configure Microsoft Teams webhook and bot settings"})]}),n.role==="admin"&&r.length>0&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:y,onChange:T=>{b(T.target.value)},options:[{value:"",label:"Global (All Organizations)"},...r.map(T=>({value:T._id||T.id,label:T.name}))]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Webhook URL ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx(bt,{value:w.webhookUrl,onChange:T=>x({...w,webhookUrl:T.target.value}),placeholder:"https://outlook.office.com/webhook/...",disabled:o}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from your Teams channel connector settings (see instructions above)"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bot ID (Optional)"}),d.jsx(bt,{value:w.botId,onChange:T=>x({...w,botId:T.target.value}),placeholder:"Bot Application ID",disabled:o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tenant ID (Optional)"}),d.jsx(bt,{value:w.tenantId,onChange:T=>x({...w,tenantId:T.target.value}),placeholder:"Azure AD Tenant ID",disabled:o})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Channel ID (Optional)"}),d.jsx(bt,{value:w.channelId,onChange:T=>x({...w,channelId:T.target.value}),placeholder:"Teams Channel ID",disabled:o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Channel Name (Optional)"}),d.jsx(bt,{value:w.channelName,onChange:T=>x({...w,channelName:T.target.value}),placeholder:"e.g., IT Support",disabled:o})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Notification Settings"}),d.jsxs("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketCreated,onChange:T=>x({...w,notifications:{...w.notifications,ticketCreated:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is created"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketUpdated,onChange:T=>x({...w,notifications:{...w.notifications,ticketUpdated:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is updated"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketResolved,onChange:T=>x({...w,notifications:{...w.notifications,ticketResolved:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is resolved"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketClosed,onChange:T=>x({...w,notifications:{...w.notifications,ticketClosed:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is closed"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketAssigned,onChange:T=>x({...w,notifications:{...w.notifications,ticketAssigned:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is assigned"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.slaBreach,onChange:T=>x({...w,notifications:{...w.notifications,slaBreach:T.target.checked}}),className:"mr-2",disabled:o}),"Notify on SLA breach"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.notifications.ticketCommented,onChange:T=>x({...w,notifications:{...w.notifications,ticketCommented:T.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is commented"]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Working Hours (Optional)"}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.workingHours.enabled,onChange:T=>x({...w,workingHours:{...w.workingHours,enabled:T.target.checked}}),className:"mr-2",disabled:o}),"Enable working hours restriction"]}),w.workingHours.enabled&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start Time"}),d.jsx(bt,{type:"time",value:w.workingHours.startTime,onChange:T=>x({...w,workingHours:{...w.workingHours,startTime:T.target.value}}),disabled:o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End Time"}),d.jsx(bt,{type:"time",value:w.workingHours.endTime,onChange:T=>x({...w,workingHours:{...w.workingHours,endTime:T.target.value}}),disabled:o})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-2",children:"Days of Week"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((T,j)=>d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:w.workingHours.daysOfWeek.includes(j),onChange:U=>{const B=[...w.workingHours.daysOfWeek];if(U.target.checked)B.push(j);else{const V=B.indexOf(j);V>-1&&B.splice(V,1)}x({...w,workingHours:{...w.workingHours,daysOfWeek:B.sort()}})},className:"mr-1",disabled:o}),d.jsx("span",{className:"text-xs",children:T.substring(0,3)})]},j))})]})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Department Routing (Optional)"}),d.jsx(nt,{transparent:!0,onClick:R,variant:"outline",className:"text-xs",type:"button",children:"Add Route"})]}),d.jsxs("div",{className:"space-y-2",children:[w.departmentRouting.map((T,j)=>d.jsxs("div",{className:"flex gap-2 items-end bg-gray-50 p-3 rounded-lg",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Department"}),d.jsx(_n,{value:T.department?._id||T.department||"",onChange:U=>N(j,"department",U.target.value),options:[{value:"",label:"Select Department"},...a.map(U=>({value:U._id||U.id,label:U.name}))]})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Channel Name"}),d.jsx(bt,{value:T.channelName||"",onChange:U=>N(j,"channelName",U.target.value),placeholder:"Channel name"})]}),d.jsx(nt,{transparent:!0,onClick:()=>O(j),variant:"outline",className:"text-red-600",type:"button",children:"Remove"})]},j)),w.departmentRouting.length===0&&d.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No department routes configured. All notifications will go to the main webhook."})]})]}),e?.lastTested&&d.jsxs("div",{className:"text-sm text-gray-600",children:["Last tested: ",fn(new Date(e.lastTested),"MMM dd, yyyy HH:mm")]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(nt,{transparent:!0,onClick:E,variant:"outline",disabled:o||u||h||!w.webhookUrl,className:"flex items-center gap-2",children:[d.jsx(Ez,{size:16}),h?"Testing...":"Test Webhook"]}),d.jsxs(nt,{transparent:!0,onClick:M,disabled:o||u||h,className:"flex items-center gap-2",children:[d.jsx(jP,{size:16}),u?"Saving...":"Save Settings"]})]})]})})]})})},Rue=()=>{const{user:n}=Fr(),[e,t]=z.useState([]),[r,i]=z.useState([]),[a,s]=z.useState([]),[o,l]=z.useState(!1),[u,f]=z.useState(!1),[h,m]=z.useState(null),[y,b]=z.useState(""),[w,x]=z.useState({question:"",answer:"",keywords:"",category:"general",organization:"",department:"",priority:0});z.useEffect(()=>{n?.role==="admin"&&_()},[n]);const _=async()=>{try{l(!0);const[N,L,T]=await Promise.all([uv.getAll(),ga.getAll(),Au.getAll()]);t(N),i(L),s(T)}catch(N){console.error("Failed to load data",N),ve.error("Failed to load FAQs")}finally{l(!1)}},M=()=>{m(null),x({question:"",answer:"",keywords:"",category:"general",organization:"",department:"",priority:0}),f(!0)},E=N=>{m(N),x({question:N.question,answer:N.answer,keywords:(N.keywords||[]).join(", "),category:N.category,organization:N.organization?._id||N.organization||"",department:N.department?._id||N.department||"",priority:N.priority||0}),f(!0)},A=async()=>{try{if(!w.question||!w.answer){ve.error("Question and answer are required");return}const N={...w,keywords:w.keywords.split(",").map(L=>L.trim()).filter(L=>L),organization:w.organization||null,department:w.department||null};h?(await uv.update(h._id,N),ve.success("FAQ updated successfully")):(await uv.create(N),ve.success("FAQ created successfully")),f(!1),_()}catch(N){console.error("Failed to save FAQ",N),ve.error(N.message||"Failed to save FAQ")}},R=async N=>{if(window.confirm("Are you sure you want to delete this FAQ?"))try{await uv.delete(N),ve.success("FAQ deleted successfully"),_()}catch(L){console.error("Failed to delete FAQ",L),ve.error("Failed to delete FAQ")}},O=e.filter(N=>{if(!y)return!0;const L=y.toLowerCase();return N.question.toLowerCase().includes(L)||N.answer.toLowerCase().includes(L)||(N.keywords||[]).some(T=>T.toLowerCase().includes(L))});return!n||n.role!=="admin"?d.jsx(Ln,{children:d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})}):d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"FAQ Management"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage frequently asked questions for the chatbot"})]}),d.jsxs(nt,{transparent:!0,onClick:M,className:"flex items-center gap-2",children:[d.jsx(Uo,{size:18}),"Create FAQ"]})]}),d.jsx(jt,{children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tf,{className:"text-gray-400",size:20}),d.jsx(bt,{value:y,onChange:N=>b(N.target.value),placeholder:"Search FAQs...",className:"flex-1"})]})}),d.jsx(jt,{children:o?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading FAQs..."})]}):O.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(wz,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No FAQs found. Create one to get started."})]}):d.jsx("div",{className:"space-y-4",children:O.map(N=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:N.question}),d.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded",children:N.category}),N.priority>0&&d.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded",children:["Priority ",N.priority]})]}),d.jsx("p",{className:"text-gray-600 text-sm mb-2",children:N.answer}),N.keywords&&N.keywords.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:N.keywords.map((L,T)=>d.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:L},T))}),d.jsxs("div",{className:"text-xs text-gray-500",children:[N.organization?.name||"Global","  Views: ",N.viewCount||0,"  Helpful: ",N.helpfulCount||0]})]}),d.jsxs("div",{className:"flex gap-2 ml-4",children:[d.jsx(nt,{transparent:!0,onClick:()=>E(N),className:"text-primary-600 hover:text-primary-700",type:"button",children:d.jsx(Tc,{size:16})}),d.jsx(nt,{transparent:!0,onClick:()=>R(N._id),className:"text-red-600 hover:text-red-700",type:"button",children:d.jsx(Fo,{size:16})})]})]})},N._id))})}),d.jsx(Ns,{isOpen:u,onClose:()=>f(!1),title:h?"Edit FAQ":"Create FAQ",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Question"}),d.jsx(bt,{value:w.question,onChange:N=>x({...w,question:N.target.value}),placeholder:"e.g., How do I reset my password?"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Answer"}),d.jsx("textarea",{value:w.answer,onChange:N=>x({...w,answer:N.target.value}),placeholder:"Provide a detailed answer...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Keywords (comma-separated)"}),d.jsx(bt,{value:w.keywords,onChange:N=>x({...w,keywords:N.target.value}),placeholder:"password, reset, login, account"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),d.jsx(_n,{value:w.category,onChange:N=>x({...w,category:N.target.value}),options:[{value:"general",label:"General"},{value:"password",label:"Password"},{value:"vpn",label:"VPN"},{value:"email",label:"Email"},{value:"hr",label:"HR"},{value:"it",label:"IT Support"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:w.organization,onChange:N=>x({...w,organization:N.target.value}),options:[{value:"",label:"Global (All Organizations)"},...r.map(N=>({value:N._id||N.id,label:N.name}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Department (Optional)"}),d.jsx(_n,{value:w.department,onChange:N=>x({...w,department:N.target.value}),options:[{value:"",label:"All Departments"},...a.map(N=>({value:N._id||N.id,label:N.name}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority (0-10, higher = matched first)"}),d.jsx(bt,{type:"number",min:"0",max:"10",value:w.priority,onChange:N=>x({...w,priority:parseInt(N.target.value)||0})})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(nt,{transparent:!0,onClick:()=>f(!1),variant:"outline",children:"Cancel"}),d.jsx(nt,{transparent:!0,onClick:A,children:h?"Update":"Create"})]})]})})]})})},kue=()=>{const{user:n}=Fr(),[e,t]=z.useState([]),[r,i]=z.useState([]),[a,s]=z.useState(!1),[o,l]=z.useState(null),[u,f]=z.useState([]),[h,m]=z.useState({userId:"",status:"",search:""});z.useEffect(()=>{n&&(n.role==="admin"||n.role==="technician")&&(y(),n.role==="admin"&&b())},[n,h]);const y=async()=>{try{s(!0);let M=await yf.getHistory(h.userId||null);if(h.status&&(M=M.filter(E=>E.status===h.status)),h.search){const E=h.search.toLowerCase();M=M.filter(A=>A.sessionId.toLowerCase().includes(E)||A.user?.name?.toLowerCase().includes(E)||A.user?.email?.toLowerCase().includes(E))}t(M)}catch(_){console.error("Failed to load chat sessions",_),ve.error("Failed to load chat history")}finally{s(!1)}},b=async()=>{try{const _=await nl.getAll();i(_)}catch(_){console.error("Failed to load users",_)}},w=async _=>{try{s(!0);const M=await yf.getSession(_);if(M&&M.session)l(M.session),f(M.messages||[]);else{const E=e.find(A=>A.sessionId===_);if(E){l(E);try{const R=(await yf.getHistory(null,100)).find(O=>O.sessionId===_)?.messages||[];f(R)}catch(A){console.error("Failed to load messages",A),f([])}}}}catch(M){console.error("Failed to load session details",M),ve.error(M.message||"Failed to load session details");const E=e.find(A=>A.sessionId===_);E&&l(E)}finally{s(!1)}},x=_=>({active:"info",resolved:"success",escalated:"warning",closed:"danger"})[_]||"info";return!n||n.role!=="admin"&&n.role!=="technician"?d.jsx(Ln,{children:d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600",children:"Access denied. Admin or Technician access required."})})}):d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Chat History"}),d.jsx("p",{className:"text-sm text-gray-600",children:"View and manage chat conversations"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[d.jsx(jt,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.role==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"User"}),d.jsx(_n,{value:h.userId,onChange:_=>m({...h,userId:_.target.value}),options:[{value:"",label:"All Users"},...r.map(_=>({value:_._id||_.id,label:`${_.name} (${_.email})`}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),d.jsx(_n,{value:h.status,onChange:_=>m({...h,status:_.target.value}),options:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"escalated",label:"Escalated"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tf,{className:"text-gray-400",size:18}),d.jsx(bt,{value:h.search,onChange:_=>m({...h,search:_.target.value}),placeholder:"Search sessions...",className:"flex-1"})]})]})]})}),d.jsx(jt,{children:a?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading chat sessions..."})]}):e.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Ru,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No chat sessions found"})]}):d.jsx("div",{className:"space-y-2",children:e.map(_=>d.jsx("div",{onClick:()=>w(_.sessionId),className:`p-4 border rounded-lg cursor-pointer transition-all ${o?._id===_._id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300 hover:bg-gray-50"}`,children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(qp,{size:16,className:"text-gray-400"}),d.jsx("span",{className:"font-semibold text-gray-900",children:_.user?.name||"Unknown User"}),d.jsx(pn,{variant:x(_.status),children:_.status})]}),d.jsx("p",{className:"text-sm text-gray-600",children:_.user?.email}),_.ticketId&&d.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Ticket #",_.ticketId]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:fn(new Date(_.createdAt),"MMM dd, yyyy HH:mm")})]}),d.jsx($p,{className:"text-gray-400",size:18})]})},_._id))})})]}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(jt,{children:a&&o?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]}):o?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"border-b pb-3",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Conversation Details"}),d.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(qp,{size:16,className:"text-gray-400"}),d.jsxs("span",{children:[d.jsx("strong",{children:"User:"})," ",o.user?.name||"Unknown"]})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Email:"})," ",o.user?.email||"N/A"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Status:"})," ",d.jsx(pn,{variant:x(o.status),children:o.status})]}),o.assignedTo&&d.jsxs("div",{children:[d.jsx("strong",{children:"Assigned to:"})," ",o.assignedTo?.name||o.assignedTo?.email]}),o.ticketId&&d.jsxs("div",{children:[d.jsx("strong",{children:"Ticket:"})," ",d.jsxs("span",{className:"text-primary-600",children:["#",o.ticketId]})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Started:"})," ",fn(new Date(o.createdAt),"MMM dd, yyyy HH:mm")]})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Messages (",u.length,")"]}),u.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Ru,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),d.jsx("p",{className:"text-sm text-gray-500",children:"No messages in this session"})]}):d.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:u.map((_,M)=>d.jsxs("div",{className:`p-3 rounded-lg ${_.sender==="user"?"bg-primary-50 border border-primary-200":_.sender==="technician"?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:`text-xs font-semibold ${_.sender==="user"?"text-primary-700":_.sender==="technician"?"text-blue-700":"text-gray-700"}`,children:_.sender==="user"?" User":_.sender==="technician"?" Technician":" Bot"}),d.jsx("span",{className:"text-xs text-gray-500",children:fn(new Date(_.createdAt||new Date),"MMM dd, HH:mm")})]}),d.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:_.content}),_.attachments&&_.attachments.length>0&&d.jsx("div",{className:"mt-2 space-y-1",children:_.attachments.map((E,A)=>d.jsxs("a",{href:`/api/uploads/${E.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:underline flex items-center gap-1",children:[" ",E.filename]},A))})]},_._id||M))})]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Ru,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Select a session to view messages"})]})})})]})]})})},jue=()=>{const[n,e]=z.useState([]),[t,r]=z.useState(!1),[i,a]=z.useState(!1),[s,o]=z.useState(!1),[l,u]=z.useState(null),[f,h]=z.useState(null),[m,y]=z.useState(!1),[b,w]=z.useState(!1);z.useEffect(()=>{x()},[]);const x=async()=>{r(!0);try{const B=await gr.listBackups();e(B.backups||[])}catch(B){ve.error(B.message||"Failed to load backups")}finally{r(!1)}},_=async()=>{a(!0);try{const B=await gr.createBackup();ve.success("Backup created successfully!"),await x()}catch(B){ve.error(B.message||"Failed to create backup")}finally{a(!1)}},M=async B=>{try{await gr.downloadBackup(B),ve.success("Backup downloaded successfully!")}catch(V){ve.error(V.message||"Failed to download backup")}},E=async B=>{if(window.confirm(`Are you sure you want to delete backup "${B}"?`))try{await gr.deleteBackup(B),ve.success("Backup deleted successfully!"),await x()}catch(V){ve.error(V.message||"Failed to delete backup")}},A=async B=>{const V=m?`WARNING: This will DELETE all existing data and restore from "${B}". Are you absolutely sure?`:`Restore database from "${B}"? This will add data without clearing existing records.`;if(window.confirm(V)){u(B);try{await gr.restoreBackup(B,m),ve.success("Database restored successfully!"),u(null),y(!1)}catch(W){ve.error(W.message||"Failed to restore backup"),u(null)}}},R=B=>{const V=B.target.files?.[0];V?(console.log("File selected:",V.name,V.type,V.size),O(V)):console.log("No file selected")},O=B=>{if(!B)return;if(!(B.type==="application/json"||B.type==="text/json"||B.name.toLowerCase().endsWith(".json"))){ve.error("Please select a JSON backup file (.json)");return}h(B),ve.success(`File selected: ${B.name}`)},N=B=>{B.preventDefault(),B.stopPropagation(),w(!0)},L=B=>{B.preventDefault(),B.stopPropagation(),w(!1)},T=B=>{B.preventDefault(),B.stopPropagation(),w(!1);const V=B.dataTransfer.files[0];V&&O(V)},j=async()=>{if(!f){ve.error("Please select a backup file");return}const B=m?"WARNING: This will DELETE all existing data and restore from uploaded file. Are you absolutely sure?":"Restore database from uploaded file? This will add data without clearing existing records.";if(window.confirm(B)){o(!0);try{const V=await gr.uploadBackup(f,m);ve.success(V.message||"Database restored from uploaded file!"),h(null),y(!1);const W=document.getElementById("backup-file-input");W&&(W.value=""),await x()}catch(V){console.error("Upload restore error:",V),ve.error(V.message||"Failed to restore from uploaded file")}finally{o(!1)}}},U=B=>{if(B===0)return"0 Bytes";const V=1024,W=["Bytes","KB","MB","GB"],Y=Math.floor(Math.log(B)/Math.log(V));return Math.round(B/Math.pow(V,Y)*100)/100+" "+W[Y]};return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(hv,{className:"w-8 h-8"}),"Database Backup & Restore"]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Create backups of your database and restore from previous backups"})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Backup"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create a complete backup of all database collections. This includes users, tickets, organizations, and all other data."}),d.jsx(nt,{onClick:_,disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?d.jsxs(d.Fragment,{children:[d.jsx(Dg,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Backup..."]}):d.jsxs(d.Fragment,{children:[d.jsx(hv,{className:"w-4 h-4 mr-2"}),"Create Backup"]})})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Upload & Restore Backup"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Upload a backup file (JSON format) to restore your database."}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Backup File"}),d.jsx("div",{className:"flex items-center space-x-4",children:d.jsxs("label",{className:"flex-1 cursor-pointer",children:[d.jsx("input",{id:"backup-file-input",type:"file",accept:".json,application/json,text/json",onChange:R,className:"hidden"}),d.jsx("div",{className:`flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-xl transition-all duration-300 ${b?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500"} bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm hover:bg-white/80 dark:hover:bg-gray-800/80`,onDragOver:N,onDragLeave:L,onDrop:T,children:d.jsxs("div",{className:"text-center",children:[d.jsx(fc,{className:`mx-auto h-8 w-8 mb-2 transition-colors ${b?"text-blue-500":"text-gray-400 dark:text-gray-500"}`}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:f?f.name:"Click to upload or drag and drop"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"JSON files only"}),f&&d.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 font-medium",children:U(f.size)})]})})]})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"clear-existing",checked:m,onChange:B=>y(B.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),d.jsx("label",{htmlFor:"clear-existing",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Clear existing data before restore (WARNING: This will delete all current data!)"})]}),d.jsx(nt,{onClick:j,disabled:!f||s,className:"bg-green-600 hover:bg-green-700",children:s?d.jsxs(d.Fragment,{children:[d.jsx(Dg,{className:"w-4 h-4 mr-2 animate-spin"}),"Restoring..."]}):d.jsxs(d.Fragment,{children:[d.jsx(fc,{className:"w-4 h-4 mr-2"}),"Upload & Restore"]})})]})]})}),d.jsx(jt,{children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Existing Backups"}),d.jsxs(nt,{onClick:x,disabled:t,variant:"outline",size:"sm",children:[d.jsx(Dg,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})]}),t?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Dg,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),d.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading backups..."})]}):n.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(hv,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No backups found. Create your first backup above."})]}):d.jsx("div",{className:"space-y-4",children:n.map(B=>d.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(hv,{className:"w-5 h-5 text-blue-600"}),d.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:B.name})]}),d.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(Js,{className:"w-4 h-4"}),tue(new Date(B.timestamp))," ago"]}),d.jsxs("p",{children:["Size: ",U(B.size||0)]}),d.jsxs("p",{children:["Collections: ",B.collections?.length||0," (",Object.values(B.collectionCounts||{}).reduce((V,W)=>V+W,0)," records)"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(nt,{onClick:()=>M(B.name),size:"sm",variant:"outline",title:"Download backup",children:d.jsx(Uv,{className:"w-4 h-4"})}),d.jsx(nt,{onClick:()=>A(B.name),size:"sm",variant:"outline",disabled:l===B.name,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-300",title:"Restore from this backup",children:l===B.name?d.jsx(Dg,{className:"w-4 h-4 animate-spin"}):d.jsx(fc,{className:"w-4 h-4"})}),d.jsx(nt,{onClick:()=>E(B.name),size:"sm",variant:"outline",className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-300",title:"Delete backup",children:d.jsx(Fo,{className:"w-4 h-4"})})]})]})},B.name))})]})}),d.jsx(jt,{className:"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800",children:d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(d2,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:"Important Notes"}),d.jsxs("ul",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[d.jsx("li",{children:"Backups include all database collections (users, tickets, organizations, etc.)"}),d.jsx("li",{children:'Restoring with "Clear existing data" will DELETE all current data before restoring'}),d.jsx("li",{children:"Always create a backup before performing a restore operation"}),d.jsx("li",{children:"Backup files are stored on the server in the backups directory"}),d.jsx("li",{children:"Download backups regularly for off-site storage"})]})]})]})})})]})})},Iue=()=>{const{user:n}=Fr(),e=n?.role==="admin"||n?.role==="agent",[t,r]=z.useState("daily"),[i,a]=z.useState(""),[s,o]=z.useState(""),[l,u]=z.useState([]),[f,h]=z.useState([]),[m,y]=z.useState(!1),[b,w]=z.useState("all"),[x,_]=z.useState("all"),[M,E]=z.useState("all");z.useEffect(()=>{n?.role==="admin"&&A()},[n]),z.useEffect(()=>{O()},[t,b,x,M,i,s]);const A=async()=>{try{const V=await ga.getAll();h(V)}catch(V){console.error("Failed to load organizations",V)}},R=()=>{const V=new Date;let W,Y;switch(t){case"daily":W=eA(V),Y=Sb(V);break;case"weekly":W=Ule(V,{weekStartsOn:1}),Y=Kle(V,{weekStartsOn:1});break;case"monthly":W=Yle(V),Y=K6(V);break;case"custom":if(i&&s)W=eA(new Date(i)),Y=Sb(new Date(s));else return null;break;default:W=eA(V),Y=Sb(V)}return{from:W,to:Y}},O=async()=>{try{y(!0);const V=R();if(t==="custom"&&!V){u([]);return}const W={status:b!=="all"?b:void 0,priority:x!=="all"?x:void 0,organization:e&&M!=="all"?M:void 0},Y=await Vi.getAll(W);if(V){const Q=Y.filter(se=>{const G=new Date(se.createdAt);return G>=V.from&&G<=V.to});u(Q)}else u(Y)}catch(V){ve.error("Failed to load report data"),console.error(V),u([])}finally{y(!1)}},N=()=>{const V=["Ticket ID","Title","Category","Priority","Status","Assignee","Created","Due Date","Organization"],W=l.map(J=>[J.ticketId,J.title,J.category,J.priority,J.status,J.assignee?.name||"Unassigned",fn(new Date(J.createdAt),"yyyy-MM-dd HH:mm"),J.dueDate?fn(new Date(J.dueDate),"yyyy-MM-dd HH:mm"):"N/A",J.organization?.name||"N/A"]),Y=[V.join(","),...W.map(J=>J.map(Z=>`"${Z}"`).join(","))].join(`
`),Q=new Blob([Y],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a"),G=URL.createObjectURL(Q);se.setAttribute("href",G),se.setAttribute("download",`tickets-report-${fn(new Date,"yyyy-MM-dd")}.csv`),se.style.visibility="hidden",document.body.appendChild(se),se.click(),document.body.removeChild(se),ve.success("CSV report downloaded successfully!")},L=async()=>{try{const V=l.map(Q=>`
        <tr>
          <td>#${Q.ticketId}</td>
          <td>${Q.title}</td>
          <td>${Q.category}</td>
          <td>${Q.priority}</td>
          <td>${Q.status}</td>
          <td>${Q.assignee?.name||"Unassigned"}</td>
          <td>${fn(new Date(Q.createdAt),"MMM dd, yyyy HH:mm")}</td>
          <td>${Q.dueDate?fn(new Date(Q.dueDate),"MMM dd, yyyy HH:mm"):"N/A"}</td>
        </tr>
      `).join(""),W=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Tickets Report</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 20px; }
              table { width: 100%; border-collapse: collapse; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
            </style>
          </head>
          <body>
            <h1>Tickets Report</h1>
            <p>Generated: ${fn(new Date,"MMMM dd, yyyy HH:mm")}</p>
            <p>Report Type: ${t.charAt(0).toUpperCase()+t.slice(1)}</p>
            <table>
              <thead>
                <tr>
                  <th>Ticket ID</th>
                  <th>Title</th>
                  <th>Category</th>
                  <th>Priority</th>
                  <th>Status</th>
                  <th>Assignee</th>
                  <th>Created</th>
                  <th>Due Date</th>
                </tr>
              </thead>
              <tbody>
                ${V}
              </tbody>
            </table>
          </body>
        </html>
      `,Y=window.open("","_blank");Y.document.write(W),Y.document.close(),Y.print(),ve.success("PDF report opened for printing!")}catch(V){ve.error("Failed to generate PDF report"),console.error(V)}},T=V=>V==="urgent"||V==="high"?"danger":V==="medium"?"warning":"info",j=V=>V==="resolved"?"success":V==="in-progress"?"info":"warning",U=R(),B=U?`${fn(U.from,"MMM dd, yyyy")} - ${fn(U.to,"MMM dd, yyyy")}`:"Select date range";return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Reports"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Generate and download ticket reports"})]})}),d.jsxs(jt,{className:"animate-slide-down",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Report Period"}),d.jsx(_n,{value:t,onChange:V=>r(V.target.value),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"custom",label:"Custom Date Range"}]})]}),t==="custom"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"From Date"}),d.jsx(bt,{type:"date",value:i,onChange:V=>{a(V.target.value),V.target.value&&s&&new Date(V.target.value)>new Date(s)&&ve.error("From date cannot be after To date")}})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"To Date"}),d.jsx(bt,{type:"date",value:s,onChange:V=>{o(V.target.value),i&&V.target.value&&new Date(i)>new Date(V.target.value)&&ve.error("To date cannot be before From date")},min:i})]})]}),n?.role==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),d.jsx(_n,{value:M,onChange:V=>E(V.target.value),options:[{value:"all",label:"All Organizations"},...f.map(V=>({value:V._id||V.id,label:V.name}))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),d.jsx(_n,{value:b,onChange:V=>w(V.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),d.jsx(_n,{value:x,onChange:V=>_(V.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]})]})]}),U&&d.jsxs("div",{className:"mt-4 p-3 bg-primary-50 rounded-lg border border-primary-200",children:[d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("strong",{children:"Date Range:"})," ",B]}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d.jsx("strong",{children:"Total Tickets:"})," ",l.length]})]}),d.jsxs("div",{className:"mt-4 flex gap-3",children:[d.jsxs(nt,{transparent:!0,onClick:L,disabled:m||l.length===0,className:"flex items-center gap-2",children:[d.jsx(Bb,{size:18}),"Export PDF"]}),d.jsxs(nt,{transparent:!0,onClick:N,disabled:m||l.length===0,className:"flex items-center gap-2",children:[d.jsx(Uv,{size:18}),"Export CSV"]})]})]}),d.jsx(jt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:d.jsx("div",{className:"overflow-x-auto",children:m?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading report data..."})]}):l.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Bb,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No tickets found for the selected criteria"})]}):d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Title"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Due"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((V,W)=>{const Y=V.dueDate&&new Date(V.dueDate)<new Date&&(V.status==="open"||V.status==="in-progress");return d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${W*.05}s`},children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",V.ticketId]})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.title})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:V.category})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:T(V.priority),children:V.priority})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:j(V.status),children:V.status})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V.assignee?.name||d.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[d.jsx("div",{className:"font-medium",children:fn(new Date(V.createdAt),"MMM dd, yyyy")}),d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(V.createdAt),"HH:mm")})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:V.dueDate?d.jsxs("div",{children:[d.jsxs("div",{className:Y?"text-red-600 font-medium":"text-gray-700",children:[fn(new Date(V.dueDate),"MMM dd, yyyy"),Y&&d.jsx("span",{className:"ml-1 text-red-600",children:""})]}),d.jsx("div",{className:`text-xs ${Y?"text-red-500":"text-gray-500"}`,children:fn(new Date(V.dueDate),"HH:mm")})]}):d.jsx("span",{className:"text-gray-400",children:""})})]},V._id)})})]})})})]})})},Lue=()=>{const[n,e]=z.useState({totalTickets:0,openTickets:0,approvalPendingTickets:0,approvedTickets:0,rejectedTickets:0,inProgressTickets:0,resolvedTickets:0,closedTickets:0}),[t,r]=z.useState([]),[i,a]=z.useState(!0),s=Ua();z.useEffect(()=>{o();const h=setInterval(()=>{o()},3e4);return()=>clearInterval(h)},[]);const o=async()=>{try{a(!0);const h=await Vi.getDashboardStats();e({totalTickets:h.totalTickets||0,openTickets:h.openTickets||0,approvalPendingTickets:h.approvalPendingTickets||0,approvedTickets:h.approvedTickets||0,rejectedTickets:h.rejectedTickets||0,inProgressTickets:h.inProgressTickets||0,resolvedTickets:h.resolvedTickets||0,closedTickets:h.closedTickets||0});const m=await Vi.getAll({status:"approval-pending"});console.log("Approval pending tickets found:",m.length,m);const y=m.filter(b=>b.department);console.log("Tickets with department:",y.length),r(y.slice(0,10))}catch(h){console.error("Dashboard data error:",h),ve.error("Failed to load dashboard data")}finally{a(!1)}},l=async(h,m)=>{m&&(m.preventDefault(),m.stopPropagation());try{await Vi.approveTicket(h),ve.success("Ticket approved successfully!"),o()}catch(y){console.error("Approve error:",y),ve.error(y.message||"Failed to approve ticket")}},u=async(h,m)=>{m&&(m.preventDefault(),m.stopPropagation());const y=window.prompt("Please provide a reason for rejection:");if(y!==null){if(!y.trim()){ve.error("Rejection reason is required");return}try{await Vi.rejectTicket(h,y),ve.success("Ticket rejected"),o()}catch(b){console.error("Reject error:",b),ve.error(b.message||"Failed to reject ticket")}}},f=[{label:"Total Tickets",value:n.totalTickets.toLocaleString(),icon:Fp,color:"text-primary-600",bgGradient:"from-primary-50 to-primary-100/50",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600"},{label:"Open",value:(n.openTickets||0).toLocaleString(),icon:Fp,color:"text-blue-600",bgGradient:"from-blue-50 to-blue-100/50",iconBg:"bg-gradient-to-br from-blue-500 to-blue-600"},{label:"Approval Pending",value:n.approvalPendingTickets.toLocaleString(),icon:Js,color:"text-orange-600",bgGradient:"from-orange-50 to-orange-100/50",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600"},{label:"Approved",value:n.approvedTickets.toLocaleString(),icon:Ra,color:"text-green-600",bgGradient:"from-green-50 to-green-100/50",iconBg:"bg-gradient-to-br from-green-500 to-green-600"},{label:"Rejected",value:(n.rejectedTickets||0).toLocaleString(),icon:Dv,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600"},{label:"In Progress",value:(n.inProgressTickets||0).toLocaleString(),icon:Js,color:"text-yellow-600",bgGradient:"from-yellow-50 to-yellow-100/50",iconBg:"bg-gradient-to-br from-yellow-500 to-yellow-600"},{label:"Resolved",value:n.resolvedTickets.toLocaleString(),icon:FR,color:"text-emerald-600",bgGradient:"from-emerald-50 to-emerald-100/50",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600"},{label:"Closed",value:n.closedTickets.toLocaleString(),icon:Fv,color:"text-gray-600",bgGradient:"from-gray-50 to-gray-100/50",iconBg:"bg-gradient-to-br from-gray-500 to-gray-600"}];return d.jsx(Ln,{children:d.jsxs("div",{className:"space-y-6",children:[i&&d.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}),!i&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 animate-slide-down",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Department Dashboard"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage and approve tickets for your department"})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:f.map((h,m)=>{const y=h.icon;return d.jsxs(jt,{className:"p-6 animate-slide-down",style:{animationDelay:`${m*.1}s`},children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsx("div",{className:`p-3 rounded-xl ${h.iconBg} shadow-lg`,children:d.jsx(y,{size:24,className:"text-white"})})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.value}),d.jsx("p",{className:"text-sm text-gray-600",children:h.label})]})]},h.label)})}),d.jsx(jt,{title:"Pending Approval",className:"animate-slide-down",style:{animationDelay:"0.5s"},children:d.jsx("div",{className:"overflow-x-auto",children:i?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),d.jsx("p",{className:"text-gray-600",children:"Loading pending tickets..."})]}):t.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Ra,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"No tickets pending approval"}),n.approvalPendingTickets>0?d.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md mx-auto",children:[d.jsxs("p",{className:"text-sm text-yellow-800",children:[d.jsx("strong",{children:"Note:"})," There are ",n.approvalPendingTickets," approval pending tickets in the system, but they may:"]}),d.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 list-disc list-inside text-left",children:[d.jsx("li",{children:"Be from a different department"}),d.jsx("li",{children:"Not have a department assigned"})]}),d.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Ensure tickets have a department assigned when created or when moved to approval-pending status."})]}):d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Tickets will appear here when they are moved to "Approval Pending" status and match your department.'})]}):d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ticket"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Creator"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((h,m)=>d.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300",children:[d.jsxs("td",{className:"px-6 py-4",children:[d.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",h.ticketId]}),d.jsx("div",{className:"text-sm text-gray-500",children:h.title})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(pn,{variant:h.priority==="urgent"||h.priority==="high"?"danger":h.priority==="medium"?"warning":"info",children:h.priority})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.creator?.name||"Unknown"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[d.jsx("div",{className:"font-medium",children:fn(new Date(h.createdAt),"MMM dd, yyyy")}),d.jsx("div",{className:"text-xs text-gray-500",children:fn(new Date(h.createdAt),"HH:mm")})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx(nt,{transparent:!0,variant:"outline",onClick:y=>{y.preventDefault(),y.stopPropagation(),s(`/tickets/${h.ticketId}`)},className:"text-xs relative z-10",type:"button",children:"View"}),d.jsxs(nt,{transparent:!0,onClick:y=>{y.preventDefault(),y.stopPropagation(),l(h.ticketId,y)},className:"text-xs bg-green-500 hover:bg-green-600 text-white border-0 relative z-10",type:"button",children:[d.jsx(FR,{size:14,className:"mr-1"}),"Approve"]}),d.jsxs(nt,{transparent:!0,onClick:y=>{y.preventDefault(),y.stopPropagation(),u(h.ticketId,y)},className:"text-xs bg-red-500 hover:bg-red-600 text-white border-0 relative z-10",type:"button",children:[d.jsx(H$,{size:14,className:"mr-1"}),"Reject"]})]})})]},h._id))})]})})})]})]})})};const e0="160",tf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},n8=0,IC=1,r8=2,Due=3,i8=0,Bw=1,Av=2,No=3,_c=0,La=1,Io=2,Uue=2,ll=0,wf=1,LC=2,DC=3,UC=4,a8=5,Eu=100,s8=101,o8=102,FC=103,zC=104,l8=200,c8=201,u8=202,d8=203,G1=204,$1=205,f8=206,h8=207,p8=208,m8=209,g8=210,v8=211,y8=212,x8=213,b8=214,w8=0,_8=1,S8=2,_y=3,M8=4,E8=5,T8=6,A8=7,t0=0,C8=1,P8=2,cl=0,N8=1,O8=2,R8=3,HN=4,k8=5,j8=6,BC="attached",I8="detached",Fu=300,hl=301,zu=302,bm=303,Sy=304,Dm=306,My=1e3,Dr=1001,Ey=1002,ri=1003,q1=1004,Fue=1004,Cv=1005,zue=1005,Wn=1006,VN=1007,Bue=1007,Bu=1008,HC=1008,As=1009,WN=1010,GN=1011,Hw=1012,Vw=1013,al=1014,ai=1015,Oi=1016,$N=1017,qN=1018,Iu=1020,L8=1021,gi=1023,D8=1024,U8=1025,Lu=1026,Uf=1027,XN=1028,YN=1029,F8=1030,KN=1031,ZN=1033,Mb=33776,Eb=33777,Tb=33778,Ab=33779,VC=35840,WC=35841,GC=35842,$C=35843,JN=36196,qC=37492,XC=37496,YC=37808,KC=37809,ZC=37810,JC=37811,QC=37812,eP=37813,tP=37814,nP=37815,rP=37816,iP=37817,aP=37818,sP=37819,oP=37820,lP=37821,Cb=36492,cP=36494,uP=36495,z8=36283,dP=36284,fP=36285,hP=36286,B8=2200,H8=2201,V8=2202,Ty=2300,Ay=2301,Pb=2302,ff=2400,hf=2401,Cy=2402,Ww=2500,QN=2501,Hue=0,Vue=1,Wue=2,eO=3e3,Du=3001,W8=3200,G8=3201,Yu=0,$8=1,Ms="",mi="srgb",Os="srgb-linear",Gw="display-p3",n0="display-p3-linear",Py="linear",Mr="srgb",Ny="rec709",Oy="p3",Gue=0,rf=7680,$ue=7681,que=7682,Xue=7683,Yue=34055,Kue=34056,Zue=5386,Jue=512,Que=513,ede=514,tde=515,nde=516,rde=517,ide=518,pP=519,q8=512,X8=513,Y8=514,tO=515,K8=516,Z8=517,J8=518,Q8=519,Ry=35044,ade=35048,sde=35040,ode=35045,lde=35049,cde=35041,ude=35046,dde=35050,fde=35042,hde="100",mP="300 es",X1=1035,Lo=2e3,wm=2001;let Nc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const da=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qU=1234567;const _f=Math.PI/180,_m=180/Math.PI;function Cs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(da[n&255]+da[n>>8&255]+da[n>>16&255]+da[n>>24&255]+"-"+da[e&255]+da[e>>8&255]+"-"+da[e>>16&15|64]+da[e>>24&255]+"-"+da[t&63|128]+da[t>>8&255]+"-"+da[t>>16&255]+da[t>>24&255]+da[r&255]+da[r>>8&255]+da[r>>16&255]+da[r>>24&255]).toLowerCase()}function Kr(n,e,t){return Math.max(e,Math.min(t,n))}function nO(n,e){return(n%e+e)%e}function pde(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function mde(n,e,t){return n!==e?(t-n)/(e-n):0}function Pv(n,e,t){return(1-t)*n+t*e}function gde(n,e,t,r){return Pv(n,e,1-Math.exp(-t*r))}function vde(n,e=1){return e-Math.abs(nO(n,e*2)-e)}function yde(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xde(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function bde(n,e){return n+Math.floor(Math.random()*(e-n+1))}function wde(n,e){return n+Math.random()*(e-n)}function _de(n){return n*(.5-Math.random())}function Sde(n){n!==void 0&&(qU=n);let e=qU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Mde(n){return n*_f}function Ede(n){return n*_m}function gP(n){return(n&n-1)===0&&n!==0}function Tde(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Y1(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ade(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+r)/2),f=s((e+r)/2),h=a((e-r)/2),m=s((e-r)/2),y=a((r-e)/2),b=s((r-e)/2);switch(i){case"XYX":n.set(o*f,l*h,l*m,o*u);break;case"YZY":n.set(l*m,o*f,l*h,o*u);break;case"ZXZ":n.set(l*h,l*m,o*f,o*u);break;case"XZX":n.set(o*f,l*b,l*y,o*u);break;case"YXY":n.set(l*y,o*f,l*b,o*u);break;case"ZYZ":n.set(l*b,l*y,o*f,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ns(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function An(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Cde={DEG2RAD:_f,RAD2DEG:_m,generateUUID:Cs,clamp:Kr,euclideanModulo:nO,mapLinear:pde,inverseLerp:mde,lerp:Pv,damp:gde,pingpong:vde,smoothstep:yde,smootherstep:xde,randInt:bde,randFloat:wde,randFloatSpread:_de,seededRandom:Sde,degToRad:Mde,radToDeg:Ede,isPowerOfTwo:gP,ceilPowerOfTwo:Tde,floorPowerOfTwo:Y1,setQuaternionFromProperEuler:Ade,normalize:An,denormalize:ns};class Xe{constructor(e=0,t=0){Xe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rn{constructor(e,t,r,i,a,s,o,l,u){Rn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u)}set(e,t,r,i,a,s,o,l,u){const f=this.elements;return f[0]=e,f[1]=i,f[2]=o,f[3]=t,f[4]=a,f[5]=l,f[6]=r,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],f=r[4],h=r[7],m=r[2],y=r[5],b=r[8],w=i[0],x=i[3],_=i[6],M=i[1],E=i[4],A=i[7],R=i[2],O=i[5],N=i[8];return a[0]=s*w+o*M+l*R,a[3]=s*x+o*E+l*O,a[6]=s*_+o*A+l*N,a[1]=u*w+f*M+h*R,a[4]=u*x+f*E+h*O,a[7]=u*_+f*A+h*N,a[2]=m*w+y*M+b*R,a[5]=m*x+y*E+b*O,a[8]=m*_+y*A+b*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8];return t*s*f-t*o*u-r*a*f+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=f*s-o*u,m=o*l-f*a,y=u*a-s*l,b=t*h+r*m+i*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=h*w,e[1]=(i*u-f*r)*w,e[2]=(o*r-i*s)*w,e[3]=m*w,e[4]=(f*t-i*l)*w,e[5]=(i*a-o*t)*w,e[6]=y*w,e[7]=(r*l-u*t)*w,e[8]=(s*t-r*a)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(rA.makeScale(e,t)),this}rotate(e){return this.premultiply(rA.makeRotation(-e)),this}translate(e,t){return this.premultiply(rA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const rA=new Rn;function eH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Pde={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kp(n,e){return new Pde[n](e)}function ky(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function tH(){const n=ky("canvas");return n.style.display="block",n}const XU={};function Nv(n){n in XU||(XU[n]=!0,console.warn(n))}const YU=new Rn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),KU=new Rn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sx={[Os]:{transfer:Py,primaries:Ny,toReference:n=>n,fromReference:n=>n},[mi]:{transfer:Mr,primaries:Ny,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[n0]:{transfer:Py,primaries:Oy,toReference:n=>n.applyMatrix3(KU),fromReference:n=>n.applyMatrix3(YU)},[Gw]:{transfer:Mr,primaries:Oy,toReference:n=>n.convertSRGBToLinear().applyMatrix3(KU),fromReference:n=>n.applyMatrix3(YU).convertLinearToSRGB()}},Nde=new Set([Os,n0]),or={enabled:!0,_workingColorSpace:Os,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Nde.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Sx[e].toReference,i=Sx[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Sx[n].primaries},getTransfer:function(n){return n===Ms?Py:Sx[n].transfer}};function Vp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function iA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let tp;class rO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{tp===void 0&&(tp=ky("canvas")),tp.width=e.width,tp.height=e.height;const r=tp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=tp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ky("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Vp(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Vp(t[r]/255)*255):t[r]=Vp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ode=0;class pf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ode++}),this.uuid=Cs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(aA(i[s].image)):a.push(aA(i[s]))}else a=aA(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function aA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?rO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rde=0;class wr extends Nc{constructor(e=wr.DEFAULT_IMAGE,t=wr.DEFAULT_MAPPING,r=Dr,i=Dr,a=Wn,s=Bu,o=gi,l=As,u=wr.DEFAULT_ANISOTROPY,f=Ms){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rde++}),this.uuid=Cs(),this.name="",this.source=new pf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===Du?mi:Ms),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case My:e.x=e.x-Math.floor(e.x);break;case Dr:e.x=e.x<0?0:1;break;case Ey:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case My:e.y=e.y-Math.floor(e.y);break;case Dr:e.y=e.y<0?0:1;break;case Ey:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===mi?Du:eO}set encoding(e){Nv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Du?mi:Ms}}wr.DEFAULT_IMAGE=null;wr.DEFAULT_MAPPING=Fu;wr.DEFAULT_ANISOTROPY=1;class lr{constructor(e=0,t=0,r=0,i=1){lr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],f=l[4],h=l[8],m=l[1],y=l[5],b=l[9],w=l[2],x=l[6],_=l[10];if(Math.abs(f-m)<.01&&Math.abs(h-w)<.01&&Math.abs(b-x)<.01){if(Math.abs(f+m)<.1&&Math.abs(h+w)<.1&&Math.abs(b+x)<.1&&Math.abs(u+y+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,A=(y+1)/2,R=(_+1)/2,O=(f+m)/4,N=(h+w)/4,L=(b+x)/4;return E>A&&E>R?E<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(E),i=O/r,a=N/r):A>R?A<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(A),r=O/i,a=L/i):R<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(R),r=N/a,i=L/a),this.set(r,i,a,t),this}let M=Math.sqrt((x-b)*(x-b)+(h-w)*(h-w)+(m-f)*(m-f));return Math.abs(M)<.001&&(M=1),this.x=(x-b)/M,this.y=(h-w)/M,this.z=(m-f)/M,this.w=Math.acos((u+y+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nH extends Nc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new lr(0,0,e,t),this.scissorTest=!1,this.viewport=new lr(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Nv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Du?mi:Ms),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new wr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class is extends nH{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class $w extends wr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ri,this.minFilter=ri,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kde extends is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new $w(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class iO extends wr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ri,this.minFilter=ri,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jde extends is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new iO(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Ide extends is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=a.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class va{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],u=r[i+1],f=r[i+2],h=r[i+3];const m=a[s+0],y=a[s+1],b=a[s+2],w=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(o===1){e[t+0]=m,e[t+1]=y,e[t+2]=b,e[t+3]=w;return}if(h!==w||l!==m||u!==y||f!==b){let x=1-o;const _=l*m+u*y+f*b+h*w,M=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const R=Math.sqrt(E),O=Math.atan2(R,_*M);x=Math.sin(x*O)/R,o=Math.sin(o*O)/R}const A=o*M;if(l=l*x+m*A,u=u*x+y*A,f=f*x+b*A,h=h*x+w*A,x===1-o){const R=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=R,u*=R,f*=R,h*=R}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],f=r[i+3],h=a[s],m=a[s+1],y=a[s+2],b=a[s+3];return e[t]=o*b+f*h+l*y-u*m,e[t+1]=l*b+f*m+u*h-o*y,e[t+2]=u*b+f*y+o*m-l*h,e[t+3]=f*b-o*h-l*m-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),f=o(i/2),h=o(a/2),m=l(r/2),y=l(i/2),b=l(a/2);switch(s){case"XYZ":this._x=m*f*h+u*y*b,this._y=u*y*h-m*f*b,this._z=u*f*b+m*y*h,this._w=u*f*h-m*y*b;break;case"YXZ":this._x=m*f*h+u*y*b,this._y=u*y*h-m*f*b,this._z=u*f*b-m*y*h,this._w=u*f*h+m*y*b;break;case"ZXY":this._x=m*f*h-u*y*b,this._y=u*y*h+m*f*b,this._z=u*f*b+m*y*h,this._w=u*f*h-m*y*b;break;case"ZYX":this._x=m*f*h-u*y*b,this._y=u*y*h+m*f*b,this._z=u*f*b-m*y*h,this._w=u*f*h+m*y*b;break;case"YZX":this._x=m*f*h+u*y*b,this._y=u*y*h+m*f*b,this._z=u*f*b-m*y*h,this._w=u*f*h-m*y*b;break;case"XZY":this._x=m*f*h-u*y*b,this._y=u*y*h-m*f*b,this._z=u*f*b+m*y*h,this._w=u*f*h+m*y*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],f=t[6],h=t[10],m=r+o+h;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(f-l)*y,this._y=(a-u)*y,this._z=(s-i)*y}else if(r>o&&r>h){const y=2*Math.sqrt(1+r-o-h);this._w=(f-l)/y,this._x=.25*y,this._y=(i+s)/y,this._z=(a+u)/y}else if(o>h){const y=2*Math.sqrt(1+o-r-h);this._w=(a-u)/y,this._x=(i+s)/y,this._y=.25*y,this._z=(l+f)/y}else{const y=2*Math.sqrt(1+h-r-o);this._w=(s-i)/y,this._x=(a+u)/y,this._y=(l+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,f=t._w;return this._x=r*f+s*o+i*u-a*l,this._y=i*f+s*l+a*o-r*u,this._z=a*f+s*u+r*l-i*o,this._w=s*f-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const y=1-t;return this._w=y*s+t*this._w,this._x=y*r+t*this._x,this._y=y*i+t*this._y,this._z=y*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,o),h=Math.sin((1-t)*f)/u,m=Math.sin(t*f)/u;return this._w=s*h+this._w*m,this._x=r*h+this._x*m,this._y=i*h+this._y*m,this._z=a*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class oe{constructor(e=0,t=0,r=0){oe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ZU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),f=2*(o*t-a*i),h=2*(a*r-s*t);return this.x=t+l*u+s*h-o*f,this.y=r+l*f+o*u-a*h,this.z=i+l*h+a*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return sA.copy(this).projectOnVector(e),this.sub(sA)}reflect(e){return this.sub(sA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sA=new oe,ZU=new va;class Da{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(To.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(To.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=To.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,To):To.fromBufferAttribute(a,s),To.applyMatrix4(e.matrixWorld),this.expandByPoint(To);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Mx.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Mx.copy(r.boundingBox)),Mx.applyMatrix4(e.matrixWorld),this.union(Mx)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,To),To.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yg),Ex.subVectors(this.max,Yg),np.subVectors(e.a,Yg),rp.subVectors(e.b,Yg),ip.subVectors(e.c,Yg),fu.subVectors(rp,np),hu.subVectors(ip,rp),zd.subVectors(np,ip);let t=[0,-fu.z,fu.y,0,-hu.z,hu.y,0,-zd.z,zd.y,fu.z,0,-fu.x,hu.z,0,-hu.x,zd.z,0,-zd.x,-fu.y,fu.x,0,-hu.y,hu.x,0,-zd.y,zd.x,0];return!oA(t,np,rp,ip,Ex)||(t=[1,0,0,0,1,0,0,0,1],!oA(t,np,rp,ip,Ex))?!1:(Tx.crossVectors(fu,hu),t=[Tx.x,Tx.y,Tx.z],oA(t,np,rp,ip,Ex))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,To).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(To).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ql[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ql[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ql[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ql[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ql[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ql[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ql[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ql[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ql),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ql=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],To=new oe,Mx=new Da,np=new oe,rp=new oe,ip=new oe,fu=new oe,hu=new oe,zd=new oe,Yg=new oe,Ex=new oe,Tx=new oe,Bd=new oe;function oA(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){Bd.fromArray(n,a);const o=i.x*Math.abs(Bd.x)+i.y*Math.abs(Bd.y)+i.z*Math.abs(Bd.z),l=e.dot(Bd),u=t.dot(Bd),f=r.dot(Bd);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>o)return!1}return!0}const Lde=new Da,Kg=new oe,lA=new oe;let ya=class{constructor(e=new oe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Lde.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Kg.subVectors(e,this.center);const t=Kg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Kg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(lA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Kg.copy(e.center).add(lA)),this.expandByPoint(Kg.copy(e.center).sub(lA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const ec=new oe,cA=new oe,Ax=new oe,pu=new oe,uA=new oe,Cx=new oe,dA=new oe;class qf{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ec)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ec.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ec.copy(this.origin).addScaledVector(this.direction,t),ec.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){cA.copy(e).add(t).multiplyScalar(.5),Ax.copy(t).sub(e).normalize(),pu.copy(this.origin).sub(cA);const a=e.distanceTo(t)*.5,s=-this.direction.dot(Ax),o=pu.dot(this.direction),l=-pu.dot(Ax),u=pu.lengthSq(),f=Math.abs(1-s*s);let h,m,y,b;if(f>0)if(h=s*l-o,m=s*o-l,b=a*f,h>=0)if(m>=-b)if(m<=b){const w=1/f;h*=w,m*=w,y=h*(h+s*m+2*o)+m*(s*h+m+2*l)+u}else m=a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;else m=-a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;else m<=-b?(h=Math.max(0,-(-s*a+o)),m=h>0?-a:Math.min(Math.max(-a,-l),a),y=-h*h+m*(m+2*l)+u):m<=b?(h=0,m=Math.min(Math.max(-a,-l),a),y=m*(m+2*l)+u):(h=Math.max(0,-(s*a+o)),m=h>0?a:Math.min(Math.max(-a,-l),a),y=-h*h+m*(m+2*l)+u);else m=s>0?-a:a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(cA).addScaledVector(Ax,m),y}intersectSphere(e,t){ec.subVectors(e.center,this.origin);const r=ec.dot(this.direction),i=ec.dot(ec)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,m=this.origin;return u>=0?(r=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(r=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),f>=0?(a=(e.min.y-m.y)*f,s=(e.max.y-m.y)*f):(a=(e.max.y-m.y)*f,s=(e.min.y-m.y)*f),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),h>=0?(o=(e.min.z-m.z)*h,l=(e.max.z-m.z)*h):(o=(e.max.z-m.z)*h,l=(e.min.z-m.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ec)!==null}intersectTriangle(e,t,r,i,a){uA.subVectors(t,e),Cx.subVectors(r,e),dA.crossVectors(uA,Cx);let s=this.direction.dot(dA),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;pu.subVectors(this.origin,e);const l=o*this.direction.dot(Cx.crossVectors(pu,Cx));if(l<0)return null;const u=o*this.direction.dot(uA.cross(pu));if(u<0||l+u>s)return null;const f=-o*pu.dot(dA);return f<0?null:this.at(f/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ln{constructor(e,t,r,i,a,s,o,l,u,f,h,m,y,b,w,x){ln.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u,f,h,m,y,b,w,x)}set(e,t,r,i,a,s,o,l,u,f,h,m,y,b,w,x){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=a,_[5]=s,_[9]=o,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=m,_[3]=y,_[7]=b,_[11]=w,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ln().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/ap.setFromMatrixColumn(e,0).length(),a=1/ap.setFromMatrixColumn(e,1).length(),s=1/ap.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),f=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const m=s*f,y=s*h,b=o*f,w=o*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=y+b*u,t[5]=m-w*u,t[9]=-o*l,t[2]=w-m*u,t[6]=b+y*u,t[10]=s*l}else if(e.order==="YXZ"){const m=l*f,y=l*h,b=u*f,w=u*h;t[0]=m+w*o,t[4]=b*o-y,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-o,t[2]=y*o-b,t[6]=w+m*o,t[10]=s*l}else if(e.order==="ZXY"){const m=l*f,y=l*h,b=u*f,w=u*h;t[0]=m-w*o,t[4]=-s*h,t[8]=b+y*o,t[1]=y+b*o,t[5]=s*f,t[9]=w-m*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const m=s*f,y=s*h,b=o*f,w=o*h;t[0]=l*f,t[4]=b*u-y,t[8]=m*u+w,t[1]=l*h,t[5]=w*u+m,t[9]=y*u-b,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const m=s*l,y=s*u,b=o*l,w=o*u;t[0]=l*f,t[4]=w-m*h,t[8]=b*h+y,t[1]=h,t[5]=s*f,t[9]=-o*f,t[2]=-u*f,t[6]=y*h+b,t[10]=m-w*h}else if(e.order==="XZY"){const m=s*l,y=s*u,b=o*l,w=o*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=m*h+w,t[5]=s*f,t[9]=y*h-b,t[2]=b*h-y,t[6]=o*f,t[10]=w*h+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Dde,e,Ude)}lookAt(e,t,r){const i=this.elements;return vs.subVectors(e,t),vs.lengthSq()===0&&(vs.z=1),vs.normalize(),mu.crossVectors(r,vs),mu.lengthSq()===0&&(Math.abs(r.z)===1?vs.x+=1e-4:vs.z+=1e-4,vs.normalize(),mu.crossVectors(r,vs)),mu.normalize(),Px.crossVectors(vs,mu),i[0]=mu.x,i[4]=Px.x,i[8]=vs.x,i[1]=mu.y,i[5]=Px.y,i[9]=vs.y,i[2]=mu.z,i[6]=Px.z,i[10]=vs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],f=r[1],h=r[5],m=r[9],y=r[13],b=r[2],w=r[6],x=r[10],_=r[14],M=r[3],E=r[7],A=r[11],R=r[15],O=i[0],N=i[4],L=i[8],T=i[12],j=i[1],U=i[5],B=i[9],V=i[13],W=i[2],Y=i[6],Q=i[10],se=i[14],G=i[3],J=i[7],Z=i[11],X=i[15];return a[0]=s*O+o*j+l*W+u*G,a[4]=s*N+o*U+l*Y+u*J,a[8]=s*L+o*B+l*Q+u*Z,a[12]=s*T+o*V+l*se+u*X,a[1]=f*O+h*j+m*W+y*G,a[5]=f*N+h*U+m*Y+y*J,a[9]=f*L+h*B+m*Q+y*Z,a[13]=f*T+h*V+m*se+y*X,a[2]=b*O+w*j+x*W+_*G,a[6]=b*N+w*U+x*Y+_*J,a[10]=b*L+w*B+x*Q+_*Z,a[14]=b*T+w*V+x*se+_*X,a[3]=M*O+E*j+A*W+R*G,a[7]=M*N+E*U+A*Y+R*J,a[11]=M*L+E*B+A*Q+R*Z,a[15]=M*T+E*V+A*se+R*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],f=e[2],h=e[6],m=e[10],y=e[14],b=e[3],w=e[7],x=e[11],_=e[15];return b*(+a*l*h-i*u*h-a*o*m+r*u*m+i*o*y-r*l*y)+w*(+t*l*y-t*u*m+a*s*m-i*s*y+i*u*f-a*l*f)+x*(+t*u*h-t*o*y-a*s*h+r*s*y+a*o*f-r*u*f)+_*(-i*o*f-t*l*h+t*o*m+i*s*h-r*s*m+r*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],m=e[10],y=e[11],b=e[12],w=e[13],x=e[14],_=e[15],M=h*x*u-w*m*u+w*l*y-o*x*y-h*l*_+o*m*_,E=b*m*u-f*x*u-b*l*y+s*x*y+f*l*_-s*m*_,A=f*w*u-b*h*u+b*o*y-s*w*y-f*o*_+s*h*_,R=b*h*l-f*w*l-b*o*m+s*w*m+f*o*x-s*h*x,O=t*M+r*E+i*A+a*R;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/O;return e[0]=M*N,e[1]=(w*m*a-h*x*a-w*i*y+r*x*y+h*i*_-r*m*_)*N,e[2]=(o*x*a-w*l*a+w*i*u-r*x*u-o*i*_+r*l*_)*N,e[3]=(h*l*a-o*m*a-h*i*u+r*m*u+o*i*y-r*l*y)*N,e[4]=E*N,e[5]=(f*x*a-b*m*a+b*i*y-t*x*y-f*i*_+t*m*_)*N,e[6]=(b*l*a-s*x*a-b*i*u+t*x*u+s*i*_-t*l*_)*N,e[7]=(s*m*a-f*l*a+f*i*u-t*m*u-s*i*y+t*l*y)*N,e[8]=A*N,e[9]=(b*h*a-f*w*a-b*r*y+t*w*y+f*r*_-t*h*_)*N,e[10]=(s*w*a-b*o*a+b*r*u-t*w*u-s*r*_+t*o*_)*N,e[11]=(f*o*a-s*h*a-f*r*u+t*h*u+s*r*y-t*o*y)*N,e[12]=R*N,e[13]=(f*w*i-b*h*i+b*r*m-t*w*m-f*r*x+t*h*x)*N,e[14]=(b*o*i-s*w*i-b*r*l+t*w*l+s*r*x-t*o*x)*N,e[15]=(s*h*i-f*o*i+f*r*l-t*h*l-s*r*m+t*o*m)*N,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,f=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,f*o+r,f*l-i*s,0,u*l-i*o,f*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,f=s+s,h=o+o,m=a*u,y=a*f,b=a*h,w=s*f,x=s*h,_=o*h,M=l*u,E=l*f,A=l*h,R=r.x,O=r.y,N=r.z;return i[0]=(1-(w+_))*R,i[1]=(y+A)*R,i[2]=(b-E)*R,i[3]=0,i[4]=(y-A)*O,i[5]=(1-(m+_))*O,i[6]=(x+M)*O,i[7]=0,i[8]=(b+E)*N,i[9]=(x-M)*N,i[10]=(1-(m+w))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=ap.set(i[0],i[1],i[2]).length();const s=ap.set(i[4],i[5],i[6]).length(),o=ap.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Ao.copy(this);const u=1/a,f=1/s,h=1/o;return Ao.elements[0]*=u,Ao.elements[1]*=u,Ao.elements[2]*=u,Ao.elements[4]*=f,Ao.elements[5]*=f,Ao.elements[6]*=f,Ao.elements[8]*=h,Ao.elements[9]*=h,Ao.elements[10]*=h,t.setFromRotationMatrix(Ao),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=Lo){const l=this.elements,u=2*a/(t-e),f=2*a/(r-i),h=(t+e)/(t-e),m=(r+i)/(r-i);let y,b;if(o===Lo)y=-(s+a)/(s-a),b=-2*s*a/(s-a);else if(o===wm)y=-s/(s-a),b=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=y,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=Lo){const l=this.elements,u=1/(t-e),f=1/(r-i),h=1/(s-a),m=(t+e)*u,y=(r+i)*f;let b,w;if(o===Lo)b=(s+a)*h,w=-2*h;else if(o===wm)b=a*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-y,l[2]=0,l[6]=0,l[10]=w,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const ap=new oe,Ao=new ln,Dde=new oe(0,0,0),Ude=new oe(1,1,1),mu=new oe,Px=new oe,vs=new oe,JU=new ln,QU=new va;class r0{constructor(e=0,t=0,r=0,i=r0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],f=i[9],h=i[2],m=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(Kr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Kr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(Kr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,y),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-Kr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Kr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-Kr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return JU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JU,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return QU.setFromEuler(this),this.setFromQuaternion(QU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}r0.DEFAULT_ORDER="XYZ";class Sf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Fde=0;const e4=new oe,sp=new va,tc=new ln,Nx=new oe,Zg=new oe,zde=new oe,Bde=new va,t4=new oe(1,0,0),n4=new oe(0,1,0),r4=new oe(0,0,1),Hde={type:"added"},Vde={type:"removed"};class qn extends Nc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fde++}),this.uuid=Cs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qn.DEFAULT_UP.clone();const e=new oe,t=new r0,r=new va,i=new oe(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ln},normalMatrix:{value:new Rn}}),this.matrix=new ln,this.matrixWorld=new ln,this.matrixAutoUpdate=qn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sp.setFromAxisAngle(e,t),this.quaternion.multiply(sp),this}rotateOnWorldAxis(e,t){return sp.setFromAxisAngle(e,t),this.quaternion.premultiply(sp),this}rotateX(e){return this.rotateOnAxis(t4,e)}rotateY(e){return this.rotateOnAxis(n4,e)}rotateZ(e){return this.rotateOnAxis(r4,e)}translateOnAxis(e,t){return e4.copy(e).applyQuaternion(this.quaternion),this.position.add(e4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(t4,e)}translateY(e){return this.translateOnAxis(n4,e)}translateZ(e){return this.translateOnAxis(r4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Nx.copy(e):Nx.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Zg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tc.lookAt(Zg,Nx,this.up):tc.lookAt(Nx,Zg,this.up),this.quaternion.setFromRotationMatrix(tc),i&&(tc.extractRotation(i.matrixWorld),sp.setFromRotationMatrix(tc),this.quaternion.premultiply(sp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Hde)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Vde)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),tc.multiply(e.parent.matrixWorld)),e.applyMatrix4(tc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zg,e,zde),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zg,Bde,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const a=t[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++){const o=i[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),f=s(e.images),h=s(e.shapes),m=s(e.skeletons),y=s(e.animations),b=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),h.length>0&&(r.shapes=h),m.length>0&&(r.skeletons=m),y.length>0&&(r.animations=y),b.length>0&&(r.nodes=b)}return r.object=i,r;function s(o){const l=[];for(const u in o){const f=o[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}qn.DEFAULT_UP=new oe(0,1,0);qn.DEFAULT_MATRIX_AUTO_UPDATE=!0;qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Co=new oe,nc=new oe,fA=new oe,rc=new oe,op=new oe,lp=new oe,i4=new oe,hA=new oe,pA=new oe,mA=new oe;let Ox=!1;class ts{constructor(e=new oe,t=new oe,r=new oe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Co.subVectors(e,t),i.cross(Co);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Co.subVectors(i,t),nc.subVectors(r,t),fA.subVectors(e,t);const s=Co.dot(Co),o=Co.dot(nc),l=Co.dot(fA),u=nc.dot(nc),f=nc.dot(fA),h=s*u-o*o;if(h===0)return a.set(0,0,0),null;const m=1/h,y=(u*l-o*f)*m,b=(s*f-o*l)*m;return a.set(1-y-b,b,y)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,rc)===null?!1:rc.x>=0&&rc.y>=0&&rc.x+rc.y<=1}static getUV(e,t,r,i,a,s,o,l){return Ox===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ox=!0),this.getInterpolation(e,t,r,i,a,s,o,l)}static getInterpolation(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,rc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,rc.x),l.addScaledVector(s,rc.y),l.addScaledVector(o,rc.z),l)}static isFrontFacing(e,t,r,i){return Co.subVectors(r,t),nc.subVectors(e,t),Co.cross(nc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Co.subVectors(this.c,this.b),nc.subVectors(this.a,this.b),Co.cross(nc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ts.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ts.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return Ox===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ox=!0),ts.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}getInterpolation(e,t,r,i,a){return ts.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return ts.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ts.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;op.subVectors(i,r),lp.subVectors(a,r),hA.subVectors(e,r);const l=op.dot(hA),u=lp.dot(hA);if(l<=0&&u<=0)return t.copy(r);pA.subVectors(e,i);const f=op.dot(pA),h=lp.dot(pA);if(f>=0&&h<=f)return t.copy(i);const m=l*h-f*u;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(r).addScaledVector(op,s);mA.subVectors(e,a);const y=op.dot(mA),b=lp.dot(mA);if(b>=0&&y<=b)return t.copy(a);const w=y*u-l*b;if(w<=0&&u>=0&&b<=0)return o=u/(u-b),t.copy(r).addScaledVector(lp,o);const x=f*b-y*h;if(x<=0&&h-f>=0&&y-b>=0)return i4.subVectors(a,i),o=(h-f)/(h-f+(y-b)),t.copy(i).addScaledVector(i4,o);const _=1/(x+w+m);return s=w*_,o=m*_,t.copy(r).addScaledVector(op,s).addScaledVector(lp,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gu={h:0,s:0,l:0},Rx={h:0,s:0,l:0};function gA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Rt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=mi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,or.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=or.workingColorSpace){return this.r=e,this.g=t,this.b=r,or.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=or.workingColorSpace){if(e=nO(e,1),t=Kr(t,0,1),r=Kr(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=gA(s,a,e+1/3),this.g=gA(s,a,e),this.b=gA(s,a,e-1/3)}return or.toWorkingColorSpace(this,i),this}setStyle(e,t=mi){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=mi){const r=rH[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vp(e.r),this.g=Vp(e.g),this.b=Vp(e.b),this}copyLinearToSRGB(e){return this.r=iA(e.r),this.g=iA(e.g),this.b=iA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mi){return or.fromWorkingColorSpace(fa.copy(this),e),Math.round(Kr(fa.r*255,0,255))*65536+Math.round(Kr(fa.g*255,0,255))*256+Math.round(Kr(fa.b*255,0,255))}getHexString(e=mi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=or.workingColorSpace){or.fromWorkingColorSpace(fa.copy(this),t);const r=fa.r,i=fa.g,a=fa.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const f=(o+s)/2;if(o===s)l=0,u=0;else{const h=s-o;switch(u=f<=.5?h/(s+o):h/(2-s-o),s){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=or.workingColorSpace){return or.fromWorkingColorSpace(fa.copy(this),t),e.r=fa.r,e.g=fa.g,e.b=fa.b,e}getStyle(e=mi){or.fromWorkingColorSpace(fa.copy(this),e);const t=fa.r,r=fa.g,i=fa.b;return e!==mi?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(gu),this.setHSL(gu.h+e,gu.s+t,gu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(gu),e.getHSL(Rx);const r=Pv(gu.h,Rx.h,t),i=Pv(gu.s,Rx.s,t),a=Pv(gu.l,Rx.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fa=new Rt;Rt.NAMES=rH;let Wde=0;class xa extends Nc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Wde++}),this.uuid=Cs(),this.name="",this.type="Material",this.blending=wf,this.side=_c,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=G1,this.blendDst=$1,this.blendEquation=Eu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rt(0,0,0),this.blendAlpha=0,this.depthFunc=_y,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rf,this.stencilZFail=rf,this.stencilZPass=rf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==wf&&(r.blending=this.blending),this.side!==_c&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==G1&&(r.blendSrc=this.blendSrc),this.blendDst!==$1&&(r.blendDst=this.blendDst),this.blendEquation!==Eu&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==_y&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==pP&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rf&&(r.stencilFail=this.stencilFail),this.stencilZFail!==rf&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==rf&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Oc extends xa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const oc=Gde();function Gde(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;(u&8388608)===0;)u<<=1,f-=8388608;u&=-8388609,f+=947912704,a[l]=u|f}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function Qa(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Kr(n,-65504,65504),oc.floatView[0]=n;const e=oc.uint32View[0],t=e>>23&511;return oc.baseTable[t]+((e&8388607)>>oc.shiftTable[t])}function vv(n){const e=n>>10;return oc.uint32View[0]=oc.mantissaTable[oc.offsetTable[e]+(n&1023)]+oc.exponentTable[e],oc.floatView[0]}const mf={toHalfFloat:Qa,fromHalfFloat:vv},hi=new oe,kx=new Xe;class cr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Ry,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ai,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)kx.fromBufferAttribute(this,t),kx.applyMatrix3(e),this.setXY(t,kx.x,kx.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix3(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix4(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyNormalMatrix(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.transformDirection(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ns(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=An(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ns(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ns(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ns(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ns(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array),a=An(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ry&&(e.usage=this.usage),e}}class $de extends cr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class qde extends cr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Xde extends cr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Yde extends cr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class aO extends cr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Kde extends cr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class sO extends cr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Zde extends cr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=vv(this.array[e*this.itemSize]);return this.normalized&&(t=ns(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=Qa(t),this}getY(e){let t=vv(this.array[e*this.itemSize+1]);return this.normalized&&(t=ns(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=Qa(t),this}getZ(e){let t=vv(this.array[e*this.itemSize+2]);return this.normalized&&(t=ns(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=Qa(t),this}getW(e){let t=vv(this.array[e*this.itemSize+3]);return this.normalized&&(t=ns(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=Qa(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(r),this.array[e+2]=Qa(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array),a=An(a,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(r),this.array[e+2]=Qa(i),this.array[e+3]=Qa(a),this}}class Bt extends cr{constructor(e,t,r){super(new Float32Array(e),t,r)}}class Jde extends cr{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Qde=0;const Xs=new ln,vA=new qn,cp=new oe,ys=new Da,Jg=new Da,zi=new oe;class kn extends Nc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Qde++}),this.uuid=Cs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eH(e)?sO:aO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Rn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xs.makeRotationFromQuaternion(e),this.applyMatrix4(Xs),this}rotateX(e){return Xs.makeRotationX(e),this.applyMatrix4(Xs),this}rotateY(e){return Xs.makeRotationY(e),this.applyMatrix4(Xs),this}rotateZ(e){return Xs.makeRotationZ(e),this.applyMatrix4(Xs),this}translate(e,t,r){return Xs.makeTranslation(e,t,r),this.applyMatrix4(Xs),this}scale(e,t,r){return Xs.makeScale(e,t,r),this.applyMatrix4(Xs),this}lookAt(e){return vA.lookAt(e),vA.updateMatrix(),this.applyMatrix4(vA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cp).negate(),this.translate(cp.x,cp.y,cp.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Bt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Da);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];ys.setFromBufferAttribute(a),this.morphTargetsRelative?(zi.addVectors(this.boundingBox.min,ys.min),this.boundingBox.expandByPoint(zi),zi.addVectors(this.boundingBox.max,ys.max),this.boundingBox.expandByPoint(zi)):(this.boundingBox.expandByPoint(ys.min),this.boundingBox.expandByPoint(ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ya);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new oe,1/0);return}if(e){const r=this.boundingSphere.center;if(ys.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];Jg.setFromBufferAttribute(o),this.morphTargetsRelative?(zi.addVectors(ys.min,Jg.min),ys.expandByPoint(zi),zi.addVectors(ys.max,Jg.max),ys.expandByPoint(zi)):(ys.expandByPoint(Jg.min),ys.expandByPoint(Jg.max))}ys.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)zi.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(zi));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,f=o.count;u<f;u++)zi.fromBufferAttribute(o,u),l&&(cp.fromBufferAttribute(e,u),zi.add(cp)),i=Math.max(i,r.distanceToSquared(zi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,s=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new cr(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],f=[];for(let j=0;j<o;j++)u[j]=new oe,f[j]=new oe;const h=new oe,m=new oe,y=new oe,b=new Xe,w=new Xe,x=new Xe,_=new oe,M=new oe;function E(j,U,B){h.fromArray(i,j*3),m.fromArray(i,U*3),y.fromArray(i,B*3),b.fromArray(s,j*2),w.fromArray(s,U*2),x.fromArray(s,B*2),m.sub(h),y.sub(h),w.sub(b),x.sub(b);const V=1/(w.x*x.y-x.x*w.y);isFinite(V)&&(_.copy(m).multiplyScalar(x.y).addScaledVector(y,-w.y).multiplyScalar(V),M.copy(y).multiplyScalar(w.x).addScaledVector(m,-x.x).multiplyScalar(V),u[j].add(_),u[U].add(_),u[B].add(_),f[j].add(M),f[U].add(M),f[B].add(M))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let j=0,U=A.length;j<U;++j){const B=A[j],V=B.start,W=B.count;for(let Y=V,Q=V+W;Y<Q;Y+=3)E(r[Y+0],r[Y+1],r[Y+2])}const R=new oe,O=new oe,N=new oe,L=new oe;function T(j){N.fromArray(a,j*3),L.copy(N);const U=u[j];R.copy(U),R.sub(N.multiplyScalar(N.dot(U))).normalize(),O.crossVectors(L,U);const V=O.dot(f[j])<0?-1:1;l[j*4]=R.x,l[j*4+1]=R.y,l[j*4+2]=R.z,l[j*4+3]=V}for(let j=0,U=A.length;j<U;++j){const B=A[j],V=B.start,W=B.count;for(let Y=V,Q=V+W;Y<Q;Y+=3)T(r[Y+0]),T(r[Y+1]),T(r[Y+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new cr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let m=0,y=r.count;m<y;m++)r.setXYZ(m,0,0,0);const i=new oe,a=new oe,s=new oe,o=new oe,l=new oe,u=new oe,f=new oe,h=new oe;if(e)for(let m=0,y=e.count;m<y;m+=3){const b=e.getX(m+0),w=e.getX(m+1),x=e.getX(m+2);i.fromBufferAttribute(t,b),a.fromBufferAttribute(t,w),s.fromBufferAttribute(t,x),f.subVectors(s,a),h.subVectors(i,a),f.cross(h),o.fromBufferAttribute(r,b),l.fromBufferAttribute(r,w),u.fromBufferAttribute(r,x),o.add(f),l.add(f),u.add(f),r.setXYZ(b,o.x,o.y,o.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let m=0,y=t.count;m<y;m+=3)i.fromBufferAttribute(t,m+0),a.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),f.subVectors(s,a),h.subVectors(i,a),f.cross(h),r.setXYZ(m+0,f.x,f.y,f.z),r.setXYZ(m+1,f.x,f.y,f.z),r.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)zi.fromBufferAttribute(e,t),zi.normalize(),e.setXYZ(t,zi.x,zi.y,zi.z)}toNonIndexed(){function e(o,l){const u=o.array,f=o.itemSize,h=o.normalized,m=new u.constructor(l.length*f);let y=0,b=0;for(let w=0,x=l.length;w<x;w++){o.isInterleavedBufferAttribute?y=l[w]*o.data.stride+o.offset:y=l[w]*f;for(let _=0;_<f;_++)m[b++]=u[y++]}return new cr(m,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new kn,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let f=0,h=u.length;f<h;f++){const m=u[f],y=e(m,r);l.push(y)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let h=0,m=u.length;h<m;h++){const y=u[h];f.push(y.toJSON(e.data))}f.length>0&&(i[l]=f,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const f=i[u];this.setAttribute(u,f.clone(t))}const a=e.morphAttributes;for(const u in a){const f=[],h=a[u];for(let m=0,y=h.length;m<y;m++)f.push(h[m].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,f=s.length;u<f;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const a4=new ln,Hd=new qf,jx=new ya,s4=new oe,up=new oe,dp=new oe,fp=new oe,yA=new oe,Ix=new oe,Lx=new Xe,Dx=new Xe,Ux=new Xe,o4=new oe,l4=new oe,c4=new oe,Fx=new oe,zx=new oe;class Zr extends qn{constructor(e=new kn,t=new Oc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){Ix.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const f=o[l],h=a[l];f!==0&&(yA.fromBufferAttribute(h,e),s?Ix.addScaledVector(yA,f):Ix.addScaledVector(yA.sub(t),f))}t.add(Ix)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),jx.copy(r.boundingSphere),jx.applyMatrix4(a),Hd.copy(e.ray).recast(e.near),!(jx.containsPoint(Hd.origin)===!1&&(Hd.intersectSphere(jx,s4)===null||Hd.origin.distanceToSquared(s4)>(e.far-e.near)**2))&&(a4.copy(a).invert(),Hd.copy(e.ray).applyMatrix4(a4),!(r.boundingBox!==null&&Hd.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Hd)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,f=a.attributes.uv1,h=a.attributes.normal,m=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let b=0,w=m.length;b<w;b++){const x=m[b],_=s[x.materialIndex],M=Math.max(x.start,y.start),E=Math.min(o.count,Math.min(x.start+x.count,y.start+y.count));for(let A=M,R=E;A<R;A+=3){const O=o.getX(A),N=o.getX(A+1),L=o.getX(A+2);i=Bx(this,_,e,r,u,f,h,O,N,L),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const b=Math.max(0,y.start),w=Math.min(o.count,y.start+y.count);for(let x=b,_=w;x<_;x+=3){const M=o.getX(x),E=o.getX(x+1),A=o.getX(x+2);i=Bx(this,s,e,r,u,f,h,M,E,A),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let b=0,w=m.length;b<w;b++){const x=m[b],_=s[x.materialIndex],M=Math.max(x.start,y.start),E=Math.min(l.count,Math.min(x.start+x.count,y.start+y.count));for(let A=M,R=E;A<R;A+=3){const O=A,N=A+1,L=A+2;i=Bx(this,_,e,r,u,f,h,O,N,L),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const b=Math.max(0,y.start),w=Math.min(l.count,y.start+y.count);for(let x=b,_=w;x<_;x+=3){const M=x,E=x+1,A=x+2;i=Bx(this,s,e,r,u,f,h,M,E,A),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}}}function efe(n,e,t,r,i,a,s,o){let l;if(e.side===La?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===_c,o),l===null)return null;zx.copy(o),zx.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(zx);return u<t.near||u>t.far?null:{distance:u,point:zx.clone(),object:n}}function Bx(n,e,t,r,i,a,s,o,l,u){n.getVertexPosition(o,up),n.getVertexPosition(l,dp),n.getVertexPosition(u,fp);const f=efe(n,e,t,r,up,dp,fp,Fx);if(f){i&&(Lx.fromBufferAttribute(i,o),Dx.fromBufferAttribute(i,l),Ux.fromBufferAttribute(i,u),f.uv=ts.getInterpolation(Fx,up,dp,fp,Lx,Dx,Ux,new Xe)),a&&(Lx.fromBufferAttribute(a,o),Dx.fromBufferAttribute(a,l),Ux.fromBufferAttribute(a,u),f.uv1=ts.getInterpolation(Fx,up,dp,fp,Lx,Dx,Ux,new Xe),f.uv2=f.uv1),s&&(o4.fromBufferAttribute(s,o),l4.fromBufferAttribute(s,l),c4.fromBufferAttribute(s,u),f.normal=ts.getInterpolation(Fx,up,dp,fp,o4,l4,c4,new oe),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const h={a:o,b:l,c:u,normal:new oe,materialIndex:0};ts.getNormal(up,dp,fp,h.normal),f.face=h}return f}class Xf extends kn{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],f=[],h=[];let m=0,y=0;b("z","y","x",-1,-1,r,t,e,s,a,0),b("z","y","x",1,-1,r,t,-e,s,a,1),b("x","z","y",1,1,e,r,t,i,s,2),b("x","z","y",1,-1,e,r,-t,i,s,3),b("x","y","z",1,-1,e,t,r,i,a,4),b("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Bt(u,3)),this.setAttribute("normal",new Bt(f,3)),this.setAttribute("uv",new Bt(h,2));function b(w,x,_,M,E,A,R,O,N,L,T){const j=A/N,U=R/L,B=A/2,V=R/2,W=O/2,Y=N+1,Q=L+1;let se=0,G=0;const J=new oe;for(let Z=0;Z<Q;Z++){const X=Z*U-V;for(let te=0;te<Y;te++){const ce=te*j-B;J[w]=ce*M,J[x]=X*E,J[_]=W,u.push(J.x,J.y,J.z),J[w]=0,J[x]=0,J[_]=O>0?1:-1,f.push(J.x,J.y,J.z),h.push(te/N),h.push(1-Z/L),se+=1}}for(let Z=0;Z<L;Z++)for(let X=0;X<N;X++){const te=m+X+Y*Z,ce=m+X+Y*(Z+1),le=m+(X+1)+Y*(Z+1),be=m+(X+1)+Y*Z;l.push(te,ce,be),l.push(ce,le,be),G+=6}o.addGroup(y,G,T),y+=G,m+=se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sm(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Oa(n){const e={};for(let t=0;t<n.length;t++){const r=Sm(n[t]);for(const i in r)e[i]=r[i]}return e}function tfe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function iH(n){return n.getRenderTarget()===null?n.outputColorSpace:or.workingColorSpace}const aH={clone:Sm,merge:Oa};var nfe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rfe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Rs extends xa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nfe,this.fragmentShader=rfe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sm(e.uniforms),this.uniformsGroups=tfe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class i0 extends qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ln,this.projectionMatrix=new ln,this.projectionMatrixInverse=new ln,this.coordinateSystem=Lo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ii=class extends i0{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_m*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_f*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _m*2*Math.atan(Math.tan(_f*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_f*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const hp=-90,pp=1;class sH extends qn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ii(hp,pp,e,t);i.layers=this.layers,this.add(i);const a=new ii(hp,pp,e,t);a.layers=this.layers,this.add(a);const s=new ii(hp,pp,e,t);s.layers=this.layers,this.add(s);const o=new ii(hp,pp,e,t);o.layers=this.layers,this.add(o);const l=new ii(hp,pp,e,t);l.layers=this.layers,this.add(l);const u=new ii(hp,pp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,l]=t;for(const u of t)this.remove(u);if(e===Lo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===wm)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,f]=this.children,h=e.getRenderTarget(),m=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(t,f),e.setRenderTarget(h,m,y),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class a0 extends wr{constructor(e,t,r,i,a,s,o,l,u,f){e=e!==void 0?e:[],t=t!==void 0?t:hl,super(e,t,r,i,a,s,o,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oO extends is{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Nv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Du?mi:Ms),this.texture=new a0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Xf(5,5,5),a=new Rs({name:"CubemapFromEquirect",uniforms:Sm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:La,blending:ll});a.uniforms.tEquirect.value=t;const s=new Zr(i,a),o=t.minFilter;return t.minFilter===Bu&&(t.minFilter=Wn),new sH(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}const xA=new oe,ife=new oe,afe=new Rn;class sc{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=xA.subVectors(r,t).cross(ife.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(xA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||afe.getNormalMatrix(e),i=this.coplanarPoint(xA).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Vd=new ya,Hx=new oe;class s0{constructor(e=new sc,t=new sc,r=new sc,i=new sc,a=new sc,s=new sc){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Lo){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],f=i[5],h=i[6],m=i[7],y=i[8],b=i[9],w=i[10],x=i[11],_=i[12],M=i[13],E=i[14],A=i[15];if(r[0].setComponents(l-a,m-u,x-y,A-_).normalize(),r[1].setComponents(l+a,m+u,x+y,A+_).normalize(),r[2].setComponents(l+s,m+f,x+b,A+M).normalize(),r[3].setComponents(l-s,m-f,x-b,A-M).normalize(),r[4].setComponents(l-o,m-h,x-w,A-E).normalize(),t===Lo)r[5].setComponents(l+o,m+h,x+w,A+E).normalize();else if(t===wm)r[5].setComponents(o,h,w,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Vd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vd)}intersectsSprite(e){return Vd.center.set(0,0,0),Vd.radius=.7071067811865476,Vd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vd)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Hx.x=i.normal.x>0?e.max.x:e.min.x,Hx.y=i.normal.y>0?e.max.y:e.min.y,Hx.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Hx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function oH(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function sfe(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,f){const h=u.array,m=u.usage,y=h.byteLength,b=n.createBuffer();n.bindBuffer(f,b),n.bufferData(f,h,m),u.onUploadCallback();let w;if(h instanceof Float32Array)w=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)w=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)w=n.SHORT;else if(h instanceof Uint32Array)w=n.UNSIGNED_INT;else if(h instanceof Int32Array)w=n.INT;else if(h instanceof Int8Array)w=n.BYTE;else if(h instanceof Uint8Array)w=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)w=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:b,type:w,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:y}}function a(u,f,h){const m=f.array,y=f._updateRange,b=f.updateRanges;if(n.bindBuffer(h,u),y.count===-1&&b.length===0&&n.bufferSubData(h,0,m),b.length!==0){for(let w=0,x=b.length;w<x;w++){const _=b[w];t?n.bufferSubData(h,_.start*m.BYTES_PER_ELEMENT,m,_.start,_.count):n.bufferSubData(h,_.start*m.BYTES_PER_ELEMENT,m.subarray(_.start,_.start+_.count))}f.clearUpdateRanges()}y.count!==-1&&(t?n.bufferSubData(h,y.offset*m.BYTES_PER_ELEMENT,m,y.offset,y.count):n.bufferSubData(h,y.offset*m.BYTES_PER_ELEMENT,m.subarray(y.offset,y.offset+y.count)),y.count=-1),f.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f&&(n.deleteBuffer(f.buffer),r.delete(u))}function l(u,f){if(u.isGLBufferAttribute){const m=r.get(u);(!m||m.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);if(h===void 0)r.set(u,i(u,f));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(h.buffer,u,f),h.version=u.version}}return{get:s,remove:o,update:l}}class Yf extends kn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,f=l+1,h=e/o,m=t/l,y=[],b=[],w=[],x=[];for(let _=0;_<f;_++){const M=_*m-s;for(let E=0;E<u;E++){const A=E*h-a;b.push(A,-M,0),w.push(0,0,1),x.push(E/o),x.push(1-_/l)}}for(let _=0;_<l;_++)for(let M=0;M<o;M++){const E=M+u*_,A=M+u*(_+1),R=M+1+u*(_+1),O=M+1+u*_;y.push(E,A,O),y.push(A,R,O)}this.setIndex(y),this.setAttribute("position",new Bt(b,3)),this.setAttribute("normal",new Bt(w,3)),this.setAttribute("uv",new Bt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yf(e.width,e.height,e.widthSegments,e.heightSegments)}}var ofe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lfe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cfe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ufe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dfe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ffe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,hfe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pfe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mfe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gfe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,vfe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yfe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xfe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,bfe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wfe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_fe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Sfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Mfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Efe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Tfe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Afe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Cfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Pfe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Nfe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ofe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Rfe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kfe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jfe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ife=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Lfe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Dfe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ufe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Ffe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zfe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Bfe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Hfe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Vfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Wfe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Gfe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$fe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Xfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Yfe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Kfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Zfe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Jfe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Qfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ehe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,the=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nhe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rhe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ihe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ahe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,she=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ohe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lhe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,che=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uhe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dhe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fhe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,hhe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,phe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mhe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ghe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vhe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yhe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xhe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bhe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,whe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_he=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,She=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Mhe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ehe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,The=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ahe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Che=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Phe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Nhe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ohe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Rhe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,khe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,jhe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ihe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Lhe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Dhe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Uhe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Fhe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zhe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Bhe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Hhe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Vhe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Whe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ghe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$he=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qhe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Xhe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Yhe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Khe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Zhe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jhe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qhe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,epe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,tpe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,npe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rpe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ipe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ape=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const spe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ope=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cpe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,upe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dpe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,hpe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ppe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mpe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ype=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wpe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_pe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Spe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mpe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Epe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tpe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ape=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Cpe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ppe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Npe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ope=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rpe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kpe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jpe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ipe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Lpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dpe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Upe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Fpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tn={alphahash_fragment:ofe,alphahash_pars_fragment:lfe,alphamap_fragment:cfe,alphamap_pars_fragment:ufe,alphatest_fragment:dfe,alphatest_pars_fragment:ffe,aomap_fragment:hfe,aomap_pars_fragment:pfe,batching_pars_vertex:mfe,batching_vertex:gfe,begin_vertex:vfe,beginnormal_vertex:yfe,bsdfs:xfe,iridescence_fragment:bfe,bumpmap_pars_fragment:wfe,clipping_planes_fragment:_fe,clipping_planes_pars_fragment:Sfe,clipping_planes_pars_vertex:Mfe,clipping_planes_vertex:Efe,color_fragment:Tfe,color_pars_fragment:Afe,color_pars_vertex:Cfe,color_vertex:Pfe,common:Nfe,cube_uv_reflection_fragment:Ofe,defaultnormal_vertex:Rfe,displacementmap_pars_vertex:kfe,displacementmap_vertex:jfe,emissivemap_fragment:Ife,emissivemap_pars_fragment:Lfe,colorspace_fragment:Dfe,colorspace_pars_fragment:Ufe,envmap_fragment:Ffe,envmap_common_pars_fragment:zfe,envmap_pars_fragment:Bfe,envmap_pars_vertex:Hfe,envmap_physical_pars_fragment:ehe,envmap_vertex:Vfe,fog_vertex:Wfe,fog_pars_vertex:Gfe,fog_fragment:$fe,fog_pars_fragment:qfe,gradientmap_pars_fragment:Xfe,lightmap_fragment:Yfe,lightmap_pars_fragment:Kfe,lights_lambert_fragment:Zfe,lights_lambert_pars_fragment:Jfe,lights_pars_begin:Qfe,lights_toon_fragment:the,lights_toon_pars_fragment:nhe,lights_phong_fragment:rhe,lights_phong_pars_fragment:ihe,lights_physical_fragment:ahe,lights_physical_pars_fragment:she,lights_fragment_begin:ohe,lights_fragment_maps:lhe,lights_fragment_end:che,logdepthbuf_fragment:uhe,logdepthbuf_pars_fragment:dhe,logdepthbuf_pars_vertex:fhe,logdepthbuf_vertex:hhe,map_fragment:phe,map_pars_fragment:mhe,map_particle_fragment:ghe,map_particle_pars_fragment:vhe,metalnessmap_fragment:yhe,metalnessmap_pars_fragment:xhe,morphcolor_vertex:bhe,morphnormal_vertex:whe,morphtarget_pars_vertex:_he,morphtarget_vertex:She,normal_fragment_begin:Mhe,normal_fragment_maps:Ehe,normal_pars_fragment:The,normal_pars_vertex:Ahe,normal_vertex:Che,normalmap_pars_fragment:Phe,clearcoat_normal_fragment_begin:Nhe,clearcoat_normal_fragment_maps:Ohe,clearcoat_pars_fragment:Rhe,iridescence_pars_fragment:khe,opaque_fragment:jhe,packing:Ihe,premultiplied_alpha_fragment:Lhe,project_vertex:Dhe,dithering_fragment:Uhe,dithering_pars_fragment:Fhe,roughnessmap_fragment:zhe,roughnessmap_pars_fragment:Bhe,shadowmap_pars_fragment:Hhe,shadowmap_pars_vertex:Vhe,shadowmap_vertex:Whe,shadowmask_pars_fragment:Ghe,skinbase_vertex:$he,skinning_pars_vertex:qhe,skinning_vertex:Xhe,skinnormal_vertex:Yhe,specularmap_fragment:Khe,specularmap_pars_fragment:Zhe,tonemapping_fragment:Jhe,tonemapping_pars_fragment:Qhe,transmission_fragment:epe,transmission_pars_fragment:tpe,uv_pars_fragment:npe,uv_pars_vertex:rpe,uv_vertex:ipe,worldpos_vertex:ape,background_vert:spe,background_frag:ope,backgroundCube_vert:lpe,backgroundCube_frag:cpe,cube_vert:upe,cube_frag:dpe,depth_vert:fpe,depth_frag:hpe,distanceRGBA_vert:ppe,distanceRGBA_frag:mpe,equirect_vert:gpe,equirect_frag:vpe,linedashed_vert:ype,linedashed_frag:xpe,meshbasic_vert:bpe,meshbasic_frag:wpe,meshlambert_vert:_pe,meshlambert_frag:Spe,meshmatcap_vert:Mpe,meshmatcap_frag:Epe,meshnormal_vert:Tpe,meshnormal_frag:Ape,meshphong_vert:Cpe,meshphong_frag:Ppe,meshphysical_vert:Npe,meshphysical_frag:Ope,meshtoon_vert:Rpe,meshtoon_frag:kpe,points_vert:jpe,points_frag:Ipe,shadow_vert:Lpe,shadow_frag:Dpe,sprite_vert:Upe,sprite_frag:Fpe},xt={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rn},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0},uvTransform:{value:new Rn}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}}},ko={basic:{uniforms:Oa([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.fog]),vertexShader:Tn.meshbasic_vert,fragmentShader:Tn.meshbasic_frag},lambert:{uniforms:Oa([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.fog,xt.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Tn.meshlambert_vert,fragmentShader:Tn.meshlambert_frag},phong:{uniforms:Oa([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.fog,xt.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:Tn.meshphong_vert,fragmentShader:Tn.meshphong_frag},standard:{uniforms:Oa([xt.common,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.roughnessmap,xt.metalnessmap,xt.fog,xt.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag},toon:{uniforms:Oa([xt.common,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.gradientmap,xt.fog,xt.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Tn.meshtoon_vert,fragmentShader:Tn.meshtoon_frag},matcap:{uniforms:Oa([xt.common,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.fog,{matcap:{value:null}}]),vertexShader:Tn.meshmatcap_vert,fragmentShader:Tn.meshmatcap_frag},points:{uniforms:Oa([xt.points,xt.fog]),vertexShader:Tn.points_vert,fragmentShader:Tn.points_frag},dashed:{uniforms:Oa([xt.common,xt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tn.linedashed_vert,fragmentShader:Tn.linedashed_frag},depth:{uniforms:Oa([xt.common,xt.displacementmap]),vertexShader:Tn.depth_vert,fragmentShader:Tn.depth_frag},normal:{uniforms:Oa([xt.common,xt.bumpmap,xt.normalmap,xt.displacementmap,{opacity:{value:1}}]),vertexShader:Tn.meshnormal_vert,fragmentShader:Tn.meshnormal_frag},sprite:{uniforms:Oa([xt.sprite,xt.fog]),vertexShader:Tn.sprite_vert,fragmentShader:Tn.sprite_frag},background:{uniforms:{uvTransform:{value:new Rn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tn.background_vert,fragmentShader:Tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tn.backgroundCube_vert,fragmentShader:Tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tn.cube_vert,fragmentShader:Tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tn.equirect_vert,fragmentShader:Tn.equirect_frag},distanceRGBA:{uniforms:Oa([xt.common,xt.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tn.distanceRGBA_vert,fragmentShader:Tn.distanceRGBA_frag},shadow:{uniforms:Oa([xt.lights,xt.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:Tn.shadow_vert,fragmentShader:Tn.shadow_frag}};ko.physical={uniforms:Oa([ko.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rn},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rn},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rn},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rn},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rn},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rn}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag};const Vx={r:0,b:0,g:0};function zpe(n,e,t,r,i,a,s){const o=new Rt(0);let l=a===!0?0:1,u,f,h=null,m=0,y=null;function b(x,_){let M=!1,E=_.isScene===!0?_.background:null;E&&E.isTexture&&(E=(_.backgroundBlurriness>0?t:e).get(E)),E===null?w(o,l):E&&E.isColor&&(w(E,1),M=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,s):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),E&&(E.isCubeTexture||E.mapping===Dm)?(f===void 0&&(f=new Zr(new Xf(1,1,1),new Rs({name:"BackgroundCubeMaterial",uniforms:Sm(ko.backgroundCube.uniforms),vertexShader:ko.backgroundCube.vertexShader,fragmentShader:ko.backgroundCube.fragmentShader,side:La,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,O,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=E,f.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,f.material.toneMapped=or.getTransfer(E.colorSpace)!==Mr,(h!==E||m!==E.version||y!==n.toneMapping)&&(f.material.needsUpdate=!0,h=E,m=E.version,y=n.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new Zr(new Yf(2,2),new Rs({name:"BackgroundMaterial",uniforms:Sm(ko.background.uniforms),vertexShader:ko.background.vertexShader,fragmentShader:ko.background.fragmentShader,side:_c,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=or.getTransfer(E.colorSpace)!==Mr,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(h!==E||m!==E.version||y!==n.toneMapping)&&(u.material.needsUpdate=!0,h=E,m=E.version,y=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function w(x,_){x.getRGB(Vx,iH(n)),r.buffers.color.setClear(Vx.r,Vx.g,Vx.b,_,s)}return{getClearColor:function(){return o},setClearColor:function(x,_=1){o.set(x),l=_,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,w(o,l)},render:b}}function Bpe(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},l=x(null);let u=l,f=!1;function h(W,Y,Q,se,G){let J=!1;if(s){const Z=w(se,Q,Y);u!==Z&&(u=Z,y(u.object)),J=_(W,se,Q,G),J&&M(W,se,Q,G)}else{const Z=Y.wireframe===!0;(u.geometry!==se.id||u.program!==Q.id||u.wireframe!==Z)&&(u.geometry=se.id,u.program=Q.id,u.wireframe=Z,J=!0)}G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(J||f)&&(f=!1,L(W,Y,Q,se),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function m(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function y(W){return r.isWebGL2?n.bindVertexArray(W):a.bindVertexArrayOES(W)}function b(W){return r.isWebGL2?n.deleteVertexArray(W):a.deleteVertexArrayOES(W)}function w(W,Y,Q){const se=Q.wireframe===!0;let G=o[W.id];G===void 0&&(G={},o[W.id]=G);let J=G[Y.id];J===void 0&&(J={},G[Y.id]=J);let Z=J[se];return Z===void 0&&(Z=x(m()),J[se]=Z),Z}function x(W){const Y=[],Q=[],se=[];for(let G=0;G<i;G++)Y[G]=0,Q[G]=0,se[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:Q,attributeDivisors:se,object:W,attributes:{},index:null}}function _(W,Y,Q,se){const G=u.attributes,J=Y.attributes;let Z=0;const X=Q.getAttributes();for(const te in X)if(X[te].location>=0){const le=G[te];let be=J[te];if(be===void 0&&(te==="instanceMatrix"&&W.instanceMatrix&&(be=W.instanceMatrix),te==="instanceColor"&&W.instanceColor&&(be=W.instanceColor)),le===void 0||le.attribute!==be||be&&le.data!==be.data)return!0;Z++}return u.attributesNum!==Z||u.index!==se}function M(W,Y,Q,se){const G={},J=Y.attributes;let Z=0;const X=Q.getAttributes();for(const te in X)if(X[te].location>=0){let le=J[te];le===void 0&&(te==="instanceMatrix"&&W.instanceMatrix&&(le=W.instanceMatrix),te==="instanceColor"&&W.instanceColor&&(le=W.instanceColor));const be={};be.attribute=le,le&&le.data&&(be.data=le.data),G[te]=be,Z++}u.attributes=G,u.attributesNum=Z,u.index=se}function E(){const W=u.newAttributes;for(let Y=0,Q=W.length;Y<Q;Y++)W[Y]=0}function A(W){R(W,0)}function R(W,Y){const Q=u.newAttributes,se=u.enabledAttributes,G=u.attributeDivisors;Q[W]=1,se[W]===0&&(n.enableVertexAttribArray(W),se[W]=1),G[W]!==Y&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,Y),G[W]=Y)}function O(){const W=u.newAttributes,Y=u.enabledAttributes;for(let Q=0,se=Y.length;Q<se;Q++)Y[Q]!==W[Q]&&(n.disableVertexAttribArray(Q),Y[Q]=0)}function N(W,Y,Q,se,G,J,Z){Z===!0?n.vertexAttribIPointer(W,Y,Q,G,J):n.vertexAttribPointer(W,Y,Q,se,G,J)}function L(W,Y,Q,se){if(r.isWebGL2===!1&&(W.isInstancedMesh||se.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const G=se.attributes,J=Q.getAttributes(),Z=Y.defaultAttributeValues;for(const X in J){const te=J[X];if(te.location>=0){let ce=G[X];if(ce===void 0&&(X==="instanceMatrix"&&W.instanceMatrix&&(ce=W.instanceMatrix),X==="instanceColor"&&W.instanceColor&&(ce=W.instanceColor)),ce!==void 0){const le=ce.normalized,be=ce.itemSize,Se=t.get(ce);if(Se===void 0)continue;const Ie=Se.buffer,qe=Se.type,Pe=Se.bytesPerElement,Fe=r.isWebGL2===!0&&(qe===n.INT||qe===n.UNSIGNED_INT||ce.gpuType===Vw);if(ce.isInterleavedBufferAttribute){const $e=ce.data,ne=$e.stride,Ve=ce.offset;if($e.isInstancedInterleavedBuffer){for(let Ne=0;Ne<te.locationSize;Ne++)R(te.location+Ne,$e.meshPerAttribute);W.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let Ne=0;Ne<te.locationSize;Ne++)A(te.location+Ne);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let Ne=0;Ne<te.locationSize;Ne++)N(te.location+Ne,be/te.locationSize,qe,le,ne*Pe,(Ve+be/te.locationSize*Ne)*Pe,Fe)}else{if(ce.isInstancedBufferAttribute){for(let $e=0;$e<te.locationSize;$e++)R(te.location+$e,ce.meshPerAttribute);W.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let $e=0;$e<te.locationSize;$e++)A(te.location+$e);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let $e=0;$e<te.locationSize;$e++)N(te.location+$e,be/te.locationSize,qe,le,be*Pe,be/te.locationSize*$e*Pe,Fe)}}else if(Z!==void 0){const le=Z[X];if(le!==void 0)switch(le.length){case 2:n.vertexAttrib2fv(te.location,le);break;case 3:n.vertexAttrib3fv(te.location,le);break;case 4:n.vertexAttrib4fv(te.location,le);break;default:n.vertexAttrib1fv(te.location,le)}}}}O()}function T(){B();for(const W in o){const Y=o[W];for(const Q in Y){const se=Y[Q];for(const G in se)b(se[G].object),delete se[G];delete Y[Q]}delete o[W]}}function j(W){if(o[W.id]===void 0)return;const Y=o[W.id];for(const Q in Y){const se=Y[Q];for(const G in se)b(se[G].object),delete se[G];delete Y[Q]}delete o[W.id]}function U(W){for(const Y in o){const Q=o[Y];if(Q[W.id]===void 0)continue;const se=Q[W.id];for(const G in se)b(se[G].object),delete se[G];delete Q[W.id]}}function B(){V(),f=!0,u!==l&&(u=l,y(u.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:B,resetDefaultState:V,dispose:T,releaseStatesOfGeometry:j,releaseStatesOfProgram:U,initAttributes:E,enableAttribute:A,disableUnusedAttributes:O}}function Hpe(n,e,t,r){const i=r.isWebGL2;let a;function s(f){a=f}function o(f,h){n.drawArrays(a,f,h),t.update(h,a,1)}function l(f,h,m){if(m===0)return;let y,b;if(i)y=n,b="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[b](a,f,h,m),t.update(h,a,m)}function u(f,h,m){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<m;b++)this.render(f[b],h[b]);else{y.multiDrawArraysWEBGL(a,f,0,h,0,m);let b=0;for(let w=0;w<m;w++)b+=h[w];t.update(b,a,1)}}this.setMode=s,this.render=o,this.renderInstances=l,this.renderMultiDraw=u}function Vpe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=s||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,A=s||e.has("OES_texture_float"),R=E&&A,O=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:f,maxTextures:h,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:b,maxAttributes:w,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:M,vertexTextures:E,floatFragmentTextures:A,floatVertexTextures:R,maxSamples:O}}function Wpe(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new sc,o=new Rn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){const y=h.length!==0||m||r!==0||i;return i=m,r=h.length,y},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,m){t=f(h,m,0)},this.setState=function(h,m,y){const b=h.clippingPlanes,w=h.clipIntersection,x=h.clipShadows,_=n.get(h);if(!i||b===null||b.length===0||a&&!x)a?f(null):u();else{const M=a?0:r,E=M*4;let A=_.clippingState||null;l.value=A,A=f(b,m,E,y);for(let R=0;R!==E;++R)A[R]=t[R];_.clippingState=A,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(h,m,y,b){const w=h!==null?h.length:0;let x=null;if(w!==0){if(x=l.value,b!==!0||x===null){const _=y+w*4,M=m.matrixWorldInverse;o.getNormalMatrix(M),(x===null||x.length<_)&&(x=new Float32Array(_));for(let E=0,A=y;E!==w;++E,A+=4)s.copy(h[E]).applyMatrix4(M,o),s.normal.toArray(x,A),x[A+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function Gpe(n){let e=new WeakMap;function t(s,o){return o===bm?s.mapping=hl:o===Sy&&(s.mapping=zu),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===bm||o===Sy)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new oO(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class gc extends i0{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const jp=4,u4=[.125,.215,.35,.446,.526,.582],of=20,bA=new gc,d4=new Rt;let wA=null,_A=0,SA=0;const af=(1+Math.sqrt(5))/2,mp=1/af,f4=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,af,mp),new oe(0,af,-mp),new oe(mp,0,af),new oe(-mp,0,af),new oe(af,mp,0),new oe(-af,mp,0)];class vP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){wA=this._renderer.getRenderTarget(),_A=this._renderer.getActiveCubeFace(),SA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=m4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=p4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wA,_A,SA),e.scissorTest=!1,Wx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===hl||e.mapping===zu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wA=this._renderer.getRenderTarget(),_A=this._renderer.getActiveCubeFace(),SA=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Oi,format:gi,colorSpace:Os,depthBuffer:!1},i=h4(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=h4(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$pe(a)),this._blurMaterial=qpe(a,e,t)}return i}_compileMaterial(e){const t=new Zr(this._lodPlanes[0],e);this._renderer.compile(t,bA)}_sceneToCubeUV(e,t,r,i){const o=new ii(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(d4),f.toneMapping=cl,f.autoClear=!1;const y=new Oc({name:"PMREM.Background",side:La,depthWrite:!1,depthTest:!1}),b=new Zr(new Xf,y);let w=!1;const x=e.background;x?x.isColor&&(y.color.copy(x),e.background=null,w=!0):(y.color.copy(d4),w=!0);for(let _=0;_<6;_++){const M=_%3;M===0?(o.up.set(0,l[_],0),o.lookAt(u[_],0,0)):M===1?(o.up.set(0,0,l[_]),o.lookAt(0,u[_],0)):(o.up.set(0,l[_],0),o.lookAt(0,0,u[_]));const E=this._cubeSize;Wx(i,M*E,_>2?E:0,E,E),f.setRenderTarget(i),w&&f.render(b,o),f.render(e,o)}b.geometry.dispose(),b.material.dispose(),f.toneMapping=m,f.autoClear=h,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===hl||e.mapping===zu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=m4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=p4());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new Zr(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;Wx(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,bA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=f4[(i-1)%f4.length];this._blur(e,i-1,i,a,s)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,h=new Zr(this._lodPlanes[i],u),m=u.uniforms,y=this._sizeLods[r]-1,b=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*of-1),w=a/b,x=isFinite(a)?1+Math.floor(f*w):of;x>of&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${of}`);const _=[];let M=0;for(let N=0;N<of;++N){const L=N/w,T=Math.exp(-L*L/2);_.push(T),N===0?M+=T:N<x&&(M+=2*T)}for(let N=0;N<_.length;N++)_[N]=_[N]/M;m.envMap.value=e.texture,m.samples.value=x,m.weights.value=_,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:E}=this;m.dTheta.value=b,m.mipInt.value=E-r;const A=this._sizeLods[i],R=3*A*(i>E-jp?i-E+jp:0),O=4*(this._cubeSize-A);Wx(t,R,O,3*A,2*A),l.setRenderTarget(t),l.render(h,bA)}}function $pe(n){const e=[],t=[],r=[];let i=n;const a=n-jp+1+u4.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let l=1/o;s>n-jp?l=u4[s-n+jp-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),f=-u,h=1+u,m=[f,f,h,f,h,h,f,f,h,h,f,h],y=6,b=6,w=3,x=2,_=1,M=new Float32Array(w*b*y),E=new Float32Array(x*b*y),A=new Float32Array(_*b*y);for(let O=0;O<y;O++){const N=O%3*2/3-1,L=O>2?0:-1,T=[N,L,0,N+2/3,L,0,N+2/3,L+1,0,N,L,0,N+2/3,L+1,0,N,L+1,0];M.set(T,w*b*O),E.set(m,x*b*O);const j=[O,O,O,O,O,O];A.set(j,_*b*O)}const R=new kn;R.setAttribute("position",new cr(M,w)),R.setAttribute("uv",new cr(E,x)),R.setAttribute("faceIndex",new cr(A,_)),e.push(R),i>jp&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function h4(n,e,t){const r=new is(n,e,t);return r.texture.mapping=Dm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Wx(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function qpe(n,e,t){const r=new Float32Array(of),i=new oe(0,1,0);return new Rs({name:"SphericalGaussianBlur",defines:{n:of,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:lO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}function p4(){return new Rs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:lO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}function m4(){return new Rs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:lO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}function lO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Xpe(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===bm||l===Sy,f=l===hl||l===zu;if(u||f)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return t===null&&(t=new vP(n)),h=u?t.fromEquirectangular(o,h):t.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(u&&h&&h.height>0||f&&h&&i(h)){t===null&&(t=new vP(n));const m=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,m),o.addEventListener("dispose",a),m.texture}else return null}}}return o}function i(o){let l=0;const u=6;for(let f=0;f<u;f++)o[f]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function Ype(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Kpe(n,e,t,r){const i={},a=new WeakMap;function s(h){const m=h.target;m.index!==null&&e.remove(m.index);for(const b in m.attributes)e.remove(m.attributes[b]);for(const b in m.morphAttributes){const w=m.morphAttributes[b];for(let x=0,_=w.length;x<_;x++)e.remove(w[x])}m.removeEventListener("dispose",s),delete i[m.id];const y=a.get(m);y&&(e.remove(y),a.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(h,m){return i[m.id]===!0||(m.addEventListener("dispose",s),i[m.id]=!0,t.memory.geometries++),m}function l(h){const m=h.attributes;for(const b in m)e.update(m[b],n.ARRAY_BUFFER);const y=h.morphAttributes;for(const b in y){const w=y[b];for(let x=0,_=w.length;x<_;x++)e.update(w[x],n.ARRAY_BUFFER)}}function u(h){const m=[],y=h.index,b=h.attributes.position;let w=0;if(y!==null){const M=y.array;w=y.version;for(let E=0,A=M.length;E<A;E+=3){const R=M[E+0],O=M[E+1],N=M[E+2];m.push(R,O,O,N,N,R)}}else if(b!==void 0){const M=b.array;w=b.version;for(let E=0,A=M.length/3-1;E<A;E+=3){const R=E+0,O=E+1,N=E+2;m.push(R,O,O,N,N,R)}}else return;const x=new(eH(m)?sO:aO)(m,1);x.version=w;const _=a.get(h);_&&e.remove(_),a.set(h,x)}function f(h){const m=a.get(h);if(m){const y=h.index;y!==null&&m.version<y.version&&u(h)}else u(h);return a.get(h)}return{get:o,update:l,getWireframeAttribute:f}}function Zpe(n,e,t,r){const i=r.isWebGL2;let a;function s(y){a=y}let o,l;function u(y){o=y.type,l=y.bytesPerElement}function f(y,b){n.drawElements(a,b,o,y*l),t.update(b,a,1)}function h(y,b,w){if(w===0)return;let x,_;if(i)x=n,_="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[_](a,b,o,y*l,w),t.update(b,a,w)}function m(y,b,w){if(w===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<w;_++)this.render(y[_]/l,b[_]);else{x.multiDrawElementsWEBGL(a,b,0,o,y,0,w);let _=0;for(let M=0;M<w;M++)_+=b[M];t.update(_,a,1)}}this.setMode=s,this.setIndex=u,this.render=f,this.renderInstances=h,this.renderMultiDraw=m}function Jpe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Qpe(n,e){return n[0]-e[0]}function eme(n,e){return Math.abs(e[1])-Math.abs(n[1])}function tme(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,s=new lr,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,f,h){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const b=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,w=b!==void 0?b.length:0;let x=a.get(f);if(x===void 0||x.count!==w){let Y=function(){V.dispose(),a.delete(f),f.removeEventListener("dispose",Y)};var y=Y;x!==void 0&&x.texture.dispose();const E=f.morphAttributes.position!==void 0,A=f.morphAttributes.normal!==void 0,R=f.morphAttributes.color!==void 0,O=f.morphAttributes.position||[],N=f.morphAttributes.normal||[],L=f.morphAttributes.color||[];let T=0;E===!0&&(T=1),A===!0&&(T=2),R===!0&&(T=3);let j=f.attributes.position.count*T,U=1;j>e.maxTextureSize&&(U=Math.ceil(j/e.maxTextureSize),j=e.maxTextureSize);const B=new Float32Array(j*U*4*w),V=new $w(B,j,U,w);V.type=ai,V.needsUpdate=!0;const W=T*4;for(let Q=0;Q<w;Q++){const se=O[Q],G=N[Q],J=L[Q],Z=j*U*4*Q;for(let X=0;X<se.count;X++){const te=X*W;E===!0&&(s.fromBufferAttribute(se,X),B[Z+te+0]=s.x,B[Z+te+1]=s.y,B[Z+te+2]=s.z,B[Z+te+3]=0),A===!0&&(s.fromBufferAttribute(G,X),B[Z+te+4]=s.x,B[Z+te+5]=s.y,B[Z+te+6]=s.z,B[Z+te+7]=0),R===!0&&(s.fromBufferAttribute(J,X),B[Z+te+8]=s.x,B[Z+te+9]=s.y,B[Z+te+10]=s.z,B[Z+te+11]=J.itemSize===4?s.w:1)}}x={count:w,texture:V,size:new Xe(j,U)},a.set(f,x),f.addEventListener("dispose",Y)}let _=0;for(let E=0;E<m.length;E++)_+=m[E];const M=f.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",M),h.getUniforms().setValue(n,"morphTargetInfluences",m),h.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const b=m===void 0?0:m.length;let w=r[f.id];if(w===void 0||w.length!==b){w=[];for(let A=0;A<b;A++)w[A]=[A,0];r[f.id]=w}for(let A=0;A<b;A++){const R=w[A];R[0]=A,R[1]=m[A]}w.sort(eme);for(let A=0;A<8;A++)A<b&&w[A][1]?(o[A][0]=w[A][0],o[A][1]=w[A][1]):(o[A][0]=Number.MAX_SAFE_INTEGER,o[A][1]=0);o.sort(Qpe);const x=f.morphAttributes.position,_=f.morphAttributes.normal;let M=0;for(let A=0;A<8;A++){const R=o[A],O=R[0],N=R[1];O!==Number.MAX_SAFE_INTEGER&&N?(x&&f.getAttribute("morphTarget"+A)!==x[O]&&f.setAttribute("morphTarget"+A,x[O]),_&&f.getAttribute("morphNormal"+A)!==_[O]&&f.setAttribute("morphNormal"+A,_[O]),i[A]=N,M+=N):(x&&f.hasAttribute("morphTarget"+A)===!0&&f.deleteAttribute("morphTarget"+A),_&&f.hasAttribute("morphNormal"+A)===!0&&f.deleteAttribute("morphNormal"+A),i[A]=0)}const E=f.morphTargetsRelative?1:1-M;h.getUniforms().setValue(n,"morphTargetBaseInfluence",E),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function nme(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,f=l.geometry,h=e.get(l,f);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const m=l.skeleton;i.get(m)!==u&&(m.update(),i.set(m,u))}return h}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}class qw extends wr{constructor(e,t,r,i,a,s,o,l,u,f){if(f=f!==void 0?f:Lu,f!==Lu&&f!==Uf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===Lu&&(r=al),r===void 0&&f===Uf&&(r=Iu),super(null,i,a,s,o,l,f,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ri,this.minFilter=l!==void 0?l:ri,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const lH=new wr,cH=new qw(1,1);cH.compareFunction=tO;const uH=new $w,dH=new iO,fH=new a0,g4=[],v4=[],y4=new Float32Array(16),x4=new Float32Array(9),b4=new Float32Array(4);function Um(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=g4[i];if(a===void 0&&(a=new Float32Array(i),g4[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function Ri(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ki(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Xw(n,e){let t=v4[e];t===void 0&&(t=new Int32Array(e),v4[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function rme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ime(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;n.uniform2fv(this.addr,e),ki(t,e)}}function ame(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ri(t,e))return;n.uniform3fv(this.addr,e),ki(t,e)}}function sme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;n.uniform4fv(this.addr,e),ki(t,e)}}function ome(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ri(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,r))return;b4.set(r),n.uniformMatrix2fv(this.addr,!1,b4),ki(t,r)}}function lme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ri(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,r))return;x4.set(r),n.uniformMatrix3fv(this.addr,!1,x4),ki(t,r)}}function cme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ri(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,r))return;y4.set(r),n.uniformMatrix4fv(this.addr,!1,y4),ki(t,r)}}function ume(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function dme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;n.uniform2iv(this.addr,e),ki(t,e)}}function fme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;n.uniform3iv(this.addr,e),ki(t,e)}}function hme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;n.uniform4iv(this.addr,e),ki(t,e)}}function pme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function mme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;n.uniform2uiv(this.addr,e),ki(t,e)}}function gme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;n.uniform3uiv(this.addr,e),ki(t,e)}}function vme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;n.uniform4uiv(this.addr,e),ki(t,e)}}function yme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const a=this.type===n.SAMPLER_2D_SHADOW?cH:lH;t.setTexture2D(e||a,i)}function xme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||dH,i)}function bme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||fH,i)}function wme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||uH,i)}function _me(n){switch(n){case 5126:return rme;case 35664:return ime;case 35665:return ame;case 35666:return sme;case 35674:return ome;case 35675:return lme;case 35676:return cme;case 5124:case 35670:return ume;case 35667:case 35671:return dme;case 35668:case 35672:return fme;case 35669:case 35673:return hme;case 5125:return pme;case 36294:return mme;case 36295:return gme;case 36296:return vme;case 35678:case 36198:case 36298:case 36306:case 35682:return yme;case 35679:case 36299:case 36307:return xme;case 35680:case 36300:case 36308:case 36293:return bme;case 36289:case 36303:case 36311:case 36292:return wme}}function Sme(n,e){n.uniform1fv(this.addr,e)}function Mme(n,e){const t=Um(e,this.size,2);n.uniform2fv(this.addr,t)}function Eme(n,e){const t=Um(e,this.size,3);n.uniform3fv(this.addr,t)}function Tme(n,e){const t=Um(e,this.size,4);n.uniform4fv(this.addr,t)}function Ame(n,e){const t=Um(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Cme(n,e){const t=Um(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Pme(n,e){const t=Um(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Nme(n,e){n.uniform1iv(this.addr,e)}function Ome(n,e){n.uniform2iv(this.addr,e)}function Rme(n,e){n.uniform3iv(this.addr,e)}function kme(n,e){n.uniform4iv(this.addr,e)}function jme(n,e){n.uniform1uiv(this.addr,e)}function Ime(n,e){n.uniform2uiv(this.addr,e)}function Lme(n,e){n.uniform3uiv(this.addr,e)}function Dme(n,e){n.uniform4uiv(this.addr,e)}function Ume(n,e,t){const r=this.cache,i=e.length,a=Xw(t,i);Ri(r,a)||(n.uniform1iv(this.addr,a),ki(r,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||lH,a[s])}function Fme(n,e,t){const r=this.cache,i=e.length,a=Xw(t,i);Ri(r,a)||(n.uniform1iv(this.addr,a),ki(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||dH,a[s])}function zme(n,e,t){const r=this.cache,i=e.length,a=Xw(t,i);Ri(r,a)||(n.uniform1iv(this.addr,a),ki(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||fH,a[s])}function Bme(n,e,t){const r=this.cache,i=e.length,a=Xw(t,i);Ri(r,a)||(n.uniform1iv(this.addr,a),ki(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||uH,a[s])}function Hme(n){switch(n){case 5126:return Sme;case 35664:return Mme;case 35665:return Eme;case 35666:return Tme;case 35674:return Ame;case 35675:return Cme;case 35676:return Pme;case 5124:case 35670:return Nme;case 35667:case 35671:return Ome;case 35668:case 35672:return Rme;case 35669:case 35673:return kme;case 5125:return jme;case 36294:return Ime;case 36295:return Lme;case 36296:return Dme;case 35678:case 36198:case 36298:case 36306:case 35682:return Ume;case 35679:case 36299:case 36307:return Fme;case 35680:case 36300:case 36308:case 36293:return zme;case 36289:case 36303:case 36311:case 36292:return Bme}}class Vme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=_me(t.type)}}class Wme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Hme(t.type)}}class Gme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const MA=/(\w+)(\])?(\[|\.)?/g;function w4(n,e){n.seq.push(e),n.map[e.id]=e}function $me(n,e,t){const r=n.name,i=r.length;for(MA.lastIndex=0;;){const a=MA.exec(r),s=MA.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){w4(t,u===void 0?new Vme(o,n,e):new Wme(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new Gme(o),w4(t,h)),t=h}}}class Nb{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);$me(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function _4(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const qme=37297;let Xme=0;function Yme(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}function Kme(n){const e=or.getPrimaries(or.workingColorSpace),t=or.getPrimaries(n);let r;switch(e===t?r="":e===Oy&&t===Ny?r="LinearDisplayP3ToLinearSRGB":e===Ny&&t===Oy&&(r="LinearSRGBToLinearDisplayP3"),n){case Os:case n0:return[r,"LinearTransferOETF"];case mi:case Gw:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function S4(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+Yme(n.getShaderSource(e),s)}else return i}function Zme(n,e){const t=Kme(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Jme(n,e){let t;switch(e){case N8:t="Linear";break;case O8:t="Reinhard";break;case R8:t="OptimizedCineon";break;case HN:t="ACESFilmic";break;case j8:t="AgX";break;case k8:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Qme(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ip).join(`
`)}function ege(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Ip).join(`
`)}function tge(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function nge(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Ip(n){return n!==""}function M4(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function E4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const rge=/^[ \t]*#include +<([\w\d./]+)>/gm;function yP(n){return n.replace(rge,age)}const ige=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function age(n,e){let t=Tn[e];if(t===void 0){const r=ige.get(e);if(r!==void 0)t=Tn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return yP(t)}const sge=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function T4(n){return n.replace(sge,oge)}function oge(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function A4(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lge(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Bw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Av?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===No&&(e="SHADOWMAP_TYPE_VSM"),e}function cge(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case hl:case zu:e="ENVMAP_TYPE_CUBE";break;case Dm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uge(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case zu:e="ENVMAP_MODE_REFRACTION";break}return e}function dge(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case t0:e="ENVMAP_BLENDING_MULTIPLY";break;case C8:e="ENVMAP_BLENDING_MIX";break;case P8:e="ENVMAP_BLENDING_ADD";break}return e}function fge(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function hge(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=lge(t),u=cge(t),f=uge(t),h=dge(t),m=fge(t),y=t.isWebGL2?"":Qme(t),b=ege(t),w=tge(a),x=i.createProgram();let _,M,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Ip).join(`
`),_.length>0&&(_+=`
`),M=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Ip).join(`
`),M.length>0&&(M+=`
`)):(_=[A4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ip).join(`
`),M=[y,A4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cl?"#define TONE_MAPPING":"",t.toneMapping!==cl?Tn.tonemapping_pars_fragment:"",t.toneMapping!==cl?Jme("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tn.colorspace_pars_fragment,Zme("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ip).join(`
`)),s=yP(s),s=M4(s,t),s=E4(s,t),o=yP(o),o=M4(o,t),o=E4(o,t),s=T4(s),o=T4(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,_=[b,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,M=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===mP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===mP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const A=E+_+s,R=E+M+o,O=_4(i,i.VERTEX_SHADER,A),N=_4(i,i.FRAGMENT_SHADER,R);i.attachShader(x,O),i.attachShader(x,N),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function L(B){if(n.debug.checkShaderErrors){const V=i.getProgramInfoLog(x).trim(),W=i.getShaderInfoLog(O).trim(),Y=i.getShaderInfoLog(N).trim();let Q=!0,se=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,x,O,N);else{const G=S4(i,O,"vertex"),J=S4(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Program Info Log: `+V+`
`+G+`
`+J)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(W===""||Y==="")&&(se=!1);se&&(B.diagnostics={runnable:Q,programLog:V,vertexShader:{log:W,prefix:_},fragmentShader:{log:Y,prefix:M}})}i.deleteShader(O),i.deleteShader(N),T=new Nb(i,x),j=nge(i,x)}let T;this.getUniforms=function(){return T===void 0&&L(this),T};let j;this.getAttributes=function(){return j===void 0&&L(this),j};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=i.getProgramParameter(x,qme)),U},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Xme++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=O,this.fragmentShader=N,this}let pge=0;class mge{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new gge(e),t.set(e,r)),r}}class gge{constructor(e){this.id=pge++,this.code=e,this.usedTimes=0}}function vge(n,e,t,r,i,a,s){const o=new Sf,l=new mge,u=[],f=i.isWebGL2,h=i.logarithmicDepthBuffer,m=i.vertexTextures;let y=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(T){return T===0?"uv":`uv${T}`}function x(T,j,U,B,V){const W=B.fog,Y=V.geometry,Q=T.isMeshStandardMaterial?B.environment:null,se=(T.isMeshStandardMaterial?t:e).get(T.envMap||Q),G=se&&se.mapping===Dm?se.image.height:null,J=b[T.type];T.precision!==null&&(y=i.getMaxPrecision(T.precision),y!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",y,"instead."));const Z=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,X=Z!==void 0?Z.length:0;let te=0;Y.morphAttributes.position!==void 0&&(te=1),Y.morphAttributes.normal!==void 0&&(te=2),Y.morphAttributes.color!==void 0&&(te=3);let ce,le,be,Se;if(J){const nr=ko[J];ce=nr.vertexShader,le=nr.fragmentShader}else ce=T.vertexShader,le=T.fragmentShader,l.update(T),be=l.getVertexShaderID(T),Se=l.getFragmentShaderID(T);const Ie=n.getRenderTarget(),qe=V.isInstancedMesh===!0,Pe=V.isBatchedMesh===!0,Fe=!!T.map,$e=!!T.matcap,ne=!!se,Ve=!!T.aoMap,Ne=!!T.lightMap,Ke=!!T.bumpMap,De=!!T.normalMap,vt=!!T.displacementMap,dt=!!T.emissiveMap,ie=!!T.metalnessMap,ee=!!T.roughnessMap,Te=T.anisotropy>0,Ze=T.clearcoat>0,Je=T.iridescence>0,Ye=T.sheen>0,Tt=T.transmission>0,pt=Te&&!!T.anisotropyMap,St=Ze&&!!T.clearcoatMap,Ut=Ze&&!!T.clearcoatNormalMap,Yt=Ze&&!!T.clearcoatRoughnessMap,Qe=Je&&!!T.iridescenceMap,mn=Je&&!!T.iridescenceThicknessMap,hn=Ye&&!!T.sheenColorMap,$t=Ye&&!!T.sheenRoughnessMap,Mt=!!T.specularMap,At=!!T.specularColorMap,me=!!T.specularIntensityMap,We=Tt&&!!T.transmissionMap,lt=Tt&&!!T.thicknessMap,wt=!!T.gradientMap,Ae=!!T.alphaMap,ge=T.alphaTest>0,ot=!!T.alphaHash,gt=!!T.extensions,Gt=!!Y.attributes.uv1,kt=!!Y.attributes.uv2,xn=!!Y.attributes.uv3;let Pn=cl;return T.toneMapped&&(Ie===null||Ie.isXRRenderTarget===!0)&&(Pn=n.toneMapping),{isWebGL2:f,shaderID:J,shaderType:T.type,shaderName:T.name,vertexShader:ce,fragmentShader:le,defines:T.defines,customVertexShaderID:be,customFragmentShaderID:Se,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:y,batching:Pe,instancing:qe,instancingColor:qe&&V.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:Ie===null?n.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:Os,map:Fe,matcap:$e,envMap:ne,envMapMode:ne&&se.mapping,envMapCubeUVHeight:G,aoMap:Ve,lightMap:Ne,bumpMap:Ke,normalMap:De,displacementMap:m&&vt,emissiveMap:dt,normalMapObjectSpace:De&&T.normalMapType===$8,normalMapTangentSpace:De&&T.normalMapType===Yu,metalnessMap:ie,roughnessMap:ee,anisotropy:Te,anisotropyMap:pt,clearcoat:Ze,clearcoatMap:St,clearcoatNormalMap:Ut,clearcoatRoughnessMap:Yt,iridescence:Je,iridescenceMap:Qe,iridescenceThicknessMap:mn,sheen:Ye,sheenColorMap:hn,sheenRoughnessMap:$t,specularMap:Mt,specularColorMap:At,specularIntensityMap:me,transmission:Tt,transmissionMap:We,thicknessMap:lt,gradientMap:wt,opaque:T.transparent===!1&&T.blending===wf,alphaMap:Ae,alphaTest:ge,alphaHash:ot,combine:T.combine,mapUv:Fe&&w(T.map.channel),aoMapUv:Ve&&w(T.aoMap.channel),lightMapUv:Ne&&w(T.lightMap.channel),bumpMapUv:Ke&&w(T.bumpMap.channel),normalMapUv:De&&w(T.normalMap.channel),displacementMapUv:vt&&w(T.displacementMap.channel),emissiveMapUv:dt&&w(T.emissiveMap.channel),metalnessMapUv:ie&&w(T.metalnessMap.channel),roughnessMapUv:ee&&w(T.roughnessMap.channel),anisotropyMapUv:pt&&w(T.anisotropyMap.channel),clearcoatMapUv:St&&w(T.clearcoatMap.channel),clearcoatNormalMapUv:Ut&&w(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Yt&&w(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Qe&&w(T.iridescenceMap.channel),iridescenceThicknessMapUv:mn&&w(T.iridescenceThicknessMap.channel),sheenColorMapUv:hn&&w(T.sheenColorMap.channel),sheenRoughnessMapUv:$t&&w(T.sheenRoughnessMap.channel),specularMapUv:Mt&&w(T.specularMap.channel),specularColorMapUv:At&&w(T.specularColorMap.channel),specularIntensityMapUv:me&&w(T.specularIntensityMap.channel),transmissionMapUv:We&&w(T.transmissionMap.channel),thicknessMapUv:lt&&w(T.thicknessMap.channel),alphaMapUv:Ae&&w(T.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(De||Te),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,vertexUv1s:Gt,vertexUv2s:kt,vertexUv3s:xn,pointsUvs:V.isPoints===!0&&!!Y.attributes.uv&&(Fe||Ae),fog:!!W,useFog:T.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:V.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:te,numDirLights:j.directional.length,numPointLights:j.point.length,numSpotLights:j.spot.length,numSpotLightMaps:j.spotLightMap.length,numRectAreaLights:j.rectArea.length,numHemiLights:j.hemi.length,numDirLightShadows:j.directionalShadowMap.length,numPointLightShadows:j.pointShadowMap.length,numSpotLightShadows:j.spotShadowMap.length,numSpotLightShadowsWithMaps:j.numSpotLightShadowsWithMaps,numLightProbes:j.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Pn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Fe&&T.map.isVideoTexture===!0&&or.getTransfer(T.map.colorSpace)===Mr,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Io,flipSided:T.side===La,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:gt&&T.extensions.derivatives===!0,extensionFragDepth:gt&&T.extensions.fragDepth===!0,extensionDrawBuffers:gt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:gt&&T.extensions.shaderTextureLOD===!0,extensionClipCullDistance:gt&&T.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}}function _(T){const j=[];if(T.shaderID?j.push(T.shaderID):(j.push(T.customVertexShaderID),j.push(T.customFragmentShaderID)),T.defines!==void 0)for(const U in T.defines)j.push(U),j.push(T.defines[U]);return T.isRawShaderMaterial===!1&&(M(j,T),E(j,T),j.push(n.outputColorSpace)),j.push(T.customProgramCacheKey),j.join()}function M(T,j){T.push(j.precision),T.push(j.outputColorSpace),T.push(j.envMapMode),T.push(j.envMapCubeUVHeight),T.push(j.mapUv),T.push(j.alphaMapUv),T.push(j.lightMapUv),T.push(j.aoMapUv),T.push(j.bumpMapUv),T.push(j.normalMapUv),T.push(j.displacementMapUv),T.push(j.emissiveMapUv),T.push(j.metalnessMapUv),T.push(j.roughnessMapUv),T.push(j.anisotropyMapUv),T.push(j.clearcoatMapUv),T.push(j.clearcoatNormalMapUv),T.push(j.clearcoatRoughnessMapUv),T.push(j.iridescenceMapUv),T.push(j.iridescenceThicknessMapUv),T.push(j.sheenColorMapUv),T.push(j.sheenRoughnessMapUv),T.push(j.specularMapUv),T.push(j.specularColorMapUv),T.push(j.specularIntensityMapUv),T.push(j.transmissionMapUv),T.push(j.thicknessMapUv),T.push(j.combine),T.push(j.fogExp2),T.push(j.sizeAttenuation),T.push(j.morphTargetsCount),T.push(j.morphAttributeCount),T.push(j.numDirLights),T.push(j.numPointLights),T.push(j.numSpotLights),T.push(j.numSpotLightMaps),T.push(j.numHemiLights),T.push(j.numRectAreaLights),T.push(j.numDirLightShadows),T.push(j.numPointLightShadows),T.push(j.numSpotLightShadows),T.push(j.numSpotLightShadowsWithMaps),T.push(j.numLightProbes),T.push(j.shadowMapType),T.push(j.toneMapping),T.push(j.numClippingPlanes),T.push(j.numClipIntersection),T.push(j.depthPacking)}function E(T,j){o.disableAll(),j.isWebGL2&&o.enable(0),j.supportsVertexTextures&&o.enable(1),j.instancing&&o.enable(2),j.instancingColor&&o.enable(3),j.matcap&&o.enable(4),j.envMap&&o.enable(5),j.normalMapObjectSpace&&o.enable(6),j.normalMapTangentSpace&&o.enable(7),j.clearcoat&&o.enable(8),j.iridescence&&o.enable(9),j.alphaTest&&o.enable(10),j.vertexColors&&o.enable(11),j.vertexAlphas&&o.enable(12),j.vertexUv1s&&o.enable(13),j.vertexUv2s&&o.enable(14),j.vertexUv3s&&o.enable(15),j.vertexTangents&&o.enable(16),j.anisotropy&&o.enable(17),j.alphaHash&&o.enable(18),j.batching&&o.enable(19),T.push(o.mask),o.disableAll(),j.fog&&o.enable(0),j.useFog&&o.enable(1),j.flatShading&&o.enable(2),j.logarithmicDepthBuffer&&o.enable(3),j.skinning&&o.enable(4),j.morphTargets&&o.enable(5),j.morphNormals&&o.enable(6),j.morphColors&&o.enable(7),j.premultipliedAlpha&&o.enable(8),j.shadowMapEnabled&&o.enable(9),j.useLegacyLights&&o.enable(10),j.doubleSided&&o.enable(11),j.flipSided&&o.enable(12),j.useDepthPacking&&o.enable(13),j.dithering&&o.enable(14),j.transmission&&o.enable(15),j.sheen&&o.enable(16),j.opaque&&o.enable(17),j.pointsUvs&&o.enable(18),j.decodeVideoTexture&&o.enable(19),T.push(o.mask)}function A(T){const j=b[T.type];let U;if(j){const B=ko[j];U=aH.clone(B.uniforms)}else U=T.uniforms;return U}function R(T,j){let U;for(let B=0,V=u.length;B<V;B++){const W=u[B];if(W.cacheKey===j){U=W,++U.usedTimes;break}}return U===void 0&&(U=new hge(n,j,T,a),u.push(U)),U}function O(T){if(--T.usedTimes===0){const j=u.indexOf(T);u[j]=u[u.length-1],u.pop(),T.destroy()}}function N(T){l.remove(T)}function L(){l.dispose()}return{getParameters:x,getProgramCacheKey:_,getUniforms:A,acquireProgram:R,releaseProgram:O,releaseShaderCache:N,programs:u,dispose:L}}function yge(){let n=new WeakMap;function e(a){let s=n.get(a);return s===void 0&&(s={},n.set(a,s)),s}function t(a){n.delete(a)}function r(a,s,o){n.get(a)[s]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function xge(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function P4(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(h,m,y,b,w,x){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:m,material:y,groupOrder:b,renderOrder:h.renderOrder,z:w,group:x},n[e]=_):(_.id=h.id,_.object=h,_.geometry=m,_.material=y,_.groupOrder=b,_.renderOrder=h.renderOrder,_.z=w,_.group=x),e++,_}function o(h,m,y,b,w,x){const _=s(h,m,y,b,w,x);y.transmission>0?r.push(_):y.transparent===!0?i.push(_):t.push(_)}function l(h,m,y,b,w,x){const _=s(h,m,y,b,w,x);y.transmission>0?r.unshift(_):y.transparent===!0?i.unshift(_):t.unshift(_)}function u(h,m){t.length>1&&t.sort(h||xge),r.length>1&&r.sort(m||C4),i.length>1&&i.sort(m||C4)}function f(){for(let h=e,m=n.length;h<m;h++){const y=n[h];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:f,sort:u}}function bge(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new P4,n.set(r,[s])):i>=a.length?(s=new P4,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function wge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new Rt};break;case"SpotLight":t={position:new oe,direction:new oe,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":t={color:new Rt,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return n[e.id]=t,t}}}function _ge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Sge=0;function Mge(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Ege(n,e){const t=new wge,r=_ge(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new oe);const a=new oe,s=new ln,o=new ln;function l(f,h){let m=0,y=0,b=0;for(let B=0;B<9;B++)i.probe[B].set(0,0,0);let w=0,x=0,_=0,M=0,E=0,A=0,R=0,O=0,N=0,L=0,T=0;f.sort(Mge);const j=h===!0?Math.PI:1;for(let B=0,V=f.length;B<V;B++){const W=f[B],Y=W.color,Q=W.intensity,se=W.distance,G=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)m+=Y.r*Q*j,y+=Y.g*Q*j,b+=Y.b*Q*j;else if(W.isLightProbe){for(let J=0;J<9;J++)i.probe[J].addScaledVector(W.sh.coefficients[J],Q);T++}else if(W.isDirectionalLight){const J=t.get(W);if(J.color.copy(W.color).multiplyScalar(W.intensity*j),W.castShadow){const Z=W.shadow,X=r.get(W);X.shadowBias=Z.bias,X.shadowNormalBias=Z.normalBias,X.shadowRadius=Z.radius,X.shadowMapSize=Z.mapSize,i.directionalShadow[w]=X,i.directionalShadowMap[w]=G,i.directionalShadowMatrix[w]=W.shadow.matrix,A++}i.directional[w]=J,w++}else if(W.isSpotLight){const J=t.get(W);J.position.setFromMatrixPosition(W.matrixWorld),J.color.copy(Y).multiplyScalar(Q*j),J.distance=se,J.coneCos=Math.cos(W.angle),J.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),J.decay=W.decay,i.spot[_]=J;const Z=W.shadow;if(W.map&&(i.spotLightMap[N]=W.map,N++,Z.updateMatrices(W),W.castShadow&&L++),i.spotLightMatrix[_]=Z.matrix,W.castShadow){const X=r.get(W);X.shadowBias=Z.bias,X.shadowNormalBias=Z.normalBias,X.shadowRadius=Z.radius,X.shadowMapSize=Z.mapSize,i.spotShadow[_]=X,i.spotShadowMap[_]=G,O++}_++}else if(W.isRectAreaLight){const J=t.get(W);J.color.copy(Y).multiplyScalar(Q),J.halfWidth.set(W.width*.5,0,0),J.halfHeight.set(0,W.height*.5,0),i.rectArea[M]=J,M++}else if(W.isPointLight){const J=t.get(W);if(J.color.copy(W.color).multiplyScalar(W.intensity*j),J.distance=W.distance,J.decay=W.decay,W.castShadow){const Z=W.shadow,X=r.get(W);X.shadowBias=Z.bias,X.shadowNormalBias=Z.normalBias,X.shadowRadius=Z.radius,X.shadowMapSize=Z.mapSize,X.shadowCameraNear=Z.camera.near,X.shadowCameraFar=Z.camera.far,i.pointShadow[x]=X,i.pointShadowMap[x]=G,i.pointShadowMatrix[x]=W.shadow.matrix,R++}i.point[x]=J,x++}else if(W.isHemisphereLight){const J=t.get(W);J.skyColor.copy(W.color).multiplyScalar(Q*j),J.groundColor.copy(W.groundColor).multiplyScalar(Q*j),i.hemi[E]=J,E++}}M>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=xt.LTC_FLOAT_1,i.rectAreaLTC2=xt.LTC_FLOAT_2):(i.rectAreaLTC1=xt.LTC_HALF_1,i.rectAreaLTC2=xt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=xt.LTC_FLOAT_1,i.rectAreaLTC2=xt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=xt.LTC_HALF_1,i.rectAreaLTC2=xt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=y,i.ambient[2]=b;const U=i.hash;(U.directionalLength!==w||U.pointLength!==x||U.spotLength!==_||U.rectAreaLength!==M||U.hemiLength!==E||U.numDirectionalShadows!==A||U.numPointShadows!==R||U.numSpotShadows!==O||U.numSpotMaps!==N||U.numLightProbes!==T)&&(i.directional.length=w,i.spot.length=_,i.rectArea.length=M,i.point.length=x,i.hemi.length=E,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=O+N-L,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=T,U.directionalLength=w,U.pointLength=x,U.spotLength=_,U.rectAreaLength=M,U.hemiLength=E,U.numDirectionalShadows=A,U.numPointShadows=R,U.numSpotShadows=O,U.numSpotMaps=N,U.numLightProbes=T,i.version=Sge++)}function u(f,h){let m=0,y=0,b=0,w=0,x=0;const _=h.matrixWorldInverse;for(let M=0,E=f.length;M<E;M++){const A=f[M];if(A.isDirectionalLight){const R=i.directional[m];R.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(_),m++}else if(A.isSpotLight){const R=i.spot[b];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),R.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(_),b++}else if(A.isRectAreaLight){const R=i.rectArea[w];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),o.identity(),s.copy(A.matrixWorld),s.premultiply(_),o.extractRotation(s),R.halfWidth.set(A.width*.5,0,0),R.halfHeight.set(0,A.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),w++}else if(A.isPointLight){const R=i.point[y];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),y++}else if(A.isHemisphereLight){const R=i.hemi[x];R.direction.setFromMatrixPosition(A.matrixWorld),R.direction.transformDirection(_),x++}}}return{setup:l,setupView:u,state:i}}function N4(n,e){const t=new Ege(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(h){r.push(h)}function o(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function Tge(n,e){let t=new WeakMap;function r(a,s=0){const o=t.get(a);let l;return o===void 0?(l=new N4(n,e),t.set(a,[l])):s>=o.length?(l=new N4(n,e),o.push(l)):l=o[s],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class cO extends xa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=W8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uO extends xa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Age=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Cge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Pge(n,e,t){let r=new s0;const i=new Xe,a=new Xe,s=new lr,o=new cO({depthPacking:G8}),l=new uO,u={},f=t.maxTextureSize,h={[_c]:La,[La]:_c,[Io]:Io},m=new Rs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:Age,fragmentShader:Cge}),y=m.clone();y.defines.HORIZONTAL_PASS=1;const b=new kn;b.setAttribute("position",new cr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Zr(b,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bw;let _=this.type;this.render=function(O,N,L){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||O.length===0)return;const T=n.getRenderTarget(),j=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),B=n.state;B.setBlending(ll),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const V=_!==No&&this.type===No,W=_===No&&this.type!==No;for(let Y=0,Q=O.length;Y<Q;Y++){const se=O[Y],G=se.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const J=G.getFrameExtents();if(i.multiply(J),a.copy(G.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(a.x=Math.floor(f/J.x),i.x=a.x*J.x,G.mapSize.x=a.x),i.y>f&&(a.y=Math.floor(f/J.y),i.y=a.y*J.y,G.mapSize.y=a.y)),G.map===null||V===!0||W===!0){const X=this.type!==No?{minFilter:ri,magFilter:ri}:{};G.map!==null&&G.map.dispose(),G.map=new is(i.x,i.y,X),G.map.texture.name=se.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const Z=G.getViewportCount();for(let X=0;X<Z;X++){const te=G.getViewport(X);s.set(a.x*te.x,a.y*te.y,a.x*te.z,a.y*te.w),B.viewport(s),G.updateMatrices(se,X),r=G.getFrustum(),A(N,L,G.camera,se,this.type)}G.isPointLightShadow!==!0&&this.type===No&&M(G,L),G.needsUpdate=!1}_=this.type,x.needsUpdate=!1,n.setRenderTarget(T,j,U)};function M(O,N){const L=e.update(w);m.defines.VSM_SAMPLES!==O.blurSamples&&(m.defines.VSM_SAMPLES=O.blurSamples,y.defines.VSM_SAMPLES=O.blurSamples,m.needsUpdate=!0,y.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new is(i.x,i.y)),m.uniforms.shadow_pass.value=O.map.texture,m.uniforms.resolution.value=O.mapSize,m.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(N,null,L,m,w,null),y.uniforms.shadow_pass.value=O.mapPass.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(N,null,L,y,w,null)}function E(O,N,L,T){let j=null;const U=L.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(U!==void 0)j=U;else if(j=L.isPointLight===!0?l:o,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const B=j.uuid,V=N.uuid;let W=u[B];W===void 0&&(W={},u[B]=W);let Y=W[V];Y===void 0&&(Y=j.clone(),W[V]=Y,N.addEventListener("dispose",R)),j=Y}if(j.visible=N.visible,j.wireframe=N.wireframe,T===No?j.side=N.shadowSide!==null?N.shadowSide:N.side:j.side=N.shadowSide!==null?N.shadowSide:h[N.side],j.alphaMap=N.alphaMap,j.alphaTest=N.alphaTest,j.map=N.map,j.clipShadows=N.clipShadows,j.clippingPlanes=N.clippingPlanes,j.clipIntersection=N.clipIntersection,j.displacementMap=N.displacementMap,j.displacementScale=N.displacementScale,j.displacementBias=N.displacementBias,j.wireframeLinewidth=N.wireframeLinewidth,j.linewidth=N.linewidth,L.isPointLight===!0&&j.isMeshDistanceMaterial===!0){const B=n.properties.get(j);B.light=L}return j}function A(O,N,L,T,j){if(O.visible===!1)return;if(O.layers.test(N.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&j===No)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,O.matrixWorld);const V=e.update(O),W=O.material;if(Array.isArray(W)){const Y=V.groups;for(let Q=0,se=Y.length;Q<se;Q++){const G=Y[Q],J=W[G.materialIndex];if(J&&J.visible){const Z=E(O,J,T,j);O.onBeforeShadow(n,O,N,L,V,Z,G),n.renderBufferDirect(L,null,V,Z,O,G),O.onAfterShadow(n,O,N,L,V,Z,G)}}}else if(W.visible){const Y=E(O,W,T,j);O.onBeforeShadow(n,O,N,L,V,Y,null),n.renderBufferDirect(L,null,V,Y,O,null),O.onAfterShadow(n,O,N,L,V,Y,null)}}const B=O.children;for(let V=0,W=B.length;V<W;V++)A(B[V],N,L,T,j)}function R(O){O.target.removeEventListener("dispose",R);for(const L in u){const T=u[L],j=O.target.uuid;j in T&&(T[j].dispose(),delete T[j])}}}function Nge(n,e,t){const r=t.isWebGL2;function i(){let ge=!1;const ot=new lr;let gt=null;const Gt=new lr(0,0,0,0);return{setMask:function(kt){gt!==kt&&!ge&&(n.colorMask(kt,kt,kt,kt),gt=kt)},setLocked:function(kt){ge=kt},setClear:function(kt,xn,Pn,Bn,nr){nr===!0&&(kt*=Bn,xn*=Bn,Pn*=Bn),ot.set(kt,xn,Pn,Bn),Gt.equals(ot)===!1&&(n.clearColor(kt,xn,Pn,Bn),Gt.copy(ot))},reset:function(){ge=!1,gt=null,Gt.set(-1,0,0,0)}}}function a(){let ge=!1,ot=null,gt=null,Gt=null;return{setTest:function(kt){kt?Pe(n.DEPTH_TEST):Fe(n.DEPTH_TEST)},setMask:function(kt){ot!==kt&&!ge&&(n.depthMask(kt),ot=kt)},setFunc:function(kt){if(gt!==kt){switch(kt){case w8:n.depthFunc(n.NEVER);break;case _8:n.depthFunc(n.ALWAYS);break;case S8:n.depthFunc(n.LESS);break;case _y:n.depthFunc(n.LEQUAL);break;case M8:n.depthFunc(n.EQUAL);break;case E8:n.depthFunc(n.GEQUAL);break;case T8:n.depthFunc(n.GREATER);break;case A8:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}gt=kt}},setLocked:function(kt){ge=kt},setClear:function(kt){Gt!==kt&&(n.clearDepth(kt),Gt=kt)},reset:function(){ge=!1,ot=null,gt=null,Gt=null}}}function s(){let ge=!1,ot=null,gt=null,Gt=null,kt=null,xn=null,Pn=null,Bn=null,nr=null;return{setTest:function(Mn){ge||(Mn?Pe(n.STENCIL_TEST):Fe(n.STENCIL_TEST))},setMask:function(Mn){ot!==Mn&&!ge&&(n.stencilMask(Mn),ot=Mn)},setFunc:function(Mn,zr,si){(gt!==Mn||Gt!==zr||kt!==si)&&(n.stencilFunc(Mn,zr,si),gt=Mn,Gt=zr,kt=si)},setOp:function(Mn,zr,si){(xn!==Mn||Pn!==zr||Bn!==si)&&(n.stencilOp(Mn,zr,si),xn=Mn,Pn=zr,Bn=si)},setLocked:function(Mn){ge=Mn},setClear:function(Mn){nr!==Mn&&(n.clearStencil(Mn),nr=Mn)},reset:function(){ge=!1,ot=null,gt=null,Gt=null,kt=null,xn=null,Pn=null,Bn=null,nr=null}}}const o=new i,l=new a,u=new s,f=new WeakMap,h=new WeakMap;let m={},y={},b=new WeakMap,w=[],x=null,_=!1,M=null,E=null,A=null,R=null,O=null,N=null,L=null,T=new Rt(0,0,0),j=0,U=!1,B=null,V=null,W=null,Y=null,Q=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,J=0;const Z=n.getParameter(n.VERSION);Z.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Z)[1]),G=J>=1):Z.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),G=J>=2);let X=null,te={};const ce=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),be=new lr().fromArray(ce),Se=new lr().fromArray(le);function Ie(ge,ot,gt,Gt){const kt=new Uint8Array(4),xn=n.createTexture();n.bindTexture(ge,xn),n.texParameteri(ge,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ge,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Pn=0;Pn<gt;Pn++)r&&(ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY)?n.texImage3D(ot,0,n.RGBA,1,1,Gt,0,n.RGBA,n.UNSIGNED_BYTE,kt):n.texImage2D(ot+Pn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,kt);return xn}const qe={};qe[n.TEXTURE_2D]=Ie(n.TEXTURE_2D,n.TEXTURE_2D,1),qe[n.TEXTURE_CUBE_MAP]=Ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(qe[n.TEXTURE_2D_ARRAY]=Ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),qe[n.TEXTURE_3D]=Ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Pe(n.DEPTH_TEST),l.setFunc(_y),dt(!1),ie(IC),Pe(n.CULL_FACE),De(ll);function Pe(ge){m[ge]!==!0&&(n.enable(ge),m[ge]=!0)}function Fe(ge){m[ge]!==!1&&(n.disable(ge),m[ge]=!1)}function $e(ge,ot){return y[ge]!==ot?(n.bindFramebuffer(ge,ot),y[ge]=ot,r&&(ge===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=ot),ge===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=ot)),!0):!1}function ne(ge,ot){let gt=w,Gt=!1;if(ge)if(gt=b.get(ot),gt===void 0&&(gt=[],b.set(ot,gt)),ge.isWebGLMultipleRenderTargets){const kt=ge.texture;if(gt.length!==kt.length||gt[0]!==n.COLOR_ATTACHMENT0){for(let xn=0,Pn=kt.length;xn<Pn;xn++)gt[xn]=n.COLOR_ATTACHMENT0+xn;gt.length=kt.length,Gt=!0}}else gt[0]!==n.COLOR_ATTACHMENT0&&(gt[0]=n.COLOR_ATTACHMENT0,Gt=!0);else gt[0]!==n.BACK&&(gt[0]=n.BACK,Gt=!0);Gt&&(t.isWebGL2?n.drawBuffers(gt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(gt))}function Ve(ge){return x!==ge?(n.useProgram(ge),x=ge,!0):!1}const Ne={[Eu]:n.FUNC_ADD,[s8]:n.FUNC_SUBTRACT,[o8]:n.FUNC_REVERSE_SUBTRACT};if(r)Ne[FC]=n.MIN,Ne[zC]=n.MAX;else{const ge=e.get("EXT_blend_minmax");ge!==null&&(Ne[FC]=ge.MIN_EXT,Ne[zC]=ge.MAX_EXT)}const Ke={[l8]:n.ZERO,[c8]:n.ONE,[u8]:n.SRC_COLOR,[G1]:n.SRC_ALPHA,[g8]:n.SRC_ALPHA_SATURATE,[p8]:n.DST_COLOR,[f8]:n.DST_ALPHA,[d8]:n.ONE_MINUS_SRC_COLOR,[$1]:n.ONE_MINUS_SRC_ALPHA,[m8]:n.ONE_MINUS_DST_COLOR,[h8]:n.ONE_MINUS_DST_ALPHA,[v8]:n.CONSTANT_COLOR,[y8]:n.ONE_MINUS_CONSTANT_COLOR,[x8]:n.CONSTANT_ALPHA,[b8]:n.ONE_MINUS_CONSTANT_ALPHA};function De(ge,ot,gt,Gt,kt,xn,Pn,Bn,nr,Mn){if(ge===ll){_===!0&&(Fe(n.BLEND),_=!1);return}if(_===!1&&(Pe(n.BLEND),_=!0),ge!==a8){if(ge!==M||Mn!==U){if((E!==Eu||O!==Eu)&&(n.blendEquation(n.FUNC_ADD),E=Eu,O=Eu),Mn)switch(ge){case wf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case LC:n.blendFunc(n.ONE,n.ONE);break;case DC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case wf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case LC:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case DC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}A=null,R=null,N=null,L=null,T.set(0,0,0),j=0,M=ge,U=Mn}return}kt=kt||ot,xn=xn||gt,Pn=Pn||Gt,(ot!==E||kt!==O)&&(n.blendEquationSeparate(Ne[ot],Ne[kt]),E=ot,O=kt),(gt!==A||Gt!==R||xn!==N||Pn!==L)&&(n.blendFuncSeparate(Ke[gt],Ke[Gt],Ke[xn],Ke[Pn]),A=gt,R=Gt,N=xn,L=Pn),(Bn.equals(T)===!1||nr!==j)&&(n.blendColor(Bn.r,Bn.g,Bn.b,nr),T.copy(Bn),j=nr),M=ge,U=!1}function vt(ge,ot){ge.side===Io?Fe(n.CULL_FACE):Pe(n.CULL_FACE);let gt=ge.side===La;ot&&(gt=!gt),dt(gt),ge.blending===wf&&ge.transparent===!1?De(ll):De(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),l.setFunc(ge.depthFunc),l.setTest(ge.depthTest),l.setMask(ge.depthWrite),o.setMask(ge.colorWrite);const Gt=ge.stencilWrite;u.setTest(Gt),Gt&&(u.setMask(ge.stencilWriteMask),u.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),u.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Te(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?Pe(n.SAMPLE_ALPHA_TO_COVERAGE):Fe(n.SAMPLE_ALPHA_TO_COVERAGE)}function dt(ge){B!==ge&&(ge?n.frontFace(n.CW):n.frontFace(n.CCW),B=ge)}function ie(ge){ge!==n8?(Pe(n.CULL_FACE),ge!==V&&(ge===IC?n.cullFace(n.BACK):ge===r8?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Fe(n.CULL_FACE),V=ge}function ee(ge){ge!==W&&(G&&n.lineWidth(ge),W=ge)}function Te(ge,ot,gt){ge?(Pe(n.POLYGON_OFFSET_FILL),(Y!==ot||Q!==gt)&&(n.polygonOffset(ot,gt),Y=ot,Q=gt)):Fe(n.POLYGON_OFFSET_FILL)}function Ze(ge){ge?Pe(n.SCISSOR_TEST):Fe(n.SCISSOR_TEST)}function Je(ge){ge===void 0&&(ge=n.TEXTURE0+se-1),X!==ge&&(n.activeTexture(ge),X=ge)}function Ye(ge,ot,gt){gt===void 0&&(X===null?gt=n.TEXTURE0+se-1:gt=X);let Gt=te[gt];Gt===void 0&&(Gt={type:void 0,texture:void 0},te[gt]=Gt),(Gt.type!==ge||Gt.texture!==ot)&&(X!==gt&&(n.activeTexture(gt),X=gt),n.bindTexture(ge,ot||qe[ge]),Gt.type=ge,Gt.texture=ot)}function Tt(){const ge=te[X];ge!==void 0&&ge.type!==void 0&&(n.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function pt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function St(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ut(){try{n.texSubImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Yt(){try{n.texSubImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Qe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function mn(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function hn(){try{n.texStorage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function $t(){try{n.texStorage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Mt(){try{n.texImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function At(){try{n.texImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function me(ge){be.equals(ge)===!1&&(n.scissor(ge.x,ge.y,ge.z,ge.w),be.copy(ge))}function We(ge){Se.equals(ge)===!1&&(n.viewport(ge.x,ge.y,ge.z,ge.w),Se.copy(ge))}function lt(ge,ot){let gt=h.get(ot);gt===void 0&&(gt=new WeakMap,h.set(ot,gt));let Gt=gt.get(ge);Gt===void 0&&(Gt=n.getUniformBlockIndex(ot,ge.name),gt.set(ge,Gt))}function wt(ge,ot){const Gt=h.get(ot).get(ge);f.get(ot)!==Gt&&(n.uniformBlockBinding(ot,Gt,ge.__bindingPointIndex),f.set(ot,Gt))}function Ae(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},X=null,te={},y={},b=new WeakMap,w=[],x=null,_=!1,M=null,E=null,A=null,R=null,O=null,N=null,L=null,T=new Rt(0,0,0),j=0,U=!1,B=null,V=null,W=null,Y=null,Q=null,be.set(0,0,n.canvas.width,n.canvas.height),Se.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:Pe,disable:Fe,bindFramebuffer:$e,drawBuffers:ne,useProgram:Ve,setBlending:De,setMaterial:vt,setFlipSided:dt,setCullFace:ie,setLineWidth:ee,setPolygonOffset:Te,setScissorTest:Ze,activeTexture:Je,bindTexture:Ye,unbindTexture:Tt,compressedTexImage2D:pt,compressedTexImage3D:St,texImage2D:Mt,texImage3D:At,updateUBOMapping:lt,uniformBlockBinding:wt,texStorage2D:hn,texStorage3D:$t,texSubImage2D:Ut,texSubImage3D:Yt,compressedTexSubImage2D:Qe,compressedTexSubImage3D:mn,scissor:me,viewport:We,reset:Ae}}function Oge(n,e,t,r,i,a,s){const o=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let h;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(ie,ee){return y?new OffscreenCanvas(ie,ee):ky("canvas")}function w(ie,ee,Te,Ze){let Je=1;if((ie.width>Ze||ie.height>Ze)&&(Je=Ze/Math.max(ie.width,ie.height)),Je<1||ee===!0)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap){const Ye=ee?Y1:Math.floor,Tt=Ye(Je*ie.width),pt=Ye(Je*ie.height);h===void 0&&(h=b(Tt,pt));const St=Te?b(Tt,pt):h;return St.width=Tt,St.height=pt,St.getContext("2d").drawImage(ie,0,0,Tt,pt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+Tt+"x"+pt+")."),St}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie;return ie}function x(ie){return gP(ie.width)&&gP(ie.height)}function _(ie){return o?!1:ie.wrapS!==Dr||ie.wrapT!==Dr||ie.minFilter!==ri&&ie.minFilter!==Wn}function M(ie,ee){return ie.generateMipmaps&&ee&&ie.minFilter!==ri&&ie.minFilter!==Wn}function E(ie){n.generateMipmap(ie)}function A(ie,ee,Te,Ze,Je=!1){if(o===!1)return ee;if(ie!==null){if(n[ie]!==void 0)return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Ye=ee;if(ee===n.RED&&(Te===n.FLOAT&&(Ye=n.R32F),Te===n.HALF_FLOAT&&(Ye=n.R16F),Te===n.UNSIGNED_BYTE&&(Ye=n.R8)),ee===n.RED_INTEGER&&(Te===n.UNSIGNED_BYTE&&(Ye=n.R8UI),Te===n.UNSIGNED_SHORT&&(Ye=n.R16UI),Te===n.UNSIGNED_INT&&(Ye=n.R32UI),Te===n.BYTE&&(Ye=n.R8I),Te===n.SHORT&&(Ye=n.R16I),Te===n.INT&&(Ye=n.R32I)),ee===n.RG&&(Te===n.FLOAT&&(Ye=n.RG32F),Te===n.HALF_FLOAT&&(Ye=n.RG16F),Te===n.UNSIGNED_BYTE&&(Ye=n.RG8)),ee===n.RGBA){const Tt=Je?Py:or.getTransfer(Ze);Te===n.FLOAT&&(Ye=n.RGBA32F),Te===n.HALF_FLOAT&&(Ye=n.RGBA16F),Te===n.UNSIGNED_BYTE&&(Ye=Tt===Mr?n.SRGB8_ALPHA8:n.RGBA8),Te===n.UNSIGNED_SHORT_4_4_4_4&&(Ye=n.RGBA4),Te===n.UNSIGNED_SHORT_5_5_5_1&&(Ye=n.RGB5_A1)}return(Ye===n.R16F||Ye===n.R32F||Ye===n.RG16F||Ye===n.RG32F||Ye===n.RGBA16F||Ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ye}function R(ie,ee,Te){return M(ie,Te)===!0||ie.isFramebufferTexture&&ie.minFilter!==ri&&ie.minFilter!==Wn?Math.log2(Math.max(ee.width,ee.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?ee.mipmaps.length:1}function O(ie){return ie===ri||ie===q1||ie===Cv?n.NEAREST:n.LINEAR}function N(ie){const ee=ie.target;ee.removeEventListener("dispose",N),T(ee),ee.isVideoTexture&&f.delete(ee)}function L(ie){const ee=ie.target;ee.removeEventListener("dispose",L),U(ee)}function T(ie){const ee=r.get(ie);if(ee.__webglInit===void 0)return;const Te=ie.source,Ze=m.get(Te);if(Ze){const Je=Ze[ee.__cacheKey];Je.usedTimes--,Je.usedTimes===0&&j(ie),Object.keys(Ze).length===0&&m.delete(Te)}r.remove(ie)}function j(ie){const ee=r.get(ie);n.deleteTexture(ee.__webglTexture);const Te=ie.source,Ze=m.get(Te);delete Ze[ee.__cacheKey],s.memory.textures--}function U(ie){const ee=ie.texture,Te=r.get(ie),Ze=r.get(ee);if(Ze.__webglTexture!==void 0&&(n.deleteTexture(Ze.__webglTexture),s.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Je=0;Je<6;Je++){if(Array.isArray(Te.__webglFramebuffer[Je]))for(let Ye=0;Ye<Te.__webglFramebuffer[Je].length;Ye++)n.deleteFramebuffer(Te.__webglFramebuffer[Je][Ye]);else n.deleteFramebuffer(Te.__webglFramebuffer[Je]);Te.__webglDepthbuffer&&n.deleteRenderbuffer(Te.__webglDepthbuffer[Je])}else{if(Array.isArray(Te.__webglFramebuffer))for(let Je=0;Je<Te.__webglFramebuffer.length;Je++)n.deleteFramebuffer(Te.__webglFramebuffer[Je]);else n.deleteFramebuffer(Te.__webglFramebuffer);if(Te.__webglDepthbuffer&&n.deleteRenderbuffer(Te.__webglDepthbuffer),Te.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Te.__webglMultisampledFramebuffer),Te.__webglColorRenderbuffer)for(let Je=0;Je<Te.__webglColorRenderbuffer.length;Je++)Te.__webglColorRenderbuffer[Je]&&n.deleteRenderbuffer(Te.__webglColorRenderbuffer[Je]);Te.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Te.__webglDepthRenderbuffer)}if(ie.isWebGLMultipleRenderTargets)for(let Je=0,Ye=ee.length;Je<Ye;Je++){const Tt=r.get(ee[Je]);Tt.__webglTexture&&(n.deleteTexture(Tt.__webglTexture),s.memory.textures--),r.remove(ee[Je])}r.remove(ee),r.remove(ie)}let B=0;function V(){B=0}function W(){const ie=B;return ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),B+=1,ie}function Y(ie){const ee=[];return ee.push(ie.wrapS),ee.push(ie.wrapT),ee.push(ie.wrapR||0),ee.push(ie.magFilter),ee.push(ie.minFilter),ee.push(ie.anisotropy),ee.push(ie.internalFormat),ee.push(ie.format),ee.push(ie.type),ee.push(ie.generateMipmaps),ee.push(ie.premultiplyAlpha),ee.push(ie.flipY),ee.push(ie.unpackAlignment),ee.push(ie.colorSpace),ee.join()}function Q(ie,ee){const Te=r.get(ie);if(ie.isVideoTexture&&vt(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&Te.__version!==ie.version){const Ze=ie.image;if(Ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(Te,ie,ee);return}}t.bindTexture(n.TEXTURE_2D,Te.__webglTexture,n.TEXTURE0+ee)}function se(ie,ee){const Te=r.get(ie);if(ie.version>0&&Te.__version!==ie.version){be(Te,ie,ee);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Te.__webglTexture,n.TEXTURE0+ee)}function G(ie,ee){const Te=r.get(ie);if(ie.version>0&&Te.__version!==ie.version){be(Te,ie,ee);return}t.bindTexture(n.TEXTURE_3D,Te.__webglTexture,n.TEXTURE0+ee)}function J(ie,ee){const Te=r.get(ie);if(ie.version>0&&Te.__version!==ie.version){Se(Te,ie,ee);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Te.__webglTexture,n.TEXTURE0+ee)}const Z={[My]:n.REPEAT,[Dr]:n.CLAMP_TO_EDGE,[Ey]:n.MIRRORED_REPEAT},X={[ri]:n.NEAREST,[q1]:n.NEAREST_MIPMAP_NEAREST,[Cv]:n.NEAREST_MIPMAP_LINEAR,[Wn]:n.LINEAR,[VN]:n.LINEAR_MIPMAP_NEAREST,[Bu]:n.LINEAR_MIPMAP_LINEAR},te={[q8]:n.NEVER,[Q8]:n.ALWAYS,[X8]:n.LESS,[tO]:n.LEQUAL,[Y8]:n.EQUAL,[J8]:n.GEQUAL,[K8]:n.GREATER,[Z8]:n.NOTEQUAL};function ce(ie,ee,Te){if(Te?(n.texParameteri(ie,n.TEXTURE_WRAP_S,Z[ee.wrapS]),n.texParameteri(ie,n.TEXTURE_WRAP_T,Z[ee.wrapT]),(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ie,n.TEXTURE_WRAP_R,Z[ee.wrapR]),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,X[ee.magFilter]),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,X[ee.minFilter])):(n.texParameteri(ie,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(ie,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ie,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(ee.wrapS!==Dr||ee.wrapT!==Dr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,O(ee.magFilter)),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,O(ee.minFilter)),ee.minFilter!==ri&&ee.minFilter!==Wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ee.compareFunction&&(n.texParameteri(ie,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ie,n.TEXTURE_COMPARE_FUNC,te[ee.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ze=e.get("EXT_texture_filter_anisotropic");if(ee.magFilter===ri||ee.minFilter!==Cv&&ee.minFilter!==Bu||ee.type===ai&&e.has("OES_texture_float_linear")===!1||o===!1&&ee.type===Oi&&e.has("OES_texture_half_float_linear")===!1)return;(ee.anisotropy>1||r.get(ee).__currentAnisotropy)&&(n.texParameterf(ie,Ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,i.getMaxAnisotropy())),r.get(ee).__currentAnisotropy=ee.anisotropy)}}function le(ie,ee){let Te=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,ee.addEventListener("dispose",N));const Ze=ee.source;let Je=m.get(Ze);Je===void 0&&(Je={},m.set(Ze,Je));const Ye=Y(ee);if(Ye!==ie.__cacheKey){Je[Ye]===void 0&&(Je[Ye]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Te=!0),Je[Ye].usedTimes++;const Tt=Je[ie.__cacheKey];Tt!==void 0&&(Je[ie.__cacheKey].usedTimes--,Tt.usedTimes===0&&j(ee)),ie.__cacheKey=Ye,ie.__webglTexture=Je[Ye].texture}return Te}function be(ie,ee,Te){let Ze=n.TEXTURE_2D;(ee.isDataArrayTexture||ee.isCompressedArrayTexture)&&(Ze=n.TEXTURE_2D_ARRAY),ee.isData3DTexture&&(Ze=n.TEXTURE_3D);const Je=le(ie,ee),Ye=ee.source;t.bindTexture(Ze,ie.__webglTexture,n.TEXTURE0+Te);const Tt=r.get(Ye);if(Ye.version!==Tt.__version||Je===!0){t.activeTexture(n.TEXTURE0+Te);const pt=or.getPrimaries(or.workingColorSpace),St=ee.colorSpace===Ms?null:or.getPrimaries(ee.colorSpace),Ut=ee.colorSpace===Ms||pt===St?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);const Yt=_(ee)&&x(ee.image)===!1;let Qe=w(ee.image,Yt,!1,i.maxTextureSize);Qe=dt(ee,Qe);const mn=x(Qe)||o,hn=a.convert(ee.format,ee.colorSpace);let $t=a.convert(ee.type),Mt=A(ee.internalFormat,hn,$t,ee.colorSpace,ee.isVideoTexture);ce(Ze,ee,mn);let At;const me=ee.mipmaps,We=o&&ee.isVideoTexture!==!0&&Mt!==JN,lt=Tt.__version===void 0||Je===!0,wt=R(ee,Qe,mn);if(ee.isDepthTexture)Mt=n.DEPTH_COMPONENT,o?ee.type===ai?Mt=n.DEPTH_COMPONENT32F:ee.type===al?Mt=n.DEPTH_COMPONENT24:ee.type===Iu?Mt=n.DEPTH24_STENCIL8:Mt=n.DEPTH_COMPONENT16:ee.type===ai&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===Lu&&Mt===n.DEPTH_COMPONENT&&ee.type!==Hw&&ee.type!==al&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=al,$t=a.convert(ee.type)),ee.format===Uf&&Mt===n.DEPTH_COMPONENT&&(Mt=n.DEPTH_STENCIL,ee.type!==Iu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=Iu,$t=a.convert(ee.type))),lt&&(We?t.texStorage2D(n.TEXTURE_2D,1,Mt,Qe.width,Qe.height):t.texImage2D(n.TEXTURE_2D,0,Mt,Qe.width,Qe.height,0,hn,$t,null));else if(ee.isDataTexture)if(me.length>0&&mn){We&&lt&&t.texStorage2D(n.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ae=0,ge=me.length;Ae<ge;Ae++)At=me[Ae],We?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,At.width,At.height,hn,$t,At.data):t.texImage2D(n.TEXTURE_2D,Ae,Mt,At.width,At.height,0,hn,$t,At.data);ee.generateMipmaps=!1}else We?(lt&&t.texStorage2D(n.TEXTURE_2D,wt,Mt,Qe.width,Qe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Qe.width,Qe.height,hn,$t,Qe.data)):t.texImage2D(n.TEXTURE_2D,0,Mt,Qe.width,Qe.height,0,hn,$t,Qe.data);else if(ee.isCompressedTexture)if(ee.isCompressedArrayTexture){We&&lt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,wt,Mt,me[0].width,me[0].height,Qe.depth);for(let Ae=0,ge=me.length;Ae<ge;Ae++)At=me[Ae],ee.format!==gi?hn!==null?We?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,At.width,At.height,Qe.depth,hn,At.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,Mt,At.width,At.height,Qe.depth,0,At.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,At.width,At.height,Qe.depth,hn,$t,At.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,Mt,At.width,At.height,Qe.depth,0,hn,$t,At.data)}else{We&&lt&&t.texStorage2D(n.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ae=0,ge=me.length;Ae<ge;Ae++)At=me[Ae],ee.format!==gi?hn!==null?We?t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,At.width,At.height,hn,At.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,Mt,At.width,At.height,0,At.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,At.width,At.height,hn,$t,At.data):t.texImage2D(n.TEXTURE_2D,Ae,Mt,At.width,At.height,0,hn,$t,At.data)}else if(ee.isDataArrayTexture)We?(lt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,wt,Mt,Qe.width,Qe.height,Qe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Qe.width,Qe.height,Qe.depth,hn,$t,Qe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Mt,Qe.width,Qe.height,Qe.depth,0,hn,$t,Qe.data);else if(ee.isData3DTexture)We?(lt&&t.texStorage3D(n.TEXTURE_3D,wt,Mt,Qe.width,Qe.height,Qe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Qe.width,Qe.height,Qe.depth,hn,$t,Qe.data)):t.texImage3D(n.TEXTURE_3D,0,Mt,Qe.width,Qe.height,Qe.depth,0,hn,$t,Qe.data);else if(ee.isFramebufferTexture){if(lt)if(We)t.texStorage2D(n.TEXTURE_2D,wt,Mt,Qe.width,Qe.height);else{let Ae=Qe.width,ge=Qe.height;for(let ot=0;ot<wt;ot++)t.texImage2D(n.TEXTURE_2D,ot,Mt,Ae,ge,0,hn,$t,null),Ae>>=1,ge>>=1}}else if(me.length>0&&mn){We&&lt&&t.texStorage2D(n.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ae=0,ge=me.length;Ae<ge;Ae++)At=me[Ae],We?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,hn,$t,At):t.texImage2D(n.TEXTURE_2D,Ae,Mt,hn,$t,At);ee.generateMipmaps=!1}else We?(lt&&t.texStorage2D(n.TEXTURE_2D,wt,Mt,Qe.width,Qe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,hn,$t,Qe)):t.texImage2D(n.TEXTURE_2D,0,Mt,hn,$t,Qe);M(ee,mn)&&E(Ze),Tt.__version=Ye.version,ee.onUpdate&&ee.onUpdate(ee)}ie.__version=ee.version}function Se(ie,ee,Te){if(ee.image.length!==6)return;const Ze=le(ie,ee),Je=ee.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+Te);const Ye=r.get(Je);if(Je.version!==Ye.__version||Ze===!0){t.activeTexture(n.TEXTURE0+Te);const Tt=or.getPrimaries(or.workingColorSpace),pt=ee.colorSpace===Ms?null:or.getPrimaries(ee.colorSpace),St=ee.colorSpace===Ms||Tt===pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const Ut=ee.isCompressedTexture||ee.image[0].isCompressedTexture,Yt=ee.image[0]&&ee.image[0].isDataTexture,Qe=[];for(let Ae=0;Ae<6;Ae++)!Ut&&!Yt?Qe[Ae]=w(ee.image[Ae],!1,!0,i.maxCubemapSize):Qe[Ae]=Yt?ee.image[Ae].image:ee.image[Ae],Qe[Ae]=dt(ee,Qe[Ae]);const mn=Qe[0],hn=x(mn)||o,$t=a.convert(ee.format,ee.colorSpace),Mt=a.convert(ee.type),At=A(ee.internalFormat,$t,Mt,ee.colorSpace),me=o&&ee.isVideoTexture!==!0,We=Ye.__version===void 0||Ze===!0;let lt=R(ee,mn,hn);ce(n.TEXTURE_CUBE_MAP,ee,hn);let wt;if(Ut){me&&We&&t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,At,mn.width,mn.height);for(let Ae=0;Ae<6;Ae++){wt=Qe[Ae].mipmaps;for(let ge=0;ge<wt.length;ge++){const ot=wt[ge];ee.format!==gi?$t!==null?me?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge,0,0,ot.width,ot.height,$t,ot.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge,At,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):me?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge,0,0,ot.width,ot.height,$t,Mt,ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge,At,ot.width,ot.height,0,$t,Mt,ot.data)}}}else{wt=ee.mipmaps,me&&We&&(wt.length>0&&lt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,At,Qe[0].width,Qe[0].height));for(let Ae=0;Ae<6;Ae++)if(Yt){me?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,Qe[Ae].width,Qe[Ae].height,$t,Mt,Qe[Ae].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,At,Qe[Ae].width,Qe[Ae].height,0,$t,Mt,Qe[Ae].data);for(let ge=0;ge<wt.length;ge++){const gt=wt[ge].image[Ae].image;me?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge+1,0,0,gt.width,gt.height,$t,Mt,gt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge+1,At,gt.width,gt.height,0,$t,Mt,gt.data)}}else{me?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,$t,Mt,Qe[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,At,$t,Mt,Qe[Ae]);for(let ge=0;ge<wt.length;ge++){const ot=wt[ge];me?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge+1,0,0,$t,Mt,ot.image[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,ge+1,At,$t,Mt,ot.image[Ae])}}}M(ee,hn)&&E(n.TEXTURE_CUBE_MAP),Ye.__version=Je.version,ee.onUpdate&&ee.onUpdate(ee)}ie.__version=ee.version}function Ie(ie,ee,Te,Ze,Je,Ye){const Tt=a.convert(Te.format,Te.colorSpace),pt=a.convert(Te.type),St=A(Te.internalFormat,Tt,pt,Te.colorSpace);if(!r.get(ee).__hasExternalTextures){const Yt=Math.max(1,ee.width>>Ye),Qe=Math.max(1,ee.height>>Ye);Je===n.TEXTURE_3D||Je===n.TEXTURE_2D_ARRAY?t.texImage3D(Je,Ye,St,Yt,Qe,ee.depth,0,Tt,pt,null):t.texImage2D(Je,Ye,St,Yt,Qe,0,Tt,pt,null)}t.bindFramebuffer(n.FRAMEBUFFER,ie),De(ee)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ze,Je,r.get(Te).__webglTexture,0,Ke(ee)):(Je===n.TEXTURE_2D||Je>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Je<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ze,Je,r.get(Te).__webglTexture,Ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function qe(ie,ee,Te){if(n.bindRenderbuffer(n.RENDERBUFFER,ie),ee.depthBuffer&&!ee.stencilBuffer){let Ze=o===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(Te||De(ee)){const Je=ee.depthTexture;Je&&Je.isDepthTexture&&(Je.type===ai?Ze=n.DEPTH_COMPONENT32F:Je.type===al&&(Ze=n.DEPTH_COMPONENT24));const Ye=Ke(ee);De(ee)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ye,Ze,ee.width,ee.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ye,Ze,ee.width,ee.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ze,ee.width,ee.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,ie)}else if(ee.depthBuffer&&ee.stencilBuffer){const Ze=Ke(ee);Te&&De(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,n.DEPTH24_STENCIL8,ee.width,ee.height):De(ee)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ze,n.DEPTH24_STENCIL8,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,ie)}else{const Ze=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let Je=0;Je<Ze.length;Je++){const Ye=Ze[Je],Tt=a.convert(Ye.format,Ye.colorSpace),pt=a.convert(Ye.type),St=A(Ye.internalFormat,Tt,pt,Ye.colorSpace),Ut=Ke(ee);Te&&De(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ut,St,ee.width,ee.height):De(ee)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ut,St,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,St,ee.width,ee.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pe(ie,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ie),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),Q(ee.depthTexture,0);const Ze=r.get(ee.depthTexture).__webglTexture,Je=Ke(ee);if(ee.depthTexture.format===Lu)De(ee)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ze,0,Je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ze,0);else if(ee.depthTexture.format===Uf)De(ee)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ze,0,Je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ze,0);else throw new Error("Unknown depthTexture format")}function Fe(ie){const ee=r.get(ie),Te=ie.isWebGLCubeRenderTarget===!0;if(ie.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Te)throw new Error("target.depthTexture not supported in Cube render targets");Pe(ee.__webglFramebuffer,ie)}else if(Te){ee.__webglDepthbuffer=[];for(let Ze=0;Ze<6;Ze++)t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer[Ze]),ee.__webglDepthbuffer[Ze]=n.createRenderbuffer(),qe(ee.__webglDepthbuffer[Ze],ie,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer=n.createRenderbuffer(),qe(ee.__webglDepthbuffer,ie,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function $e(ie,ee,Te){const Ze=r.get(ie);ee!==void 0&&Ie(Ze.__webglFramebuffer,ie,ie.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Te!==void 0&&Fe(ie)}function ne(ie){const ee=ie.texture,Te=r.get(ie),Ze=r.get(ee);ie.addEventListener("dispose",L),ie.isWebGLMultipleRenderTargets!==!0&&(Ze.__webglTexture===void 0&&(Ze.__webglTexture=n.createTexture()),Ze.__version=ee.version,s.memory.textures++);const Je=ie.isWebGLCubeRenderTarget===!0,Ye=ie.isWebGLMultipleRenderTargets===!0,Tt=x(ie)||o;if(Je){Te.__webglFramebuffer=[];for(let pt=0;pt<6;pt++)if(o&&ee.mipmaps&&ee.mipmaps.length>0){Te.__webglFramebuffer[pt]=[];for(let St=0;St<ee.mipmaps.length;St++)Te.__webglFramebuffer[pt][St]=n.createFramebuffer()}else Te.__webglFramebuffer[pt]=n.createFramebuffer()}else{if(o&&ee.mipmaps&&ee.mipmaps.length>0){Te.__webglFramebuffer=[];for(let pt=0;pt<ee.mipmaps.length;pt++)Te.__webglFramebuffer[pt]=n.createFramebuffer()}else Te.__webglFramebuffer=n.createFramebuffer();if(Ye)if(i.drawBuffers){const pt=ie.texture;for(let St=0,Ut=pt.length;St<Ut;St++){const Yt=r.get(pt[St]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&ie.samples>0&&De(ie)===!1){const pt=Ye?ee:[ee];Te.__webglMultisampledFramebuffer=n.createFramebuffer(),Te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Te.__webglMultisampledFramebuffer);for(let St=0;St<pt.length;St++){const Ut=pt[St];Te.__webglColorRenderbuffer[St]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Te.__webglColorRenderbuffer[St]);const Yt=a.convert(Ut.format,Ut.colorSpace),Qe=a.convert(Ut.type),mn=A(Ut.internalFormat,Yt,Qe,Ut.colorSpace,ie.isXRRenderTarget===!0),hn=Ke(ie);n.renderbufferStorageMultisample(n.RENDERBUFFER,hn,mn,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.RENDERBUFFER,Te.__webglColorRenderbuffer[St])}n.bindRenderbuffer(n.RENDERBUFFER,null),ie.depthBuffer&&(Te.__webglDepthRenderbuffer=n.createRenderbuffer(),qe(Te.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Je){t.bindTexture(n.TEXTURE_CUBE_MAP,Ze.__webglTexture),ce(n.TEXTURE_CUBE_MAP,ee,Tt);for(let pt=0;pt<6;pt++)if(o&&ee.mipmaps&&ee.mipmaps.length>0)for(let St=0;St<ee.mipmaps.length;St++)Ie(Te.__webglFramebuffer[pt][St],ie,ee,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,St);else Ie(Te.__webglFramebuffer[pt],ie,ee,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0);M(ee,Tt)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ye){const pt=ie.texture;for(let St=0,Ut=pt.length;St<Ut;St++){const Yt=pt[St],Qe=r.get(Yt);t.bindTexture(n.TEXTURE_2D,Qe.__webglTexture),ce(n.TEXTURE_2D,Yt,Tt),Ie(Te.__webglFramebuffer,ie,Yt,n.COLOR_ATTACHMENT0+St,n.TEXTURE_2D,0),M(Yt,Tt)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let pt=n.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(o?pt=ie.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(pt,Ze.__webglTexture),ce(pt,ee,Tt),o&&ee.mipmaps&&ee.mipmaps.length>0)for(let St=0;St<ee.mipmaps.length;St++)Ie(Te.__webglFramebuffer[St],ie,ee,n.COLOR_ATTACHMENT0,pt,St);else Ie(Te.__webglFramebuffer,ie,ee,n.COLOR_ATTACHMENT0,pt,0);M(ee,Tt)&&E(pt),t.unbindTexture()}ie.depthBuffer&&Fe(ie)}function Ve(ie){const ee=x(ie)||o,Te=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let Ze=0,Je=Te.length;Ze<Je;Ze++){const Ye=Te[Ze];if(M(Ye,ee)){const Tt=ie.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,pt=r.get(Ye).__webglTexture;t.bindTexture(Tt,pt),E(Tt),t.unbindTexture()}}}function Ne(ie){if(o&&ie.samples>0&&De(ie)===!1){const ee=ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture],Te=ie.width,Ze=ie.height;let Je=n.COLOR_BUFFER_BIT;const Ye=[],Tt=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=r.get(ie),St=ie.isWebGLMultipleRenderTargets===!0;if(St)for(let Ut=0;Ut<ee.length;Ut++)t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let Ut=0;Ut<ee.length;Ut++){Ye.push(n.COLOR_ATTACHMENT0+Ut),ie.depthBuffer&&Ye.push(Tt);const Yt=pt.__ignoreDepthValues!==void 0?pt.__ignoreDepthValues:!1;if(Yt===!1&&(ie.depthBuffer&&(Je|=n.DEPTH_BUFFER_BIT),ie.stencilBuffer&&(Je|=n.STENCIL_BUFFER_BIT)),St&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,pt.__webglColorRenderbuffer[Ut]),Yt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Tt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Tt])),St){const Qe=r.get(ee[Ut]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Qe,0)}n.blitFramebuffer(0,0,Te,Ze,0,0,Te,Ze,Je,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ye)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),St)for(let Ut=0;Ut<ee.length;Ut++){t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,pt.__webglColorRenderbuffer[Ut]);const Yt=r.get(ee[Ut]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,Yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}}function Ke(ie){return Math.min(i.maxSamples,ie.samples)}function De(ie){const ee=r.get(ie);return o&&ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function vt(ie){const ee=s.render.frame;f.get(ie)!==ee&&(f.set(ie,ee),ie.update())}function dt(ie,ee){const Te=ie.colorSpace,Ze=ie.format,Je=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||ie.format===X1||Te!==Os&&Te!==Ms&&(or.getTransfer(Te)===Mr?o===!1?e.has("EXT_sRGB")===!0&&Ze===gi?(ie.format=X1,ie.minFilter=Wn,ie.generateMipmaps=!1):ee=rO.sRGBToLinear(ee):(Ze!==gi||Je!==As)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Te)),ee}this.allocateTextureUnit=W,this.resetTextureUnits=V,this.setTexture2D=Q,this.setTexture2DArray=se,this.setTexture3D=G,this.setTextureCube=J,this.rebindTextures=$e,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=Ne,this.setupDepthRenderbuffer=Fe,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=De}function hH(n,e,t){const r=t.isWebGL2;function i(a,s=Ms){let o;const l=or.getTransfer(s);if(a===As)return n.UNSIGNED_BYTE;if(a===$N)return n.UNSIGNED_SHORT_4_4_4_4;if(a===qN)return n.UNSIGNED_SHORT_5_5_5_1;if(a===WN)return n.BYTE;if(a===GN)return n.SHORT;if(a===Hw)return n.UNSIGNED_SHORT;if(a===Vw)return n.INT;if(a===al)return n.UNSIGNED_INT;if(a===ai)return n.FLOAT;if(a===Oi)return r?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===L8)return n.ALPHA;if(a===gi)return n.RGBA;if(a===D8)return n.LUMINANCE;if(a===U8)return n.LUMINANCE_ALPHA;if(a===Lu)return n.DEPTH_COMPONENT;if(a===Uf)return n.DEPTH_STENCIL;if(a===X1)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===XN)return n.RED;if(a===YN)return n.RED_INTEGER;if(a===F8)return n.RG;if(a===KN)return n.RG_INTEGER;if(a===ZN)return n.RGBA_INTEGER;if(a===Mb||a===Eb||a===Tb||a===Ab)if(l===Mr)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===Mb)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Eb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Tb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===Ab)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===Mb)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Eb)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Tb)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Ab)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===VC||a===WC||a===GC||a===$C)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===VC)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===WC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===GC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===$C)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===JN)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===qC||a===XC)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===qC)return l===Mr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===XC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===YC||a===KC||a===ZC||a===JC||a===QC||a===eP||a===tP||a===nP||a===rP||a===iP||a===aP||a===sP||a===oP||a===lP)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===YC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===KC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===ZC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===JC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===QC)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===eP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===tP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===nP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===rP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===iP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===aP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===sP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===oP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===lP)return l===Mr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===Cb||a===cP||a===uP)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===Cb)return l===Mr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===cP)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===uP)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===z8||a===dP||a===fP||a===hP)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(a===Cb)return o.COMPRESSED_RED_RGTC1_EXT;if(a===dP)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===fP)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===hP)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Iu?r?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:i}}class pH extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Lp extends qn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Rge={type:"move"};class EA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Lp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Lp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Lp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const w of e.hand.values()){const x=t.getJointPose(w,r),_=this._getHandJoint(u,w);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=x.radius),_.visible=x!==null}const f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],m=f.position.distanceTo(h.position),y=.02,b=.005;u.inputState.pinching&&m>y+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=y-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Rge)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Lp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class kge extends Nc{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,f=null,h=null,m=null,y=null,b=null;const w=t.getContextAttributes();let x=null,_=null;const M=[],E=[],A=new Xe;let R=null;const O=new ii;O.layers.enable(1),O.viewport=new lr;const N=new ii;N.layers.enable(2),N.viewport=new lr;const L=[O,N],T=new pH;T.layers.enable(1),T.layers.enable(2);let j=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let le=M[ce];return le===void 0&&(le=new EA,M[ce]=le),le.getTargetRaySpace()},this.getControllerGrip=function(ce){let le=M[ce];return le===void 0&&(le=new EA,M[ce]=le),le.getGripSpace()},this.getHand=function(ce){let le=M[ce];return le===void 0&&(le=new EA,M[ce]=le),le.getHandSpace()};function B(ce){const le=E.indexOf(ce.inputSource);if(le===-1)return;const be=M[le];be!==void 0&&(be.update(ce.inputSource,ce.frame,u||s),be.dispatchEvent({type:ce.type,data:ce.inputSource}))}function V(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",W);for(let ce=0;ce<M.length;ce++){const le=E[ce];le!==null&&(E[ce]=null,M[ce].disconnect(le))}j=null,U=null,e.setRenderTarget(x),y=null,m=null,h=null,i=null,_=null,te.stop(),r.isPresenting=!1,e.setPixelRatio(R),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){a=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){o=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(ce){u=ce},this.getBaseLayer=function(){return m!==null?m:y},this.getBinding=function(){return h},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",V),i.addEventListener("inputsourceschange",W),w.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const le={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(i,t,le),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),_=new is(y.framebufferWidth,y.framebufferHeight,{format:gi,type:As,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let le=null,be=null,Se=null;w.depth&&(Se=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,le=w.stencil?Uf:Lu,be=w.stencil?Iu:al);const Ie={colorFormat:t.RGBA8,depthFormat:Se,scaleFactor:a};h=new XRWebGLBinding(i,t),m=h.createProjectionLayer(Ie),i.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),_=new is(m.textureWidth,m.textureHeight,{format:gi,type:As,depthTexture:new qw(m.textureWidth,m.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,le),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const qe=e.properties.get(_);qe.__ignoreDepthValues=m.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function W(ce){for(let le=0;le<ce.removed.length;le++){const be=ce.removed[le],Se=E.indexOf(be);Se>=0&&(E[Se]=null,M[Se].disconnect(be))}for(let le=0;le<ce.added.length;le++){const be=ce.added[le];let Se=E.indexOf(be);if(Se===-1){for(let qe=0;qe<M.length;qe++)if(qe>=E.length){E.push(be),Se=qe;break}else if(E[qe]===null){E[qe]=be,Se=qe;break}if(Se===-1)break}const Ie=M[Se];Ie&&Ie.connect(be)}}const Y=new oe,Q=new oe;function se(ce,le,be){Y.setFromMatrixPosition(le.matrixWorld),Q.setFromMatrixPosition(be.matrixWorld);const Se=Y.distanceTo(Q),Ie=le.projectionMatrix.elements,qe=be.projectionMatrix.elements,Pe=Ie[14]/(Ie[10]-1),Fe=Ie[14]/(Ie[10]+1),$e=(Ie[9]+1)/Ie[5],ne=(Ie[9]-1)/Ie[5],Ve=(Ie[8]-1)/Ie[0],Ne=(qe[8]+1)/qe[0],Ke=Pe*Ve,De=Pe*Ne,vt=Se/(-Ve+Ne),dt=vt*-Ve;le.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(dt),ce.translateZ(vt),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const ie=Pe+vt,ee=Fe+vt,Te=Ke-dt,Ze=De+(Se-dt),Je=$e*Fe/ee*ie,Ye=ne*Fe/ee*ie;ce.projectionMatrix.makePerspective(Te,Ze,Je,Ye,ie,ee),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function G(ce,le){le===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(le.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;T.near=N.near=O.near=ce.near,T.far=N.far=O.far=ce.far,(j!==T.near||U!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),j=T.near,U=T.far);const le=ce.parent,be=T.cameras;G(T,le);for(let Se=0;Se<be.length;Se++)G(be[Se],le);be.length===2?se(T,O,N):T.projectionMatrix.copy(O.projectionMatrix),J(ce,T,le)};function J(ce,le,be){be===null?ce.matrix.copy(le.matrixWorld):(ce.matrix.copy(be.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(le.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(le.projectionMatrix),ce.projectionMatrixInverse.copy(le.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=_m*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(m===null&&y===null))return l},this.setFoveation=function(ce){l=ce,m!==null&&(m.fixedFoveation=ce),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ce)};let Z=null;function X(ce,le){if(f=le.getViewerPose(u||s),b=le,f!==null){const be=f.views;y!==null&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));let Se=!1;be.length!==T.cameras.length&&(T.cameras.length=0,Se=!0);for(let Ie=0;Ie<be.length;Ie++){const qe=be[Ie];let Pe=null;if(y!==null)Pe=y.getViewport(qe);else{const $e=h.getViewSubImage(m,qe);Pe=$e.viewport,Ie===0&&(e.setRenderTargetTextures(_,$e.colorTexture,m.ignoreDepthValues?void 0:$e.depthStencilTexture),e.setRenderTarget(_))}let Fe=L[Ie];Fe===void 0&&(Fe=new ii,Fe.layers.enable(Ie),Fe.viewport=new lr,L[Ie]=Fe),Fe.matrix.fromArray(qe.transform.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.projectionMatrix.fromArray(qe.projectionMatrix),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert(),Fe.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),Ie===0&&(T.matrix.copy(Fe.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Se===!0&&T.cameras.push(Fe)}}for(let be=0;be<M.length;be++){const Se=E[be],Ie=M[be];Se!==null&&Ie!==void 0&&Ie.update(Se,le,u||s)}Z&&Z(ce,le),le.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:le}),b=null}const te=new oH;te.setAnimationLoop(X),this.setAnimationLoop=function(ce){Z=ce},this.dispose=function(){}}}function jge(n,e){function t(x,_){x.matrixAutoUpdate===!0&&x.updateMatrix(),_.value.copy(x.matrix)}function r(x,_){_.color.getRGB(x.fogColor.value,iH(n)),_.isFog?(x.fogNear.value=_.near,x.fogFar.value=_.far):_.isFogExp2&&(x.fogDensity.value=_.density)}function i(x,_,M,E,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?a(x,_):_.isMeshToonMaterial?(a(x,_),h(x,_)):_.isMeshPhongMaterial?(a(x,_),f(x,_)):_.isMeshStandardMaterial?(a(x,_),m(x,_),_.isMeshPhysicalMaterial&&y(x,_,A)):_.isMeshMatcapMaterial?(a(x,_),b(x,_)):_.isMeshDepthMaterial?a(x,_):_.isMeshDistanceMaterial?(a(x,_),w(x,_)):_.isMeshNormalMaterial?a(x,_):_.isLineBasicMaterial?(s(x,_),_.isLineDashedMaterial&&o(x,_)):_.isPointsMaterial?l(x,_,M,E):_.isSpriteMaterial?u(x,_):_.isShadowMaterial?(x.color.value.copy(_.color),x.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function a(x,_){x.opacity.value=_.opacity,_.color&&x.diffuse.value.copy(_.color),_.emissive&&x.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(x.map.value=_.map,t(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,t(_.alphaMap,x.alphaMapTransform)),_.bumpMap&&(x.bumpMap.value=_.bumpMap,t(_.bumpMap,x.bumpMapTransform),x.bumpScale.value=_.bumpScale,_.side===La&&(x.bumpScale.value*=-1)),_.normalMap&&(x.normalMap.value=_.normalMap,t(_.normalMap,x.normalMapTransform),x.normalScale.value.copy(_.normalScale),_.side===La&&x.normalScale.value.negate()),_.displacementMap&&(x.displacementMap.value=_.displacementMap,t(_.displacementMap,x.displacementMapTransform),x.displacementScale.value=_.displacementScale,x.displacementBias.value=_.displacementBias),_.emissiveMap&&(x.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,x.emissiveMapTransform)),_.specularMap&&(x.specularMap.value=_.specularMap,t(_.specularMap,x.specularMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);const M=e.get(_).envMap;if(M&&(x.envMap.value=M,x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=_.reflectivity,x.ior.value=_.ior,x.refractionRatio.value=_.refractionRatio),_.lightMap){x.lightMap.value=_.lightMap;const E=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=_.lightMapIntensity*E,t(_.lightMap,x.lightMapTransform)}_.aoMap&&(x.aoMap.value=_.aoMap,x.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,x.aoMapTransform))}function s(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,_.map&&(x.map.value=_.map,t(_.map,x.mapTransform))}function o(x,_){x.dashSize.value=_.dashSize,x.totalSize.value=_.dashSize+_.gapSize,x.scale.value=_.scale}function l(x,_,M,E){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.size.value=_.size*M,x.scale.value=E*.5,_.map&&(x.map.value=_.map,t(_.map,x.uvTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,t(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function u(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.rotation.value=_.rotation,_.map&&(x.map.value=_.map,t(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,t(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function f(x,_){x.specular.value.copy(_.specular),x.shininess.value=Math.max(_.shininess,1e-4)}function h(x,_){_.gradientMap&&(x.gradientMap.value=_.gradientMap)}function m(x,_){x.metalness.value=_.metalness,_.metalnessMap&&(x.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,x.metalnessMapTransform)),x.roughness.value=_.roughness,_.roughnessMap&&(x.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,x.roughnessMapTransform)),e.get(_).envMap&&(x.envMapIntensity.value=_.envMapIntensity)}function y(x,_,M){x.ior.value=_.ior,_.sheen>0&&(x.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),x.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(x.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,x.sheenColorMapTransform)),_.sheenRoughnessMap&&(x.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,x.sheenRoughnessMapTransform))),_.clearcoat>0&&(x.clearcoat.value=_.clearcoat,x.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(x.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,x.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(x.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===La&&x.clearcoatNormalScale.value.negate())),_.iridescence>0&&(x.iridescence.value=_.iridescence,x.iridescenceIOR.value=_.iridescenceIOR,x.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(x.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,x.iridescenceMapTransform)),_.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),_.transmission>0&&(x.transmission.value=_.transmission,x.transmissionSamplerMap.value=M.texture,x.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(x.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,x.transmissionMapTransform)),x.thickness.value=_.thickness,_.thicknessMap&&(x.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=_.attenuationDistance,x.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(x.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(x.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=_.specularIntensity,x.specularColor.value.copy(_.specularColor),_.specularColorMap&&(x.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,x.specularColorMapTransform)),_.specularIntensityMap&&(x.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,x.specularIntensityMapTransform))}function b(x,_){_.matcap&&(x.matcap.value=_.matcap)}function w(x,_){const M=e.get(_).light;x.referencePosition.value.setFromMatrixPosition(M.matrixWorld),x.nearDistance.value=M.shadow.camera.near,x.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Ige(n,e,t,r){let i={},a={},s=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,E){const A=E.program;r.uniformBlockBinding(M,A)}function u(M,E){let A=i[M.id];A===void 0&&(b(M),A=f(M),i[M.id]=A,M.addEventListener("dispose",x));const R=E.program;r.updateUBOMapping(M,R);const O=e.render.frame;a[M.id]!==O&&(m(M),a[M.id]=O)}function f(M){const E=h();M.__bindingPointIndex=E;const A=n.createBuffer(),R=M.__size,O=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,R,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,A),A}function h(){for(let M=0;M<o;M++)if(s.indexOf(M)===-1)return s.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(M){const E=i[M.id],A=M.uniforms,R=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let O=0,N=A.length;O<N;O++){const L=Array.isArray(A[O])?A[O]:[A[O]];for(let T=0,j=L.length;T<j;T++){const U=L[T];if(y(U,O,T,R)===!0){const B=U.__offset,V=Array.isArray(U.value)?U.value:[U.value];let W=0;for(let Y=0;Y<V.length;Y++){const Q=V[Y],se=w(Q);typeof Q=="number"||typeof Q=="boolean"?(U.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,B+W,U.__data)):Q.isMatrix3?(U.__data[0]=Q.elements[0],U.__data[1]=Q.elements[1],U.__data[2]=Q.elements[2],U.__data[3]=0,U.__data[4]=Q.elements[3],U.__data[5]=Q.elements[4],U.__data[6]=Q.elements[5],U.__data[7]=0,U.__data[8]=Q.elements[6],U.__data[9]=Q.elements[7],U.__data[10]=Q.elements[8],U.__data[11]=0):(Q.toArray(U.__data,W),W+=se.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(M,E,A,R){const O=M.value,N=E+"_"+A;if(R[N]===void 0)return typeof O=="number"||typeof O=="boolean"?R[N]=O:R[N]=O.clone(),!0;{const L=R[N];if(typeof O=="number"||typeof O=="boolean"){if(L!==O)return R[N]=O,!0}else if(L.equals(O)===!1)return L.copy(O),!0}return!1}function b(M){const E=M.uniforms;let A=0;const R=16;for(let N=0,L=E.length;N<L;N++){const T=Array.isArray(E[N])?E[N]:[E[N]];for(let j=0,U=T.length;j<U;j++){const B=T[j],V=Array.isArray(B.value)?B.value:[B.value];for(let W=0,Y=V.length;W<Y;W++){const Q=V[W],se=w(Q),G=A%R;G!==0&&R-G<se.boundary&&(A+=R-G),B.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=A,A+=se.storage}}}const O=A%R;return O>0&&(A+=R-O),M.__size=A,M.__cache={},this}function w(M){const E={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(E.boundary=4,E.storage=4):M.isVector2?(E.boundary=8,E.storage=8):M.isVector3||M.isColor?(E.boundary=16,E.storage=12):M.isVector4?(E.boundary=16,E.storage=16):M.isMatrix3?(E.boundary=48,E.storage=48):M.isMatrix4?(E.boundary=64,E.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),E}function x(M){const E=M.target;E.removeEventListener("dispose",x);const A=s.indexOf(E.__bindingPointIndex);s.splice(A,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete a[E.id]}function _(){for(const M in i)n.deleteBuffer(i[M]);s=[],i={},a={}}return{bind:l,update:u,dispose:_}}class Yw{constructor(e={}){const{canvas:t=tH(),context:r=null,depth:i=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let m;r!==null?m=r.getContextAttributes().alpha:m=s;const y=new Uint32Array(4),b=new Int32Array(4);let w=null,x=null;const _=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=mi,this._useLegacyLights=!1,this.toneMapping=cl,this.toneMappingExposure=1;const E=this;let A=!1,R=0,O=0,N=null,L=-1,T=null;const j=new lr,U=new lr;let B=null;const V=new Rt(0);let W=0,Y=t.width,Q=t.height,se=1,G=null,J=null;const Z=new lr(0,0,Y,Q),X=new lr(0,0,Y,Q);let te=!1;const ce=new s0;let le=!1,be=!1,Se=null;const Ie=new ln,qe=new Xe,Pe=new oe,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $e(){return N===null?se:1}let ne=r;function Ve($,ae){for(let ue=0;ue<$.length;ue++){const pe=$[ue],he=t.getContext(pe,ae);if(he!==null)return he}return null}try{const $={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${e0}`),t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",ot,!1),ne===null){const ae=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&ae.shift(),ne=Ve(ae,$),ne===null)throw Ve(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ne instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ne.getShaderPrecisionFormat===void 0&&(ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let Ne,Ke,De,vt,dt,ie,ee,Te,Ze,Je,Ye,Tt,pt,St,Ut,Yt,Qe,mn,hn,$t,Mt,At,me,We;function lt(){Ne=new Ype(ne),Ke=new Vpe(ne,Ne,e),Ne.init(Ke),At=new hH(ne,Ne,Ke),De=new Nge(ne,Ne,Ke),vt=new Jpe(ne),dt=new yge,ie=new Oge(ne,Ne,De,dt,Ke,At,vt),ee=new Gpe(E),Te=new Xpe(E),Ze=new sfe(ne,Ke),me=new Bpe(ne,Ne,Ze,Ke),Je=new Kpe(ne,Ze,vt,me),Ye=new nme(ne,Je,Ze,vt),hn=new tme(ne,Ke,ie),Yt=new Wpe(dt),Tt=new vge(E,ee,Te,Ne,Ke,me,Yt),pt=new jge(E,dt),St=new bge,Ut=new Tge(Ne,Ke),mn=new zpe(E,ee,Te,De,Ye,m,l),Qe=new Pge(E,Ye,Ke),We=new Ige(ne,vt,Ke,De),$t=new Hpe(ne,Ne,vt,Ke),Mt=new Zpe(ne,Ne,vt,Ke),vt.programs=Tt.programs,E.capabilities=Ke,E.extensions=Ne,E.properties=dt,E.renderLists=St,E.shadowMap=Qe,E.state=De,E.info=vt}lt();const wt=new kge(E,ne);this.xr=wt,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const $=Ne.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Ne.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function($){$!==void 0&&(se=$,this.setSize(Y,Q,!1))},this.getSize=function($){return $.set(Y,Q)},this.setSize=function($,ae,ue=!0){if(wt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=$,Q=ae,t.width=Math.floor($*se),t.height=Math.floor(ae*se),ue===!0&&(t.style.width=$+"px",t.style.height=ae+"px"),this.setViewport(0,0,$,ae)},this.getDrawingBufferSize=function($){return $.set(Y*se,Q*se).floor()},this.setDrawingBufferSize=function($,ae,ue){Y=$,Q=ae,se=ue,t.width=Math.floor($*ue),t.height=Math.floor(ae*ue),this.setViewport(0,0,$,ae)},this.getCurrentViewport=function($){return $.copy(j)},this.getViewport=function($){return $.copy(Z)},this.setViewport=function($,ae,ue,pe){$.isVector4?Z.set($.x,$.y,$.z,$.w):Z.set($,ae,ue,pe),De.viewport(j.copy(Z).multiplyScalar(se).floor())},this.getScissor=function($){return $.copy(X)},this.setScissor=function($,ae,ue,pe){$.isVector4?X.set($.x,$.y,$.z,$.w):X.set($,ae,ue,pe),De.scissor(U.copy(X).multiplyScalar(se).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function($){De.setScissorTest(te=$)},this.setOpaqueSort=function($){G=$},this.setTransparentSort=function($){J=$},this.getClearColor=function($){return $.copy(mn.getClearColor())},this.setClearColor=function(){mn.setClearColor.apply(mn,arguments)},this.getClearAlpha=function(){return mn.getClearAlpha()},this.setClearAlpha=function(){mn.setClearAlpha.apply(mn,arguments)},this.clear=function($=!0,ae=!0,ue=!0){let pe=0;if($){let he=!1;if(N!==null){const je=N.texture.format;he=je===ZN||je===KN||je===YN}if(he){const je=N.texture.type,Ue=je===As||je===al||je===Hw||je===Iu||je===$N||je===qN,Be=mn.getClearColor(),Re=mn.getClearAlpha(),Ct=Be.r,et=Be.g,it=Be.b;Ue?(y[0]=Ct,y[1]=et,y[2]=it,y[3]=Re,ne.clearBufferuiv(ne.COLOR,0,y)):(b[0]=Ct,b[1]=et,b[2]=it,b[3]=Re,ne.clearBufferiv(ne.COLOR,0,b))}else pe|=ne.COLOR_BUFFER_BIT}ae&&(pe|=ne.DEPTH_BUFFER_BIT),ue&&(pe|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",ot,!1),St.dispose(),Ut.dispose(),dt.dispose(),ee.dispose(),Te.dispose(),Ye.dispose(),me.dispose(),We.dispose(),Tt.dispose(),wt.dispose(),wt.removeEventListener("sessionstart",nr),wt.removeEventListener("sessionend",Mn),Se&&(Se.dispose(),Se=null),zr.stop()};function Ae($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const $=vt.autoReset,ae=Qe.enabled,ue=Qe.autoUpdate,pe=Qe.needsUpdate,he=Qe.type;lt(),vt.autoReset=$,Qe.enabled=ae,Qe.autoUpdate=ue,Qe.needsUpdate=pe,Qe.type=he}function ot($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function gt($){const ae=$.target;ae.removeEventListener("dispose",gt),Gt(ae)}function Gt($){kt($),dt.remove($)}function kt($){const ae=dt.get($).programs;ae!==void 0&&(ae.forEach(function(ue){Tt.releaseProgram(ue)}),$.isShaderMaterial&&Tt.releaseShaderCache($))}this.renderBufferDirect=function($,ae,ue,pe,he,je){ae===null&&(ae=Fe);const Ue=he.isMesh&&he.matrixWorld.determinant()<0,Be=q($,ae,ue,pe,he);De.setMaterial(pe,Ue);let Re=ue.index,Ct=1;if(pe.wireframe===!0){if(Re=Je.getWireframeAttribute(ue),Re===void 0)return;Ct=2}const et=ue.drawRange,it=ue.attributes.position;let Pt=et.start*Ct,Vt=(et.start+et.count)*Ct;je!==null&&(Pt=Math.max(Pt,je.start*Ct),Vt=Math.min(Vt,(je.start+je.count)*Ct)),Re!==null?(Pt=Math.max(Pt,0),Vt=Math.min(Vt,Re.count)):it!=null&&(Pt=Math.max(Pt,0),Vt=Math.min(Vt,it.count));const qt=Vt-Pt;if(qt<0||qt===1/0)return;me.setup(he,pe,Be,ue,Re);let nn,yt=$t;if(Re!==null&&(nn=Ze.get(Re),yt=Mt,yt.setIndex(nn)),he.isMesh)pe.wireframe===!0?(De.setLineWidth(pe.wireframeLinewidth*$e()),yt.setMode(ne.LINES)):yt.setMode(ne.TRIANGLES);else if(he.isLine){let mt=pe.linewidth;mt===void 0&&(mt=1),De.setLineWidth(mt*$e()),he.isLineSegments?yt.setMode(ne.LINES):he.isLineLoop?yt.setMode(ne.LINE_LOOP):yt.setMode(ne.LINE_STRIP)}else he.isPoints?yt.setMode(ne.POINTS):he.isSprite&&yt.setMode(ne.TRIANGLES);if(he.isBatchedMesh)yt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else if(he.isInstancedMesh)yt.renderInstances(Pt,qt,he.count);else if(ue.isInstancedBufferGeometry){const mt=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,tn=Math.min(ue.instanceCount,mt);yt.renderInstances(Pt,qt,tn)}else yt.render(Pt,qt)};function xn($,ae,ue){$.transparent===!0&&$.side===Io&&$.forceSinglePass===!1?($.side=La,$.needsUpdate=!0,cn($,ae,ue),$.side=_c,$.needsUpdate=!0,cn($,ae,ue),$.side=Io):cn($,ae,ue)}this.compile=function($,ae,ue=null){ue===null&&(ue=$),x=Ut.get(ue),x.init(),M.push(x),ue.traverseVisible(function(he){he.isLight&&he.layers.test(ae.layers)&&(x.pushLight(he),he.castShadow&&x.pushShadow(he))}),$!==ue&&$.traverseVisible(function(he){he.isLight&&he.layers.test(ae.layers)&&(x.pushLight(he),he.castShadow&&x.pushShadow(he))}),x.setupLights(E._useLegacyLights);const pe=new Set;return $.traverse(function(he){const je=he.material;if(je)if(Array.isArray(je))for(let Ue=0;Ue<je.length;Ue++){const Be=je[Ue];xn(Be,ue,he),pe.add(Be)}else xn(je,ue,he),pe.add(je)}),M.pop(),x=null,pe},this.compileAsync=function($,ae,ue=null){const pe=this.compile($,ae,ue);return new Promise(he=>{function je(){if(pe.forEach(function(Ue){dt.get(Ue).currentProgram.isReady()&&pe.delete(Ue)}),pe.size===0){he($);return}setTimeout(je,10)}Ne.get("KHR_parallel_shader_compile")!==null?je():setTimeout(je,10)})};let Pn=null;function Bn($){Pn&&Pn($)}function nr(){zr.stop()}function Mn(){zr.start()}const zr=new oH;zr.setAnimationLoop(Bn),typeof self<"u"&&zr.setContext(self),this.setAnimationLoop=function($){Pn=$,wt.setAnimationLoop($),$===null?zr.stop():zr.start()},wt.addEventListener("sessionstart",nr),wt.addEventListener("sessionend",Mn),this.render=function($,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),wt.enabled===!0&&wt.isPresenting===!0&&(wt.cameraAutoUpdate===!0&&wt.updateCamera(ae),ae=wt.getCamera()),$.isScene===!0&&$.onBeforeRender(E,$,ae,N),x=Ut.get($,M.length),x.init(),M.push(x),Ie.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),ce.setFromProjectionMatrix(Ie),be=this.localClippingEnabled,le=Yt.init(this.clippingPlanes,be),w=St.get($,_.length),w.init(),_.push(w),si($,ae,0,E.sortObjects),w.finish(),E.sortObjects===!0&&w.sort(G,J),this.info.render.frame++,le===!0&&Yt.beginShadows();const ue=x.state.shadowsArray;if(Qe.render(ue,$,ae),le===!0&&Yt.endShadows(),this.info.autoReset===!0&&this.info.reset(),mn.render(w,$),x.setupLights(E._useLegacyLights),ae.isArrayCamera){const pe=ae.cameras;for(let he=0,je=pe.length;he<je;he++){const Ue=pe[he];ks(w,$,Ue,Ue.viewport)}}else ks(w,$,ae);N!==null&&(ie.updateMultisampleRenderTarget(N),ie.updateRenderTargetMipmap(N)),$.isScene===!0&&$.onAfterRender(E,$,ae),me.resetDefaultState(),L=-1,T=null,M.pop(),M.length>0?x=M[M.length-1]:x=null,_.pop(),_.length>0?w=_[_.length-1]:w=null};function si($,ae,ue,pe){if($.visible===!1)return;if($.layers.test(ae.layers)){if($.isGroup)ue=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(ae);else if($.isLight)x.pushLight($),$.castShadow&&x.pushShadow($);else if($.isSprite){if(!$.frustumCulled||ce.intersectsSprite($)){pe&&Pe.setFromMatrixPosition($.matrixWorld).applyMatrix4(Ie);const Ue=Ye.update($),Be=$.material;Be.visible&&w.push($,Ue,Be,ue,Pe.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||ce.intersectsObject($))){const Ue=Ye.update($),Be=$.material;if(pe&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),Pe.copy($.boundingSphere.center)):(Ue.boundingSphere===null&&Ue.computeBoundingSphere(),Pe.copy(Ue.boundingSphere.center)),Pe.applyMatrix4($.matrixWorld).applyMatrix4(Ie)),Array.isArray(Be)){const Re=Ue.groups;for(let Ct=0,et=Re.length;Ct<et;Ct++){const it=Re[Ct],Pt=Be[it.materialIndex];Pt&&Pt.visible&&w.push($,Ue,Pt,ue,Pe.z,it)}}else Be.visible&&w.push($,Ue,Be,ue,Pe.z,null)}}const je=$.children;for(let Ue=0,Be=je.length;Ue<Be;Ue++)si(je[Ue],ae,ue,pe)}function ks($,ae,ue,pe){const he=$.opaque,je=$.transmissive,Ue=$.transparent;x.setupLightsView(ue),le===!0&&Yt.setGlobalState(E.clippingPlanes,ue),je.length>0&&ss(he,je,ae,ue),pe&&De.viewport(j.copy(pe)),he.length>0&&$i(he,ae,ue),je.length>0&&$i(je,ae,ue),Ue.length>0&&$i(Ue,ae,ue),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}function ss($,ae,ue,pe){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;const je=Ke.isWebGL2;Se===null&&(Se=new is(1,1,{generateMipmaps:!0,type:Ne.has("EXT_color_buffer_half_float")?Oi:As,minFilter:Bu,samples:je?4:0})),E.getDrawingBufferSize(qe),je?Se.setSize(qe.x,qe.y):Se.setSize(Y1(qe.x),Y1(qe.y));const Ue=E.getRenderTarget();E.setRenderTarget(Se),E.getClearColor(V),W=E.getClearAlpha(),W<1&&E.setClearColor(16777215,.5),E.clear();const Be=E.toneMapping;E.toneMapping=cl,$i($,ue,pe),ie.updateMultisampleRenderTarget(Se),ie.updateRenderTargetMipmap(Se);let Re=!1;for(let Ct=0,et=ae.length;Ct<et;Ct++){const it=ae[Ct],Pt=it.object,Vt=it.geometry,qt=it.material,nn=it.group;if(qt.side===Io&&Pt.layers.test(pe.layers)){const yt=qt.side;qt.side=La,qt.needsUpdate=!0,yi(Pt,ue,pe,Vt,qt,nn),qt.side=yt,qt.needsUpdate=!0,Re=!0}}Re===!0&&(ie.updateMultisampleRenderTarget(Se),ie.updateRenderTargetMipmap(Se)),E.setRenderTarget(Ue),E.setClearColor(V,W),E.toneMapping=Be}function $i($,ae,ue){const pe=ae.isScene===!0?ae.overrideMaterial:null;for(let he=0,je=$.length;he<je;he++){const Ue=$[he],Be=Ue.object,Re=Ue.geometry,Ct=pe===null?Ue.material:pe,et=Ue.group;Be.layers.test(ue.layers)&&yi(Be,ae,ue,Re,Ct,et)}}function yi($,ae,ue,pe,he,je){$.onBeforeRender(E,ae,ue,pe,he,je),$.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),he.onBeforeRender(E,ae,ue,pe,$,je),he.transparent===!0&&he.side===Io&&he.forceSinglePass===!1?(he.side=La,he.needsUpdate=!0,E.renderBufferDirect(ue,ae,pe,he,$,je),he.side=_c,he.needsUpdate=!0,E.renderBufferDirect(ue,ae,pe,he,$,je),he.side=Io):E.renderBufferDirect(ue,ae,pe,he,$,je),$.onAfterRender(E,ae,ue,pe,he,je)}function cn($,ae,ue){ae.isScene!==!0&&(ae=Fe);const pe=dt.get($),he=x.state.lights,je=x.state.shadowsArray,Ue=he.state.version,Be=Tt.getParameters($,he.state,je,ae,ue),Re=Tt.getProgramCacheKey(Be);let Ct=pe.programs;pe.environment=$.isMeshStandardMaterial?ae.environment:null,pe.fog=ae.fog,pe.envMap=($.isMeshStandardMaterial?Te:ee).get($.envMap||pe.environment),Ct===void 0&&($.addEventListener("dispose",gt),Ct=new Map,pe.programs=Ct);let et=Ct.get(Re);if(et!==void 0){if(pe.currentProgram===et&&pe.lightsStateVersion===Ue)return Rc($,Be),et}else Be.uniforms=Tt.getUniforms($),$.onBuild(ue,Be,E),$.onBeforeCompile(Be,E),et=Tt.acquireProgram(Be,Re),Ct.set(Re,et),pe.uniforms=Be.uniforms;const it=pe.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(it.clippingPlanes=Yt.uniform),Rc($,Be),pe.needsLights=xe($),pe.lightsStateVersion=Ue,pe.needsLights&&(it.ambientLightColor.value=he.state.ambient,it.lightProbe.value=he.state.probe,it.directionalLights.value=he.state.directional,it.directionalLightShadows.value=he.state.directionalShadow,it.spotLights.value=he.state.spot,it.spotLightShadows.value=he.state.spotShadow,it.rectAreaLights.value=he.state.rectArea,it.ltc_1.value=he.state.rectAreaLTC1,it.ltc_2.value=he.state.rectAreaLTC2,it.pointLights.value=he.state.point,it.pointLightShadows.value=he.state.pointShadow,it.hemisphereLights.value=he.state.hemi,it.directionalShadowMap.value=he.state.directionalShadowMap,it.directionalShadowMatrix.value=he.state.directionalShadowMatrix,it.spotShadowMap.value=he.state.spotShadowMap,it.spotLightMatrix.value=he.state.spotLightMatrix,it.spotLightMap.value=he.state.spotLightMap,it.pointShadowMap.value=he.state.pointShadowMap,it.pointShadowMatrix.value=he.state.pointShadowMatrix),pe.currentProgram=et,pe.uniformsList=null,et}function yl($){if($.uniformsList===null){const ae=$.currentProgram.getUniforms();$.uniformsList=Nb.seqWithValue(ae.seq,$.uniforms)}return $.uniformsList}function Rc($,ae){const ue=dt.get($);ue.outputColorSpace=ae.outputColorSpace,ue.batching=ae.batching,ue.instancing=ae.instancing,ue.instancingColor=ae.instancingColor,ue.skinning=ae.skinning,ue.morphTargets=ae.morphTargets,ue.morphNormals=ae.morphNormals,ue.morphColors=ae.morphColors,ue.morphTargetsCount=ae.morphTargetsCount,ue.numClippingPlanes=ae.numClippingPlanes,ue.numIntersection=ae.numClipIntersection,ue.vertexAlphas=ae.vertexAlphas,ue.vertexTangents=ae.vertexTangents,ue.toneMapping=ae.toneMapping}function q($,ae,ue,pe,he){ae.isScene!==!0&&(ae=Fe),ie.resetTextureUnits();const je=ae.fog,Ue=pe.isMeshStandardMaterial?ae.environment:null,Be=N===null?E.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Os,Re=(pe.isMeshStandardMaterial?Te:ee).get(pe.envMap||Ue),Ct=pe.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,et=!!ue.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),it=!!ue.morphAttributes.position,Pt=!!ue.morphAttributes.normal,Vt=!!ue.morphAttributes.color;let qt=cl;pe.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(qt=E.toneMapping);const nn=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,yt=nn!==void 0?nn.length:0,mt=dt.get(pe),tn=x.state.lights;if(le===!0&&(be===!0||$!==T)){const gn=$===T&&pe.id===L;Yt.setState(pe,$,gn)}let Kt=!1;pe.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==tn.state.version||mt.outputColorSpace!==Be||he.isBatchedMesh&&mt.batching===!1||!he.isBatchedMesh&&mt.batching===!0||he.isInstancedMesh&&mt.instancing===!1||!he.isInstancedMesh&&mt.instancing===!0||he.isSkinnedMesh&&mt.skinning===!1||!he.isSkinnedMesh&&mt.skinning===!0||he.isInstancedMesh&&mt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&mt.instancingColor===!1&&he.instanceColor!==null||mt.envMap!==Re||pe.fog===!0&&mt.fog!==je||mt.numClippingPlanes!==void 0&&(mt.numClippingPlanes!==Yt.numPlanes||mt.numIntersection!==Yt.numIntersection)||mt.vertexAlphas!==Ct||mt.vertexTangents!==et||mt.morphTargets!==it||mt.morphNormals!==Pt||mt.morphColors!==Vt||mt.toneMapping!==qt||Ke.isWebGL2===!0&&mt.morphTargetsCount!==yt)&&(Kt=!0):(Kt=!0,mt.__version=pe.version);let rn=mt.currentProgram;Kt===!0&&(rn=cn(pe,ae,he));let Yn=!1,vr=!1,rr=!1;const Nn=rn.getUniforms(),bn=mt.uniforms;if(De.useProgram(rn.program)&&(Yn=!0,vr=!0,rr=!0),pe.id!==L&&(L=pe.id,vr=!0),Yn||T!==$){Nn.setValue(ne,"projectionMatrix",$.projectionMatrix),Nn.setValue(ne,"viewMatrix",$.matrixWorldInverse);const gn=Nn.map.cameraPosition;gn!==void 0&&gn.setValue(ne,Pe.setFromMatrixPosition($.matrixWorld)),Ke.logarithmicDepthBuffer&&Nn.setValue(ne,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Nn.setValue(ne,"isOrthographic",$.isOrthographicCamera===!0),T!==$&&(T=$,vr=!0,rr=!0)}if(he.isSkinnedMesh){Nn.setOptional(ne,he,"bindMatrix"),Nn.setOptional(ne,he,"bindMatrixInverse");const gn=he.skeleton;gn&&(Ke.floatVertexTextures?(gn.boneTexture===null&&gn.computeBoneTexture(),Nn.setValue(ne,"boneTexture",gn.boneTexture,ie)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}he.isBatchedMesh&&(Nn.setOptional(ne,he,"batchingTexture"),Nn.setValue(ne,"batchingTexture",he._matricesTexture,ie));const Pr=ue.morphAttributes;if((Pr.position!==void 0||Pr.normal!==void 0||Pr.color!==void 0&&Ke.isWebGL2===!0)&&hn.update(he,ue,rn),(vr||mt.receiveShadow!==he.receiveShadow)&&(mt.receiveShadow=he.receiveShadow,Nn.setValue(ne,"receiveShadow",he.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(bn.envMap.value=Re,bn.flipEnvMap.value=Re.isCubeTexture&&Re.isRenderTargetTexture===!1?-1:1),vr&&(Nn.setValue(ne,"toneMappingExposure",E.toneMappingExposure),mt.needsLights&&re(bn,rr),je&&pe.fog===!0&&pt.refreshFogUniforms(bn,je),pt.refreshMaterialUniforms(bn,pe,se,Q,Se),Nb.upload(ne,yl(mt),bn,ie)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Nb.upload(ne,yl(mt),bn,ie),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Nn.setValue(ne,"center",he.center),Nn.setValue(ne,"modelViewMatrix",he.modelViewMatrix),Nn.setValue(ne,"normalMatrix",he.normalMatrix),Nn.setValue(ne,"modelMatrix",he.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const gn=pe.uniformsGroups;for(let On=0,ir=gn.length;On<ir;On++)if(Ke.isWebGL2){const ra=gn[On];We.update(ra,rn),We.bind(ra,rn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rn}function re($,ae){$.ambientLightColor.needsUpdate=ae,$.lightProbe.needsUpdate=ae,$.directionalLights.needsUpdate=ae,$.directionalLightShadows.needsUpdate=ae,$.pointLights.needsUpdate=ae,$.pointLightShadows.needsUpdate=ae,$.spotLights.needsUpdate=ae,$.spotLightShadows.needsUpdate=ae,$.rectAreaLights.needsUpdate=ae,$.hemisphereLights.needsUpdate=ae}function xe($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function($,ae,ue){dt.get($.texture).__webglTexture=ae,dt.get($.depthTexture).__webglTexture=ue;const pe=dt.get($);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=ue===void 0,pe.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function($,ae){const ue=dt.get($);ue.__webglFramebuffer=ae,ue.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function($,ae=0,ue=0){N=$,R=ae,O=ue;let pe=!0,he=null,je=!1,Ue=!1;if($){const Re=dt.get($);Re.__useDefaultFramebuffer!==void 0?(De.bindFramebuffer(ne.FRAMEBUFFER,null),pe=!1):Re.__webglFramebuffer===void 0?ie.setupRenderTarget($):Re.__hasExternalTextures&&ie.rebindTextures($,dt.get($.texture).__webglTexture,dt.get($.depthTexture).__webglTexture);const Ct=$.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(Ue=!0);const et=dt.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(et[ae])?he=et[ae][ue]:he=et[ae],je=!0):Ke.isWebGL2&&$.samples>0&&ie.useMultisampledRTT($)===!1?he=dt.get($).__webglMultisampledFramebuffer:Array.isArray(et)?he=et[ue]:he=et,j.copy($.viewport),U.copy($.scissor),B=$.scissorTest}else j.copy(Z).multiplyScalar(se).floor(),U.copy(X).multiplyScalar(se).floor(),B=te;if(De.bindFramebuffer(ne.FRAMEBUFFER,he)&&Ke.drawBuffers&&pe&&De.drawBuffers($,he),De.viewport(j),De.scissor(U),De.setScissorTest(B),je){const Re=dt.get($.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re.__webglTexture,ue)}else if(Ue){const Re=dt.get($.texture),Ct=ae||0;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Re.__webglTexture,ue||0,Ct)}L=-1},this.readRenderTargetPixels=function($,ae,ue,pe,he,je,Ue){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Be=dt.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&Ue!==void 0&&(Be=Be[Ue]),Be){De.bindFramebuffer(ne.FRAMEBUFFER,Be);try{const Re=$.texture,Ct=Re.format,et=Re.type;if(Ct!==gi&&At.convert(Ct)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const it=et===Oi&&(Ne.has("EXT_color_buffer_half_float")||Ke.isWebGL2&&Ne.has("EXT_color_buffer_float"));if(et!==As&&At.convert(et)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_TYPE)&&!(et===ai&&(Ke.isWebGL2||Ne.has("OES_texture_float")||Ne.has("WEBGL_color_buffer_float")))&&!it){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=$.width-pe&&ue>=0&&ue<=$.height-he&&ne.readPixels(ae,ue,pe,he,At.convert(Ct),At.convert(et),je)}finally{const Re=N!==null?dt.get(N).__webglFramebuffer:null;De.bindFramebuffer(ne.FRAMEBUFFER,Re)}}},this.copyFramebufferToTexture=function($,ae,ue=0){const pe=Math.pow(2,-ue),he=Math.floor(ae.image.width*pe),je=Math.floor(ae.image.height*pe);ie.setTexture2D(ae,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,ue,0,0,$.x,$.y,he,je),De.unbindTexture()},this.copyTextureToTexture=function($,ae,ue,pe=0){const he=ae.image.width,je=ae.image.height,Ue=At.convert(ue.format),Be=At.convert(ue.type);ie.setTexture2D(ue,0),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,ue.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,ue.unpackAlignment),ae.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,pe,$.x,$.y,he,je,Ue,Be,ae.image.data):ae.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,pe,$.x,$.y,ae.mipmaps[0].width,ae.mipmaps[0].height,Ue,ae.mipmaps[0].data):ne.texSubImage2D(ne.TEXTURE_2D,pe,$.x,$.y,Ue,Be,ae.image),pe===0&&ue.generateMipmaps&&ne.generateMipmap(ne.TEXTURE_2D),De.unbindTexture()},this.copyTextureToTexture3D=function($,ae,ue,pe,he=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const je=$.max.x-$.min.x+1,Ue=$.max.y-$.min.y+1,Be=$.max.z-$.min.z+1,Re=At.convert(pe.format),Ct=At.convert(pe.type);let et;if(pe.isData3DTexture)ie.setTexture3D(pe,0),et=ne.TEXTURE_3D;else if(pe.isDataArrayTexture||pe.isCompressedArrayTexture)ie.setTexture2DArray(pe,0),et=ne.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,pe.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,pe.unpackAlignment);const it=ne.getParameter(ne.UNPACK_ROW_LENGTH),Pt=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),Vt=ne.getParameter(ne.UNPACK_SKIP_PIXELS),qt=ne.getParameter(ne.UNPACK_SKIP_ROWS),nn=ne.getParameter(ne.UNPACK_SKIP_IMAGES),yt=ue.isCompressedTexture?ue.mipmaps[he]:ue.image;ne.pixelStorei(ne.UNPACK_ROW_LENGTH,yt.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,yt.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,$.min.x),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,$.min.y),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,$.min.z),ue.isDataTexture||ue.isData3DTexture?ne.texSubImage3D(et,he,ae.x,ae.y,ae.z,je,Ue,Be,Re,Ct,yt.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ne.compressedTexSubImage3D(et,he,ae.x,ae.y,ae.z,je,Ue,Be,Re,yt.data)):ne.texSubImage3D(et,he,ae.x,ae.y,ae.z,je,Ue,Be,Re,Ct,yt),ne.pixelStorei(ne.UNPACK_ROW_LENGTH,it),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Pt),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Vt),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,qt),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,nn),he===0&&pe.generateMipmaps&&ne.generateMipmap(et),De.unbindTexture()},this.initTexture=function($){$.isCubeTexture?ie.setTextureCube($,0):$.isData3DTexture?ie.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?ie.setTexture2DArray($,0):ie.setTexture2D($,0),De.unbindTexture()},this.resetState=function(){R=0,O=0,N=null,De.reset(),me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Lo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Gw?"display-p3":"srgb",t.unpackColorSpace=or.workingColorSpace===n0?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===mi?Du:eO}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Du?mi:Os}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class mH extends Yw{}mH.prototype.isWebGL1Renderer=!0;class Kw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Rt(e),this.density=t}clone(){return new Kw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Zw{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Rt(e),this.near=t,this.far=r}clone(){return new Zw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let o0=class extends qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class Jw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ry,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Cs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Na=new oe;class Ff{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Na.fromBufferAttribute(this,t),Na.applyMatrix4(e),this.setXYZ(t,Na.x,Na.y,Na.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Na.fromBufferAttribute(this,t),Na.applyNormalMatrix(e),this.setXYZ(t,Na.x,Na.y,Na.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Na.fromBufferAttribute(this,t),Na.transformDirection(e),this.setXYZ(t,Na.x,Na.y,Na.z);return this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ns(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ns(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ns(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ns(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),r=An(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),r=An(r,this.array),i=An(i,this.array),a=An(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new cr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ff(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dO extends xa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gp;const Qg=new oe,vp=new oe,yp=new oe,xp=new Xe,ev=new Xe,gH=new ln,Gx=new oe,tv=new oe,$x=new oe,O4=new Xe,TA=new Xe,R4=new Xe;class vH extends qn{constructor(e=new dO){if(super(),this.isSprite=!0,this.type="Sprite",gp===void 0){gp=new kn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Jw(t,5);gp.setIndex([0,1,2,0,2,3]),gp.setAttribute("position",new Ff(r,3,0,!1)),gp.setAttribute("uv",new Ff(r,2,3,!1))}this.geometry=gp,this.material=e,this.center=new Xe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vp.setFromMatrixScale(this.matrixWorld),gH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vp.multiplyScalar(-yp.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;qx(Gx.set(-.5,-.5,0),yp,s,vp,i,a),qx(tv.set(.5,-.5,0),yp,s,vp,i,a),qx($x.set(.5,.5,0),yp,s,vp,i,a),O4.set(0,0),TA.set(1,0),R4.set(1,1);let o=e.ray.intersectTriangle(Gx,tv,$x,!1,Qg);if(o===null&&(qx(tv.set(-.5,.5,0),yp,s,vp,i,a),TA.set(0,1),o=e.ray.intersectTriangle(Gx,$x,tv,!1,Qg),o===null))return;const l=e.ray.origin.distanceTo(Qg);l<e.near||l>e.far||t.push({distance:l,point:Qg.clone(),uv:ts.getInterpolation(Qg,Gx,tv,$x,O4,TA,R4,new Xe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function qx(n,e,t,r,i,a){xp.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(ev.x=a*xp.x-i*xp.y,ev.y=i*xp.x+a*xp.y):ev.copy(xp),n.copy(e),n.x+=ev.x,n.y+=ev.y,n.applyMatrix4(gH)}const Xx=new oe,k4=new oe;class yH extends qn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Xx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Xx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Xx.setFromMatrixPosition(e.matrixWorld),k4.setFromMatrixPosition(this.matrixWorld);const r=Xx.distanceTo(k4)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const j4=new oe,I4=new lr,L4=new lr,Lge=new oe,D4=new ln,Yx=new oe,AA=new ya,U4=new ln,CA=new qf;class xH extends Zr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=BC,this.bindMatrix=new ln,this.bindMatrixInverse=new ln,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Da),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Yx),this.boundingBox.expandByPoint(Yx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ya),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Yx),this.boundingSphere.expandByPoint(Yx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),AA.copy(this.boundingSphere),AA.applyMatrix4(i),e.ray.intersectsSphere(AA)!==!1&&(U4.copy(i).invert(),CA.copy(e.ray).applyMatrix4(U4),!(this.boundingBox!==null&&CA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,CA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===BC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===I8?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;I4.fromBufferAttribute(i.attributes.skinIndex,e),L4.fromBufferAttribute(i.attributes.skinWeight,e),j4.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=L4.getComponent(a);if(s!==0){const o=I4.getComponent(a);D4.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(Lge.copy(j4).applyMatrix4(D4),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class fO extends qn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Uu extends wr{constructor(e=null,t=1,r=1,i,a,s,o,l,u=ri,f=ri,h,m){super(null,s,o,l,u,f,i,a,h,m),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const F4=new ln,Dge=new ln;class Qw{constructor(e=[],t=[]){this.uuid=Cs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ln)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ln;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:Dge;F4.multiplyMatrices(o,t[a]),F4.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Qw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Uu(t,e,e,gi,ai);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new fO),this.bones.push(s),this.boneInverses.push(new ln().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class Mm extends cr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bp=new ln,z4=new ln,Kx=[],B4=new Da,Uge=new ln,nv=new Zr,rv=new ya;class bH extends Zr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Uge)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Da),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,bp),B4.copy(e.boundingBox).applyMatrix4(bp),this.boundingBox.union(B4)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ya),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,bp),rv.copy(e.boundingSphere).applyMatrix4(bp),this.boundingSphere.union(rv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(nv.geometry=this.geometry,nv.material=this.material,nv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rv.copy(this.boundingSphere),rv.applyMatrix4(r),e.ray.intersectsSphere(rv)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,bp),z4.multiplyMatrices(r,bp),nv.matrixWorld=z4,nv.raycast(e,Kx);for(let s=0,o=Kx.length;s<o;s++){const l=Kx[s];l.instanceId=a,l.object=this,t.push(l)}Kx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Mm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Fge(n,e){return n.z-e.z}function zge(n,e){return e.z-n.z}class Bge{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t}reset(){this.list.length=0,this.index=0}}const wp="batchId",vu=new ln,H4=new ln,Hge=new ln,V4=new ln,PA=new s0,Zx=new Da,Wd=new ya,iv=new oe,NA=new Bge,ha=new Zr,Jx=[];function Vge(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class wH extends Zr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new kn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Uu(t,e,e,gi,ai);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:u,itemSize:f,normalized:h}=l,m=new u.constructor(r*f),y=new l.constructor(m,f,h);y.setUsage(l.usage),t.setAttribute(o,y)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(a):new Uint16Array(a);t.setIndex(new cr(o,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(wp,new cr(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(wp))throw new Error(`BatchedMesh: Geometry cannot use attribute "${wp}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===wp)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Da);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,vu),this.getBoundingBoxAt(i,Zx).applyMatrix4(vu),t.union(Zx))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ya);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,vu),this.getBoundingSphereAt(i,Wd).applyMatrix4(vu),t.union(Wd))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const s=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(a=s[s.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const u=e.getIndex(),f=u!==null;if(f&&(r===-1?i.indexCount=u.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,m=this._active,y=this._matricesTexture,b=this._matricesTexture.image.data;h.push(!0),m.push(!0);const w=this._geometryCount;this._geometryCount++,Hge.toArray(b,w*16),y.needsUpdate=!0,s.push(i),o.push({start:f?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Da,sphereInitialized:!1,sphere:new ya});const x=this.geometry.getAttribute(wp);for(let _=0;_<i.vertexCount;_++)x.setX(i.vertexStart+_,w);return x.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=t.getIndex(),o=this._reservedRanges[e];if(i&&s.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.vertexCount;for(const y in r.attributes){if(y===wp)continue;const b=t.getAttribute(y),w=r.getAttribute(y);Vge(b,w,l);const x=b.itemSize;for(let _=b.count,M=u;_<M;_++){const E=l+_;for(let A=0;A<x;A++)w.setComponent(E,A,0)}w.needsUpdate=!0}if(i){const y=o.indexStart;for(let b=0;b<s.count;b++)a.setX(y+b,l+s.getX(b));for(let b=s.count,w=o.indexCount;b<w;b++)a.setX(y+b,l);a.needsUpdate=!0}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const h=this._drawRanges[e],m=t.getAttribute("position");return h.count=i?s.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.box,s=this.geometry;if(i.boxInitialized===!1){a.makeEmpty();const o=s.index,l=s.attributes.position,u=this._drawRanges[e];for(let f=u.start,h=u.start+u.count;f<h;f++){let m=f;o&&(m=o.getX(m)),a.expandByPoint(iv.fromBufferAttribute(l,m))}i.boxInitialized=!0}return t.copy(a),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,Zx),Zx.getCenter(a.center);const o=s.index,l=s.attributes.position,u=this._drawRanges[e];let f=0;for(let h=u.start,m=u.start+u.count;h<m;h++){let y=h;o&&(y=o.getX(y)),iv.fromBufferAttribute(l,y),f=Math.max(f,a.center.distanceToSquared(iv))}a.radius=Math.sqrt(f),i.sphereInitialized=!0}return t.copy(a),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(t.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,a=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,l=this.geometry;ha.material=this.material,ha.geometry.index=l.index,ha.geometry.attributes=l.attributes,ha.geometry.boundingBox===null&&(ha.geometry.boundingBox=new Da),ha.geometry.boundingSphere===null&&(ha.geometry.boundingSphere=new ya);for(let u=0;u<s;u++){if(!r[u]||!i[u])continue;const f=a[u];ha.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(u,ha.matrixWorld).premultiply(o),this.getBoundingBoxAt(u,ha.geometry.boundingBox),this.getBoundingSphereAt(u,ha.geometry.boundingSphere),ha.raycast(e,Jx);for(let h=0,m=Jx.length;h<m;h++){const y=Jx[h];y.object=this,y.batchId=u,t.push(y)}Jx.length=0}ha.material=null,ha.geometry.index=null,ha.geometry.attributes={},ha.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,h=this._drawRanges,m=this.perObjectFrustumCulled;m&&(V4.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),PA.setFromProjectionMatrix(V4,e.isWebGPURenderer?wm:Lo));let y=0;if(this.sortObjects){H4.copy(this.matrixWorld).invert(),iv.setFromMatrixPosition(r.matrixWorld).applyMatrix4(H4);for(let x=0,_=l.length;x<_;x++)if(l[x]){this.getMatrixAt(x,vu),this.getBoundingSphereAt(x,Wd).applyMatrix4(vu);let M=!1;if(m&&(M=!PA.intersectsSphere(Wd)),!M){const E=iv.distanceTo(Wd.center);NA.push(h[x],E)}}const b=NA.list,w=this.customSort;w===null?b.sort(a.transparent?zge:Fge):w.call(this,b,r);for(let x=0,_=b.length;x<_;x++){const M=b[x];u[y]=M.start*o,f[y]=M.count,y++}NA.reset()}else for(let b=0,w=l.length;b<w;b++)if(l[b]){let x=!1;if(m&&(this.getMatrixAt(b,vu),this.getBoundingSphereAt(b,Wd).applyMatrix4(vu),x=!PA.intersectsSphere(Wd)),!x){const _=h[b];u[y]=_.start*o,f[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Fa extends xa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const W4=new oe,G4=new oe,$4=new ln,OA=new qf,Qx=new ya;class Hu extends qn{constructor(e=new kn,t=new Fa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)W4.fromBufferAttribute(t,i-1),G4.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=W4.distanceTo(G4);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Qx.copy(r.boundingSphere),Qx.applyMatrix4(i),Qx.radius+=a,e.ray.intersectsSphere(Qx)===!1)return;$4.copy(i).invert(),OA.copy(e.ray).applyMatrix4($4);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new oe,f=new oe,h=new oe,m=new oe,y=this.isLineSegments?2:1,b=r.index,x=r.attributes.position;if(b!==null){const _=Math.max(0,s.start),M=Math.min(b.count,s.start+s.count);for(let E=_,A=M-1;E<A;E+=y){const R=b.getX(E),O=b.getX(E+1);if(u.fromBufferAttribute(x,R),f.fromBufferAttribute(x,O),OA.distanceSqToSegment(u,f,m,h)>l)continue;m.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(m);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,s.start),M=Math.min(x.count,s.start+s.count);for(let E=_,A=M-1;E<A;E+=y){if(u.fromBufferAttribute(x,E),f.fromBufferAttribute(x,E+1),OA.distanceSqToSegment(u,f,m,h)>l)continue;m.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(m);O<e.near||O>e.far||t.push({distance:O,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}const q4=new oe,X4=new oe;class vl extends Hu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)q4.fromBufferAttribute(t,i),X4.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+q4.distanceTo(X4);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _H extends Hu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class hO extends xa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Y4=new ln,xP=new qf,eb=new ya,tb=new oe;class SH extends qn{constructor(e=new kn,t=new hO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),eb.copy(r.boundingSphere),eb.applyMatrix4(i),eb.radius+=a,e.ray.intersectsSphere(eb)===!1)return;Y4.copy(i).invert(),xP.copy(e.ray).applyMatrix4(Y4);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,h=r.attributes.position;if(u!==null){const m=Math.max(0,s.start),y=Math.min(u.count,s.start+s.count);for(let b=m,w=y;b<w;b++){const x=u.getX(b);tb.fromBufferAttribute(h,x),K4(tb,x,l,i,e,t,this)}}else{const m=Math.max(0,s.start),y=Math.min(h.count,s.start+s.count);for(let b=m,w=y;b<w;b++)tb.fromBufferAttribute(h,b),K4(tb,b,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function K4(n,e,t,r,i,a,s){const o=xP.distanceSqToPoint(n);if(o<t){const l=new oe;xP.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:s})}}class Wge extends wr{constructor(e,t,r,i,a,s,o,l,u){super(e,t,r,i,a,s,o,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Wn,this.magFilter=a!==void 0?a:Wn,this.generateMipmaps=!1;const f=this;function h(){f.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Gge extends wr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ri,this.minFilter=ri,this.generateMipmaps=!1,this.needsUpdate=!0}}class e_ extends wr{constructor(e,t,r,i,a,s,o,l,u,f,h,m){super(null,s,o,l,u,f,i,a,h,m),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class $ge extends e_{constructor(e,t,r,i,a,s){super(e,t,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Dr}}class qge extends e_{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,hl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Xge extends wr{constructor(e,t,r,i,a,s,o,l,u){super(e,t,r,i,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Bo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const f=r[i],m=r[i+1]-f,y=(s-f)/m;return(i+y)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=t||(s.isVector2?new Xe:new oe);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new oe,i=[],a=[],s=[],o=new oe,l=new ln;for(let y=0;y<=e;y++){const b=y/e;i[y]=this.getTangentAt(b,new oe)}a[0]=new oe,s[0]=new oe;let u=Number.MAX_VALUE;const f=Math.abs(i[0].x),h=Math.abs(i[0].y),m=Math.abs(i[0].z);f<=u&&(u=f,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),m<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(i[y-1],i[y]),o.length()>Number.EPSILON){o.normalize();const b=Math.acos(Kr(i[y-1].dot(i[y]),-1,1));a[y].applyMatrix4(l.makeRotationAxis(o,b))}s[y].crossVectors(i[y],a[y])}if(t===!0){let y=Math.acos(Kr(a[0].dot(a[e]),-1,1));y/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let b=1;b<=e;b++)a[b].applyMatrix4(l.makeRotationAxis(i[b],y*b)),s[b].crossVectors(i[b],a[b])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class t_ extends Bo{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const r=t||new Xe,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),m=l-this.aX,y=u-this.aY;l=m*f-y*h+this.aX,u=m*h+y*f+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class MH extends t_{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function pO(){let n=0,e=0,t=0,r=0;function i(a,s,o,l){n=a,e=o,t=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){i(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,f,h){let m=(s-a)/u-(o-a)/(u+f)+(o-s)/f,y=(o-s)/f-(l-s)/(f+h)+(l-o)/h;m*=f,y*=f,i(s,o,m,y)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const nb=new oe,RA=new pO,kA=new pO,jA=new pO;class EH extends Bo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new oe){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,f;this.closed||o>0?u=i[(o-1)%a]:(nb.subVectors(i[0],i[1]).add(i[0]),u=nb);const h=i[o%a],m=i[(o+1)%a];if(this.closed||o+2<a?f=i[(o+2)%a]:(nb.subVectors(i[a-1],i[a-2]).add(i[a-1]),f=nb),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(h),y),w=Math.pow(h.distanceToSquared(m),y),x=Math.pow(m.distanceToSquared(f),y);w<1e-4&&(w=1),b<1e-4&&(b=w),x<1e-4&&(x=w),RA.initNonuniformCatmullRom(u.x,h.x,m.x,f.x,b,w,x),kA.initNonuniformCatmullRom(u.y,h.y,m.y,f.y,b,w,x),jA.initNonuniformCatmullRom(u.z,h.z,m.z,f.z,b,w,x)}else this.curveType==="catmullrom"&&(RA.initCatmullRom(u.x,h.x,m.x,f.x,this.tension),kA.initCatmullRom(u.y,h.y,m.y,f.y,this.tension),jA.initCatmullRom(u.z,h.z,m.z,f.z,this.tension));return r.set(RA.calc(l),kA.calc(l),jA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new oe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Z4(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+a+s)*l+(-3*t+3*r-2*a-s)*o+a*n+t}function Yge(n,e){const t=1-n;return t*t*e}function Kge(n,e){return 2*(1-n)*n*e}function Zge(n,e){return n*n*e}function Ov(n,e,t,r){return Yge(n,e)+Kge(n,t)+Zge(n,r)}function Jge(n,e){const t=1-n;return t*t*t*e}function Qge(n,e){const t=1-n;return 3*t*t*n*e}function eve(n,e){return 3*(1-n)*n*n*e}function tve(n,e){return n*n*n*e}function Rv(n,e,t,r,i){return Jge(n,e)+Qge(n,t)+eve(n,r)+tve(n,i)}class mO extends Bo{constructor(e=new Xe,t=new Xe,r=new Xe,i=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Xe){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Rv(e,i.x,a.x,s.x,o.x),Rv(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TH extends Bo{constructor(e=new oe,t=new oe,r=new oe,i=new oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new oe){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Rv(e,i.x,a.x,s.x,o.x),Rv(e,i.y,a.y,s.y,o.y),Rv(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gO extends Bo{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AH extends Bo{constructor(e=new oe,t=new oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new oe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new oe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vO extends Bo{constructor(e=new Xe,t=new Xe,r=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Xe){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Ov(e,i.x,a.x,s.x),Ov(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yO extends Bo{constructor(e=new oe,t=new oe,r=new oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new oe){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Ov(e,i.x,a.x,s.x),Ov(e,i.y,a.y,s.y),Ov(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xO extends Bo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],u=i[s],f=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(Z4(o,l.x,u.x,f.x,h.x),Z4(o,l.y,u.y,f.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Xe().fromArray(i))}return this}}var K1=Object.freeze({__proto__:null,ArcCurve:MH,CatmullRomCurve3:EH,CubicBezierCurve:mO,CubicBezierCurve3:TH,EllipseCurve:t_,LineCurve:gO,LineCurve3:AH,QuadraticBezierCurve:vO,QuadraticBezierCurve3:yO,SplineCurve:xO});class CH extends Bo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new K1[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const f=l[u];r&&r.equals(f)||(t.push(f),r=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new K1[i.type]().fromJSON(i))}return this}}class jy extends CH{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new gO(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new vO(this.currentPoint.clone(),new Xe(e,t),new Xe(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new mO(this.currentPoint.clone(),new Xe(e,t),new Xe(r,i),new Xe(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new xO(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,r,i,a,s,o,l),this}absellipse(e,t,r,i,a,s,o,l){const u=new t_(e,t,r,i,a,s,o,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class l0 extends kn{constructor(e=[new Xe(0,-.5),new Xe(.5,0),new Xe(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Kr(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],f=1/t,h=new oe,m=new Xe,y=new oe,b=new oe,w=new oe;let x=0,_=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:x=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,y.x=_*1,y.y=-x,y.z=_*0,w.copy(y),y.normalize(),l.push(y.x,y.y,y.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:x=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,y.x=_*1,y.y=-x,y.z=_*0,b.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),l.push(y.x,y.y,y.z),w.copy(b)}for(let M=0;M<=t;M++){const E=r+M*f*i,A=Math.sin(E),R=Math.cos(E);for(let O=0;O<=e.length-1;O++){h.x=e[O].x*A,h.y=e[O].y,h.z=e[O].x*R,s.push(h.x,h.y,h.z),m.x=M/t,m.y=O/(e.length-1),o.push(m.x,m.y);const N=l[3*O+0]*A,L=l[3*O+1],T=l[3*O+0]*R;u.push(N,L,T)}}for(let M=0;M<t;M++)for(let E=0;E<e.length-1;E++){const A=E+M*e.length,R=A,O=A+e.length,N=A+e.length+1,L=A+1;a.push(R,O,L),a.push(N,L,O)}this.setIndex(a),this.setAttribute("position",new Bt(s,3)),this.setAttribute("uv",new Bt(o,2)),this.setAttribute("normal",new Bt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l0(e.points,e.segments,e.phiStart,e.phiLength)}}class n_ extends l0{constructor(e=1,t=1,r=4,i=8){const a=new jy;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new n_(e.radius,e.length,e.capSegments,e.radialSegments)}}class r_ extends kn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],l=[],u=new oe,f=new Xe;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,m=3;h<=t;h++,m+=3){const y=r+h/t*i;u.x=e*Math.cos(y),u.y=e*Math.sin(y),s.push(u.x,u.y,u.z),o.push(0,0,1),f.x=(s[m]/e+1)/2,f.y=(s[m+1]/e+1)/2,l.push(f.x,f.y)}for(let h=1;h<=t;h++)a.push(h,h+1,0);this.setIndex(a),this.setAttribute("position",new Bt(s,3)),this.setAttribute("normal",new Bt(o,3)),this.setAttribute("uv",new Bt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fm extends kn{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const f=[],h=[],m=[],y=[];let b=0;const w=[],x=r/2;let _=0;M(),s===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(f),this.setAttribute("position",new Bt(h,3)),this.setAttribute("normal",new Bt(m,3)),this.setAttribute("uv",new Bt(y,2));function M(){const A=new oe,R=new oe;let O=0;const N=(t-e)/r;for(let L=0;L<=a;L++){const T=[],j=L/a,U=j*(t-e)+e;for(let B=0;B<=i;B++){const V=B/i,W=V*l+o,Y=Math.sin(W),Q=Math.cos(W);R.x=U*Y,R.y=-j*r+x,R.z=U*Q,h.push(R.x,R.y,R.z),A.set(Y,N,Q).normalize(),m.push(A.x,A.y,A.z),y.push(V,1-j),T.push(b++)}w.push(T)}for(let L=0;L<i;L++)for(let T=0;T<a;T++){const j=w[T][L],U=w[T+1][L],B=w[T+1][L+1],V=w[T][L+1];f.push(j,U,V),f.push(U,B,V),O+=6}u.addGroup(_,O,0),_+=O}function E(A){const R=b,O=new Xe,N=new oe;let L=0;const T=A===!0?e:t,j=A===!0?1:-1;for(let B=1;B<=i;B++)h.push(0,x*j,0),m.push(0,j,0),y.push(.5,.5),b++;const U=b;for(let B=0;B<=i;B++){const W=B/i*l+o,Y=Math.cos(W),Q=Math.sin(W);N.x=T*Q,N.y=x*j,N.z=T*Y,h.push(N.x,N.y,N.z),m.push(0,j,0),O.x=Y*.5+.5,O.y=Q*.5*j+.5,y.push(O.x,O.y),b++}for(let B=0;B<i;B++){const V=R+B,W=U+B;A===!0?f.push(W,W+1,V):f.push(W+1,W,V),L+=3}u.addGroup(_,L,A===!0?1:2),_+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class i_ extends Fm{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new i_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ku extends kn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),u(r),f(),this.setAttribute("position",new Bt(a,3)),this.setAttribute("normal",new Bt(a.slice(),3)),this.setAttribute("uv",new Bt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(M){const E=new oe,A=new oe,R=new oe;for(let O=0;O<t.length;O+=3)y(t[O+0],E),y(t[O+1],A),y(t[O+2],R),l(E,A,R,M)}function l(M,E,A,R){const O=R+1,N=[];for(let L=0;L<=O;L++){N[L]=[];const T=M.clone().lerp(A,L/O),j=E.clone().lerp(A,L/O),U=O-L;for(let B=0;B<=U;B++)B===0&&L===O?N[L][B]=T:N[L][B]=T.clone().lerp(j,B/U)}for(let L=0;L<O;L++)for(let T=0;T<2*(O-L)-1;T++){const j=Math.floor(T/2);T%2===0?(m(N[L][j+1]),m(N[L+1][j]),m(N[L][j])):(m(N[L][j+1]),m(N[L+1][j+1]),m(N[L+1][j]))}}function u(M){const E=new oe;for(let A=0;A<a.length;A+=3)E.x=a[A+0],E.y=a[A+1],E.z=a[A+2],E.normalize().multiplyScalar(M),a[A+0]=E.x,a[A+1]=E.y,a[A+2]=E.z}function f(){const M=new oe;for(let E=0;E<a.length;E+=3){M.x=a[E+0],M.y=a[E+1],M.z=a[E+2];const A=x(M)/2/Math.PI+.5,R=_(M)/Math.PI+.5;s.push(A,1-R)}b(),h()}function h(){for(let M=0;M<s.length;M+=6){const E=s[M+0],A=s[M+2],R=s[M+4],O=Math.max(E,A,R),N=Math.min(E,A,R);O>.9&&N<.1&&(E<.2&&(s[M+0]+=1),A<.2&&(s[M+2]+=1),R<.2&&(s[M+4]+=1))}}function m(M){a.push(M.x,M.y,M.z)}function y(M,E){const A=M*3;E.x=e[A+0],E.y=e[A+1],E.z=e[A+2]}function b(){const M=new oe,E=new oe,A=new oe,R=new oe,O=new Xe,N=new Xe,L=new Xe;for(let T=0,j=0;T<a.length;T+=9,j+=6){M.set(a[T+0],a[T+1],a[T+2]),E.set(a[T+3],a[T+4],a[T+5]),A.set(a[T+6],a[T+7],a[T+8]),O.set(s[j+0],s[j+1]),N.set(s[j+2],s[j+3]),L.set(s[j+4],s[j+5]),R.copy(M).add(E).add(A).divideScalar(3);const U=x(R);w(O,j+0,M,U),w(N,j+2,E,U),w(L,j+4,A,U)}}function w(M,E,A,R){R<0&&M.x===1&&(s[E]=M.x-1),A.x===0&&A.z===0&&(s[E]=R/2/Math.PI+.5)}function x(M){return Math.atan2(M.z,-M.x)}function _(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ku(e.vertices,e.indices,e.radius,e.details)}}class a_ extends Ku{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a_(e.radius,e.detail)}}const rb=new oe,ib=new oe,IA=new oe,ab=new ts;class PH extends kn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(_f*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],f=["a","b","c"],h=new Array(3),m={},y=[];for(let b=0;b<l;b+=3){s?(u[0]=s.getX(b),u[1]=s.getX(b+1),u[2]=s.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:w,b:x,c:_}=ab;if(w.fromBufferAttribute(o,u[0]),x.fromBufferAttribute(o,u[1]),_.fromBufferAttribute(o,u[2]),ab.getNormal(IA),h[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let M=0;M<3;M++){const E=(M+1)%3,A=h[M],R=h[E],O=ab[f[M]],N=ab[f[E]],L=`${A}_${R}`,T=`${R}_${A}`;T in m&&m[T]?(IA.dot(m[T].normal)<=a&&(y.push(O.x,O.y,O.z),y.push(N.x,N.y,N.z)),m[T]=null):L in m||(m[L]={index0:u[M],index1:u[E],normal:IA.clone()})}}for(const b in m)if(m[b]){const{index0:w,index1:x}=m[b];rb.fromBufferAttribute(o,w),ib.fromBufferAttribute(o,x),y.push(rb.x,rb.y,rb.z),y.push(ib.x,ib.y,ib.z)}this.setAttribute("position",new Bt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Mf extends jy{constructor(e){super(e),this.uuid=Cs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new jy().fromJSON(i))}return this}}const nve={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=NH(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u,f,h,m,y;if(r&&(a=ove(n,e,a,t)),n.length>80*t){o=u=n[0],l=f=n[1];for(let b=t;b<i;b+=t)h=n[b],m=n[b+1],h<o&&(o=h),m<l&&(l=m),h>u&&(u=h),m>f&&(f=m);y=Math.max(u-o,f-l),y=y!==0?32767/y:0}return Iy(a,s,t,o,l,y,0),s}};function NH(n,e,t,r,i){let a,s;if(i===yve(n,e,t,r)>0)for(a=e;a<t;a+=r)s=J4(a,n[a],n[a+1],s);else for(a=t-r;a>=e;a-=r)s=J4(a,n[a],n[a+1],s);return s&&s_(s,s.next)&&(Dy(s),s=s.next),s}function zf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(s_(t,t.next)||Vr(t.prev,t,t.next)===0)){if(Dy(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Iy(n,e,t,r,i,a,s){if(!n)return;!s&&a&&fve(n,r,i,a);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,a?ive(n,r,i,a):rve(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Dy(n),n=u.next,o=u.next;continue}if(n=u,n===o){s?s===1?(n=ave(zf(n),e,t),Iy(n,e,t,r,i,a,2)):s===2&&sve(n,e,t,r,i,a):Iy(zf(n),e,t,r,i,a,1);break}}}function rve(n){const e=n.prev,t=n,r=n.next;if(Vr(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,l=t.y,u=r.y,f=i<a?i<s?i:s:a<s?a:s,h=o<l?o<u?o:u:l<u?l:u,m=i>a?i>s?i:s:a>s?a:s,y=o>l?o>u?o:u:l>u?l:u;let b=r.next;for(;b!==e;){if(b.x>=f&&b.x<=m&&b.y>=h&&b.y<=y&&Dp(i,o,a,l,s,u,b.x,b.y)&&Vr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function ive(n,e,t,r){const i=n.prev,a=n,s=n.next;if(Vr(i,a,s)>=0)return!1;const o=i.x,l=a.x,u=s.x,f=i.y,h=a.y,m=s.y,y=o<l?o<u?o:u:l<u?l:u,b=f<h?f<m?f:m:h<m?h:m,w=o>l?o>u?o:u:l>u?l:u,x=f>h?f>m?f:m:h>m?h:m,_=bP(y,b,e,t,r),M=bP(w,x,e,t,r);let E=n.prevZ,A=n.nextZ;for(;E&&E.z>=_&&A&&A.z<=M;){if(E.x>=y&&E.x<=w&&E.y>=b&&E.y<=x&&E!==i&&E!==s&&Dp(o,f,l,h,u,m,E.x,E.y)&&Vr(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=y&&A.x<=w&&A.y>=b&&A.y<=x&&A!==i&&A!==s&&Dp(o,f,l,h,u,m,A.x,A.y)&&Vr(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=_;){if(E.x>=y&&E.x<=w&&E.y>=b&&E.y<=x&&E!==i&&E!==s&&Dp(o,f,l,h,u,m,E.x,E.y)&&Vr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=M;){if(A.x>=y&&A.x<=w&&A.y>=b&&A.y<=x&&A!==i&&A!==s&&Dp(o,f,l,h,u,m,A.x,A.y)&&Vr(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function ave(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!s_(i,a)&&OH(i,r,r.next,a)&&Ly(i,a)&&Ly(a,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(a.i/t|0),Dy(r),Dy(r.next),r=n=a),r=r.next}while(r!==n);return zf(r)}function sve(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&mve(s,o)){let l=RH(s,o);s=zf(s,s.next),l=zf(l,l.next),Iy(s,e,t,r,i,a,0),Iy(l,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function ove(n,e,t,r){const i=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:n.length,u=NH(n,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(pve(u));for(i.sort(lve),a=0;a<i.length;a++)t=cve(i[a],t);return t}function lve(n,e){return n.x-e.x}function cve(n,e){const t=uve(n,e);if(!t)return e;const r=RH(t,n);return zf(r,r.next),zf(t,t.next)}function uve(n,e){let t=e,r=-1/0,i;const a=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const m=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=a&&m>r&&(r=m,i=t.x<t.next.x?t:t.next,m===a))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,u=i.y;let f=1/0,h;t=i;do a>=t.x&&t.x>=l&&a!==t.x&&Dp(s<u?a:r,s,l,u,s<u?r:a,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(a-t.x),Ly(t,n)&&(h<f||h===f&&(t.x>i.x||t.x===i.x&&dve(i,t)))&&(i=t,f=h)),t=t.next;while(t!==o);return i}function dve(n,e){return Vr(n.prev,n,e.prev)<0&&Vr(e.next,n,n.next)<0}function fve(n,e,t,r){let i=n;do i.z===0&&(i.z=bP(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,hve(i)}function hve(n){let e,t,r,i,a,s,o,l,u=1;do{for(t=n,n=null,a=null,s=0;t;){for(s++,r=t,o=0,e=0;e<u&&(o++,r=r.nextZ,!!r);e++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,u*=2}while(s>1);return n}function bP(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function pve(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Dp(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function mve(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!gve(n,e)&&(Ly(n,e)&&Ly(e,n)&&vve(n,e)&&(Vr(n.prev,n,e.prev)||Vr(n,e.prev,e))||s_(n,e)&&Vr(n.prev,n,n.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function s_(n,e){return n.x===e.x&&n.y===e.y}function OH(n,e,t,r){const i=ob(Vr(n,e,t)),a=ob(Vr(n,e,r)),s=ob(Vr(t,r,n)),o=ob(Vr(t,r,e));return!!(i!==a&&s!==o||i===0&&sb(n,t,e)||a===0&&sb(n,r,e)||s===0&&sb(t,n,r)||o===0&&sb(t,e,r))}function sb(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ob(n){return n>0?1:n<0?-1:0}function gve(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&OH(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ly(n,e){return Vr(n.prev,n,n.next)<0?Vr(n,e,n.next)>=0&&Vr(n,n.prev,e)>=0:Vr(n,e,n.prev)<0||Vr(n,n.next,e)<0}function vve(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function RH(n,e){const t=new wP(n.i,n.x,n.y),r=new wP(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function J4(n,e,t,r){const i=new wP(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Dy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function wP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yve(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class ul{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return ul.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];Q4(e),eF(r,e);let s=e.length;t.forEach(Q4);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,eF(r,t[l]);const o=nve.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function Q4(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function eF(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class o_ extends kn{constructor(e=new Mf([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Bt(i,3)),this.setAttribute("uv",new Bt(a,2)),this.computeVertexNormals();function s(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:y-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:xve;let E,A=!1,R,O,N,L;_&&(E=_.getSpacedPoints(f),A=!0,m=!1,R=_.computeFrenetFrames(f,!1),O=new oe,N=new oe,L=new oe),m||(x=0,y=0,b=0,w=0);const T=o.extractPoints(u);let j=T.shape;const U=T.holes;if(!ul.isClockWise(j)){j=j.reverse();for(let ne=0,Ve=U.length;ne<Ve;ne++){const Ne=U[ne];ul.isClockWise(Ne)&&(U[ne]=Ne.reverse())}}const V=ul.triangulateShape(j,U),W=j;for(let ne=0,Ve=U.length;ne<Ve;ne++){const Ne=U[ne];j=j.concat(Ne)}function Y(ne,Ve,Ne){return Ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),ne.clone().addScaledVector(Ve,Ne)}const Q=j.length,se=V.length;function G(ne,Ve,Ne){let Ke,De,vt;const dt=ne.x-Ve.x,ie=ne.y-Ve.y,ee=Ne.x-ne.x,Te=Ne.y-ne.y,Ze=dt*dt+ie*ie,Je=dt*Te-ie*ee;if(Math.abs(Je)>Number.EPSILON){const Ye=Math.sqrt(Ze),Tt=Math.sqrt(ee*ee+Te*Te),pt=Ve.x-ie/Ye,St=Ve.y+dt/Ye,Ut=Ne.x-Te/Tt,Yt=Ne.y+ee/Tt,Qe=((Ut-pt)*Te-(Yt-St)*ee)/(dt*Te-ie*ee);Ke=pt+dt*Qe-ne.x,De=St+ie*Qe-ne.y;const mn=Ke*Ke+De*De;if(mn<=2)return new Xe(Ke,De);vt=Math.sqrt(mn/2)}else{let Ye=!1;dt>Number.EPSILON?ee>Number.EPSILON&&(Ye=!0):dt<-Number.EPSILON?ee<-Number.EPSILON&&(Ye=!0):Math.sign(ie)===Math.sign(Te)&&(Ye=!0),Ye?(Ke=-ie,De=dt,vt=Math.sqrt(Ze)):(Ke=dt,De=ie,vt=Math.sqrt(Ze/2))}return new Xe(Ke/vt,De/vt)}const J=[];for(let ne=0,Ve=W.length,Ne=Ve-1,Ke=ne+1;ne<Ve;ne++,Ne++,Ke++)Ne===Ve&&(Ne=0),Ke===Ve&&(Ke=0),J[ne]=G(W[ne],W[Ne],W[Ke]);const Z=[];let X,te=J.concat();for(let ne=0,Ve=U.length;ne<Ve;ne++){const Ne=U[ne];X=[];for(let Ke=0,De=Ne.length,vt=De-1,dt=Ke+1;Ke<De;Ke++,vt++,dt++)vt===De&&(vt=0),dt===De&&(dt=0),X[Ke]=G(Ne[Ke],Ne[vt],Ne[dt]);Z.push(X),te=te.concat(X)}for(let ne=0;ne<x;ne++){const Ve=ne/x,Ne=y*Math.cos(Ve*Math.PI/2),Ke=b*Math.sin(Ve*Math.PI/2)+w;for(let De=0,vt=W.length;De<vt;De++){const dt=Y(W[De],J[De],Ke);Ie(dt.x,dt.y,-Ne)}for(let De=0,vt=U.length;De<vt;De++){const dt=U[De];X=Z[De];for(let ie=0,ee=dt.length;ie<ee;ie++){const Te=Y(dt[ie],X[ie],Ke);Ie(Te.x,Te.y,-Ne)}}}const ce=b+w;for(let ne=0;ne<Q;ne++){const Ve=m?Y(j[ne],te[ne],ce):j[ne];A?(N.copy(R.normals[0]).multiplyScalar(Ve.x),O.copy(R.binormals[0]).multiplyScalar(Ve.y),L.copy(E[0]).add(N).add(O),Ie(L.x,L.y,L.z)):Ie(Ve.x,Ve.y,0)}for(let ne=1;ne<=f;ne++)for(let Ve=0;Ve<Q;Ve++){const Ne=m?Y(j[Ve],te[Ve],ce):j[Ve];A?(N.copy(R.normals[ne]).multiplyScalar(Ne.x),O.copy(R.binormals[ne]).multiplyScalar(Ne.y),L.copy(E[ne]).add(N).add(O),Ie(L.x,L.y,L.z)):Ie(Ne.x,Ne.y,h/f*ne)}for(let ne=x-1;ne>=0;ne--){const Ve=ne/x,Ne=y*Math.cos(Ve*Math.PI/2),Ke=b*Math.sin(Ve*Math.PI/2)+w;for(let De=0,vt=W.length;De<vt;De++){const dt=Y(W[De],J[De],Ke);Ie(dt.x,dt.y,h+Ne)}for(let De=0,vt=U.length;De<vt;De++){const dt=U[De];X=Z[De];for(let ie=0,ee=dt.length;ie<ee;ie++){const Te=Y(dt[ie],X[ie],Ke);A?Ie(Te.x,Te.y+E[f-1].y,E[f-1].x+Ne):Ie(Te.x,Te.y,h+Ne)}}}le(),be();function le(){const ne=i.length/3;if(m){let Ve=0,Ne=Q*Ve;for(let Ke=0;Ke<se;Ke++){const De=V[Ke];qe(De[2]+Ne,De[1]+Ne,De[0]+Ne)}Ve=f+x*2,Ne=Q*Ve;for(let Ke=0;Ke<se;Ke++){const De=V[Ke];qe(De[0]+Ne,De[1]+Ne,De[2]+Ne)}}else{for(let Ve=0;Ve<se;Ve++){const Ne=V[Ve];qe(Ne[2],Ne[1],Ne[0])}for(let Ve=0;Ve<se;Ve++){const Ne=V[Ve];qe(Ne[0]+Q*f,Ne[1]+Q*f,Ne[2]+Q*f)}}r.addGroup(ne,i.length/3-ne,0)}function be(){const ne=i.length/3;let Ve=0;Se(W,Ve),Ve+=W.length;for(let Ne=0,Ke=U.length;Ne<Ke;Ne++){const De=U[Ne];Se(De,Ve),Ve+=De.length}r.addGroup(ne,i.length/3-ne,1)}function Se(ne,Ve){let Ne=ne.length;for(;--Ne>=0;){const Ke=Ne;let De=Ne-1;De<0&&(De=ne.length-1);for(let vt=0,dt=f+x*2;vt<dt;vt++){const ie=Q*vt,ee=Q*(vt+1),Te=Ve+Ke+ie,Ze=Ve+De+ie,Je=Ve+De+ee,Ye=Ve+Ke+ee;Pe(Te,Ze,Je,Ye)}}}function Ie(ne,Ve,Ne){l.push(ne),l.push(Ve),l.push(Ne)}function qe(ne,Ve,Ne){Fe(ne),Fe(Ve),Fe(Ne);const Ke=i.length/3,De=M.generateTopUV(r,i,Ke-3,Ke-2,Ke-1);$e(De[0]),$e(De[1]),$e(De[2])}function Pe(ne,Ve,Ne,Ke){Fe(ne),Fe(Ve),Fe(Ke),Fe(Ve),Fe(Ne),Fe(Ke);const De=i.length/3,vt=M.generateSideWallUV(r,i,De-6,De-3,De-2,De-1);$e(vt[0]),$e(vt[1]),$e(vt[3]),$e(vt[1]),$e(vt[2]),$e(vt[3])}function Fe(ne){i.push(l[ne*3+0]),i.push(l[ne*3+1]),i.push(l[ne*3+2])}function $e(ne){a.push(ne.x),a.push(ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return bve(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new K1[i.type]().fromJSON(i)),new o_(r,e.options)}}const xve={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],f=e[i*3+1];return[new Xe(a,s),new Xe(o,l),new Xe(u,f)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[r*3],f=e[r*3+1],h=e[r*3+2],m=e[i*3],y=e[i*3+1],b=e[i*3+2],w=e[a*3],x=e[a*3+1],_=e[a*3+2];return Math.abs(o-f)<Math.abs(s-u)?[new Xe(s,1-l),new Xe(u,1-h),new Xe(m,1-b),new Xe(w,1-_)]:[new Xe(o,1-l),new Xe(f,1-h),new Xe(y,1-b),new Xe(x,1-_)]}};function bve(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class c0 extends Ku{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new c0(e.radius,e.detail)}}class u0 extends Ku{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new u0(e.radius,e.detail)}}class l_ extends kn{constructor(e=.5,t=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],f=[];let h=e;const m=(t-e)/i,y=new oe,b=new Xe;for(let w=0;w<=i;w++){for(let x=0;x<=r;x++){const _=a+x/r*s;y.x=h*Math.cos(_),y.y=h*Math.sin(_),l.push(y.x,y.y,y.z),u.push(0,0,1),b.x=(y.x/t+1)/2,b.y=(y.y/t+1)/2,f.push(b.x,b.y)}h+=m}for(let w=0;w<i;w++){const x=w*(r+1);for(let _=0;_<r;_++){const M=_+x,E=M,A=M+r+1,R=M+r+2,O=M+1;o.push(E,A,O),o.push(A,R,O)}}this.setIndex(o),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class c_ extends kn{constructor(e=new Mf([new Xe(0,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(o,l,f),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Bt(i,3)),this.setAttribute("normal",new Bt(a,3)),this.setAttribute("uv",new Bt(s,2));function u(f){const h=i.length/3,m=f.extractPoints(t);let y=m.shape;const b=m.holes;ul.isClockWise(y)===!1&&(y=y.reverse());for(let x=0,_=b.length;x<_;x++){const M=b[x];ul.isClockWise(M)===!0&&(b[x]=M.reverse())}const w=ul.triangulateShape(y,b);for(let x=0,_=b.length;x<_;x++){const M=b[x];y=y.concat(M)}for(let x=0,_=y.length;x<_;x++){const M=y[x];i.push(M.x,M.y,0),a.push(0,0,1),s.push(M.x,M.y)}for(let x=0,_=w.length;x<_;x++){const M=w[x],E=M[0]+h,A=M[1]+h,R=M[2]+h;r.push(E,A,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return wve(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new c_(r,e.curveSegments)}}function wve(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class d0 extends kn{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const f=[],h=new oe,m=new oe,y=[],b=[],w=[],x=[];for(let _=0;_<=r;_++){const M=[],E=_/r;let A=0;_===0&&s===0?A=.5/t:_===r&&l===Math.PI&&(A=-.5/t);for(let R=0;R<=t;R++){const O=R/t;h.x=-e*Math.cos(i+O*a)*Math.sin(s+E*o),h.y=e*Math.cos(s+E*o),h.z=e*Math.sin(i+O*a)*Math.sin(s+E*o),b.push(h.x,h.y,h.z),m.copy(h).normalize(),w.push(m.x,m.y,m.z),x.push(O+A,1-E),M.push(u++)}f.push(M)}for(let _=0;_<r;_++)for(let M=0;M<t;M++){const E=f[_][M+1],A=f[_][M],R=f[_+1][M],O=f[_+1][M+1];(_!==0||s>0)&&y.push(E,A,O),(_!==r-1||l<Math.PI)&&y.push(A,R,O)}this.setIndex(y),this.setAttribute("position",new Bt(b,3)),this.setAttribute("normal",new Bt(w,3)),this.setAttribute("uv",new Bt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class u_ extends Ku{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new u_(e.radius,e.detail)}}class d_ extends kn{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],f=new oe,h=new oe,m=new oe;for(let y=0;y<=r;y++)for(let b=0;b<=i;b++){const w=b/i*a,x=y/r*Math.PI*2;h.x=(e+t*Math.cos(x))*Math.cos(w),h.y=(e+t*Math.cos(x))*Math.sin(w),h.z=t*Math.sin(x),o.push(h.x,h.y,h.z),f.x=e*Math.cos(w),f.y=e*Math.sin(w),m.subVectors(h,f).normalize(),l.push(m.x,m.y,m.z),u.push(b/i),u.push(y/r)}for(let y=1;y<=r;y++)for(let b=1;b<=i;b++){const w=(i+1)*y+b-1,x=(i+1)*(y-1)+b-1,_=(i+1)*(y-1)+b,M=(i+1)*y+b;s.push(w,x,M),s.push(x,_,M)}this.setIndex(s),this.setAttribute("position",new Bt(o,3)),this.setAttribute("normal",new Bt(l,3)),this.setAttribute("uv",new Bt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class f_ extends kn{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],f=[],h=new oe,m=new oe,y=new oe,b=new oe,w=new oe,x=new oe,_=new oe;for(let E=0;E<=r;++E){const A=E/r*a*Math.PI*2;M(A,a,s,e,y),M(A+.01,a,s,e,b),x.subVectors(b,y),_.addVectors(b,y),w.crossVectors(x,_),_.crossVectors(w,x),w.normalize(),_.normalize();for(let R=0;R<=i;++R){const O=R/i*Math.PI*2,N=-t*Math.cos(O),L=t*Math.sin(O);h.x=y.x+(N*_.x+L*w.x),h.y=y.y+(N*_.y+L*w.y),h.z=y.z+(N*_.z+L*w.z),l.push(h.x,h.y,h.z),m.subVectors(h,y).normalize(),u.push(m.x,m.y,m.z),f.push(E/r),f.push(R/i)}}for(let E=1;E<=r;E++)for(let A=1;A<=i;A++){const R=(i+1)*(E-1)+(A-1),O=(i+1)*E+(A-1),N=(i+1)*E+A,L=(i+1)*(E-1)+A;o.push(R,O,L),o.push(O,N,L)}this.setIndex(o),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(f,2));function M(E,A,R,O,N){const L=Math.cos(E),T=Math.sin(E),j=R/A*E,U=Math.cos(j);N.x=O*(2+U)*.5*L,N.y=O*(2+U)*T*.5,N.z=O*Math.sin(j)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class h_ extends kn{constructor(e=new yO(new oe(-1,-1,0),new oe(-1,1,0),new oe(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new oe,l=new oe,u=new Xe;let f=new oe;const h=[],m=[],y=[],b=[];w(),this.setIndex(b),this.setAttribute("position",new Bt(h,3)),this.setAttribute("normal",new Bt(m,3)),this.setAttribute("uv",new Bt(y,2));function w(){for(let E=0;E<t;E++)x(E);x(a===!1?t:0),M(),_()}function x(E){f=e.getPointAt(E/t,f);const A=s.normals[E],R=s.binormals[E];for(let O=0;O<=i;O++){const N=O/i*Math.PI*2,L=Math.sin(N),T=-Math.cos(N);l.x=T*A.x+L*R.x,l.y=T*A.y+L*R.y,l.z=T*A.z+L*R.z,l.normalize(),m.push(l.x,l.y,l.z),o.x=f.x+r*l.x,o.y=f.y+r*l.y,o.z=f.z+r*l.z,h.push(o.x,o.y,o.z)}}function _(){for(let E=1;E<=t;E++)for(let A=1;A<=i;A++){const R=(i+1)*(E-1)+(A-1),O=(i+1)*E+(A-1),N=(i+1)*E+A,L=(i+1)*(E-1)+A;b.push(R,O,L),b.push(O,N,L)}}function M(){for(let E=0;E<=t;E++)for(let A=0;A<=i;A++)u.x=E/t,u.y=A/i,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new h_(new K1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kH extends kn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new oe,a=new oe;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const h=l[u],m=h.start,y=h.count;for(let b=m,w=m+y;b<w;b+=3)for(let x=0;x<3;x++){const _=o.getX(b+x),M=o.getX(b+(x+1)%3);i.fromBufferAttribute(s,_),a.fromBufferAttribute(s,M),tF(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const f=3*o+u,h=3*o+(u+1)%3;i.fromBufferAttribute(s,f),a.fromBufferAttribute(s,h),tF(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Bt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function tF(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var nF=Object.freeze({__proto__:null,BoxGeometry:Xf,CapsuleGeometry:n_,CircleGeometry:r_,ConeGeometry:i_,CylinderGeometry:Fm,DodecahedronGeometry:a_,EdgesGeometry:PH,ExtrudeGeometry:o_,IcosahedronGeometry:c0,LatheGeometry:l0,OctahedronGeometry:u0,PlaneGeometry:Yf,PolyhedronGeometry:Ku,RingGeometry:l_,ShapeGeometry:c_,SphereGeometry:d0,TetrahedronGeometry:u_,TorusGeometry:d_,TorusKnotGeometry:f_,TubeGeometry:h_,WireframeGeometry:kH});class jH extends xa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class IH extends Rs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bO extends xa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wO extends bO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class LH extends xa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DH extends xa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class UH extends xa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class FH extends xa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zH extends xa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BH extends Fa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gf(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function HH(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function VH(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function _P(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let l=0;l!==e;++l)i[s++]=n[o+l]}return i}function _O(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push.apply(t,s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}function _ve(n,e,t,r,i=30){const a=n.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],f=u.getValueSize(),h=[],m=[];for(let y=0;y<u.times.length;++y){const b=u.times[y]*i;if(!(b<t||b>=r)){h.push(u.times[y]);for(let w=0;w<f;++w)m.push(u.values[y*f+w])}}h.length!==0&&(u.times=gf(h,u.times.constructor),u.values=gf(m,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function Sve(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=t.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(u===void 0)continue;let f=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);let m=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=y/3);const b=o.times.length-1;let w;if(a<=o.times[0]){const _=f,M=h-f;w=o.values.slice(_,M)}else if(a>=o.times[b]){const _=b*h+f,M=_+h-f;w=o.values.slice(_,M)}else{const _=o.createInterpolant(),M=f,E=h-f;_.evaluate(a),w=_.resultBuffer.slice(M,E)}l==="quaternion"&&new va().fromArray(w).normalize().conjugate().toArray(w);const x=u.times.length;for(let _=0;_<x;++_){const M=_*y+m;if(l==="quaternion")va.multiplyQuaternionsFlat(u.values,M,w,0,u.values,M);else{const E=y-m*2;for(let A=0;A<E;++A)u.values[M+A]-=w[A]}}}return n.blendMode=QN,n}const Mve={convertArray:gf,isTypedArray:HH,getKeyframeOrder:VH,sortedArray:_P,flattenJSON:_O,subclip:_ve,makeClipAdditive:Sve};class f0{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WH extends f0{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ff,endingEnd:ff}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case hf:a=e,o=2*t-r;break;case Cy:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case hf:s=e,l=2*r-t;break;case Cy:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,f=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-r),this._offsetPrev=a*f,this._offsetNext=s*f}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,y=this._weightNext,b=(r-t)/(i-t),w=b*b,x=w*b,_=-m*x+2*m*w-m*b,M=(1+m)*x+(-1.5-2*m)*w+(-.5+m)*b+1,E=(-1-y)*x+(1.5+y)*w+.5*b,A=y*x-y*w;for(let R=0;R!==o;++R)a[R]=_*s[f+R]+M*s[u+R]+E*s[l+R]+A*s[h+R];return a}}class SO extends f0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=(r-t)/(i-t),h=1-f;for(let m=0;m!==o;++m)a[m]=s[u+m]*h+s[l+m]*f;return a}}class GH extends f0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ho{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gf(t,this.TimeBufferType),this.values=gf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:gf(e.times,Array),values:gf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new GH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WH(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ty:t=this.InterpolantFactoryMethodDiscrete;break;case Ay:t=this.InterpolantFactoryMethodLinear;break;case Pb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ty;case this.InterpolantFactoryMethodLinear:return Ay;case this.InterpolantFactoryMethodSmooth:return Pb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&HH(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Pb,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],f=e[o+1];if(u!==f&&(o!==1||u!==e[0]))if(i)l=!0;else{const h=o*r,m=h-r,y=h+r;for(let b=0;b!==r;++b){const w=t[h+b];if(w!==t[m+b]||w!==t[y+b]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const h=o*r,m=s*r;for(let y=0;y!==r;++y)t[m+y]=t[h+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ho.prototype.TimeBufferType=Float32Array;Ho.prototype.ValueBufferType=Float32Array;Ho.prototype.DefaultInterpolation=Ay;class Kf extends Ho{}Kf.prototype.ValueTypeName="bool";Kf.prototype.ValueBufferType=Array;Kf.prototype.DefaultInterpolation=Ty;Kf.prototype.InterpolantFactoryMethodLinear=void 0;Kf.prototype.InterpolantFactoryMethodSmooth=void 0;class MO extends Ho{}MO.prototype.ValueTypeName="color";class Uy extends Ho{}Uy.prototype.ValueTypeName="number";class $H extends f0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let u=e*o;for(let f=u+o;u!==f;u+=4)va.slerpFlat(a,0,s,u-o,s,u,l);return a}}class zm extends Ho{InterpolantFactoryMethodLinear(e){return new $H(this.times,this.values,this.getValueSize(),e)}}zm.prototype.ValueTypeName="quaternion";zm.prototype.DefaultInterpolation=Ay;zm.prototype.InterpolantFactoryMethodSmooth=void 0;class Zf extends Ho{}Zf.prototype.ValueTypeName="string";Zf.prototype.ValueBufferType=Array;Zf.prototype.DefaultInterpolation=Ty;Zf.prototype.InterpolantFactoryMethodLinear=void 0;Zf.prototype.InterpolantFactoryMethodSmooth=void 0;class Fy extends Ho{}Fy.prototype.ValueTypeName="vector";class zy{constructor(e,t=-1,r,i=Ww){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Cs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(Tve(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)t.push(Ho.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const f=VH(l);l=_P(l,1,f),u=_P(u,1,f),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new Uy(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],f=u.name.match(a);if(f&&f.length>1){const h=f[1];let m=i[h];m||(i[h]=m=[]),m.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,m,y,b,w){if(y.length!==0){const x=[],_=[];_O(y,x,_,b),x.length!==0&&w.push(new h(m,x,_))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const m=u[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const y={};let b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let w=0;w<m[b].morphTargets.length;w++)y[m[b].morphTargets[w]]=-1;for(const w in y){const x=[],_=[];for(let M=0;M!==m[b].morphTargets.length;++M){const E=m[b];x.push(E.time),_.push(E.morphTarget===w?1:0)}i.push(new Uy(".morphTargetInfluence["+w+"]",x,_))}l=y.length*s}else{const y=".bones["+t[h].name+"]";r(Fy,y+".position",m,"pos",i),r(zm,y+".quaternion",m,"rot",i),r(Fy,y+".scale",m,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Eve(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Uy;case"vector":case"vector2":case"vector3":case"vector4":return Fy;case"color":return MO;case"quaternion":return zm;case"bool":case"boolean":return Kf;case"string":return Zf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Tve(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Eve(n.type);if(n.times===void 0){const t=[],r=[];_O(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const dc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class p_{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(f){o++,a===!1&&i.onStart!==void 0&&i.onStart(f,s,o),a=!0},this.itemEnd=function(f){s++,i.onProgress!==void 0&&i.onProgress(f,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){const h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,m=u.length;h<m;h+=2){const y=u[h],b=u[h+1];if(y.global&&(y.lastIndex=0),y.test(f))return b}return null}}}const qH=new p_;class za{constructor(e){this.manager=e!==void 0?e:qH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}za.DEFAULT_MATERIAL_NAME="__DEFAULT";const ic={};class Ave extends Error{constructor(e,t){super(e),this.response=t}}class Ps extends za{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=dc.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(ic[e]!==void 0){ic[e].push({onLoad:t,onProgress:r,onError:i});return}ic[e]=[],ic[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=ic[e],h=u.body.getReader(),m=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),y=m?parseInt(m):0,b=y!==0;let w=0;const x=new ReadableStream({start(_){M();function M(){h.read().then(({done:E,value:A})=>{if(E)_.close();else{w+=A.byteLength;const R=new ProgressEvent("progress",{lengthComputable:b,loaded:w,total:y});for(let O=0,N=f.length;O<N;O++){const L=f[O];L.onProgress&&L.onProgress(R)}_.enqueue(A),M()}})}}});return new Response(x)}else throw new Ave(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,o));case"json":return u.json();default:if(o===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),m=h&&h[1]?h[1].toLowerCase():void 0,y=new TextDecoder(m);return u.arrayBuffer().then(b=>y.decode(b))}}}).then(u=>{dc.add(e,u);const f=ic[e];delete ic[e];for(let h=0,m=f.length;h<m;h++){const y=f[h];y.onLoad&&y.onLoad(u)}}).catch(u=>{const f=ic[e];if(f===void 0)throw this.manager.itemError(e),u;delete ic[e];for(let h=0,m=f.length;h<m;h++){const y=f[h];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Cve extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Ps(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=zy.parse(e[r]);t.push(i)}return t}}class Pve extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new e_,l=new Ps(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function f(h){l.load(e[h],function(m){const y=a.parse(m,!0);s[h]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(o.minFilter=Wn),o.image=s,o.format=y.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let h=0,m=e.length;h<m;++h)f(h);else l.load(e,function(h){const m=a.parse(h,!0);if(m.isCubemap){const y=m.mipmaps.length/m.mipmapCount;for(let b=0;b<y;b++){s[b]={mipmaps:[]};for(let w=0;w<m.mipmapCount;w++)s[b].mipmaps.push(m.mipmaps[b*m.mipmapCount+w]),s[b].format=m.format,s[b].width=m.width,s[b].height=m.height}o.image=s}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=Wn),o.format=m.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class By extends za{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=dc.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=ky("img");function l(){f(),dc.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(h){f(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function f(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class XH extends za{constructor(e){super(e)}load(e,t,r,i){const a=new a0;a.colorSpace=mi;const s=new By(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(f){a.images[u]=f,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class EO extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Uu,o=new Ps(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(f){if(i!==void 0)i(f);else{console.error(f);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Dr,s.wrapT=u.wrapT!==void 0?u.wrapT:Dr,s.magFilter=u.magFilter!==void 0?u.magFilter:Wn,s.minFilter=u.minFilter!==void 0?u.minFilter:Wn,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?s.colorSpace=u.colorSpace:u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Bu),u.mipmapCount===1&&(s.minFilter=Wn),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},r,i),s}}class Nve extends za{constructor(e){super(e)}load(e,t,r,i){const a=new wr,s=new By(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class Zu extends qn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class YH extends Zu{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(qn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const LA=new ln,rF=new oe,iF=new oe;class TO{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.map=null,this.mapPass=null,this.matrix=new ln,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new s0,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new lr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;rF.setFromMatrixPosition(e.matrixWorld),t.position.copy(rF),iF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(iF),t.updateMatrixWorld(),LA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(LA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(LA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ove extends TO{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=_m*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class KH extends Zu{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qn.DEFAULT_UP),this.updateMatrix(),this.target=new qn,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new Ove}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const aF=new ln,av=new oe,DA=new oe;class Rve extends TO{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new lr(2,1,1,1),new lr(0,1,1,1),new lr(3,1,1,1),new lr(1,1,1,1),new lr(3,0,1,1),new lr(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),av.setFromMatrixPosition(e.matrixWorld),r.position.copy(av),DA.copy(r.position),DA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(DA),r.updateMatrixWorld(),i.makeTranslation(-av.x,-av.y,-av.z),aF.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aF)}}class ZH extends Zu{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Rve}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kve extends TO{constructor(){super(new gc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class JH extends Zu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qn.DEFAULT_UP),this.updateMatrix(),this.target=new qn,this.shadow=new kve}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class QH extends Zu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class eV extends Zu{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class tV{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new oe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class nV extends Zu{constructor(e=new tV,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class m_ extends za{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new Ps(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=m_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Rt().setHex(s.value);break;case"v2":i.uniforms[a].value=new Xe().fromArray(s.value);break;case"v3":i.uniforms[a].value=new oe().fromArray(s.value);break;case"v4":i.uniforms[a].value=new lr().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Rn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new ln().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Xe().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:jH,SpriteMaterial:dO,RawShaderMaterial:IH,ShaderMaterial:Rs,PointsMaterial:hO,MeshPhysicalMaterial:wO,MeshStandardMaterial:bO,MeshPhongMaterial:LH,MeshToonMaterial:DH,MeshNormalMaterial:UH,MeshLambertMaterial:FH,MeshDepthMaterial:cO,MeshDistanceMaterial:uO,MeshBasicMaterial:Oc,MeshMatcapMaterial:zH,LineDashedMaterial:BH,LineBasicMaterial:Fa,Material:xa};return new t[e]}}class SP{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rV extends kn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class iV extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Ps(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(y,b){if(t[b]!==void 0)return t[b];const x=y.interleavedBuffers[b],_=a(y,x.buffer),M=kp(x.type,_),E=new Jw(M,x.stride);return E.uuid=x.uuid,t[b]=E,E}function a(y,b){if(r[b]!==void 0)return r[b];const x=y.arrayBuffers[b],_=new Uint32Array(x).buffer;return r[b]=_,_}const s=e.isInstancedBufferGeometry?new rV:new kn,o=e.data.index;if(o!==void 0){const y=kp(o.type,o.array);s.setIndex(new cr(y,1))}const l=e.data.attributes;for(const y in l){const b=l[y];let w;if(b.isInterleavedBufferAttribute){const x=i(e.data,b.data);w=new Ff(x,b.itemSize,b.offset,b.normalized)}else{const x=kp(b.type,b.array),_=b.isInstancedBufferAttribute?Mm:cr;w=new _(x,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),b.usage!==void 0&&w.setUsage(b.usage),s.setAttribute(y,w)}const u=e.data.morphAttributes;if(u)for(const y in u){const b=u[y],w=[];for(let x=0,_=b.length;x<_;x++){const M=b[x];let E;if(M.isInterleavedBufferAttribute){const A=i(e.data,M.data);E=new Ff(A,M.itemSize,M.offset,M.normalized)}else{const A=kp(M.type,M.array);E=new cr(A,M.itemSize,M.normalized)}M.name!==void 0&&(E.name=M.name),w.push(E)}s.morphAttributes[y]=w}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let y=0,b=h.length;y!==b;++y){const w=h[y];s.addGroup(w.start,w.count,w.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const y=new oe;m.center!==void 0&&y.fromArray(m.center),s.boundingSphere=new ya(y,m.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class jve extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?SP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Ps(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?SP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Ps(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,r),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),t!==void 0){let h=!1;for(const m in s)if(s[m].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new Mf().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new Qw().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new iV;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in nF?o=nF[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new m_;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=zy.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(f)}else return l.data?{data:kp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new p_(t);a=new By(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const h=e[u],m=h.url;if(Array.isArray(m)){const y=[];for(let b=0,w=m.length;b<w;b++){const x=m[b],_=o(x);_!==null&&(_ instanceof HTMLImageElement?y.push(_):y.push(new Uu(_.data,_.width,_.height)))}i[h.uuid]=new pf(y)}else{const y=o(h.url);i[h.uuid]=new pf(y)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:kp(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new By(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const f=[];for(let h=0,m=u.length;h<m;h++){const y=u[h],b=await a(y);b!==null&&(b instanceof HTMLImageElement?f.push(b):f.push(new Uu(b.data,b.width,b.height)))}r[l.uuid]=new pf(f)}else{const f=await a(l.url);r[l.uuid]=new pf(f)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let f;Array.isArray(u)?(f=new a0,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new Uu:f=new wr,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=o.uuid,o.name!==void 0&&(f.name=o.name),o.mapping!==void 0&&(f.mapping=r(o.mapping,Ive)),o.channel!==void 0&&(f.channel=o.channel),o.offset!==void 0&&f.offset.fromArray(o.offset),o.repeat!==void 0&&f.repeat.fromArray(o.repeat),o.center!==void 0&&f.center.fromArray(o.center),o.rotation!==void 0&&(f.rotation=o.rotation),o.wrap!==void 0&&(f.wrapS=r(o.wrap[0],sF),f.wrapT=r(o.wrap[1],sF)),o.format!==void 0&&(f.format=o.format),o.internalFormat!==void 0&&(f.internalFormat=o.internalFormat),o.type!==void 0&&(f.type=o.type),o.colorSpace!==void 0&&(f.colorSpace=o.colorSpace),o.encoding!==void 0&&(f.encoding=o.encoding),o.minFilter!==void 0&&(f.minFilter=r(o.minFilter,oF)),o.magFilter!==void 0&&(f.magFilter=r(o.magFilter,oF)),o.anisotropy!==void 0&&(f.anisotropy=o.anisotropy),o.flipY!==void 0&&(f.flipY=o.flipY),o.generateMipmaps!==void 0&&(f.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(f.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(f.compareFunction=o.compareFunction),o.userData!==void 0&&(f.userData=o.userData),i[o.uuid]=f}return i}parseObject(e,t,r,i,a){let s;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const y=[];for(let b=0,w=m.length;b<w;b++){const x=m[b];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),y.push(r[x])}return y}return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),r[m]}}function u(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let f,h;switch(e.type){case"Scene":s=new o0,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Rt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Zw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Kw(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new ii(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new gc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new QH(e.color,e.intensity);break;case"DirectionalLight":s=new JH(e.color,e.intensity);break;case"PointLight":s=new ZH(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new eV(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new KH(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new YH(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new nV().fromJSON(e);break;case"SkinnedMesh":f=o(e.geometry),h=l(e.material),s=new xH(f,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":f=o(e.geometry),h=l(e.material),s=new Zr(f,h);break;case"InstancedMesh":f=o(e.geometry),h=l(e.material);const m=e.count,y=e.instanceMatrix,b=e.instanceColor;s=new bH(f,h,m),s.instanceMatrix=new Mm(new Float32Array(y.array),16),b!==void 0&&(s.instanceColor=new Mm(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":f=o(e.geometry),h=l(e.material),s=new wH(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),s.geometry=f,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(w=>{const x=new Da;x.min.fromArray(w.boxMin),x.max.fromArray(w.boxMax);const _=new ya;return _.radius=w.sphereRadius,_.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:x,sphereInitialized:w.sphereInitialized,sphere:_}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":s=new yH;break;case"Line":s=new Hu(o(e.geometry),l(e.material));break;case"LineLoop":s=new _H(o(e.geometry),l(e.material));break;case"LineSegments":s=new vl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new SH(o(e.geometry),l(e.material));break;case"Sprite":s=new vH(l(e.material));break;case"Group":s=new Lp;break;case"Bone":s=new fO;break;default:s=new qn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let y=0;y<m.length;y++)s.add(this.parseObject(m[y],t,r,i,a))}if(e.animations!==void 0){const m=e.animations;for(let y=0;y<m.length;y++){const b=m[y];s.animations.push(a[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const m=e.levels;for(let y=0;y<m.length;y++){const b=m[y],w=s.getObjectByProperty("uuid",b.object);w!==void 0&&s.addLevel(w,b.distance,b.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Ive={UVMapping:Fu,CubeReflectionMapping:hl,CubeRefractionMapping:zu,EquirectangularReflectionMapping:bm,EquirectangularRefractionMapping:Sy,CubeUVReflectionMapping:Dm},sF={RepeatWrapping:My,ClampToEdgeWrapping:Dr,MirroredRepeatWrapping:Ey},oF={NearestFilter:ri,NearestMipmapNearestFilter:q1,NearestMipmapLinearFilter:Cv,LinearFilter:Wn,LinearMipmapNearestFilter:VN,LinearMipmapLinearFilter:Bu};class Lve extends za{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=dc.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return dc.add(e,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),dc.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});dc.add(e,l),a.manager.itemStart(e)}}let lb;class AO{static getContext(){return lb===void 0&&(lb=new(window.AudioContext||window.webkitAudioContext)),lb}static setContext(e){lb=e}}class Dve extends za{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Ps(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);AO.getContext().decodeAudioData(u,function(h){t(h)}).catch(o)}catch(u){o(u)}},r,i);function o(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const lF=new ln,cF=new ln,Gd=new ln;class Uve{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Gd.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(_f*t.fov*.5)/t.zoom;let o,l;cF.elements[12]=-i,lF.elements[12]=i,o=-s*t.aspect+a,l=s*t.aspect+a,Gd.elements[0]=2*t.near/(l-o),Gd.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Gd),o=-s*t.aspect-a,l=s*t.aspect-a,Gd.elements[0]=2*t.near/(l-o),Gd.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Gd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cF),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(lF)}}class CO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uF(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uF();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uF(){return(typeof performance>"u"?Date:performance).now()}const $d=new oe,dF=new va,Fve=new oe,qd=new oe;class zve extends qn{constructor(){super(),this.type="AudioListener",this.context=AO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new CO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($d,dF,Fve),qd.set(0,0,-1).applyQuaternion(dF),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($d.x,i),t.positionY.linearRampToValueAtTime($d.y,i),t.positionZ.linearRampToValueAtTime($d.z,i),t.forwardX.linearRampToValueAtTime(qd.x,i),t.forwardY.linearRampToValueAtTime(qd.y,i),t.forwardZ.linearRampToValueAtTime(qd.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition($d.x,$d.y,$d.z),t.setOrientation(qd.x,qd.y,qd.z,r.x,r.y,r.z)}}class aV extends qn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Xd=new oe,fF=new va,Bve=new oe,Yd=new oe;class Hve extends aV{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xd,fF,Bve),Yd.set(0,0,1).applyQuaternion(fF);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xd.x,r),t.positionY.linearRampToValueAtTime(Xd.y,r),t.positionZ.linearRampToValueAtTime(Xd.z,r),t.orientationX.linearRampToValueAtTime(Yd.x,r),t.orientationY.linearRampToValueAtTime(Yd.y,r),t.orientationZ.linearRampToValueAtTime(Yd.z,r)}else t.setPosition(Xd.x,Xd.y,Xd.z),t.setOrientation(Yd.x,Yd.y,Yd.z)}}class Vve{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class sV{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){va.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;va.multiplyQuaternionsFlat(e,s,e,t,e,r),va.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const PO="\\[\\]\\.:\\/",Wve=new RegExp("["+PO+"]","g"),NO="[^"+PO+"]",Gve="[^"+PO.replace("\\.","")+"]",$ve=/((?:WC+[\/:])*)/.source.replace("WC",NO),qve=/(WCOD+)?/.source.replace("WCOD",Gve),Xve=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",NO),Yve=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",NO),Kve=new RegExp("^"+$ve+qve+Xve+Yve+"$"),Zve=["material","materials","bones","map"];class Jve{constructor(e,t,r){const i=r||Vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Vn{constructor(e,t,r){this.path=t,this.parsedPath=r||Vn.parseTrackName(t),this.node=Vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Vn.Composite(e,t,r):new Vn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Wve,"")}static parseTrackName(e){const t=Kve.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);Zve.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=Vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vn.Composite=Jve;Vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vn.prototype.GetterByBindingType=[Vn.prototype._getValue_direct,Vn.prototype._getValue_array,Vn.prototype._getValue_arrayElement,Vn.prototype._getValue_toArray];Vn.prototype.SetterByBindingTypeAndVersioning=[[Vn.prototype._setValue_direct,Vn.prototype._setValue_direct_setNeedsUpdate,Vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_array,Vn.prototype._setValue_array_setNeedsUpdate,Vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_arrayElement,Vn.prototype._setValue_arrayElement_setNeedsUpdate,Vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_fromArray,Vn.prototype._setValue_fromArray_setNeedsUpdate,Vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qve{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Cs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let f=0,h=arguments.length;f!==h;++f){const m=arguments[f],y=m.uuid;let b=t[y];if(b===void 0){b=l++,t[y]=b,e.push(m);for(let w=0,x=s;w!==x;++w)a[w].push(new Vn(m,r[w],i[w]))}else if(b<u){o=e[b];const w=--u,x=e[w];t[x.uuid]=b,e[b]=x,t[y]=w,e[w]=m;for(let _=0,M=s;_!==M;++_){const E=a[_],A=E[w];let R=E[b];E[b]=A,R===void 0&&(R=new Vn(m,r[_],i[_])),E[w]=R}}else e[b]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,f=t[u];if(f!==void 0&&f>=a){const h=a++,m=e[h];t[m.uuid]=f,e[f]=m,t[u]=h,e[h]=l;for(let y=0,b=i;y!==b;++y){const w=r[y],x=w[h],_=w[f];w[f]=x,w[h]=_}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],f=u.uuid,h=t[f];if(h!==void 0)if(delete t[f],h<a){const m=--a,y=e[m],b=--s,w=e[b];t[y.uuid]=h,e[h]=y,t[w.uuid]=m,e[m]=w,e.pop();for(let x=0,_=i;x!==_;++x){const M=r[x],E=M[m],A=M[b];M[h]=E,M[m]=A,M.pop()}}else{const m=--s,y=e[m];m>0&&(t[y.uuid]=h),e[h]=y,e.pop();for(let b=0,w=i;b!==w;++b){const x=r[b];x[h]=x[m],x.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,h=new Array(u);i=a.length,r[e]=i,s.push(e),o.push(t),a.push(h);for(let m=f,y=l.length;m!==y;++m){const b=l[m];h[m]=new Vn(b,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];t[u]=r,s[r]=l,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class oV{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),l={endingStart:ff,endingEnd:ff};for(let u=0;u!==s;++u){const f=a[u].createInterpolant(null);o[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=H8,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case QN:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulateAdditive(o);break;case Ww:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===V8;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===B8){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=hf,i.endingEnd=hf):(e?i.endingStart=this.zeroSlopeAtStart?hf:ff:i.endingStart=Cy,t?i.endingEnd=this.zeroSlopeAtEnd?hf:ff:i.endingEnd=Cy)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=t,o[1]=a+e,l[1]=r,this}}const eye=new Float32Array(1);class tye extends Nc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==a;++h){const m=i[h],y=m.name;let b=f[y];if(b!==void 0)++b.referenceCount,s[h]=b;else{if(b=s[h],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,y));continue}const w=t&&t._propertyBindings[h].binding.parsedPath;b=new sV(Vn.create(r,y,w),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,y),s[h]=b}o[h].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new SO(new Float32Array(2),new Float32Array(2),1,eye),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?zy.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=Ww),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const f=new oV(this,s,t,r);return this._bindAction(f,u),this._addInactiveAction(f,o,a),f}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?zy.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const f=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,t[f]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class OO{constructor(e){this.value=e}clone(){return new OO(this.value.clone===void 0?this.value:this.value.clone())}}let nye=0;class rye extends Nc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:nye++}),this.name="",this.usage=Ry,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class iye extends Jw{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class aye{constructor(e,t,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class RO{constructor(e,t,r=0,i=1/0){this.ray=new qf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Sf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return MP(e,this,r,t),r.sort(hF),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)MP(e[i],this,r,t);return r.sort(hF),r}}function hF(n,e){return n.distance-e.distance}function MP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let a=0,s=i.length;a<s;a++)MP(i[a],e,t,!0)}}class EP{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Kr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class sye{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const pF=new Xe;class oye{constructor(e=new Xe(1/0,1/0),t=new Xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=pF.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pF).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mF=new oe,cb=new oe;class lye{constructor(e=new oe,t=new oe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){mF.subVectors(e,this.start),cb.subVectors(this.end,this.start);const r=cb.dot(cb);let a=cb.dot(mF)/r;return t&&(a=Kr(a,0,1)),a}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const gF=new oe;class cye extends qn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new kn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,f=o/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}r.setAttribute("position",new Bt(i,3));const a=new Fa({fog:!1,toneMapped:!1});this.cone=new vl(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gF.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gF),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const yu=new oe,ub=new ln,UA=new ln;class uye extends vl{constructor(e){const t=lV(e),r=new kn,i=[],a=[],s=new Rt(0,0,1),o=new Rt(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new Bt(i,3)),r.setAttribute("color",new Bt(a,3));const l=new Fa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");UA.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(ub.multiplyMatrices(UA,o.matrixWorld),yu.setFromMatrixPosition(ub),i.setXYZ(s,yu.x,yu.y,yu.z),ub.multiplyMatrices(UA,o.parent.matrixWorld),yu.setFromMatrixPosition(ub),i.setXYZ(s+1,yu.x,yu.y,yu.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lV(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lV(n.children[t]));return e}class dye extends Zr{constructor(e,t,r){const i=new d0(t,4,2),a=new Oc({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const fye=new oe,vF=new Rt,yF=new Rt;class hye extends qn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new u0(t);i.rotateY(Math.PI*.5),this.material=new Oc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new cr(s,3)),this.add(new Zr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");vF.copy(this.light.color),yF.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?vF:yF;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(fye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class pye extends vl{constructor(e=10,t=10,r=4473924,i=8947848){r=new Rt(r),i=new Rt(i);const a=t/2,s=e/t,o=e/2,l=[],u=[];for(let m=0,y=0,b=-o;m<=t;m++,b+=s){l.push(-o,0,b,o,0,b),l.push(b,0,-o,b,0,o);const w=m===a?r:i;w.toArray(u,y),y+=3,w.toArray(u,y),y+=3,w.toArray(u,y),y+=3,w.toArray(u,y),y+=3}const f=new kn;f.setAttribute("position",new Bt(l,3)),f.setAttribute("color",new Bt(u,3));const h=new Fa({vertexColors:!0,toneMapped:!1});super(f,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class mye extends vl{constructor(e=10,t=16,r=8,i=64,a=4473924,s=8947848){a=new Rt(a),s=new Rt(s);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const m=h/t*(Math.PI*2),y=Math.sin(m)*e,b=Math.cos(m)*e;o.push(0,0,0),o.push(y,0,b);const w=h&1?a:s;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let h=0;h<r;h++){const m=h&1?a:s,y=e-e/r*h;for(let b=0;b<i;b++){let w=b/i*(Math.PI*2),x=Math.sin(w)*y,_=Math.cos(w)*y;o.push(x,0,_),l.push(m.r,m.g,m.b),w=(b+1)/i*(Math.PI*2),x=Math.sin(w)*y,_=Math.cos(w)*y,o.push(x,0,_),l.push(m.r,m.g,m.b)}}const u=new kn;u.setAttribute("position",new Bt(o,3)),u.setAttribute("color",new Bt(l,3));const f=new Fa({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xF=new oe,db=new oe,bF=new oe;class gye extends qn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new kn;i.setAttribute("position",new Bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Fa({fog:!1,toneMapped:!1});this.lightPlane=new Hu(i,a),this.add(this.lightPlane),i=new kn,i.setAttribute("position",new Bt([0,0,0,0,0,1],3)),this.targetLine=new Hu(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xF.setFromMatrixPosition(this.light.matrixWorld),db.setFromMatrixPosition(this.light.target.matrixWorld),bF.subVectors(db,xF),this.lightPlane.lookAt(db),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(db),this.targetLine.scale.z=bF.length()}}const fb=new oe,Xr=new i0;class vye extends vl{constructor(e){const t=new kn,r=new Fa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(b,w){l(b),l(w)}function l(b){i.push(0,0,0),a.push(0,0,0),s[b]===void 0&&(s[b]=[]),s[b].push(i.length/3-1)}t.setAttribute("position",new Bt(i,3)),t.setAttribute("color",new Bt(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new Rt(16755200),f=new Rt(16711680),h=new Rt(43775),m=new Rt(16777215),y=new Rt(3355443);this.setColors(u,f,h,m,y)}setColors(e,t,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ni("c",t,e,Xr,0,0,-1),ni("t",t,e,Xr,0,0,1),ni("n1",t,e,Xr,-r,-i,-1),ni("n2",t,e,Xr,r,-i,-1),ni("n3",t,e,Xr,-r,i,-1),ni("n4",t,e,Xr,r,i,-1),ni("f1",t,e,Xr,-r,-i,1),ni("f2",t,e,Xr,r,-i,1),ni("f3",t,e,Xr,-r,i,1),ni("f4",t,e,Xr,r,i,1),ni("u1",t,e,Xr,r*.7,i*1.1,-1),ni("u2",t,e,Xr,-r*.7,i*1.1,-1),ni("u3",t,e,Xr,0,i*2,-1),ni("cf1",t,e,Xr,-r,0,1),ni("cf2",t,e,Xr,r,0,1),ni("cf3",t,e,Xr,0,-i,1),ni("cf4",t,e,Xr,0,i,1),ni("cn1",t,e,Xr,-r,0,-1),ni("cn2",t,e,Xr,r,0,-1),ni("cn3",t,e,Xr,0,-i,-1),ni("cn4",t,e,Xr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ni(n,e,t,r,i,a,s){fb.set(i,a,s).unproject(r);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,f=o.length;u<f;u++)l.setXYZ(o[u],fb.x,fb.y,fb.z)}}const hb=new Da;class yye extends vl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new kn;a.setIndex(new cr(r,1)),a.setAttribute("position",new cr(i,3)),super(a,new Fa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&hb.setFromObject(this.object),hb.isEmpty())return;const t=hb.min,r=hb.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=t.x,a[4]=r.y,a[5]=r.z,a[6]=t.x,a[7]=t.y,a[8]=r.z,a[9]=r.x,a[10]=t.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=t.z,a[15]=t.x,a[16]=r.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=r.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class xye extends vl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new kn;a.setIndex(new cr(r,1)),a.setAttribute("position",new Bt(i,3)),super(a,new Fa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class bye extends Hu{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new kn;s.setAttribute("position",new Bt(a,3)),s.computeBoundingSphere(),super(s,new Fa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new kn;l.setAttribute("position",new Bt(o,3)),l.computeBoundingSphere(),this.add(new Zr(l,new Oc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wF=new oe;let pb,FA;class wye extends qn{constructor(e=new oe(0,0,1),t=new oe(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",pb===void 0&&(pb=new kn,pb.setAttribute("position",new Bt([0,0,0,0,1,0],3)),FA=new Fm(0,.5,1,5,1),FA.translate(0,-.5,0)),this.position.copy(t),this.line=new Hu(pb,new Fa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zr(FA,new Oc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{wF.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(wF,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class _ye extends vl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new kn;i.setAttribute("position",new Bt(t,3)),i.setAttribute("color",new Bt(r,3));const a=new Fa({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new Rt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sye{constructor(){this.type="ShapePath",this.color=new Rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,s){return this.currentPath.bezierCurveTo(e,t,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const M=[];for(let E=0,A=_.length;E<A;E++){const R=_[E],O=new Mf;O.curves=R.curves,M.push(O)}return M}function r(_,M){const E=M.length;let A=!1;for(let R=E-1,O=0;O<E;R=O++){let N=M[R],L=M[O],T=L.x-N.x,j=L.y-N.y;if(Math.abs(j)>Number.EPSILON){if(j<0&&(N=M[O],T=-T,L=M[R],j=-j),_.y<N.y||_.y>L.y)continue;if(_.y===N.y){if(_.x===N.x)return!0}else{const U=j*(_.x-N.x)-T*(_.y-N.y);if(U===0)return!0;if(U<0)continue;A=!A}}else{if(_.y!==N.y)continue;if(L.x<=_.x&&_.x<=N.x||N.x<=_.x&&_.x<=L.x)return!0}}return A}const i=ul.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new Mf,l.curves=o.curves,u.push(l),u;let f=!i(a[0].getPoints());f=e?!f:f;const h=[],m=[];let y=[],b=0,w;m[b]=void 0,y[b]=[];for(let _=0,M=a.length;_<M;_++)o=a[_],w=o.getPoints(),s=i(w),s=e?!s:s,s?(!f&&m[b]&&b++,m[b]={s:new Mf,p:w},m[b].s.curves=o.curves,f&&b++,y[b]=[]):y[b].push({h:o,p:w[0]});if(!m[0])return t(a);if(m.length>1){let _=!1,M=0;for(let E=0,A=m.length;E<A;E++)h[E]=[];for(let E=0,A=m.length;E<A;E++){const R=y[E];for(let O=0;O<R.length;O++){const N=R[O];let L=!0;for(let T=0;T<m.length;T++)r(N.p,m[T].p)&&(E!==T&&M++,L?(L=!1,h[T].push(N)):_=!0);L&&h[E].push(N)}}M>0&&_===!1&&(y=h)}let x;for(let _=0,M=m.length;_<M;_++){l=m[_].s,u.push(l),x=y[_];for(let E=0,A=x.length;E<A;E++)l.holes.push(x[E].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:e0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=e0);const Mye=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:HN,AddEquation:Eu,AddOperation:P8,AdditiveAnimationBlendMode:QN,AdditiveBlending:LC,AgXToneMapping:j8,AlphaFormat:L8,AlwaysCompare:Q8,AlwaysDepth:_8,AlwaysStencilFunc:pP,AmbientLight:QH,AnimationAction:oV,AnimationClip:zy,AnimationLoader:Cve,AnimationMixer:tye,AnimationObjectGroup:Qve,AnimationUtils:Mve,ArcCurve:MH,ArrayCamera:pH,ArrowHelper:wye,AttachedBindMode:BC,Audio:aV,AudioAnalyser:Vve,AudioContext:AO,AudioListener:zve,AudioLoader:Dve,AxesHelper:_ye,BackSide:La,BasicDepthPacking:W8,BasicShadowMap:i8,BatchedMesh:wH,Bone:fO,BooleanKeyframeTrack:Kf,Box2:oye,Box3:Da,Box3Helper:xye,BoxGeometry:Xf,BoxHelper:yye,BufferAttribute:cr,BufferGeometry:kn,BufferGeometryLoader:iV,ByteType:WN,Cache:dc,Camera:i0,CameraHelper:vye,CanvasTexture:Xge,CapsuleGeometry:n_,CatmullRomCurve3:EH,CineonToneMapping:R8,CircleGeometry:r_,ClampToEdgeWrapping:Dr,Clock:CO,Color:Rt,ColorKeyframeTrack:MO,ColorManagement:or,CompressedArrayTexture:$ge,CompressedCubeTexture:qge,CompressedTexture:e_,CompressedTextureLoader:Pve,ConeGeometry:i_,ConstantAlphaFactor:x8,ConstantColorFactor:v8,CubeCamera:sH,CubeReflectionMapping:hl,CubeRefractionMapping:zu,CubeTexture:a0,CubeTextureLoader:XH,CubeUVReflectionMapping:Dm,CubicBezierCurve:mO,CubicBezierCurve3:TH,CubicInterpolant:WH,CullFaceBack:IC,CullFaceFront:r8,CullFaceFrontBack:Due,CullFaceNone:n8,Curve:Bo,CurvePath:CH,CustomBlending:a8,CustomToneMapping:k8,CylinderGeometry:Fm,Cylindrical:sye,Data3DTexture:iO,DataArrayTexture:$w,DataTexture:Uu,DataTextureLoader:EO,DataUtils:mf,DecrementStencilOp:Xue,DecrementWrapStencilOp:Kue,DefaultLoadingManager:qH,DepthFormat:Lu,DepthStencilFormat:Uf,DepthTexture:qw,DetachedBindMode:I8,DirectionalLight:JH,DirectionalLightHelper:gye,DiscreteInterpolant:GH,DisplayP3ColorSpace:Gw,DodecahedronGeometry:a_,DoubleSide:Io,DstAlphaFactor:f8,DstColorFactor:p8,DynamicCopyUsage:dde,DynamicDrawUsage:ade,DynamicReadUsage:lde,EdgesGeometry:PH,EllipseCurve:t_,EqualCompare:Y8,EqualDepth:M8,EqualStencilFunc:ede,EquirectangularReflectionMapping:bm,EquirectangularRefractionMapping:Sy,Euler:r0,EventDispatcher:Nc,ExtrudeGeometry:o_,FileLoader:Ps,Float16BufferAttribute:Zde,Float32BufferAttribute:Bt,Float64BufferAttribute:Jde,FloatType:ai,Fog:Zw,FogExp2:Kw,FramebufferTexture:Gge,FrontSide:_c,Frustum:s0,GLBufferAttribute:aye,GLSL1:hde,GLSL3:mP,GreaterCompare:K8,GreaterDepth:T8,GreaterEqualCompare:J8,GreaterEqualDepth:E8,GreaterEqualStencilFunc:ide,GreaterStencilFunc:nde,GridHelper:pye,Group:Lp,HalfFloatType:Oi,HemisphereLight:YH,HemisphereLightHelper:hye,IcosahedronGeometry:c0,ImageBitmapLoader:Lve,ImageLoader:By,ImageUtils:rO,IncrementStencilOp:que,IncrementWrapStencilOp:Yue,InstancedBufferAttribute:Mm,InstancedBufferGeometry:rV,InstancedInterleavedBuffer:iye,InstancedMesh:bH,Int16BufferAttribute:Yde,Int32BufferAttribute:Kde,Int8BufferAttribute:$de,IntType:Vw,InterleavedBuffer:Jw,InterleavedBufferAttribute:Ff,Interpolant:f0,InterpolateDiscrete:Ty,InterpolateLinear:Ay,InterpolateSmooth:Pb,InvertStencilOp:Zue,KeepStencilOp:rf,KeyframeTrack:Ho,LOD:yH,LatheGeometry:l0,Layers:Sf,LessCompare:X8,LessDepth:S8,LessEqualCompare:tO,LessEqualDepth:_y,LessEqualStencilFunc:tde,LessStencilFunc:Que,Light:Zu,LightProbe:nV,Line:Hu,Line3:lye,LineBasicMaterial:Fa,LineCurve:gO,LineCurve3:AH,LineDashedMaterial:BH,LineLoop:_H,LineSegments:vl,LinearDisplayP3ColorSpace:n0,LinearEncoding:eO,LinearFilter:Wn,LinearInterpolant:SO,LinearMipMapLinearFilter:HC,LinearMipMapNearestFilter:Bue,LinearMipmapLinearFilter:Bu,LinearMipmapNearestFilter:VN,LinearSRGBColorSpace:Os,LinearToneMapping:N8,LinearTransfer:Py,Loader:za,LoaderUtils:SP,LoadingManager:p_,LoopOnce:B8,LoopPingPong:V8,LoopRepeat:H8,LuminanceAlphaFormat:U8,LuminanceFormat:D8,MOUSE:tf,Material:xa,MaterialLoader:m_,MathUtils:Cde,Matrix3:Rn,Matrix4:ln,MaxEquation:zC,Mesh:Zr,MeshBasicMaterial:Oc,MeshDepthMaterial:cO,MeshDistanceMaterial:uO,MeshLambertMaterial:FH,MeshMatcapMaterial:zH,MeshNormalMaterial:UH,MeshPhongMaterial:LH,MeshPhysicalMaterial:wO,MeshStandardMaterial:bO,MeshToonMaterial:DH,MinEquation:FC,MirroredRepeatWrapping:Ey,MixOperation:C8,MultiplyBlending:UC,MultiplyOperation:t0,NearestFilter:ri,NearestMipMapLinearFilter:zue,NearestMipMapNearestFilter:Fue,NearestMipmapLinearFilter:Cv,NearestMipmapNearestFilter:q1,NeverCompare:q8,NeverDepth:w8,NeverStencilFunc:Jue,NoBlending:ll,NoColorSpace:Ms,NoToneMapping:cl,NormalAnimationBlendMode:Ww,NormalBlending:wf,NotEqualCompare:Z8,NotEqualDepth:A8,NotEqualStencilFunc:rde,NumberKeyframeTrack:Uy,Object3D:qn,ObjectLoader:jve,ObjectSpaceNormalMap:$8,OctahedronGeometry:u0,OneFactor:c8,OneMinusConstantAlphaFactor:b8,OneMinusConstantColorFactor:y8,OneMinusDstAlphaFactor:h8,OneMinusDstColorFactor:m8,OneMinusSrcAlphaFactor:$1,OneMinusSrcColorFactor:d8,OrthographicCamera:gc,P3Primaries:Oy,PCFShadowMap:Bw,PCFSoftShadowMap:Av,PMREMGenerator:vP,Path:jy,PerspectiveCamera:ii,Plane:sc,PlaneGeometry:Yf,PlaneHelper:bye,PointLight:ZH,PointLightHelper:dye,Points:SH,PointsMaterial:hO,PolarGridHelper:mye,PolyhedronGeometry:Ku,PositionalAudio:Hve,PropertyBinding:Vn,PropertyMixer:sV,QuadraticBezierCurve:vO,QuadraticBezierCurve3:yO,Quaternion:va,QuaternionKeyframeTrack:zm,QuaternionLinearInterpolant:$H,RED_GREEN_RGTC2_Format:fP,RED_RGTC1_Format:z8,REVISION:e0,RGBADepthPacking:G8,RGBAFormat:gi,RGBAIntegerFormat:ZN,RGBA_ASTC_10x10_Format:sP,RGBA_ASTC_10x5_Format:rP,RGBA_ASTC_10x6_Format:iP,RGBA_ASTC_10x8_Format:aP,RGBA_ASTC_12x10_Format:oP,RGBA_ASTC_12x12_Format:lP,RGBA_ASTC_4x4_Format:YC,RGBA_ASTC_5x4_Format:KC,RGBA_ASTC_5x5_Format:ZC,RGBA_ASTC_6x5_Format:JC,RGBA_ASTC_6x6_Format:QC,RGBA_ASTC_8x5_Format:eP,RGBA_ASTC_8x6_Format:tP,RGBA_ASTC_8x8_Format:nP,RGBA_BPTC_Format:Cb,RGBA_ETC2_EAC_Format:XC,RGBA_PVRTC_2BPPV1_Format:$C,RGBA_PVRTC_4BPPV1_Format:GC,RGBA_S3TC_DXT1_Format:Eb,RGBA_S3TC_DXT3_Format:Tb,RGBA_S3TC_DXT5_Format:Ab,RGB_BPTC_SIGNED_Format:cP,RGB_BPTC_UNSIGNED_Format:uP,RGB_ETC1_Format:JN,RGB_ETC2_Format:qC,RGB_PVRTC_2BPPV1_Format:WC,RGB_PVRTC_4BPPV1_Format:VC,RGB_S3TC_DXT1_Format:Mb,RGFormat:F8,RGIntegerFormat:KN,RawShaderMaterial:IH,Ray:qf,Raycaster:RO,Rec709Primaries:Ny,RectAreaLight:eV,RedFormat:XN,RedIntegerFormat:YN,ReinhardToneMapping:O8,RenderTarget:nH,RepeatWrapping:My,ReplaceStencilOp:$ue,ReverseSubtractEquation:o8,RingGeometry:l_,SIGNED_RED_GREEN_RGTC2_Format:hP,SIGNED_RED_RGTC1_Format:dP,SRGBColorSpace:mi,SRGBTransfer:Mr,Scene:o0,ShaderChunk:Tn,ShaderLib:ko,ShaderMaterial:Rs,ShadowMaterial:jH,Shape:Mf,ShapeGeometry:c_,ShapePath:Sye,ShapeUtils:ul,ShortType:GN,Skeleton:Qw,SkeletonHelper:uye,SkinnedMesh:xH,Source:pf,Sphere:ya,SphereGeometry:d0,Spherical:EP,SphericalHarmonics3:tV,SplineCurve:xO,SpotLight:KH,SpotLightHelper:cye,Sprite:vH,SpriteMaterial:dO,SrcAlphaFactor:G1,SrcAlphaSaturateFactor:g8,SrcColorFactor:u8,StaticCopyUsage:ude,StaticDrawUsage:Ry,StaticReadUsage:ode,StereoCamera:Uve,StreamCopyUsage:fde,StreamDrawUsage:sde,StreamReadUsage:cde,StringKeyframeTrack:Zf,SubtractEquation:s8,SubtractiveBlending:DC,TOUCH:nf,TangentSpaceNormalMap:Yu,TetrahedronGeometry:u_,Texture:wr,TextureLoader:Nve,TorusGeometry:d_,TorusKnotGeometry:f_,Triangle:ts,TriangleFanDrawMode:Wue,TriangleStripDrawMode:Vue,TrianglesDrawMode:Hue,TubeGeometry:h_,TwoPassDoubleSide:Uue,UVMapping:Fu,Uint16BufferAttribute:aO,Uint32BufferAttribute:sO,Uint8BufferAttribute:qde,Uint8ClampedBufferAttribute:Xde,Uniform:OO,UniformsGroup:rye,UniformsLib:xt,UniformsUtils:aH,UnsignedByteType:As,UnsignedInt248Type:Iu,UnsignedIntType:al,UnsignedShort4444Type:$N,UnsignedShort5551Type:qN,UnsignedShortType:Hw,VSMShadowMap:No,Vector2:Xe,Vector3:oe,Vector4:lr,VectorKeyframeTrack:Fy,VideoTexture:Wge,WebGL1Renderer:mH,WebGL3DRenderTarget:jde,WebGLArrayRenderTarget:kde,WebGLCoordinateSystem:Lo,WebGLCubeRenderTarget:oO,WebGLMultipleRenderTargets:Ide,WebGLRenderTarget:is,WebGLRenderer:Yw,WebGLUtils:hH,WebGPUCoordinateSystem:wm,WireframeGeometry:kH,WrapAroundEnding:Cy,ZeroCurvatureEnding:ff,ZeroFactor:l8,ZeroSlopeEnding:hf,ZeroStencilOp:Gue,_SRGBAFormat:X1,createCanvasElement:tH,sRGBEncoding:Du},Symbol.toStringTag,{value:"Module"}));var zA={exports:{}},xu={};var _F;function Eye(){return _F||(_F=1,xu.ConcurrentRoot=1,xu.ContinuousEventPriority=4,xu.DefaultEventPriority=16,xu.DiscreteEventPriority=1,xu.IdleEventPriority=536870912,xu.LegacyRoot=0),xu}var SF;function Tye(){return SF||(SF=1,zA.exports=Eye()),zA.exports}var Up=Tye();function Aye(n){let e;const t=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const m=e;e=f?h:Object.assign({},e,h),t.forEach(y=>y(e,m))}},i=()=>e,a=(u,f=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function y(){const b=f(e);if(!h(m,b)){const w=m;u(m=b,w)}}return t.add(y),()=>t.delete(y)},l={setState:r,getState:i,subscribe:(u,f,h)=>f||h?a(u,f,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const Cye=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),MF=Cye?z.useEffect:z.useLayoutEffect;function cV(n){const e=typeof n=="function"?Aye(n):n,t=(r=e.getState,i=Object.is)=>{const[,a]=z.useReducer(x=>x+1,0),s=e.getState(),o=z.useRef(s),l=z.useRef(r),u=z.useRef(i),f=z.useRef(!1),h=z.useRef();h.current===void 0&&(h.current=r(s));let m,y=!1;(o.current!==s||l.current!==r||u.current!==i||f.current)&&(m=r(s),y=!i(h.current,m)),MF(()=>{y&&(h.current=m),o.current=s,l.current=r,u.current=i,f.current=!1});const b=z.useRef(s);MF(()=>{const x=()=>{try{const M=e.getState(),E=l.current(M);u.current(h.current,E)||(o.current=M,h.current=E,a())}catch{f.current=!0,a()}},_=e.subscribe(x);return e.getState()!==b.current&&x(),_},[]);const w=y?m:h.current;return z.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const Pye=n=>typeof n=="object"&&typeof n.then=="function",vf=[];function uV(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function dV(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const a of vf)if(uV(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!t)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=vf.indexOf(i);a!==-1&&vf.splice(a,1)},promise:(Pye(n)?n:n(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(vf.push(i),!t)throw i.promise}const Nye=(n,e,t)=>dV(n,e,!1,t),Oye=(n,e,t)=>void dV(n,e,!0,t),Rye=n=>{if(n===void 0||n.length===0)vf.splice(0,vf.length);else{const e=vf.find(t=>uV(n,t.keys,t.equal));e&&e.remove()}};var BA={exports:{}},HA={exports:{}},VA={};var EF;function kye(){return EF||(EF=1,(function(n){function e(G,J){var Z=G.length;G.push(J);e:for(;0<Z;){var X=Z-1>>>1,te=G[X];if(0<i(te,J))G[X]=J,G[Z]=te,Z=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Z=G.pop();if(Z!==J){G[0]=Z;e:for(var X=0,te=G.length,ce=te>>>1;X<ce;){var le=2*(X+1)-1,be=G[le],Se=le+1,Ie=G[Se];if(0>i(be,Z))Se<te&&0>i(Ie,be)?(G[X]=Ie,G[Se]=Z,X=Se):(G[X]=be,G[le]=Z,X=le);else if(Se<te&&0>i(Ie,Z))G[X]=Ie,G[Se]=Z,X=Se;else break e}}return J}function i(G,J){var Z=G.sortIndex-J.sortIndex;return Z!==0?Z:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var J=t(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=G)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(G){if(w=!1,E(G),!b)if(t(l)!==null)b=!0,Q(R);else{var J=t(u);J!==null&&se(A,J.startTime-G)}}function R(G,J){b=!1,w&&(w=!1,_(L),L=-1),y=!0;var Z=m;try{for(E(J),h=t(l);h!==null&&(!(h.expirationTime>J)||G&&!U());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var te=X(h.expirationTime<=J);J=n.unstable_now(),typeof te=="function"?h.callback=te:h===t(l)&&r(l),E(J)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var le=t(u);le!==null&&se(A,le.startTime-J),ce=!1}return ce}finally{h=null,m=Z,y=!1}}var O=!1,N=null,L=-1,T=5,j=-1;function U(){return!(n.unstable_now()-j<T)}function B(){if(N!==null){var G=n.unstable_now();j=G;var J=!0;try{J=N(!0,G)}finally{J?V():(O=!1,N=null)}}else O=!1}var V;if(typeof M=="function")V=function(){M(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=B,V=function(){Y.postMessage(null)}}else V=function(){x(B,0)};function Q(G){N=G,O||(O=!0,V())}function se(G,J){L=x(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){b||y||(b=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var Z=m;m=J;try{return G()}finally{m=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=m;m=G;try{return J()}finally{m=Z}},n.unstable_scheduleCallback=function(G,J,Z){var X=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,G={id:f++,callback:J,priorityLevel:G,startTime:Z,expirationTime:te,sortIndex:-1},Z>X?(G.sortIndex=Z,e(u,G),t(l)===null&&G===t(u)&&(w?(_(L),L=-1):w=!0,se(A,Z-X))):(G.sortIndex=te,e(l,G),b||y||(b=!0,Q(R))),G},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(G){var J=m;return function(){var Z=m;m=J;try{return G.apply(this,arguments)}finally{m=Z}}}})(VA)),VA}var TF;function jye(){return TF||(TF=1,HA.exports=kye()),HA.exports}var WA,AF;function Iye(){return AF||(AF=1,WA=function(e){var t={},r=Z1(),i=jye(),a=Object.assign;function s(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)v+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),R=Symbol.iterator;function O(g){return g===null||typeof g!="object"?null:(g=R&&g[R]||g["@@iterator"],typeof g=="function"?g:null)}function N(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case f:return"Fragment";case u:return"Portal";case m:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case b:return(g.displayName||"Context")+".Consumer";case y:return(g._context.displayName||"Context")+".Provider";case w:var v=g.render;return g=g.displayName,g||(g=v.displayName||v.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case M:return v=g.displayName||null,v!==null?v:N(g.type)||"Memo";case E:v=g._payload,g=g._init;try{return N(g(v))}catch{}}return null}function L(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=v.render,g=g.displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(v);case 8:return v===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function T(g){var v=g,C=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do v=g,(v.flags&4098)!==0&&(C=v.return),g=v.return;while(g)}return v.tag===3?C:null}function j(g){if(T(g)!==g)throw Error(s(188))}function U(g){var v=g.alternate;if(!v){if(v=T(g),v===null)throw Error(s(188));return v!==g?null:g}for(var C=g,k=v;;){var D=C.return;if(D===null)break;var H=D.alternate;if(H===null){if(k=D.return,k!==null){C=k;continue}break}if(D.child===H.child){for(H=D.child;H;){if(H===C)return j(D),g;if(H===k)return j(D),v;H=H.sibling}throw Error(s(188))}if(C.return!==k.return)C=D,k=H;else{for(var de=!1,Me=D.child;Me;){if(Me===C){de=!0,C=D,k=H;break}if(Me===k){de=!0,k=D,C=H;break}Me=Me.sibling}if(!de){for(Me=H.child;Me;){if(Me===C){de=!0,C=H,k=D;break}if(Me===k){de=!0,k=H,C=D;break}Me=Me.sibling}if(!de)throw Error(s(189))}}if(C.alternate!==k)throw Error(s(190))}if(C.tag!==3)throw Error(s(188));return C.stateNode.current===C?g:v}function B(g){return g=U(g),g!==null?V(g):null}function V(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=V(g);if(v!==null)return v;g=g.sibling}return null}function W(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=W(g);if(v!==null)return v}g=g.sibling}return null}var Y=Array.isArray,Q=e.getPublicInstance,se=e.getRootHostContext,G=e.getChildHostContext,J=e.prepareForCommit,Z=e.resetAfterCommit,X=e.createInstance,te=e.appendInitialChild,ce=e.finalizeInitialChildren,le=e.prepareUpdate,be=e.shouldSetTextContent,Se=e.createTextInstance,Ie=e.scheduleTimeout,qe=e.cancelTimeout,Pe=e.noTimeout,Fe=e.isPrimaryRenderer,$e=e.supportsMutation,ne=e.supportsPersistence,Ve=e.supportsHydration,Ne=e.getInstanceFromNode,Ke=e.preparePortalMount,De=e.getCurrentEventPriority,vt=e.detachDeletedInstance,dt=e.supportsMicrotasks,ie=e.scheduleMicrotask,ee=e.supportsTestSelectors,Te=e.findFiberRoot,Ze=e.getBoundingRect,Je=e.getTextContent,Ye=e.isHiddenSubtree,Tt=e.matchAccessibilityRole,pt=e.setFocusIfFocusable,St=e.setupIntersectionObserver,Ut=e.appendChild,Yt=e.appendChildToContainer,Qe=e.commitTextUpdate,mn=e.commitMount,hn=e.commitUpdate,$t=e.insertBefore,Mt=e.insertInContainerBefore,At=e.removeChild,me=e.removeChildFromContainer,We=e.resetTextContent,lt=e.hideInstance,wt=e.hideTextInstance,Ae=e.unhideInstance,ge=e.unhideTextInstance,ot=e.clearContainer,gt=e.cloneInstance,Gt=e.createContainerChildSet,kt=e.appendChildToContainerChildSet,xn=e.finalizeContainerChildren,Pn=e.replaceContainerChildren,Bn=e.cloneHiddenInstance,nr=e.cloneHiddenTextInstance,Mn=e.canHydrateInstance,zr=e.canHydrateTextInstance,si=e.canHydrateSuspenseInstance,ks=e.isSuspenseInstancePending,ss=e.isSuspenseInstanceFallback,$i=e.registerSuspenseInstanceRetry,yi=e.getNextHydratableSibling,cn=e.getFirstHydratableChild,yl=e.getFirstHydratableChildWithinContainer,Rc=e.getFirstHydratableChildWithinSuspenseInstance,q=e.hydrateInstance,re=e.hydrateTextInstance,xe=e.hydrateSuspenseInstance,$=e.getNextHydratableInstanceAfterSuspenseInstance,ae=e.commitHydratedContainer,ue=e.commitHydratedSuspenseInstance,pe=e.clearSuspenseBoundary,he=e.clearSuspenseBoundaryFromContainer,je=e.shouldDeleteUnhydratedTailInstances,Ue=e.didNotMatchHydratedContainerTextInstance,Be=e.didNotMatchHydratedTextInstance,Re;function Ct(g){if(Re===void 0)try{throw Error()}catch(C){var v=C.stack.trim().match(/\n( *(at )?)/);Re=v&&v[1]||""}return`
`+Re+g}var et=!1;function it(g,v){if(!g||et)return"";et=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(ct){var k=ct}Reflect.construct(g,[],v)}else{try{v.call()}catch(ct){k=ct}g.call(v.prototype)}else{try{throw Error()}catch(ct){k=ct}g()}}catch(ct){if(ct&&k&&typeof ct.stack=="string"){for(var D=ct.stack.split(`
`),H=k.stack.split(`
`),de=D.length-1,Me=H.length-1;1<=de&&0<=Me&&D[de]!==H[Me];)Me--;for(;1<=de&&0<=Me;de--,Me--)if(D[de]!==H[Me]){if(de!==1||Me!==1)do if(de--,Me--,0>Me||D[de]!==H[Me]){var He=`
`+D[de].replace(" at new "," at ");return g.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",g.displayName)),He}while(1<=de&&0<=Me);break}}}finally{et=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?Ct(g):""}var Pt=Object.prototype.hasOwnProperty,Vt=[],qt=-1;function nn(g){return{current:g}}function yt(g){0>qt||(g.current=Vt[qt],Vt[qt]=null,qt--)}function mt(g,v){qt++,Vt[qt]=g.current,g.current=v}var tn={},Kt=nn(tn),rn=nn(!1),Yn=tn;function vr(g,v){var C=g.type.contextTypes;if(!C)return tn;var k=g.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===v)return k.__reactInternalMemoizedMaskedChildContext;var D={},H;for(H in C)D[H]=v[H];return k&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=D),D}function rr(g){return g=g.childContextTypes,g!=null}function Nn(){yt(rn),yt(Kt)}function bn(g,v,C){if(Kt.current!==tn)throw Error(s(168));mt(Kt,v),mt(rn,C)}function Pr(g,v,C){var k=g.stateNode;if(v=v.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var D in k)if(!(D in v))throw Error(s(108,L(g)||"Unknown",D));return a({},C,k)}function gn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||tn,Yn=Kt.current,mt(Kt,g),mt(rn,rn.current),!0}function On(g,v,C){var k=g.stateNode;if(!k)throw Error(s(169));C?(g=Pr(g,v,Yn),k.__reactInternalMemoizedMergedChildContext=g,yt(rn),yt(Kt),mt(Kt,g)):yt(rn),mt(rn,C)}var ir=Math.clz32?Math.clz32:js,ra=Math.log,Jr=Math.LN2;function js(g){return g>>>=0,g===0?32:31-(ra(g)/Jr|0)|0}var kc=64,Fn=4194304;function jc(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Ju(g,v){var C=g.pendingLanes;if(C===0)return 0;var k=0,D=g.suspendedLanes,H=g.pingedLanes,de=C&268435455;if(de!==0){var Me=de&~D;Me!==0?k=jc(Me):(H&=de,H!==0&&(k=jc(H)))}else de=C&~D,de!==0?k=jc(de):H!==0&&(k=jc(H));if(k===0)return 0;if(v!==0&&v!==k&&(v&D)===0&&(D=k&-k,H=v&-v,D>=H||D===16&&(H&4194240)!==0))return v;if((k&4)!==0&&(k|=C&16),v=g.entangledLanes,v!==0)for(g=g.entanglements,v&=k;0<v;)C=31-ir(v),D=1<<C,k|=g[C],v&=~D;return k}function Hm(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(g,v){for(var C=g.suspendedLanes,k=g.pingedLanes,D=g.expirationTimes,H=g.pendingLanes;0<H;){var de=31-ir(H),Me=1<<de,He=D[de];He===-1?((Me&C)===0||(Me&k)!==0)&&(D[de]=Hm(Me,v)):He<=v&&(g.expiredLanes|=Me),H&=~Me}}function Jf(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Qf(g){for(var v=[],C=0;31>C;C++)v.push(g);return v}function xl(g,v,C){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,v=31-ir(v),g[v]=C}function eh(g,v){var C=g.pendingLanes&~v;g.pendingLanes=v,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=v,g.mutableReadLanes&=v,g.entangledLanes&=v,v=g.entanglements;var k=g.eventTimes;for(g=g.expirationTimes;0<C;){var D=31-ir(C),H=1<<D;v[D]=0,k[D]=-1,g[D]=-1,C&=~H}}function Is(g,v){var C=g.entangledLanes|=v;for(g=g.entanglements;C;){var k=31-ir(C),D=1<<k;D&v|g[k]&v&&(g[k]|=v),C&=~D}}var En=0;function to(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var bl=i.unstable_scheduleCallback,Ic=i.unstable_cancelCallback,Vo=i.unstable_shouldYield,v_=i.unstable_requestPaint,Qr=i.unstable_now,wl=i.unstable_ImmediatePriority,y_=i.unstable_UserBlockingPriority,th=i.unstable_NormalPriority,nh=i.unstable_IdlePriority,Qu=null,Ls=null;function ed(g){if(Ls&&typeof Ls.onCommitFiberRoot=="function")try{Ls.onCommitFiberRoot(Qu,g,void 0,(g.current.flags&128)===128)}catch{}}function td(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var qi=typeof Object.is=="function"?Object.is:td,Ba=null,rh=!1,Vm=!1;function ih(g){Ba===null?Ba=[g]:Ba.push(g)}function ah(g){rh=!0,ih(g)}function Ha(){if(!Vm&&Ba!==null){Vm=!0;var g=0,v=En;try{var C=Ba;for(En=1;g<C.length;g++){var k=C[g];do k=k(!0);while(k!==null)}Ba=null,rh=!1}catch(D){throw Ba!==null&&(Ba=Ba.slice(g+1)),bl(wl,Ha),D}finally{En=v,Vm=!1}}return null}var g0=o.ReactCurrentBatchConfig;function os(g,v){if(qi(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var C=Object.keys(g),k=Object.keys(v);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var D=C[k];if(!Pt.call(v,D)||!qi(g[D],v[D]))return!1}return!0}function Wm(g){switch(g.tag){case 5:return Ct(g.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 2:case 15:return g=it(g.type,!1),g;case 11:return g=it(g.type.render,!1),g;case 1:return g=it(g.type,!0),g;default:return""}}function ia(g,v){if(g&&g.defaultProps){v=a({},v),g=g.defaultProps;for(var C in g)v[C]===void 0&&(v[C]=g[C]);return v}return v}var nd=nn(null),_l=null,no=null,sh=null;function Xi(){sh=no=_l=null}function Sl(g,v,C){Fe?(mt(nd,v._currentValue),v._currentValue=C):(mt(nd,v._currentValue2),v._currentValue2=C)}function rd(g){var v=nd.current;yt(nd),Fe?g._currentValue=v:g._currentValue2=v}function Ml(g,v,C){for(;g!==null;){var k=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,k!==null&&(k.childLanes|=v)):k!==null&&(k.childLanes&v)!==v&&(k.childLanes|=v),g===C)break;g=g.return}}function Lc(g,v){_l=g,sh=no=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&v)!==0&&(ui=!0),g.firstContext=null)}function aa(g){var v=Fe?g._currentValue:g._currentValue2;if(sh!==g)if(g={context:g,memoizedValue:v,next:null},no===null){if(_l===null)throw Error(s(308));no=g,_l.dependencies={lanes:0,firstContext:g}}else no=no.next=g;return v}var Va=null,Wa=!1;function Dc(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gm(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function ro(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function Wo(g,v){var C=g.updateQueue;C!==null&&(C=C.shared,Hr!==null&&(g.mode&1)!==0&&(wn&2)===0?(g=C.interleaved,g===null?(v.next=v,Va===null?Va=[C]:Va.push(C)):(v.next=g.next,g.next=v),C.interleaved=v):(g=C.pending,g===null?v.next=v:(v.next=g.next,g.next=v),C.pending=v))}function oh(g,v,C){if(v=v.updateQueue,v!==null&&(v=v.shared,(C&4194240)!==0)){var k=v.lanes;k&=g.pendingLanes,C|=k,v.lanes=C,Is(g,C)}}function lh(g,v){var C=g.updateQueue,k=g.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var D=null,H=null;if(C=C.firstBaseUpdate,C!==null){do{var de={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};H===null?D=H=de:H=H.next=de,C=C.next}while(C!==null);H===null?D=H=v:H=H.next=v}else D=H=v;C={baseState:k.baseState,firstBaseUpdate:D,lastBaseUpdate:H,shared:k.shared,effects:k.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=v:g.next=v,C.lastBaseUpdate=v}function ch(g,v,C,k){var D=g.updateQueue;Wa=!1;var H=D.firstBaseUpdate,de=D.lastBaseUpdate,Me=D.shared.pending;if(Me!==null){D.shared.pending=null;var He=Me,ct=He.next;He.next=null,de===null?H=ct:de.next=ct,de=He;var Ot=g.alternate;Ot!==null&&(Ot=Ot.updateQueue,Me=Ot.lastBaseUpdate,Me!==de&&(Me===null?Ot.firstBaseUpdate=ct:Me.next=ct,Ot.lastBaseUpdate=He))}if(H!==null){var un=D.baseState;de=0,Ot=ct=He=null,Me=H;do{var Xt=Me.lane,Sn=Me.eventTime;if((k&Xt)===Xt){Ot!==null&&(Ot=Ot.next={eventTime:Sn,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var Et=g,Mi=Me;switch(Xt=v,Sn=C,Mi.tag){case 1:if(Et=Mi.payload,typeof Et=="function"){un=Et.call(Sn,un,Xt);break e}un=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Mi.payload,Xt=typeof Et=="function"?Et.call(Sn,un,Xt):Et,Xt==null)break e;un=a({},un,Xt);break e;case 2:Wa=!0}}Me.callback!==null&&Me.lane!==0&&(g.flags|=64,Xt=D.effects,Xt===null?D.effects=[Me]:Xt.push(Me))}else Sn={eventTime:Sn,lane:Xt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Ot===null?(ct=Ot=Sn,He=un):Ot=Ot.next=Sn,de|=Xt;if(Me=Me.next,Me===null){if(Me=D.shared.pending,Me===null)break;Xt=Me,Me=Xt.next,Xt.next=null,D.lastBaseUpdate=Xt,D.shared.pending=null}}while(!0);if(Ot===null&&(He=un),D.baseState=He,D.firstBaseUpdate=ct,D.lastBaseUpdate=Ot,v=D.shared.interleaved,v!==null){D=v;do de|=D.lane,D=D.next;while(D!==v)}else H===null&&(D.shared.lanes=0);zs|=de,g.lanes=de,g.memoizedState=un}}function v0(g,v,C){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var k=g[v],D=k.callback;if(D!==null){if(k.callback=null,k=C,typeof D!="function")throw Error(s(191,D));D.call(k)}}}var y0=new r.Component().refs;function $m(g,v,C,k){v=g.memoizedState,C=C(k,v),C=C==null?v:a({},v,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var uh={isMounted:function(g){return(g=g._reactInternals)?T(g)===g:!1},enqueueSetState:function(g,v,C){g=g._reactInternals;var k=zn(),D=ps(g),H=ro(k,D);H.payload=v,C!=null&&(H.callback=C),Wo(g,H),v=Di(g,D,k),v!==null&&oh(v,g,D)},enqueueReplaceState:function(g,v,C){g=g._reactInternals;var k=zn(),D=ps(g),H=ro(k,D);H.tag=1,H.payload=v,C!=null&&(H.callback=C),Wo(g,H),v=Di(g,D,k),v!==null&&oh(v,g,D)},enqueueForceUpdate:function(g,v){g=g._reactInternals;var C=zn(),k=ps(g),D=ro(C,k);D.tag=2,v!=null&&(D.callback=v),Wo(g,D),v=Di(g,k,C),v!==null&&oh(v,g,k)}};function qm(g,v,C,k,D,H,de){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(k,H,de):v.prototype&&v.prototype.isPureReactComponent?!os(C,k)||!os(D,H):!0}function x0(g,v,C){var k=!1,D=tn,H=v.contextType;return typeof H=="object"&&H!==null?H=aa(H):(D=rr(v)?Yn:Kt.current,k=v.contextTypes,H=(k=k!=null)?vr(g,D):tn),v=new v(C,H),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=uh,g.stateNode=v,v._reactInternals=g,k&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=D,g.__reactInternalMemoizedMaskedChildContext=H),v}function b0(g,v,C,k){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(C,k),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(C,k),v.state!==g&&uh.enqueueReplaceState(v,v.state,null)}function Xm(g,v,C,k){var D=g.stateNode;D.props=C,D.state=g.memoizedState,D.refs=y0,Dc(g);var H=v.contextType;typeof H=="object"&&H!==null?D.context=aa(H):(H=rr(v)?Yn:Kt.current,D.context=vr(g,H)),D.state=g.memoizedState,H=v.getDerivedStateFromProps,typeof H=="function"&&($m(g,v,H,C),D.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(v=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),v!==D.state&&uh.enqueueReplaceState(D,D.state,null),ch(g,C,D,k),D.state=g.memoizedState),typeof D.componentDidMount=="function"&&(g.flags|=4194308)}var Uc=[],Go=0,dh=null,fh=0,Ga=[],ba=0,El=null,io=1,ao="";function Tl(g,v){Uc[Go++]=fh,Uc[Go++]=dh,dh=g,fh=v}function w0(g,v,C){Ga[ba++]=io,Ga[ba++]=ao,Ga[ba++]=El,El=g;var k=io;g=ao;var D=32-ir(k)-1;k&=~(1<<D),C+=1;var H=32-ir(v)+D;if(30<H){var de=D-D%5;H=(k&(1<<de)-1).toString(32),k>>=de,D-=de,io=1<<32-ir(v)+D|C<<D|k,ao=H+g}else io=1<<H|C<<D|k,ao=g}function Ym(g){g.return!==null&&(Tl(g,1),w0(g,1,0))}function Km(g){for(;g===dh;)dh=Uc[--Go],Uc[Go]=null,fh=Uc[--Go],Uc[Go]=null;for(;g===El;)El=Ga[--ba],Ga[ba]=null,ao=Ga[--ba],Ga[ba]=null,io=Ga[--ba],Ga[ba]=null}var Yi=null,xi=null,_r=!1,Fc=!1,$a=null;function Zm(g,v){var C=Aa(5,null,null,0);C.elementType="DELETED",C.stateNode=v,C.return=g,v=g.deletions,v===null?(g.deletions=[C],g.flags|=16):v.push(C)}function Jm(g,v){switch(g.tag){case 5:return v=Mn(v,g.type,g.pendingProps),v!==null?(g.stateNode=v,Yi=g,xi=cn(v),!0):!1;case 6:return v=zr(v,g.pendingProps),v!==null?(g.stateNode=v,Yi=g,xi=null,!0):!1;case 13:if(v=si(v),v!==null){var C=El!==null?{id:io,overflow:ao}:null;return g.memoizedState={dehydrated:v,treeContext:C,retryLane:1073741824},C=Aa(18,null,null,0),C.stateNode=v,C.return=g,g.child=C,Yi=g,xi=null,!0}return!1;default:return!1}}function hh(g){return(g.mode&1)!==0&&(g.flags&128)===0}function $o(g){if(_r){var v=xi;if(v){var C=v;if(!Jm(g,v)){if(hh(g))throw Error(s(418));v=yi(C);var k=Yi;v&&Jm(g,v)?Zm(k,C):(g.flags=g.flags&-4097|2,_r=!1,Yi=g)}}else{if(hh(g))throw Error(s(418));g.flags=g.flags&-4097|2,_r=!1,Yi=g}}}function _0(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Yi=g}function id(g){if(!Ve||g!==Yi)return!1;if(!_r)return _0(g),_r=!0,!1;if(g.tag!==3&&(g.tag!==5||je(g.type)&&!be(g.type,g.memoizedProps))){var v=xi;if(v){if(hh(g)){for(g=xi;g;)g=yi(g);throw Error(s(418))}for(;v;)Zm(g,v),v=yi(v)}}if(_0(g),g.tag===13){if(!Ve)throw Error(s(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));xi=$(g)}else xi=Yi?yi(g.stateNode):null;return!0}function zc(){Ve&&(xi=Yi=null,Fc=_r=!1)}function ph(g){$a===null?$a=[g]:$a.push(g)}function Bc(g,v,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(s(309));var k=C.stateNode}if(!k)throw Error(s(147,g));var D=k,H=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===H?v.ref:(v=function(de){var Me=D.refs;Me===y0&&(Me=D.refs={}),de===null?delete Me[H]:Me[H]=de},v._stringRef=H,v)}if(typeof g!="string")throw Error(s(284));if(!C._owner)throw Error(s(290,g))}return g}function qo(g,v){throw g=Object.prototype.toString.call(v),Error(s(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function Hc(g){var v=g._init;return v(g._payload)}function S0(g){function v(ke,Ee){if(g){var ze=ke.deletions;ze===null?(ke.deletions=[Ee],ke.flags|=16):ze.push(Ee)}}function C(ke,Ee){if(!g)return null;for(;Ee!==null;)v(ke,Ee),Ee=Ee.sibling;return null}function k(ke,Ee){for(ke=new Map;Ee!==null;)Ee.key!==null?ke.set(Ee.key,Ee):ke.set(Ee.index,Ee),Ee=Ee.sibling;return ke}function D(ke,Ee){return ke=bo(ke,Ee),ke.index=0,ke.sibling=null,ke}function H(ke,Ee,ze){return ke.index=ze,g?(ze=ke.alternate,ze!==null?(ze=ze.index,ze<Ee?(ke.flags|=2,Ee):ze):(ke.flags|=2,Ee)):(ke.flags|=1048576,Ee)}function de(ke){return g&&ke.alternate===null&&(ke.flags|=2),ke}function Me(ke,Ee,ze,_t){return Ee===null||Ee.tag!==6?(Ee=Bh(ze,ke.mode,_t),Ee.return=ke,Ee):(Ee=D(Ee,ze),Ee.return=ke,Ee)}function He(ke,Ee,ze,_t){var zt=ze.type;return zt===f?Ot(ke,Ee,ze.props.children,_t,ze.key):Ee!==null&&(Ee.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===E&&Hc(zt)===Ee.type)?(_t=D(Ee,ze.props),_t.ref=Bc(ke,Ee,ze),_t.return=ke,_t):(_t=zh(ze.type,ze.key,ze.props,null,ke.mode,_t),_t.ref=Bc(ke,Ee,ze),_t.return=ke,_t)}function ct(ke,Ee,ze,_t){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==ze.containerInfo||Ee.stateNode.implementation!==ze.implementation?(Ee=Hh(ze,ke.mode,_t),Ee.return=ke,Ee):(Ee=D(Ee,ze.children||[]),Ee.return=ke,Ee)}function Ot(ke,Ee,ze,_t,zt){return Ee===null||Ee.tag!==7?(Ee=Xl(ze,ke.mode,_t,zt),Ee.return=ke,Ee):(Ee=D(Ee,ze),Ee.return=ke,Ee)}function un(ke,Ee,ze){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=Bh(""+Ee,ke.mode,ze),Ee.return=ke,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return ze=zh(Ee.type,Ee.key,Ee.props,null,ke.mode,ze),ze.ref=Bc(ke,null,Ee),ze.return=ke,ze;case u:return Ee=Hh(Ee,ke.mode,ze),Ee.return=ke,Ee;case E:var _t=Ee._init;return un(ke,_t(Ee._payload),ze)}if(Y(Ee)||O(Ee))return Ee=Xl(Ee,ke.mode,ze,null),Ee.return=ke,Ee;qo(ke,Ee)}return null}function Xt(ke,Ee,ze,_t){var zt=Ee!==null?Ee.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return zt!==null?null:Me(ke,Ee,""+ze,_t);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return ze.key===zt?He(ke,Ee,ze,_t):null;case u:return ze.key===zt?ct(ke,Ee,ze,_t):null;case E:return zt=ze._init,Xt(ke,Ee,zt(ze._payload),_t)}if(Y(ze)||O(ze))return zt!==null?null:Ot(ke,Ee,ze,_t,null);qo(ke,ze)}return null}function Sn(ke,Ee,ze,_t,zt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return ke=ke.get(ze)||null,Me(Ee,ke,""+_t,zt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case l:return ke=ke.get(_t.key===null?ze:_t.key)||null,He(Ee,ke,_t,zt);case u:return ke=ke.get(_t.key===null?ze:_t.key)||null,ct(Ee,ke,_t,zt);case E:var vn=_t._init;return Sn(ke,Ee,ze,vn(_t._payload),zt)}if(Y(_t)||O(_t))return ke=ke.get(ze)||null,Ot(Ee,ke,_t,zt,null);qo(Ee,_t)}return null}function Et(ke,Ee,ze,_t){for(var zt=null,vn=null,dn=Ee,Dn=Ee=0,$r=null;dn!==null&&Dn<ze.length;Dn++){dn.index>Dn?($r=dn,dn=null):$r=dn.sibling;var In=Xt(ke,dn,ze[Dn],_t);if(In===null){dn===null&&(dn=$r);break}g&&dn&&In.alternate===null&&v(ke,dn),Ee=H(In,Ee,Dn),vn===null?zt=In:vn.sibling=In,vn=In,dn=$r}if(Dn===ze.length)return C(ke,dn),_r&&Tl(ke,Dn),zt;if(dn===null){for(;Dn<ze.length;Dn++)dn=un(ke,ze[Dn],_t),dn!==null&&(Ee=H(dn,Ee,Dn),vn===null?zt=dn:vn.sibling=dn,vn=dn);return _r&&Tl(ke,Dn),zt}for(dn=k(ke,dn);Dn<ze.length;Dn++)$r=Sn(dn,ke,Dn,ze[Dn],_t),$r!==null&&(g&&$r.alternate!==null&&dn.delete($r.key===null?Dn:$r.key),Ee=H($r,Ee,Dn),vn===null?zt=$r:vn.sibling=$r,vn=$r);return g&&dn.forEach(function(wo){return v(ke,wo)}),_r&&Tl(ke,Dn),zt}function Mi(ke,Ee,ze,_t){var zt=O(ze);if(typeof zt!="function")throw Error(s(150));if(ze=zt.call(ze),ze==null)throw Error(s(151));for(var vn=zt=null,dn=Ee,Dn=Ee=0,$r=null,In=ze.next();dn!==null&&!In.done;Dn++,In=ze.next()){dn.index>Dn?($r=dn,dn=null):$r=dn.sibling;var wo=Xt(ke,dn,In.value,_t);if(wo===null){dn===null&&(dn=$r);break}g&&dn&&wo.alternate===null&&v(ke,dn),Ee=H(wo,Ee,Dn),vn===null?zt=wo:vn.sibling=wo,vn=wo,dn=$r}if(In.done)return C(ke,dn),_r&&Tl(ke,Dn),zt;if(dn===null){for(;!In.done;Dn++,In=ze.next())In=un(ke,In.value,_t),In!==null&&(Ee=H(In,Ee,Dn),vn===null?zt=In:vn.sibling=In,vn=In);return _r&&Tl(ke,Dn),zt}for(dn=k(ke,dn);!In.done;Dn++,In=ze.next())In=Sn(dn,ke,Dn,In.value,_t),In!==null&&(g&&In.alternate!==null&&dn.delete(In.key===null?Dn:In.key),Ee=H(In,Ee,Dn),vn===null?zt=In:vn.sibling=In,vn=In);return g&&dn.forEach(function(Pg){return v(ke,Pg)}),_r&&Tl(ke,Dn),zt}function Ca(ke,Ee,ze,_t){if(typeof ze=="object"&&ze!==null&&ze.type===f&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:e:{for(var zt=ze.key,vn=Ee;vn!==null;){if(vn.key===zt){if(zt=ze.type,zt===f){if(vn.tag===7){C(ke,vn.sibling),Ee=D(vn,ze.props.children),Ee.return=ke,ke=Ee;break e}}else if(vn.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===E&&Hc(zt)===vn.type){C(ke,vn.sibling),Ee=D(vn,ze.props),Ee.ref=Bc(ke,vn,ze),Ee.return=ke,ke=Ee;break e}C(ke,vn);break}else v(ke,vn);vn=vn.sibling}ze.type===f?(Ee=Xl(ze.props.children,ke.mode,_t,ze.key),Ee.return=ke,ke=Ee):(_t=zh(ze.type,ze.key,ze.props,null,ke.mode,_t),_t.ref=Bc(ke,Ee,ze),_t.return=ke,ke=_t)}return de(ke);case u:e:{for(vn=ze.key;Ee!==null;){if(Ee.key===vn)if(Ee.tag===4&&Ee.stateNode.containerInfo===ze.containerInfo&&Ee.stateNode.implementation===ze.implementation){C(ke,Ee.sibling),Ee=D(Ee,ze.children||[]),Ee.return=ke,ke=Ee;break e}else{C(ke,Ee);break}else v(ke,Ee);Ee=Ee.sibling}Ee=Hh(ze,ke.mode,_t),Ee.return=ke,ke=Ee}return de(ke);case E:return vn=ze._init,Ca(ke,Ee,vn(ze._payload),_t)}if(Y(ze))return Et(ke,Ee,ze,_t);if(O(ze))return Mi(ke,Ee,ze,_t);qo(ke,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,Ee!==null&&Ee.tag===6?(C(ke,Ee.sibling),Ee=D(Ee,ze),Ee.return=ke,ke=Ee):(C(ke,Ee),Ee=Bh(ze,ke.mode,_t),Ee.return=ke,ke=Ee),de(ke)):C(ke,Ee)}return Ca}var so=S0(!0),M0=S0(!1),Vc={},sa=nn(Vc),Al=nn(Vc),Cl=nn(Vc);function ls(g){if(g===Vc)throw Error(s(174));return g}function mh(g,v){mt(Cl,v),mt(Al,g),mt(sa,Vc),g=se(v),yt(sa),mt(sa,g)}function Wc(){yt(sa),yt(Al),yt(Cl)}function E0(g){var v=ls(Cl.current),C=ls(sa.current);v=G(C,g.type,v),C!==v&&(mt(Al,g),mt(sa,v))}function Qm(g){Al.current===g&&(yt(sa),yt(Al))}var Nr=nn(0);function gh(g){for(var v=g;v!==null;){if(v.tag===13){var C=v.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||ks(C)||ss(C)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var wa=[];function Pl(){for(var g=0;g<wa.length;g++){var v=wa[g];Fe?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}wa.length=0}var ad=o.ReactCurrentDispatcher,_a=o.ReactCurrentBatchConfig,Nl=0,Or=null,oi=null,li=null,vh=!1,Ds=!1,Ol=0,sd=0;function ci(){throw Error(s(321))}function yh(g,v){if(v===null)return!1;for(var C=0;C<v.length&&C<g.length;C++)if(!qi(g[C],v[C]))return!1;return!0}function Gc(g,v,C,k,D,H){if(Nl=H,Or=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,ad.current=g===null||g.memoizedState===null?ag:sg,g=C(k,D),Ds){H=0;do{if(Ds=!1,Ol=0,25<=H)throw Error(s(301));H+=1,li=oi=null,v.updateQueue=null,ad.current=og,g=C(k,D)}while(Ds)}if(ad.current=Yc,v=oi!==null&&oi.next!==null,Nl=0,li=oi=Or=null,vh=!1,v)throw Error(s(300));return g}function Xo(){var g=Ol!==0;return Ol=0,g}function cs(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Or.memoizedState=li=g:li=li.next=g,li}function us(){if(oi===null){var g=Or.alternate;g=g!==null?g.memoizedState:null}else g=oi.next;var v=li===null?Or.memoizedState:li.next;if(v!==null)li=v,oi=g;else{if(g===null)throw Error(s(310));oi=g,g={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},li===null?Or.memoizedState=li=g:li=li.next=g}return li}function Us(g,v){return typeof v=="function"?v(g):v}function od(g){var v=us(),C=v.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=g;var k=oi,D=k.baseQueue,H=C.pending;if(H!==null){if(D!==null){var de=D.next;D.next=H.next,H.next=de}k.baseQueue=D=H,C.pending=null}if(D!==null){H=D.next,k=k.baseState;var Me=de=null,He=null,ct=H;do{var Ot=ct.lane;if((Nl&Ot)===Ot)He!==null&&(He=He.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),k=ct.hasEagerState?ct.eagerState:g(k,ct.action);else{var un={lane:Ot,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};He===null?(Me=He=un,de=k):He=He.next=un,Or.lanes|=Ot,zs|=Ot}ct=ct.next}while(ct!==null&&ct!==H);He===null?de=k:He.next=Me,qi(k,v.memoizedState)||(ui=!0),v.memoizedState=k,v.baseState=de,v.baseQueue=He,C.lastRenderedState=k}if(g=C.interleaved,g!==null){D=g;do H=D.lane,Or.lanes|=H,zs|=H,D=D.next;while(D!==g)}else D===null&&(C.lanes=0);return[v.memoizedState,C.dispatch]}function ld(g){var v=us(),C=v.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=g;var k=C.dispatch,D=C.pending,H=v.memoizedState;if(D!==null){C.pending=null;var de=D=D.next;do H=g(H,de.action),de=de.next;while(de!==D);qi(H,v.memoizedState)||(ui=!0),v.memoizedState=H,v.baseQueue===null&&(v.baseState=H),C.lastRenderedState=H}return[H,k]}function eg(){}function tg(g,v){var C=Or,k=us(),D=v(),H=!qi(k.memoizedState,D);if(H&&(k.memoizedState=D,ui=!0),k=k.queue,$c(oo.bind(null,C,k,g),[g]),k.getSnapshot!==v||H||li!==null&&li.memoizedState.tag&1){if(C.flags|=2048,ud(9,rg.bind(null,C,k,D,v),void 0,null),Hr===null)throw Error(s(349));(Nl&30)!==0||ng(C,v,D)}return D}function ng(g,v,C){g.flags|=16384,g={getSnapshot:v,value:C},v=Or.updateQueue,v===null?(v={lastEffect:null,stores:null},Or.updateQueue=v,v.stores=[g]):(C=v.stores,C===null?v.stores=[g]:C.push(g))}function rg(g,v,C,k){v.value=C,v.getSnapshot=k,xh(v)&&Di(g,1,-1)}function oo(g,v,C){return C(function(){xh(v)&&Di(g,1,-1)})}function xh(g){var v=g.getSnapshot;g=g.value;try{var C=v();return!qi(g,C)}catch{return!0}}function cd(g){var v=cs();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:g},v.queue=g,g=g.dispatch=x_.bind(null,Or,g),[v.memoizedState,g]}function ud(g,v,C,k){return g={tag:g,create:v,destroy:C,deps:k,next:null},v=Or.updateQueue,v===null?(v={lastEffect:null,stores:null},Or.updateQueue=v,v.lastEffect=g.next=g):(C=v.lastEffect,C===null?v.lastEffect=g.next=g:(k=C.next,C.next=g,g.next=k,v.lastEffect=g)),g}function T0(){return us().memoizedState}function Yo(g,v,C,k){var D=cs();Or.flags|=g,D.memoizedState=ud(1|v,C,void 0,k===void 0?null:k)}function bh(g,v,C,k){var D=us();k=k===void 0?null:k;var H=void 0;if(oi!==null){var de=oi.memoizedState;if(H=de.destroy,k!==null&&yh(k,de.deps)){D.memoizedState=ud(v,C,H,k);return}}Or.flags|=g,D.memoizedState=ud(1|v,C,H,k)}function wh(g,v){return Yo(8390656,8,g,v)}function $c(g,v){return bh(2048,8,g,v)}function dr(g,v){return bh(4,2,g,v)}function _h(g,v){return bh(4,4,g,v)}function dd(g,v){if(typeof v=="function")return g=g(),v(g),function(){v(null)};if(v!=null)return g=g(),v.current=g,function(){v.current=null}}function qc(g,v,C){return C=C!=null?C.concat([g]):null,bh(4,4,dd.bind(null,v,g),C)}function Sh(){}function Mh(g,v){var C=us();v=v===void 0?null:v;var k=C.memoizedState;return k!==null&&v!==null&&yh(v,k[1])?k[0]:(C.memoizedState=[g,v],g)}function Xc(g,v){var C=us();v=v===void 0?null:v;var k=C.memoizedState;return k!==null&&v!==null&&yh(v,k[1])?k[0]:(g=g(),C.memoizedState=[g,v],g)}function Eh(g,v){var C=En;En=C!==0&&4>C?C:4,g(!0);var k=_a.transition;_a.transition={};try{g(!1),v()}finally{En=C,_a.transition=k}}function Rl(){return us().memoizedState}function A0(g,v,C){var k=ps(g);C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},C0(g)?ig(v,C):(fd(g,v,C),C=zn(),g=Di(g,k,C),g!==null&&hd(g,v,k))}function x_(g,v,C){var k=ps(g),D={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(C0(g))ig(v,D);else{fd(g,v,D);var H=g.alternate;if(g.lanes===0&&(H===null||H.lanes===0)&&(H=v.lastRenderedReducer,H!==null))try{var de=v.lastRenderedState,Me=H(de,C);if(D.hasEagerState=!0,D.eagerState=Me,qi(Me,de))return}catch{}finally{}C=zn(),g=Di(g,k,C),g!==null&&hd(g,v,k)}}function C0(g){var v=g.alternate;return g===Or||v!==null&&v===Or}function ig(g,v){Ds=vh=!0;var C=g.pending;C===null?v.next=v:(v.next=C.next,C.next=v),g.pending=v}function fd(g,v,C){Hr!==null&&(g.mode&1)!==0&&(wn&2)===0?(g=v.interleaved,g===null?(C.next=C,Va===null?Va=[v]:Va.push(v)):(C.next=g.next,g.next=C),v.interleaved=C):(g=v.pending,g===null?C.next=C:(C.next=g.next,g.next=C),v.pending=C)}function hd(g,v,C){if((C&4194240)!==0){var k=v.lanes;k&=g.pendingLanes,C|=k,v.lanes=C,Is(g,C)}}var Yc={readContext:aa,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},ag={readContext:aa,useCallback:function(g,v){return cs().memoizedState=[g,v===void 0?null:v],g},useContext:aa,useEffect:wh,useImperativeHandle:function(g,v,C){return C=C!=null?C.concat([g]):null,Yo(4194308,4,dd.bind(null,v,g),C)},useLayoutEffect:function(g,v){return Yo(4194308,4,g,v)},useInsertionEffect:function(g,v){return Yo(4,2,g,v)},useMemo:function(g,v){var C=cs();return v=v===void 0?null:v,g=g(),C.memoizedState=[g,v],g},useReducer:function(g,v,C){var k=cs();return v=C!==void 0?C(v):v,k.memoizedState=k.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},k.queue=g,g=g.dispatch=A0.bind(null,Or,g),[k.memoizedState,g]},useRef:function(g){var v=cs();return g={current:g},v.memoizedState=g},useState:cd,useDebugValue:Sh,useDeferredValue:function(g){var v=cd(g),C=v[0],k=v[1];return wh(function(){var D=_a.transition;_a.transition={};try{k(g)}finally{_a.transition=D}},[g]),C},useTransition:function(){var g=cd(!1),v=g[0];return g=Eh.bind(null,g[1]),cs().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,C){var k=Or,D=cs();if(_r){if(C===void 0)throw Error(s(407));C=C()}else{if(C=v(),Hr===null)throw Error(s(349));(Nl&30)!==0||ng(k,v,C)}D.memoizedState=C;var H={value:C,getSnapshot:v};return D.queue=H,wh(oo.bind(null,k,H,g),[g]),k.flags|=2048,ud(9,rg.bind(null,k,H,C,v),void 0,null),C},useId:function(){var g=cs(),v=Hr.identifierPrefix;if(_r){var C=ao,k=io;C=(k&~(1<<32-ir(k)-1)).toString(32)+C,v=":"+v+"R"+C,C=Ol++,0<C&&(v+="H"+C.toString(32)),v+=":"}else C=sd++,v=":"+v+"r"+C.toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},sg={readContext:aa,useCallback:Mh,useContext:aa,useEffect:$c,useImperativeHandle:qc,useInsertionEffect:dr,useLayoutEffect:_h,useMemo:Xc,useReducer:od,useRef:T0,useState:function(){return od(Us)},useDebugValue:Sh,useDeferredValue:function(g){var v=od(Us),C=v[0],k=v[1];return $c(function(){var D=_a.transition;_a.transition={};try{k(g)}finally{_a.transition=D}},[g]),C},useTransition:function(){var g=od(Us)[0],v=us().memoizedState;return[g,v]},useMutableSource:eg,useSyncExternalStore:tg,useId:Rl,unstable_isNewReconciler:!1},og={readContext:aa,useCallback:Mh,useContext:aa,useEffect:$c,useImperativeHandle:qc,useInsertionEffect:dr,useLayoutEffect:_h,useMemo:Xc,useReducer:ld,useRef:T0,useState:function(){return ld(Us)},useDebugValue:Sh,useDeferredValue:function(g){var v=ld(Us),C=v[0],k=v[1];return $c(function(){var D=_a.transition;_a.transition={};try{k(g)}finally{_a.transition=D}},[g]),C},useTransition:function(){var g=ld(Us)[0],v=us().memoizedState;return[g,v]},useMutableSource:eg,useSyncExternalStore:tg,useId:Rl,unstable_isNewReconciler:!1};function lg(g,v){try{var C="",k=v;do C+=Wm(k),k=k.return;while(k);var D=C}catch(H){D=`
Error generating stack: `+H.message+`
`+H.stack}return{value:g,source:v,stack:D}}function Th(g,v){try{console.error(v.value)}catch(C){setTimeout(function(){throw C})}}var b_=typeof WeakMap=="function"?WeakMap:Map;function P0(g,v,C){C=ro(-1,C),C.tag=3,C.payload={element:null};var k=v.value;return C.callback=function(){tu||(tu=!0,xr=k),Th(g,v)},C}function Ah(g,v,C){C=ro(-1,C),C.tag=3;var k=g.type.getDerivedStateFromError;if(typeof k=="function"){var D=v.value;C.payload=function(){return k(D)},C.callback=function(){Th(g,v)}}var H=g.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(C.callback=function(){Th(g,v),typeof k!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var de=v.stack;this.componentDidCatch(v.value,{componentStack:de!==null?de:""})}),C}function lo(g,v,C){var k=g.pingCache;if(k===null){k=g.pingCache=new b_;var D=new Set;k.set(v,D)}else D=k.get(v),D===void 0&&(D=new Set,k.set(v,D));D.has(C)||(D.add(C),g=Tg.bind(null,g,v,C),v.then(g,g))}function cg(g){do{var v;if((v=g.tag===13)&&(v=g.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return g;g=g.return}while(g!==null);return null}function kl(g,v,C,k,D){return(g.mode&1)===0?(g===v?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(v=ro(-1,1),v.tag=2,Wo(C,v))),C.lanes|=1),g):(g.flags|=65536,g.lanes=D,g)}function ei(g){g.flags|=4}function Kc(g,v){if(g!==null&&g.child===v.child)return!0;if((v.flags&16)!==0)return!1;for(g=v.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var Sa,jl,Ch,Ph;if($e)Sa=function(g,v){for(var C=v.child;C!==null;){if(C.tag===5||C.tag===6)te(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===v)break;for(;C.sibling===null;){if(C.return===null||C.return===v)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},jl=function(){},Ch=function(g,v,C,k,D){if(g=g.memoizedProps,g!==k){var H=v.stateNode,de=ls(sa.current);C=le(H,C,g,k,D,de),(v.updateQueue=C)&&ei(v)}},Ph=function(g,v,C,k){C!==k&&ei(v)};else if(ne){Sa=function(g,v,C,k){for(var D=v.child;D!==null;){if(D.tag===5){var H=D.stateNode;C&&k&&(H=Bn(H,D.type,D.memoizedProps,D)),te(g,H)}else if(D.tag===6)H=D.stateNode,C&&k&&(H=nr(H,D.memoizedProps,D)),te(g,H);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)H=D.child,H!==null&&(H.return=D),Sa(g,D,!0,!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===v)break;for(;D.sibling===null;){if(D.return===null||D.return===v)return;D=D.return}D.sibling.return=D.return,D=D.sibling}};var Ko=function(g,v,C,k){for(var D=v.child;D!==null;){if(D.tag===5){var H=D.stateNode;C&&k&&(H=Bn(H,D.type,D.memoizedProps,D)),kt(g,H)}else if(D.tag===6)H=D.stateNode,C&&k&&(H=nr(H,D.memoizedProps,D)),kt(g,H);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)H=D.child,H!==null&&(H.return=D),Ko(g,D,!0,!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===v)break;for(;D.sibling===null;){if(D.return===null||D.return===v)return;D=D.return}D.sibling.return=D.return,D=D.sibling}};jl=function(g,v){var C=v.stateNode;if(!Kc(g,v)){g=C.containerInfo;var k=Gt(g);Ko(k,v,!1,!1),C.pendingChildren=k,ei(v),xn(g,k)}},Ch=function(g,v,C,k,D){var H=g.stateNode,de=g.memoizedProps;if((g=Kc(g,v))&&de===k)v.stateNode=H;else{var Me=v.stateNode,He=ls(sa.current),ct=null;de!==k&&(ct=le(Me,C,de,k,D,He)),g&&ct===null?v.stateNode=H:(H=gt(H,ct,C,de,k,v,g,Me),ce(H,C,k,D,He)&&ei(v),v.stateNode=H,g?ei(v):Sa(H,v,!1,!1))}},Ph=function(g,v,C,k){C!==k?(g=ls(Cl.current),C=ls(sa.current),v.stateNode=Se(k,g,C,v),ei(v)):v.stateNode=g.stateNode}}else jl=function(){},Ch=function(){},Ph=function(){};function co(g,v){if(!_r)switch(g.tailMode){case"hidden":v=g.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:k.sibling=null}}function Br(g){var v=g.alternate!==null&&g.alternate.child===g.child,C=0,k=0;if(v)for(var D=g.child;D!==null;)C|=D.lanes|D.childLanes,k|=D.subtreeFlags&14680064,k|=D.flags&14680064,D.return=g,D=D.sibling;else for(D=g.child;D!==null;)C|=D.lanes|D.childLanes,k|=D.subtreeFlags,k|=D.flags,D.return=g,D=D.sibling;return g.subtreeFlags|=k,g.childLanes=C,v}function Nh(g,v,C){var k=v.pendingProps;switch(Km(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(v),null;case 1:return rr(v.type)&&Nn(),Br(v),null;case 3:return k=v.stateNode,Wc(),yt(rn),yt(Kt),Pl(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(g===null||g.child===null)&&(id(v)?ei(v):g===null||g.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,$a!==null&&(Td($a),$a=null))),jl(g,v),Br(v),null;case 5:Qm(v),C=ls(Cl.current);var D=v.type;if(g!==null&&v.stateNode!=null)Ch(g,v,D,k,C),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!k){if(v.stateNode===null)throw Error(s(166));return Br(v),null}if(g=ls(sa.current),id(v)){if(!Ve)throw Error(s(175));g=q(v.stateNode,v.type,v.memoizedProps,C,g,v,!Fc),v.updateQueue=g,g!==null&&ei(v)}else{var H=X(D,k,C,g,v);Sa(H,v,!1,!1),v.stateNode=H,ce(H,D,k,C,g)&&ei(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return Br(v),null;case 6:if(g&&v.stateNode!=null)Ph(g,v,g.memoizedProps,k);else{if(typeof k!="string"&&v.stateNode===null)throw Error(s(166));if(g=ls(Cl.current),C=ls(sa.current),id(v)){if(!Ve)throw Error(s(176));if(g=v.stateNode,k=v.memoizedProps,(C=re(g,k,v,!Fc))&&(D=Yi,D!==null))switch(H=(D.mode&1)!==0,D.tag){case 3:Ue(D.stateNode.containerInfo,g,k,H);break;case 5:Be(D.type,D.memoizedProps,D.stateNode,g,k,H)}C&&ei(v)}else v.stateNode=Se(k,g,C,v)}return Br(v),null;case 13:if(yt(Nr),k=v.memoizedState,_r&&xi!==null&&(v.mode&1)!==0&&(v.flags&128)===0){for(g=xi;g;)g=yi(g);return zc(),v.flags|=98560,v}if(k!==null&&k.dehydrated!==null){if(k=id(v),g===null){if(!k)throw Error(s(318));if(!Ve)throw Error(s(344));if(g=v.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));xe(g,v)}else zc(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;return Br(v),null}return $a!==null&&(Td($a),$a=null),(v.flags&128)!==0?(v.lanes=C,v):(k=k!==null,C=!1,g===null?id(v):C=g.memoizedState!==null,k&&!C&&(v.child.flags|=8192,(v.mode&1)!==0&&(g===null||(Nr.current&1)!==0?Ir===0&&(Ir=3):Dh())),v.updateQueue!==null&&(v.flags|=4),Br(v),null);case 4:return Wc(),jl(g,v),g===null&&Ke(v.stateNode.containerInfo),Br(v),null;case 10:return rd(v.type._context),Br(v),null;case 17:return rr(v.type)&&Nn(),Br(v),null;case 19:if(yt(Nr),D=v.memoizedState,D===null)return Br(v),null;if(k=(v.flags&128)!==0,H=D.rendering,H===null)if(k)co(D,!1);else{if(Ir!==0||g!==null&&(g.flags&128)!==0)for(g=v.child;g!==null;){if(H=gh(g),H!==null){for(v.flags|=128,co(D,!1),g=H.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=C,k=v.child;k!==null;)C=k,D=g,C.flags&=14680066,H=C.alternate,H===null?(C.childLanes=0,C.lanes=D,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=H.childLanes,C.lanes=H.lanes,C.child=H.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=H.memoizedProps,C.memoizedState=H.memoizedState,C.updateQueue=H.updateQueue,C.type=H.type,D=H.dependencies,C.dependencies=D===null?null:{lanes:D.lanes,firstContext:D.firstContext}),k=k.sibling;return mt(Nr,Nr.current&1|2),v.child}g=g.sibling}D.tail!==null&&Qr()>Qo&&(v.flags|=128,k=!0,co(D,!1),v.lanes=4194304)}else{if(!k)if(g=gh(H),g!==null){if(v.flags|=128,k=!0,g=g.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),co(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!_r)return Br(v),null}else 2*Qr()-D.renderingStartTime>Qo&&C!==1073741824&&(v.flags|=128,k=!0,co(D,!1),v.lanes=4194304);D.isBackwards?(H.sibling=v.child,v.child=H):(g=D.last,g!==null?g.sibling=H:v.child=H,D.last=H)}return D.tail!==null?(v=D.tail,D.rendering=v,D.tail=v.sibling,D.renderingStartTime=Qr(),v.sibling=null,g=Nr.current,mt(Nr,k?g&1|2:g&1),v):(Br(v),null);case 22:case 23:return Ad(),k=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==k&&(v.flags|=8192),k&&(v.mode&1)!==0?(Li&1073741824)!==0&&(Br(v),$e&&v.subtreeFlags&6&&(v.flags|=8192)):Br(v),null;case 24:return null;case 25:return null}throw Error(s(156,v.tag))}var ug=o.ReactCurrentOwner,ui=!1;function jr(g,v,C,k){v.child=g===null?M0(v,null,C,k):so(v,g.child,C,k)}function fr(g,v,C,k,D){C=C.render;var H=v.ref;return Lc(v,D),k=Gc(g,v,C,k,H,D),C=Xo(),g!==null&&!ui?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~D,oa(g,v,D)):(_r&&C&&Ym(v),v.flags|=1,jr(g,v,k,D),v.child)}function ar(g,v,C,k,D){if(g===null){var H=C.type;return typeof H=="function"&&!Fh(H)&&H.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(v.tag=15,v.type=H,uo(g,v,H,k,D)):(g=zh(C.type,null,k,v,v.mode,D),g.ref=v.ref,g.return=v,v.child=g)}if(H=g.child,(g.lanes&D)===0){var de=H.memoizedProps;if(C=C.compare,C=C!==null?C:os,C(de,k)&&g.ref===v.ref)return oa(g,v,D)}return v.flags|=1,g=bo(H,k),g.ref=v.ref,g.return=v,v.child=g}function uo(g,v,C,k,D){if(g!==null&&os(g.memoizedProps,k)&&g.ref===v.ref)if(ui=!1,(g.lanes&D)!==0)(g.flags&131072)!==0&&(ui=!0);else return v.lanes=g.lanes,oa(g,v,D);return fo(g,v,C,k,D)}function bi(g,v,C){var k=v.pendingProps,D=k.children,H=g!==null?g.memoizedState:null;if(k.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null},mt(Vl,Li),Li|=C;else if((C&1073741824)!==0)v.memoizedState={baseLanes:0,cachePool:null},k=H!==null?H.baseLanes:C,mt(Vl,Li),Li|=k;else return g=H!==null?H.baseLanes|C:C,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null},v.updateQueue=null,mt(Vl,Li),Li|=g,null;else H!==null?(k=H.baseLanes|C,v.memoizedState=null):k=C,mt(Vl,Li),Li|=k;return jr(g,v,D,C),v.child}function Ki(g,v){var C=v.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(v.flags|=512,v.flags|=2097152)}function fo(g,v,C,k,D){var H=rr(C)?Yn:Kt.current;return H=vr(v,H),Lc(v,D),C=Gc(g,v,C,k,H,D),k=Xo(),g!==null&&!ui?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~D,oa(g,v,D)):(_r&&k&&Ym(v),v.flags|=1,jr(g,v,C,D),v.child)}function Il(g,v,C,k,D){if(rr(C)){var H=!0;gn(v)}else H=!1;if(Lc(v,D),v.stateNode===null)g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),x0(v,C,k),Xm(v,C,k,D),k=!0;else if(g===null){var de=v.stateNode,Me=v.memoizedProps;de.props=Me;var He=de.context,ct=C.contextType;typeof ct=="object"&&ct!==null?ct=aa(ct):(ct=rr(C)?Yn:Kt.current,ct=vr(v,ct));var Ot=C.getDerivedStateFromProps,un=typeof Ot=="function"||typeof de.getSnapshotBeforeUpdate=="function";un||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Me!==k||He!==ct)&&b0(v,de,k,ct),Wa=!1;var Xt=v.memoizedState;de.state=Xt,ch(v,k,de,D),He=v.memoizedState,Me!==k||Xt!==He||rn.current||Wa?(typeof Ot=="function"&&($m(v,C,Ot,k),He=v.memoizedState),(Me=Wa||qm(v,C,Me,k,Xt,He,ct))?(un||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(v.flags|=4194308)):(typeof de.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=k,v.memoizedState=He),de.props=k,de.state=He,de.context=ct,k=Me):(typeof de.componentDidMount=="function"&&(v.flags|=4194308),k=!1)}else{de=v.stateNode,Gm(g,v),Me=v.memoizedProps,ct=v.type===v.elementType?Me:ia(v.type,Me),de.props=ct,un=v.pendingProps,Xt=de.context,He=C.contextType,typeof He=="object"&&He!==null?He=aa(He):(He=rr(C)?Yn:Kt.current,He=vr(v,He));var Sn=C.getDerivedStateFromProps;(Ot=typeof Sn=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Me!==un||Xt!==He)&&b0(v,de,k,He),Wa=!1,Xt=v.memoizedState,de.state=Xt,ch(v,k,de,D);var Et=v.memoizedState;Me!==un||Xt!==Et||rn.current||Wa?(typeof Sn=="function"&&($m(v,C,Sn,k),Et=v.memoizedState),(ct=Wa||qm(v,C,ct,k,Xt,Et,He)||!1)?(Ot||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(k,Et,He),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(k,Et,He)),typeof de.componentDidUpdate=="function"&&(v.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof de.componentDidUpdate!="function"||Me===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Me===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=1024),v.memoizedProps=k,v.memoizedState=Et),de.props=k,de.state=Et,de.context=He,k=ct):(typeof de.componentDidUpdate!="function"||Me===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Me===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=1024),k=!1)}return Ii(g,v,C,k,H,D)}function Ii(g,v,C,k,D,H){Ki(g,v);var de=(v.flags&128)!==0;if(!k&&!de)return D&&On(v,C,!1),oa(g,v,H);k=v.stateNode,ug.current=v;var Me=de&&typeof C.getDerivedStateFromError!="function"?null:k.render();return v.flags|=1,g!==null&&de?(v.child=so(v,g.child,null,H),v.child=so(v,null,Me,H)):jr(g,v,Me,H),v.memoizedState=k.state,D&&On(v,C,!0),v.child}function pd(g){var v=g.stateNode;v.pendingContext?bn(g,v.pendingContext,v.pendingContext!==v.context):v.context&&bn(g,v.context,!1),mh(g,v.containerInfo)}function dg(g,v,C,k,D){return zc(),ph(D),v.flags|=256,jr(g,v,C,k),v.child}var md={dehydrated:null,treeContext:null,retryLane:0};function Ll(g){return{baseLanes:g,cachePool:null}}function fg(g,v,C){var k=v.pendingProps,D=Nr.current,H=!1,de=(v.flags&128)!==0,Me;if((Me=de)||(Me=g!==null&&g.memoizedState===null?!1:(D&2)!==0),Me?(H=!0,v.flags&=-129):(g===null||g.memoizedState!==null)&&(D|=1),mt(Nr,D&1),g===null)return $o(v),g=v.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((v.mode&1)===0?v.lanes=1:ss(g)?v.lanes=8:v.lanes=1073741824,null):(D=k.children,g=k.fallback,H?(k=v.mode,H=v.child,D={mode:"hidden",children:D},(k&1)===0&&H!==null?(H.childLanes=0,H.pendingProps=D):H=Nd(D,k,0,null),g=Xl(g,k,C,null),H.return=v,g.return=v,H.sibling=g,v.child=H,v.child.memoizedState=Ll(C),v.memoizedState=md,g):ds(v,D));if(D=g.memoizedState,D!==null){if(Me=D.dehydrated,Me!==null){if(de)return v.flags&256?(v.flags&=-257,vd(g,v,C,Error(s(422)))):v.memoizedState!==null?(v.child=g.child,v.flags|=128,null):(H=k.fallback,D=v.mode,k=Nd({mode:"visible",children:k.children},D,0,null),H=Xl(H,D,C,null),H.flags|=2,k.return=v,H.return=v,k.sibling=H,v.child=k,(v.mode&1)!==0&&so(v,g.child,null,C),v.child.memoizedState=Ll(C),v.memoizedState=md,H);if((v.mode&1)===0)v=vd(g,v,C,null);else if(ss(Me))v=vd(g,v,C,Error(s(419)));else if(k=(C&g.childLanes)!==0,ui||k){if(k=Hr,k!==null){switch(C&-C){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}k=(H&(k.suspendedLanes|C))!==0?0:H,k!==0&&k!==D.retryLane&&(D.retryLane=k,Di(g,k,-1))}Dh(),v=vd(g,v,C,Error(s(421)))}else ks(Me)?(v.flags|=128,v.child=g.child,v=j0.bind(null,g),$i(Me,v),v=null):(C=D.treeContext,Ve&&(xi=Rc(Me),Yi=v,_r=!0,$a=null,Fc=!1,C!==null&&(Ga[ba++]=io,Ga[ba++]=ao,Ga[ba++]=El,io=C.id,ao=C.overflow,El=v)),v=ds(v,v.pendingProps.children),v.flags|=4096);return v}return H?(k=Oh(g,v,k.children,k.fallback,C),H=v.child,D=g.child.memoizedState,H.memoizedState=D===null?Ll(C):{baseLanes:D.baseLanes|C,cachePool:null},H.childLanes=g.childLanes&~C,v.memoizedState=md,k):(C=gd(g,v,k.children,C),v.memoizedState=null,C)}return H?(k=Oh(g,v,k.children,k.fallback,C),H=v.child,D=g.child.memoizedState,H.memoizedState=D===null?Ll(C):{baseLanes:D.baseLanes|C,cachePool:null},H.childLanes=g.childLanes&~C,v.memoizedState=md,k):(C=gd(g,v,k.children,C),v.memoizedState=null,C)}function ds(g,v){return v=Nd({mode:"visible",children:v},g.mode,0,null),v.return=g,g.child=v}function gd(g,v,C,k){var D=g.child;return g=D.sibling,C=bo(D,{mode:"visible",children:C}),(v.mode&1)===0&&(C.lanes=k),C.return=v,C.sibling=null,g!==null&&(k=v.deletions,k===null?(v.deletions=[g],v.flags|=16):k.push(g)),v.child=C}function Oh(g,v,C,k,D){var H=v.mode;g=g.child;var de=g.sibling,Me={mode:"hidden",children:C};return(H&1)===0&&v.child!==g?(C=v.child,C.childLanes=0,C.pendingProps=Me,v.deletions=null):(C=bo(g,Me),C.subtreeFlags=g.subtreeFlags&14680064),de!==null?k=bo(de,k):(k=Xl(k,H,D,null),k.flags|=2),k.return=v,C.return=v,C.sibling=k,v.child=C,k}function vd(g,v,C,k){return k!==null&&ph(k),so(v,g.child,null,C),g=ds(v,v.pendingProps.children),g.flags|=2,v.memoizedState=null,g}function N0(g,v,C){g.lanes|=v;var k=g.alternate;k!==null&&(k.lanes|=v),Ml(g.return,v,C)}function Fs(g,v,C,k,D){var H=g.memoizedState;H===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:D}:(H.isBackwards=v,H.rendering=null,H.renderingStartTime=0,H.last=k,H.tail=C,H.tailMode=D)}function Dl(g,v,C){var k=v.pendingProps,D=k.revealOrder,H=k.tail;if(jr(g,v,k.children,C),k=Nr.current,(k&2)!==0)k=k&1|2,v.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&N0(g,C,v);else if(g.tag===19)N0(g,C,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}k&=1}if(mt(Nr,k),(v.mode&1)===0)v.memoizedState=null;else switch(D){case"forwards":for(C=v.child,D=null;C!==null;)g=C.alternate,g!==null&&gh(g)===null&&(D=C),C=C.sibling;C=D,C===null?(D=v.child,v.child=null):(D=C.sibling,C.sibling=null),Fs(v,!1,D,C,H);break;case"backwards":for(C=null,D=v.child,v.child=null;D!==null;){if(g=D.alternate,g!==null&&gh(g)===null){v.child=D;break}g=D.sibling,D.sibling=C,C=D,D=g}Fs(v,!0,C,null,H);break;case"together":Fs(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function oa(g,v,C){if(g!==null&&(v.dependencies=g.dependencies),zs|=v.lanes,(C&v.childLanes)===0)return null;if(g!==null&&v.child!==g.child)throw Error(s(153));if(v.child!==null){for(g=v.child,C=bo(g,g.pendingProps),v.child=C,C.return=v;g.sibling!==null;)g=g.sibling,C=C.sibling=bo(g,g.pendingProps),C.return=v;C.sibling=null}return v.child}function Rh(g,v,C){switch(v.tag){case 3:pd(v),zc();break;case 5:E0(v);break;case 1:rr(v.type)&&gn(v);break;case 4:mh(v,v.stateNode.containerInfo);break;case 10:Sl(v,v.type._context,v.memoizedProps.value);break;case 13:var k=v.memoizedState;if(k!==null)return k.dehydrated!==null?(mt(Nr,Nr.current&1),v.flags|=128,null):(C&v.child.childLanes)!==0?fg(g,v,C):(mt(Nr,Nr.current&1),g=oa(g,v,C),g!==null?g.sibling:null);mt(Nr,Nr.current&1);break;case 19:if(k=(C&v.childLanes)!==0,(g.flags&128)!==0){if(k)return Dl(g,v,C);v.flags|=128}var D=v.memoizedState;if(D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),mt(Nr,Nr.current),k)break;return null;case 22:case 23:return v.lanes=0,bi(g,v,C)}return oa(g,v,C)}function kh(g,v){switch(Km(v),v.tag){case 1:return rr(v.type)&&Nn(),g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 3:return Wc(),yt(rn),yt(Kt),Pl(),g=v.flags,(g&65536)!==0&&(g&128)===0?(v.flags=g&-65537|128,v):null;case 5:return Qm(v),null;case 13:if(yt(Nr),g=v.memoizedState,g!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(s(340));zc()}return g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 19:return yt(Nr),null;case 4:return Wc(),null;case 10:return rd(v.type._context),null;case 22:case 23:return Ad(),null;case 24:return null;default:return null}}var Zi=!1,di=!1,Ul=typeof WeakSet=="function"?WeakSet:Set,ht=null;function qa(g,v){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){Qi(g,v,k)}else C.current=null}function ho(g,v,C){try{C()}catch(k){Qi(g,v,k)}}var hg=!1;function pg(g,v){for(J(g.containerInfo),ht=v;ht!==null;)if(g=ht,v=g.child,(g.subtreeFlags&1028)!==0&&v!==null)v.return=g,ht=v;else for(;ht!==null;){g=ht;try{var C=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,D=C.memoizedState,H=g.stateNode,de=H.getSnapshotBeforeUpdate(g.elementType===g.type?k:ia(g.type,k),D);H.__reactInternalSnapshotBeforeUpdate=de}break;case 3:$e&&ot(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Me){Qi(g,g.return,Me)}if(v=g.sibling,v!==null){v.return=g.return,ht=v;break}ht=g.return}return C=hg,hg=!1,C}function po(g,v,C){var k=v.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var D=k=k.next;do{if((D.tag&g)===g){var H=D.destroy;D.destroy=void 0,H!==void 0&&ho(v,C,H)}D=D.next}while(D!==k)}}function wi(g,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var C=v=v.next;do{if((C.tag&g)===g){var k=C.create;C.destroy=k()}C=C.next}while(C!==v)}}function Ji(g){var v=g.ref;if(v!==null){var C=g.stateNode;switch(g.tag){case 5:g=Q(C);break;default:g=C}typeof v=="function"?v(g):v.current=g}}function yr(g,v,C){if(Ls&&typeof Ls.onCommitFiberUnmount=="function")try{Ls.onCommitFiberUnmount(Qu,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(g=v.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var k=g=g.next;do{var D=k,H=D.destroy;D=D.tag,H!==void 0&&((D&2)!==0||(D&4)!==0)&&ho(v,C,H),k=k.next}while(k!==g)}break;case 1:if(qa(v,C),g=v.stateNode,typeof g.componentWillUnmount=="function")try{g.props=v.memoizedProps,g.state=v.memoizedState,g.componentWillUnmount()}catch(de){Qi(v,C,de)}break;case 5:qa(v,C);break;case 4:$e?vg(g,v,C):ne&&ne&&(v=v.stateNode.containerInfo,C=Gt(v),Pn(v,C))}}function Xa(g,v,C){for(var k=v;;)if(yr(g,k,C),k.child===null||$e&&k.tag===4){if(k===v)break;for(;k.sibling===null;){if(k.return===null||k.return===v)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function mg(g){var v=g.alternate;v!==null&&(g.alternate=null,mg(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode,v!==null&&vt(v)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function gg(g){return g.tag===5||g.tag===3||g.tag===4}function jh(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||gg(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Ih(g){if($e){e:{for(var v=g.return;v!==null;){if(gg(v))break e;v=v.return}throw Error(s(160))}var C=v;switch(C.tag){case 5:v=C.stateNode,C.flags&32&&(We(v),C.flags&=-33),C=jh(g),Zc(g,C,v);break;case 3:case 4:v=C.stateNode.containerInfo,C=jh(g),Lh(g,C,v);break;default:throw Error(s(161))}}}function Lh(g,v,C){var k=g.tag;if(k===5||k===6)g=g.stateNode,v?Mt(C,g,v):Yt(C,g);else if(k!==4&&(g=g.child,g!==null))for(Lh(g,v,C),g=g.sibling;g!==null;)Lh(g,v,C),g=g.sibling}function Zc(g,v,C){var k=g.tag;if(k===5||k===6)g=g.stateNode,v?$t(C,g,v):Ut(C,g);else if(k!==4&&(g=g.child,g!==null))for(Zc(g,v,C),g=g.sibling;g!==null;)Zc(g,v,C),g=g.sibling}function vg(g,v,C){for(var k=v,D=!1,H,de;;){if(!D){D=k.return;e:for(;;){if(D===null)throw Error(s(160));switch(H=D.stateNode,D.tag){case 5:de=!1;break e;case 3:H=H.containerInfo,de=!0;break e;case 4:H=H.containerInfo,de=!0;break e}D=D.return}D=!0}if(k.tag===5||k.tag===6)Xa(g,k,C),de?me(H,k.stateNode):At(H,k.stateNode);else if(k.tag===18)de?he(H,k.stateNode):pe(H,k.stateNode);else if(k.tag===4){if(k.child!==null){H=k.stateNode.containerInfo,de=!0,k.child.return=k,k=k.child;continue}}else if(yr(g,k,C),k.child!==null){k.child.return=k,k=k.child;continue}if(k===v)break;for(;k.sibling===null;){if(k.return===null||k.return===v)return;k=k.return,k.tag===4&&(D=!1)}k.sibling.return=k.return,k=k.sibling}}function Zo(g,v){if($e){switch(v.tag){case 0:case 11:case 14:case 15:po(3,v,v.return),wi(3,v),po(5,v,v.return);return;case 1:return;case 5:var C=v.stateNode;if(C!=null){var k=v.memoizedProps;g=g!==null?g.memoizedProps:k;var D=v.type,H=v.updateQueue;v.updateQueue=null,H!==null&&hn(C,H,D,g,k,v)}return;case 6:if(v.stateNode===null)throw Error(s(162));C=v.memoizedProps,Qe(v.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:Ve&&g!==null&&g.memoizedState.isDehydrated&&ae(v.stateNode.containerInfo);return;case 12:return;case 13:Jc(v);return;case 19:Jc(v);return;case 17:return}throw Error(s(163))}switch(v.tag){case 0:case 11:case 14:case 15:po(3,v,v.return),wi(3,v),po(5,v,v.return);return;case 12:return;case 13:Jc(v);return;case 19:Jc(v);return;case 3:Ve&&g!==null&&g.memoizedState.isDehydrated&&ae(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,Pn(v.containerInfo,v.pendingChildren);break e}throw Error(s(163))}}function Jc(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new Ul),v.forEach(function(k){var D=I0.bind(null,g,k);C.has(k)||(C.add(k),k.then(D,D))})}}function w_(g,v){for(ht=v;ht!==null;){v=ht;var C=v.deletions;if(C!==null)for(var k=0;k<C.length;k++){var D=C[k];try{var H=g;$e?vg(H,D,v):Xa(H,D,v);var de=D.alternate;de!==null&&(de.return=null),D.return=null}catch(zt){Qi(D,v,zt)}}if(C=v.child,(v.subtreeFlags&12854)!==0&&C!==null)C.return=v,ht=C;else for(;ht!==null;){v=ht;try{var Me=v.flags;if(Me&32&&$e&&We(v.stateNode),Me&512){var He=v.alternate;if(He!==null){var ct=He.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Me&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var Ot=v.alternate;(Ot===null||Ot.memoizedState===null)&&(Md=Qr())}break;case 22:var un=v.memoizedState!==null,Xt=v.alternate,Sn=Xt!==null&&Xt.memoizedState!==null;if(C=v,$e){e:if(k=C,D=un,H=null,$e)for(var Et=k;;){if(Et.tag===5){if(H===null){H=Et;var Mi=Et.stateNode;D?lt(Mi):Ae(Et.stateNode,Et.memoizedProps)}}else if(Et.tag===6){if(H===null){var Ca=Et.stateNode;D?wt(Ca):ge(Ca,Et.memoizedProps)}}else if((Et.tag!==22&&Et.tag!==23||Et.memoizedState===null||Et===k)&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===k)break;for(;Et.sibling===null;){if(Et.return===null||Et.return===k)break e;H===Et&&(H=null),Et=Et.return}H===Et&&(H=null),Et.sibling.return=Et.return,Et=Et.sibling}}if(un&&!Sn&&(C.mode&1)!==0){ht=C;for(var ke=C.child;ke!==null;){for(C=ht=ke;ht!==null;){k=ht;var Ee=k.child;switch(k.tag){case 0:case 11:case 14:case 15:po(4,k,k.return);break;case 1:qa(k,k.return);var ze=k.stateNode;if(typeof ze.componentWillUnmount=="function"){var _t=k.return;try{ze.props=k.memoizedProps,ze.state=k.memoizedState,ze.componentWillUnmount()}catch(zt){Qi(k,_t,zt)}}break;case 5:qa(k,k.return);break;case 22:if(k.memoizedState!==null){xg(C);continue}}Ee!==null?(Ee.return=k,ht=Ee):xg(C)}ke=ke.sibling}}}switch(Me&4102){case 2:Ih(v),v.flags&=-3;break;case 6:Ih(v),v.flags&=-3,Zo(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,Zo(v.alternate,v);break;case 4:Zo(v.alternate,v)}}catch(zt){Qi(v,v.return,zt)}if(C=v.sibling,C!==null){C.return=v.return,ht=C;break}ht=v.return}}}function yd(g,v,C){ht=g,xd(g)}function xd(g,v,C){for(var k=(g.mode&1)!==0;ht!==null;){var D=ht,H=D.child;if(D.tag===22&&k){var de=D.memoizedState!==null||Zi;if(!de){var Me=D.alternate,He=Me!==null&&Me.memoizedState!==null||di;Me=Zi;var ct=di;if(Zi=de,(di=He)&&!ct)for(ht=D;ht!==null;)de=ht,He=de.child,de.tag===22&&de.memoizedState!==null?Fl(D):He!==null?(He.return=de,ht=He):Fl(D);for(;H!==null;)ht=H,xd(H),H=H.sibling;ht=D,Zi=Me,di=ct}yg(g)}else(D.subtreeFlags&8772)!==0&&H!==null?(H.return=D,ht=H):yg(g)}}function yg(g){for(;ht!==null;){var v=ht;if((v.flags&8772)!==0){var C=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:di||wi(5,v);break;case 1:var k=v.stateNode;if(v.flags&4&&!di)if(C===null)k.componentDidMount();else{var D=v.elementType===v.type?C.memoizedProps:ia(v.type,C.memoizedProps);k.componentDidUpdate(D,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var H=v.updateQueue;H!==null&&v0(v,H,k);break;case 3:var de=v.updateQueue;if(de!==null){if(C=null,v.child!==null)switch(v.child.tag){case 5:C=Q(v.child.stateNode);break;case 1:C=v.child.stateNode}v0(v,de,C)}break;case 5:var Me=v.stateNode;C===null&&v.flags&4&&mn(Me,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(Ve&&v.memoizedState===null){var He=v.alternate;if(He!==null){var ct=He.memoizedState;if(ct!==null){var Ot=ct.dehydrated;Ot!==null&&ue(Ot)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}di||v.flags&512&&Ji(v)}catch(un){Qi(v,v.return,un)}}if(v===g){ht=null;break}if(C=v.sibling,C!==null){C.return=v.return,ht=C;break}ht=v.return}}function xg(g){for(;ht!==null;){var v=ht;if(v===g){ht=null;break}var C=v.sibling;if(C!==null){C.return=v.return,ht=C;break}ht=v.return}}function Fl(g){for(;ht!==null;){var v=ht;try{switch(v.tag){case 0:case 11:case 15:var C=v.return;try{wi(4,v)}catch(He){Qi(v,C,He)}break;case 1:var k=v.stateNode;if(typeof k.componentDidMount=="function"){var D=v.return;try{k.componentDidMount()}catch(He){Qi(v,D,He)}}var H=v.return;try{Ji(v)}catch(He){Qi(v,H,He)}break;case 5:var de=v.return;try{Ji(v)}catch(He){Qi(v,de,He)}}}catch(He){Qi(v,v.return,He)}if(v===g){ht=null;break}var Me=v.sibling;if(Me!==null){Me.return=v.return,ht=Me;break}ht=v.return}}var bd=0,zl=1,Bl=2,mo=3,Qc=4;if(typeof Symbol=="function"&&Symbol.for){var Hl=Symbol.for;bd=Hl("selector.component"),zl=Hl("selector.has_pseudo_class"),Bl=Hl("selector.role"),mo=Hl("selector.test_id"),Qc=Hl("selector.text")}function wd(g){var v=Ne(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(s(364));return v}if(g=Te(g),g===null)throw Error(s(362));return g.stateNode.current}function _d(g,v){switch(v.$$typeof){case bd:if(g.type===v.value)return!0;break;case zl:e:{v=v.value,g=[g,0];for(var C=0;C<g.length;){var k=g[C++],D=g[C++],H=v[D];if(k.tag!==5||!Ye(k)){for(;H!=null&&_d(k,H);)D++,H=v[D];if(D===v.length){v=!0;break e}else for(k=k.child;k!==null;)g.push(k,D),k=k.sibling}}v=!1}return v;case Bl:if(g.tag===5&&Tt(g.stateNode,v.value))return!0;break;case Qc:if((g.tag===5||g.tag===6)&&(g=Je(g),g!==null&&0<=g.indexOf(v.value)))return!0;break;case mo:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Jo(g){switch(g.$$typeof){case bd:return"<"+(N(g.value)||"Unknown")+">";case zl:return":has("+(Jo(g)||"")+")";case Bl:return'[role="'+g.value+'"]';case Qc:return'"'+g.value+'"';case mo:return'[data-testname="'+g.value+'"]';default:throw Error(s(365))}}function Ma(g,v){var C=[];g=[g,0];for(var k=0;k<g.length;){var D=g[k++],H=g[k++],de=v[H];if(D.tag!==5||!Ye(D)){for(;de!=null&&_d(D,de);)H++,de=v[H];if(H===v.length)C.push(D);else for(D=D.child;D!==null;)g.push(D,H),D=D.sibling}}return C}function go(g,v){if(!ee)throw Error(s(363));g=wd(g),g=Ma(g,v),v=[],g=Array.from(g);for(var C=0;C<g.length;){var k=g[C++];if(k.tag===5)Ye(k)||v.push(k.stateNode);else for(k=k.child;k!==null;)g.push(k),k=k.sibling}return v}var bg=Math.ceil,Sd=o.ReactCurrentDispatcher,fs=o.ReactCurrentOwner,Zn=o.ReactCurrentBatchConfig,wn=0,Hr=null,Jn=null,Sr=0,Li=0,Vl=nn(0),Ir=0,eu=null,zs=0,Ea=0,Wl=0,vo=null,Gr=null,Md=0,Qo=1/0;function Gl(){Qo=Qr()+500}var tu=!1,xr=null,hs=null,nu=!1,Bs=null,$l=0,ql=0,yo=null,hr=-1,Lr=0;function zn(){return(wn&6)!==0?Qr():hr!==-1?hr:hr=Qr()}function ps(g){return(g.mode&1)===0?1:(wn&2)!==0&&Sr!==0?Sr&-Sr:g0.transition!==null?(Lr===0&&(g=kc,kc<<=1,(kc&4194240)===0&&(kc=64),Lr=g),Lr):(g=En,g!==0?g:De())}function Di(g,v,C){if(50<ql)throw ql=0,yo=null,Error(s(185));var k=el(g,v);return k===null?null:(xl(k,v,C),((wn&2)===0||k!==Hr)&&(k===Hr&&((wn&2)===0&&(Ea|=v),Ir===4&&Si(k,Sr)),la(k,C),v===1&&wn===0&&(g.mode&1)===0&&(Gl(),rh&&Ha())),k)}function el(g,v){g.lanes|=v;var C=g.alternate;for(C!==null&&(C.lanes|=v),C=g,g=g.return;g!==null;)g.childLanes|=v,C=g.alternate,C!==null&&(C.childLanes|=v),C=g,g=g.return;return C.tag===3?C.stateNode:null}function la(g,v){var C=g.callbackNode;m0(g,v);var k=Ju(g,g===Hr?Sr:0);if(k===0)C!==null&&Ic(C),g.callbackNode=null,g.callbackPriority=0;else if(v=k&-k,g.callbackPriority!==v){if(C!=null&&Ic(C),v===1)g.tag===0?ah(Ta.bind(null,g)):ih(Ta.bind(null,g)),dt?ie(function(){wn===0&&Ha()}):bl(wl,Ha),C=null;else{switch(to(k)){case 1:C=wl;break;case 4:C=y_;break;case 16:C=th;break;case 536870912:C=nh;break;default:C=th}C=Uh(C,_i.bind(null,g))}g.callbackPriority=v,g.callbackNode=C}}function _i(g,v){if(hr=-1,Lr=0,(wn&6)!==0)throw Error(s(327));var C=g.callbackNode;if(Hs()&&g.callbackNode!==C)return null;var k=Ju(g,g===Hr?Sr:0);if(k===0)return null;if((k&30)!==0||(k&g.expiredLanes)!==0||v)v=Cd(g,k);else{v=k;var D=wn;wn|=2;var H=Sg();(Hr!==g||Sr!==v)&&(Gl(),xo(g,v));do try{R0();break}catch(Me){_g(g,Me)}while(!0);Xi(),Sd.current=H,wn=D,Jn!==null?v=0:(Hr=null,Sr=0,v=Ir)}if(v!==0){if(v===2&&(D=Jf(g),D!==0&&(k=D,v=Ed(g,D))),v===1)throw C=eu,xo(g,0),Si(g,k),la(g,Qr()),C;if(v===6)Si(g,k);else{if(D=g.current.alternate,(k&30)===0&&!wg(D)&&(v=Cd(g,k),v===2&&(H=Jf(g),H!==0&&(k=H,v=Ed(g,H))),v===1))throw C=eu,xo(g,0),Si(g,k),la(g,Qr()),C;switch(g.finishedWork=D,g.finishedLanes=k,v){case 0:case 1:throw Error(s(345));case 2:ms(g,Gr);break;case 3:if(Si(g,k),(k&130023424)===k&&(v=Md+500-Qr(),10<v)){if(Ju(g,0)!==0)break;if(D=g.suspendedLanes,(D&k)!==k){zn(),g.pingedLanes|=g.suspendedLanes&D;break}g.timeoutHandle=Ie(ms.bind(null,g,Gr),v);break}ms(g,Gr);break;case 4:if(Si(g,k),(k&4194240)===k)break;for(v=g.eventTimes,D=-1;0<k;){var de=31-ir(k);H=1<<de,de=v[de],de>D&&(D=de),k&=~H}if(k=D,k=Qr()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*bg(k/1960))-k,10<k){g.timeoutHandle=Ie(ms.bind(null,g,Gr),k);break}ms(g,Gr);break;case 5:ms(g,Gr);break;default:throw Error(s(329))}}}return la(g,Qr()),g.callbackNode===C?_i.bind(null,g):null}function Ed(g,v){var C=vo;return g.current.memoizedState.isDehydrated&&(xo(g,v).flags|=256),g=Cd(g,v),g!==2&&(v=Gr,Gr=C,v!==null&&Td(v)),g}function Td(g){Gr===null?Gr=g:Gr.push.apply(Gr,g)}function wg(g){for(var v=g;;){if(v.flags&16384){var C=v.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var D=C[k],H=D.getSnapshot;D=D.value;try{if(!qi(H(),D))return!1}catch{return!1}}}if(C=v.child,v.subtreeFlags&16384&&C!==null)C.return=v,v=C;else{if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Si(g,v){for(v&=~Wl,v&=~Ea,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var C=31-ir(v),k=1<<C;g[C]=-1,v&=~k}}function Ta(g){if((wn&6)!==0)throw Error(s(327));Hs();var v=Ju(g,0);if((v&1)===0)return la(g,Qr()),null;var C=Cd(g,v);if(g.tag!==0&&C===2){var k=Jf(g);k!==0&&(v=k,C=Ed(g,k))}if(C===1)throw C=eu,xo(g,0),Si(g,v),la(g,Qr()),C;if(C===6)throw Error(s(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,ms(g,Gr),la(g,Qr()),null}function ru(g){Bs!==null&&Bs.tag===0&&(wn&6)===0&&Hs();var v=wn;wn|=1;var C=Zn.transition,k=En;try{if(Zn.transition=null,En=1,g)return g()}finally{En=k,Zn.transition=C,wn=v,(wn&6)===0&&Ha()}}function Ad(){Li=Vl.current,yt(Vl)}function xo(g,v){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==Pe&&(g.timeoutHandle=Pe,qe(C)),Jn!==null)for(C=Jn.return;C!==null;){var k=C;switch(Km(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&Nn();break;case 3:Wc(),yt(rn),yt(Kt),Pl();break;case 5:Qm(k);break;case 4:Wc();break;case 13:yt(Nr);break;case 19:yt(Nr);break;case 10:rd(k.type._context);break;case 22:case 23:Ad()}C=C.return}if(Hr=g,Jn=g=bo(g.current,null),Sr=Li=v,Ir=0,eu=null,Wl=Ea=zs=0,Gr=vo=null,Va!==null){for(v=0;v<Va.length;v++)if(C=Va[v],k=C.interleaved,k!==null){C.interleaved=null;var D=k.next,H=C.pending;if(H!==null){var de=H.next;H.next=D,k.next=de}C.pending=k}Va=null}return g}function _g(g,v){do{var C=Jn;try{if(Xi(),ad.current=Yc,vh){for(var k=Or.memoizedState;k!==null;){var D=k.queue;D!==null&&(D.pending=null),k=k.next}vh=!1}if(Nl=0,li=oi=Or=null,Ds=!1,Ol=0,fs.current=null,C===null||C.return===null){Ir=1,eu=v,Jn=null;break}e:{var H=g,de=C.return,Me=C,He=v;if(v=Sr,Me.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var ct=He,Ot=Me,un=Ot.tag;if((Ot.mode&1)===0&&(un===0||un===11||un===15)){var Xt=Ot.alternate;Xt?(Ot.updateQueue=Xt.updateQueue,Ot.memoizedState=Xt.memoizedState,Ot.lanes=Xt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var Sn=cg(de);if(Sn!==null){Sn.flags&=-257,kl(Sn,de,Me,H,v),Sn.mode&1&&lo(H,ct,v),v=Sn,He=ct;var Et=v.updateQueue;if(Et===null){var Mi=new Set;Mi.add(He),v.updateQueue=Mi}else Et.add(He);break e}else{if((v&1)===0){lo(H,ct,v),Dh();break e}He=Error(s(426))}}else if(_r&&Me.mode&1){var Ca=cg(de);if(Ca!==null){(Ca.flags&65536)===0&&(Ca.flags|=256),kl(Ca,de,Me,H,v),ph(He);break e}}H=He,Ir!==4&&(Ir=2),vo===null?vo=[H]:vo.push(H),He=lg(He,Me),Me=de;do{switch(Me.tag){case 3:Me.flags|=65536,v&=-v,Me.lanes|=v;var ke=P0(Me,He,v);lh(Me,ke);break e;case 1:H=He;var Ee=Me.type,ze=Me.stateNode;if((Me.flags&128)===0&&(typeof Ee.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(hs===null||!hs.has(ze)))){Me.flags|=65536,v&=-v,Me.lanes|=v;var _t=Ah(Me,H,v);lh(Me,_t);break e}}Me=Me.return}while(Me!==null)}Eg(C)}catch(zt){v=zt,Jn===C&&C!==null&&(Jn=C=C.return);continue}break}while(!0)}function Sg(){var g=Sd.current;return Sd.current=Yc,g===null?Yc:g}function Dh(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Hr===null||(zs&268435455)===0&&(Ea&268435455)===0||Si(Hr,Sr)}function Cd(g,v){var C=wn;wn|=2;var k=Sg();Hr===g&&Sr===v||xo(g,v);do try{O0();break}catch(D){_g(g,D)}while(!0);if(Xi(),wn=C,Sd.current=k,Jn!==null)throw Error(s(261));return Hr=null,Sr=0,Ir}function O0(){for(;Jn!==null;)Mg(Jn)}function R0(){for(;Jn!==null&&!Vo();)Mg(Jn)}function Mg(g){var v=Cg(g.alternate,g,Li);g.memoizedProps=g.pendingProps,v===null?Eg(g):Jn=v,fs.current=null}function Eg(g){var v=g;do{var C=v.alternate;if(g=v.return,(v.flags&32768)===0){if(C=Nh(C,v,Li),C!==null){Jn=C;return}}else{if(C=kh(C,v),C!==null){C.flags&=32767,Jn=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Ir=6,Jn=null;return}}if(v=v.sibling,v!==null){Jn=v;return}Jn=v=g}while(v!==null);Ir===0&&(Ir=5)}function ms(g,v){var C=En,k=Zn.transition;try{Zn.transition=null,En=1,k0(g,v,C)}finally{Zn.transition=k,En=C}return null}function k0(g,v,C){do Hs();while(Bs!==null);if((wn&6)!==0)throw Error(s(327));var k=g.finishedWork,D=g.finishedLanes;if(k===null)return null;if(g.finishedWork=null,g.finishedLanes=0,k===g.current)throw Error(s(177));g.callbackNode=null,g.callbackPriority=0;var H=k.lanes|k.childLanes;if(eh(g,H),g===Hr&&(Jn=Hr=null,Sr=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||nu||(nu=!0,Uh(th,function(){return Hs(),null})),H=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||H){H=Zn.transition,Zn.transition=null;var de=En;En=1;var Me=wn;wn|=4,fs.current=null,pg(g,k),w_(g,k),Z(g.containerInfo),g.current=k,yd(k),v_(),wn=Me,En=de,Zn.transition=H}else g.current=k;if(nu&&(nu=!1,Bs=g,$l=D),H=g.pendingLanes,H===0&&(hs=null),ed(k.stateNode),la(g,Qr()),v!==null)for(C=g.onRecoverableError,k=0;k<v.length;k++)C(v[k]);if(tu)throw tu=!1,g=xr,xr=null,g;return($l&1)!==0&&g.tag!==0&&Hs(),H=g.pendingLanes,(H&1)!==0?g===yo?ql++:(ql=0,yo=g):ql=0,Ha(),null}function Hs(){if(Bs!==null){var g=to($l),v=Zn.transition,C=En;try{if(Zn.transition=null,En=16>g?16:g,Bs===null)var k=!1;else{if(g=Bs,Bs=null,$l=0,(wn&6)!==0)throw Error(s(331));var D=wn;for(wn|=4,ht=g.current;ht!==null;){var H=ht,de=H.child;if((ht.flags&16)!==0){var Me=H.deletions;if(Me!==null){for(var He=0;He<Me.length;He++){var ct=Me[He];for(ht=ct;ht!==null;){var Ot=ht;switch(Ot.tag){case 0:case 11:case 15:po(8,Ot,H)}var un=Ot.child;if(un!==null)un.return=Ot,ht=un;else for(;ht!==null;){Ot=ht;var Xt=Ot.sibling,Sn=Ot.return;if(mg(Ot),Ot===ct){ht=null;break}if(Xt!==null){Xt.return=Sn,ht=Xt;break}ht=Sn}}}var Et=H.alternate;if(Et!==null){var Mi=Et.child;if(Mi!==null){Et.child=null;do{var Ca=Mi.sibling;Mi.sibling=null,Mi=Ca}while(Mi!==null)}}ht=H}}if((H.subtreeFlags&2064)!==0&&de!==null)de.return=H,ht=de;else e:for(;ht!==null;){if(H=ht,(H.flags&2048)!==0)switch(H.tag){case 0:case 11:case 15:po(9,H,H.return)}var ke=H.sibling;if(ke!==null){ke.return=H.return,ht=ke;break e}ht=H.return}}var Ee=g.current;for(ht=Ee;ht!==null;){de=ht;var ze=de.child;if((de.subtreeFlags&2064)!==0&&ze!==null)ze.return=de,ht=ze;else e:for(de=Ee;ht!==null;){if(Me=ht,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:wi(9,Me)}}catch(zt){Qi(Me,Me.return,zt)}if(Me===de){ht=null;break e}var _t=Me.sibling;if(_t!==null){_t.return=Me.return,ht=_t;break e}ht=Me.return}}if(wn=D,Ha(),Ls&&typeof Ls.onPostCommitFiberRoot=="function")try{Ls.onPostCommitFiberRoot(Qu,g)}catch{}k=!0}return k}finally{En=C,Zn.transition=v}}return!1}function Pd(g,v,C){v=lg(C,v),v=P0(g,v,1),Wo(g,v),v=zn(),g=el(g,1),g!==null&&(xl(g,1,v),la(g,v))}function Qi(g,v,C){if(g.tag===3)Pd(g,g,C);else for(;v!==null;){if(v.tag===3){Pd(v,g,C);break}else if(v.tag===1){var k=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(hs===null||!hs.has(k))){g=lg(C,g),g=Ah(v,g,1),Wo(v,g),g=zn(),v=el(v,1),v!==null&&(xl(v,1,g),la(v,g));break}}v=v.return}}function Tg(g,v,C){var k=g.pingCache;k!==null&&k.delete(v),v=zn(),g.pingedLanes|=g.suspendedLanes&C,Hr===g&&(Sr&C)===C&&(Ir===4||Ir===3&&(Sr&130023424)===Sr&&500>Qr()-Md?xo(g,0):Wl|=C),la(g,v)}function Ag(g,v){v===0&&((g.mode&1)===0?v=1:(v=Fn,Fn<<=1,(Fn&130023424)===0&&(Fn=4194304)));var C=zn();g=el(g,v),g!==null&&(xl(g,v,C),la(g,C))}function j0(g){var v=g.memoizedState,C=0;v!==null&&(C=v.retryLane),Ag(g,C)}function I0(g,v){var C=0;switch(g.tag){case 13:var k=g.stateNode,D=g.memoizedState;D!==null&&(C=D.retryLane);break;case 19:k=g.stateNode;break;default:throw Error(s(314))}k!==null&&k.delete(v),Ag(g,C)}var Cg;Cg=function(g,v,C){if(g!==null)if(g.memoizedProps!==v.pendingProps||rn.current)ui=!0;else{if((g.lanes&C)===0&&(v.flags&128)===0)return ui=!1,Rh(g,v,C);ui=(g.flags&131072)!==0}else ui=!1,_r&&(v.flags&1048576)!==0&&w0(v,fh,v.index);switch(v.lanes=0,v.tag){case 2:var k=v.type;g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps;var D=vr(v,Kt.current);Lc(v,C),D=Gc(null,v,k,g,D,C);var H=Xo();return v.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,rr(k)?(H=!0,gn(v)):H=!1,v.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,Dc(v),D.updater=uh,v.stateNode=D,D._reactInternals=v,Xm(v,k,g,C),v=Ii(null,v,k,!0,H,C)):(v.tag=0,_r&&H&&Ym(v),jr(null,v,D,C),v=v.child),v;case 16:k=v.elementType;e:{switch(g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps,D=k._init,k=D(k._payload),v.type=k,D=v.tag=__(k),g=ia(k,g),D){case 0:v=fo(null,v,k,g,C);break e;case 1:v=Il(null,v,k,g,C);break e;case 11:v=fr(null,v,k,g,C);break e;case 14:v=ar(null,v,k,ia(k.type,g),C);break e}throw Error(s(306,k,""))}return v;case 0:return k=v.type,D=v.pendingProps,D=v.elementType===k?D:ia(k,D),fo(g,v,k,D,C);case 1:return k=v.type,D=v.pendingProps,D=v.elementType===k?D:ia(k,D),Il(g,v,k,D,C);case 3:e:{if(pd(v),g===null)throw Error(s(387));k=v.pendingProps,H=v.memoizedState,D=H.element,Gm(g,v),ch(v,k,null,C);var de=v.memoizedState;if(k=de.element,Ve&&H.isDehydrated)if(H={element:k,isDehydrated:!1,cache:de.cache,transitions:de.transitions},v.updateQueue.baseState=H,v.memoizedState=H,v.flags&256){D=Error(s(423)),v=dg(g,v,k,C,D);break e}else if(k!==D){D=Error(s(424)),v=dg(g,v,k,C,D);break e}else for(Ve&&(xi=yl(v.stateNode.containerInfo),Yi=v,_r=!0,$a=null,Fc=!1),C=M0(v,null,k,C),v.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(zc(),k===D){v=oa(g,v,C);break e}jr(g,v,k,C)}v=v.child}return v;case 5:return E0(v),g===null&&$o(v),k=v.type,D=v.pendingProps,H=g!==null?g.memoizedProps:null,de=D.children,be(k,D)?de=null:H!==null&&be(k,H)&&(v.flags|=32),Ki(g,v),jr(g,v,de,C),v.child;case 6:return g===null&&$o(v),null;case 13:return fg(g,v,C);case 4:return mh(v,v.stateNode.containerInfo),k=v.pendingProps,g===null?v.child=so(v,null,k,C):jr(g,v,k,C),v.child;case 11:return k=v.type,D=v.pendingProps,D=v.elementType===k?D:ia(k,D),fr(g,v,k,D,C);case 7:return jr(g,v,v.pendingProps,C),v.child;case 8:return jr(g,v,v.pendingProps.children,C),v.child;case 12:return jr(g,v,v.pendingProps.children,C),v.child;case 10:e:{if(k=v.type._context,D=v.pendingProps,H=v.memoizedProps,de=D.value,Sl(v,k,de),H!==null)if(qi(H.value,de)){if(H.children===D.children&&!rn.current){v=oa(g,v,C);break e}}else for(H=v.child,H!==null&&(H.return=v);H!==null;){var Me=H.dependencies;if(Me!==null){de=H.child;for(var He=Me.firstContext;He!==null;){if(He.context===k){if(H.tag===1){He=ro(-1,C&-C),He.tag=2;var ct=H.updateQueue;if(ct!==null){ct=ct.shared;var Ot=ct.pending;Ot===null?He.next=He:(He.next=Ot.next,Ot.next=He),ct.pending=He}}H.lanes|=C,He=H.alternate,He!==null&&(He.lanes|=C),Ml(H.return,C,v),Me.lanes|=C;break}He=He.next}}else if(H.tag===10)de=H.type===v.type?null:H.child;else if(H.tag===18){if(de=H.return,de===null)throw Error(s(341));de.lanes|=C,Me=de.alternate,Me!==null&&(Me.lanes|=C),Ml(de,C,v),de=H.sibling}else de=H.child;if(de!==null)de.return=H;else for(de=H;de!==null;){if(de===v){de=null;break}if(H=de.sibling,H!==null){H.return=de.return,de=H;break}de=de.return}H=de}jr(g,v,D.children,C),v=v.child}return v;case 9:return D=v.type,k=v.pendingProps.children,Lc(v,C),D=aa(D),k=k(D),v.flags|=1,jr(g,v,k,C),v.child;case 14:return k=v.type,D=ia(k,v.pendingProps),D=ia(k.type,D),ar(g,v,k,D,C);case 15:return uo(g,v,v.type,v.pendingProps,C);case 17:return k=v.type,D=v.pendingProps,D=v.elementType===k?D:ia(k,D),g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,rr(k)?(g=!0,gn(v)):g=!1,Lc(v,C),x0(v,k,D),Xm(v,k,D,C),Ii(null,v,k,!0,g,C);case 19:return Dl(g,v,C);case 22:return bi(g,v,C)}throw Error(s(156,v.tag))};function Uh(g,v){return bl(g,v)}function L0(g,v,C,k){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(g,v,C,k){return new L0(g,v,C,k)}function Fh(g){return g=g.prototype,!(!g||!g.isReactComponent)}function __(g){if(typeof g=="function")return Fh(g)?1:0;if(g!=null){if(g=g.$$typeof,g===w)return 11;if(g===M)return 14}return 2}function bo(g,v){var C=g.alternate;return C===null?(C=Aa(g.tag,v,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=v,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,v=g.dependencies,C.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function zh(g,v,C,k,D,H){var de=2;if(k=g,typeof g=="function")Fh(g)&&(de=1);else if(typeof g=="string")de=5;else e:switch(g){case f:return Xl(C.children,D,H,v);case h:de=8,D|=8;break;case m:return g=Aa(12,C,v,D|2),g.elementType=m,g.lanes=H,g;case x:return g=Aa(13,C,v,D),g.elementType=x,g.lanes=H,g;case _:return g=Aa(19,C,v,D),g.elementType=_,g.lanes=H,g;case A:return Nd(C,D,H,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case y:de=10;break e;case b:de=9;break e;case w:de=11;break e;case M:de=14;break e;case E:de=16,k=null;break e}throw Error(s(130,g==null?g:typeof g,""))}return v=Aa(de,C,v,D),v.elementType=g,v.type=k,v.lanes=H,v}function Xl(g,v,C,k){return g=Aa(7,g,k,v),g.lanes=C,g}function Nd(g,v,C,k){return g=Aa(22,g,k,v),g.elementType=A,g.lanes=C,g.stateNode={},g}function Bh(g,v,C){return g=Aa(6,g,null,v),g.lanes=C,g}function Hh(g,v,C){return v=Aa(4,g.children!==null?g.children:[],g.key,v),v.lanes=C,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function Vh(g,v,C,k,D){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qf(0),this.expirationTimes=Qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qf(0),this.identifierPrefix=k,this.onRecoverableError=D,Ve&&(this.mutableSourceEagerHydrationData=null)}function D0(g,v,C,k,D,H,de,Me,He){return g=new Vh(g,v,C,Me,He),v===1?(v=1,H===!0&&(v|=8)):v=0,H=Aa(3,null,null,v),g.current=H,H.stateNode=g,H.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null},Dc(H),g}function U0(g){if(!g)return tn;g=g._reactInternals;e:{if(T(g)!==g||g.tag!==1)throw Error(s(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(rr(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(s(171))}if(g.tag===1){var C=g.type;if(rr(C))return Pr(g,C,v)}return v}function F0(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(s(188)):(g=Object.keys(g).join(","),Error(s(268,g)));return g=B(v),g===null?null:g.stateNode}function Ya(g,v){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<v?C:v}}function Od(g,v){Ya(g,v),(g=g.alternate)&&Ya(g,v)}function Wh(g){return g=B(g),g===null?null:g.stateNode}function z0(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var v=zn();Di(g,134217728,v),Od(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=zn(),C=ps(g);Di(g,C,v),Od(g,C)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var C=jc(v.pendingLanes);C!==0&&(Is(v,C|1),la(v,Qr()),(wn&6)===0&&(Gl(),Ha()))}break;case 13:var k=zn();ru(function(){return Di(g,1,k)}),Od(g,1)}},t.batchedUpdates=function(g,v){var C=wn;wn|=1;try{return g(v)}finally{wn=C,wn===0&&(Gl(),rh&&Ha())}},t.createComponentSelector=function(g){return{$$typeof:bd,value:g}},t.createContainer=function(g,v,C,k,D,H,de){return D0(g,v,!1,null,C,k,D,H,de)},t.createHasPseudoClassSelector=function(g){return{$$typeof:zl,value:g}},t.createHydrationContainer=function(g,v,C,k,D,H,de,Me,He){return g=D0(C,k,!0,g,D,H,de,Me,He),g.context=U0(null),C=g.current,k=zn(),D=ps(C),H=ro(k,D),H.callback=v??null,Wo(C,H),g.current.lanes=D,xl(g,D,k),la(g,k),g},t.createPortal=function(g,v,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:k==null?null:""+k,children:g,containerInfo:v,implementation:C}},t.createRoleSelector=function(g){return{$$typeof:Bl,value:g}},t.createTestNameSelector=function(g){return{$$typeof:mo,value:g}},t.createTextSelector=function(g){return{$$typeof:Qc,value:g}},t.deferredUpdates=function(g){var v=En,C=Zn.transition;try{return Zn.transition=null,En=16,g()}finally{En=v,Zn.transition=C}},t.discreteUpdates=function(g,v,C,k,D){var H=En,de=Zn.transition;try{return Zn.transition=null,En=1,g(v,C,k,D)}finally{En=H,Zn.transition=de,wn===0&&Gl()}},t.findAllNodes=go,t.findBoundingRects=function(g,v){if(!ee)throw Error(s(363));v=go(g,v),g=[];for(var C=0;C<v.length;C++)g.push(Ze(v[C]));for(v=g.length-1;0<v;v--){C=g[v];for(var k=C.x,D=k+C.width,H=C.y,de=H+C.height,Me=v-1;0<=Me;Me--)if(v!==Me){var He=g[Me],ct=He.x,Ot=ct+He.width,un=He.y,Xt=un+He.height;if(k>=ct&&H>=un&&D<=Ot&&de<=Xt){g.splice(v,1);break}else if(k!==ct||C.width!==He.width||Xt<H||un>de){if(!(H!==un||C.height!==He.height||Ot<k||ct>D)){ct>k&&(He.width+=ct-k,He.x=k),Ot<D&&(He.width=D-ct),g.splice(v,1);break}}else{un>H&&(He.height+=un-H,He.y=H),Xt<de&&(He.height=de-un),g.splice(v,1);break}}}return g},t.findHostInstance=F0,t.findHostInstanceWithNoPortals=function(g){return g=U(g),g=g!==null?W(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return F0(g)},t.flushControlled=function(g){var v=wn;wn|=1;var C=Zn.transition,k=En;try{Zn.transition=null,En=1,g()}finally{En=k,Zn.transition=C,wn=v,wn===0&&(Gl(),Ha())}},t.flushPassiveEffects=Hs,t.flushSync=ru,t.focusWithin=function(g,v){if(!ee)throw Error(s(363));for(g=wd(g),v=Ma(g,v),v=Array.from(v),g=0;g<v.length;){var C=v[g++];if(!Ye(C)){if(C.tag===5&&pt(C.stateNode))return!0;for(C=C.child;C!==null;)v.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return En},t.getFindAllNodesFailureDescription=function(g,v){if(!ee)throw Error(s(363));var C=0,k=[];g=[wd(g),0];for(var D=0;D<g.length;){var H=g[D++],de=g[D++],Me=v[de];if((H.tag!==5||!Ye(H))&&(_d(H,Me)&&(k.push(Jo(Me)),de++,de>C&&(C=de)),de<v.length))for(H=H.child;H!==null;)g.push(H,de),H=H.sibling}if(C<v.length){for(g=[];C<v.length;C++)g.push(Jo(v[C]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return Q(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Wh,findFiberByHostInstance:g.findFiberByHostInstance||z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{Qu=v.inject(g),Ls=v}catch{}g=!!v.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,v,C,k){if(!ee)throw Error(s(363));g=go(g,v);var D=St(g,C,k).disconnect;return{disconnect:function(){D()}}},t.registerMutableSourceForHydration=function(g,v){var C=v._getVersion;C=C(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,C]:g.mutableSourceEagerHydrationData.push(v,C)},t.runWithPriority=function(g,v){var C=En;try{return En=g,v()}finally{En=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,v,C,k){var D=v.current,H=zn(),de=ps(D);return C=U0(C),v.context===null?v.context=C:v.pendingContext=C,v=ro(H,de),v.payload={element:g},k=k===void 0?null:k,k!==null&&(v.callback=k),Wo(D,v),g=Di(D,de,H),g!==null&&oh(g,D,de),de},t}),WA}var CF;function Lye(){return CF||(CF=1,BA.exports=Iye()),BA.exports}var Dye=Lye();const Uye=Kn(Dye);var GA={exports:{}},$A={};var PF;function Fye(){return PF||(PF=1,(function(n){function e(G,J){var Z=G.length;G.push(J);e:for(;0<Z;){var X=Z-1>>>1,te=G[X];if(0<i(te,J))G[X]=J,G[Z]=te,Z=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Z=G.pop();if(Z!==J){G[0]=Z;e:for(var X=0,te=G.length,ce=te>>>1;X<ce;){var le=2*(X+1)-1,be=G[le],Se=le+1,Ie=G[Se];if(0>i(be,Z))Se<te&&0>i(Ie,be)?(G[X]=Ie,G[Se]=Z,X=Se):(G[X]=be,G[le]=Z,X=le);else if(Se<te&&0>i(Ie,Z))G[X]=Ie,G[Se]=Z,X=Se;else break e}}return J}function i(G,J){var Z=G.sortIndex-J.sortIndex;return Z!==0?Z:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var J=t(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=G)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(G){if(w=!1,E(G),!b)if(t(l)!==null)b=!0,Q(R);else{var J=t(u);J!==null&&se(A,J.startTime-G)}}function R(G,J){b=!1,w&&(w=!1,_(L),L=-1),y=!0;var Z=m;try{for(E(J),h=t(l);h!==null&&(!(h.expirationTime>J)||G&&!U());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var te=X(h.expirationTime<=J);J=n.unstable_now(),typeof te=="function"?h.callback=te:h===t(l)&&r(l),E(J)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var le=t(u);le!==null&&se(A,le.startTime-J),ce=!1}return ce}finally{h=null,m=Z,y=!1}}var O=!1,N=null,L=-1,T=5,j=-1;function U(){return!(n.unstable_now()-j<T)}function B(){if(N!==null){var G=n.unstable_now();j=G;var J=!0;try{J=N(!0,G)}finally{J?V():(O=!1,N=null)}}else O=!1}var V;if(typeof M=="function")V=function(){M(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=B,V=function(){Y.postMessage(null)}}else V=function(){x(B,0)};function Q(G){N=G,O||(O=!0,V())}function se(G,J){L=x(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){b||y||(b=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var Z=m;m=J;try{return G()}finally{m=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=m;m=G;try{return J()}finally{m=Z}},n.unstable_scheduleCallback=function(G,J,Z){var X=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,G={id:f++,callback:J,priorityLevel:G,startTime:Z,expirationTime:te,sortIndex:-1},Z>X?(G.sortIndex=Z,e(u,G),t(l)===null&&G===t(u)&&(w?(_(L),L=-1):w=!0,se(A,Z-X))):(G.sortIndex=te,e(l,G),b||y||(b=!0,Q(R))),G},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(G){var J=m;return function(){var Z=m;m=J;try{return G.apply(this,arguments)}finally{m=Z}}}})($A)),$A}var NF;function zye(){return NF||(NF=1,GA.exports=Fye()),GA.exports}var OF=zye();const kO={},fV=n=>void Object.assign(kO,n);function Bye(n,e){function t(f,{args:h=[],attach:m,...y},b){let w=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=y.object;x=Mp(_,{type:f,root:b,attach:m,primitive:!0})}else{const _=kO[w];if(!_)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=Mp(new _(...h),{type:f,root:b,attach:m,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),w!=="inject"&&YA(x,y),x}function r(f,h){let m=!1;if(h){var y,b;(y=h.__r3f)!=null&&y.attach?XA(f,h,h.__r3f.attach):h.isObject3D&&f.isObject3D&&(f.add(h),m=!0),m||(b=f.__r3f)==null||b.objects.push(h),h.__r3f||Mp(h,{}),h.__r3f.parent=f,AP(h),Ep(h)}}function i(f,h,m){let y=!1;if(h){var b,w;if((b=h.__r3f)!=null&&b.attach)XA(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){h.parent=f,h.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:h});const x=f.children.filter(M=>M!==h),_=x.indexOf(m);f.children=[...x.slice(0,_),h,...x.slice(_)],y=!0}y||(w=f.__r3f)==null||w.objects.push(h),h.__r3f||Mp(h,{}),h.__r3f.parent=f,AP(h),Ep(h)}}function a(f,h,m=!1){f&&[...f].forEach(y=>s(h,y,m))}function s(f,h,m){if(h){var y,b,w;if(h.__r3f&&(h.__r3f.parent=null),(y=f.__r3f)!=null&&y.objects&&(f.__r3f.objects=f.__r3f.objects.filter(A=>A!==h)),(b=h.__r3f)!=null&&b.attach)LF(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){var x;f.remove(h),(x=h.__r3f)!=null&&x.root&&Xye(Ob(h),h)}const M=(w=h.__r3f)==null?void 0:w.primitive,E=!M&&(m===void 0?h.dispose!==null:m);if(!M){var _;a((_=h.__r3f)==null?void 0:_.objects,h,E),a(h.children,h,E)}if(delete h.__r3f,E&&h.dispose&&h.type!=="Scene"){const A=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?OF.unstable_scheduleCallback(OF.unstable_IdlePriority,A):A()}Ep(f)}}function o(f,h,m,y){var b;const w=(b=f.__r3f)==null?void 0:b.parent;if(!w)return;const x=t(h,m,f.__r3f.root);if(f.children){for(const _ of f.children)_.__r3f&&r(x,_);f.children=f.children.filter(_=>!_.__r3f)}f.__r3f.objects.forEach(_=>r(x,_)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||s(w,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(w,x),x.raycast&&x.__r3f.eventCount&&Ob(x).getState().internal.interaction.push(x),[y,y.alternate].forEach(_=>{_!==null&&(_.stateNode=x,_.ref&&(typeof _.ref=="function"?_.ref(x):_.ref.current=x))})}const l=()=>{};return{reconciler:Uye({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,h)=>{if(!h)return;const m=f.getState().scene;m.__r3f&&(m.__r3f.root=f,r(m,h))},removeChildFromContainer:(f,h)=>{h&&s(f.getState().scene,h)},insertInContainerBefore:(f,h,m)=>{if(!h||!m)return;const y=f.getState().scene;y.__r3f&&i(y,h,m)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var h;return!!((h=f?.__r3f)!=null?h:{}).handlers},prepareUpdate(f,h,m,y){var b;if(((b=f?.__r3f)!=null?b:{}).primitive&&y.object&&y.object!==f)return[!0];{const{args:x=[],children:_,...M}=y,{args:E=[],children:A,...R}=m;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((N,L)=>N!==E[L]))return[!0];const O=xV(f,M,R,!0);return O.changes.length?[!1,O]:null}},commitUpdate(f,[h,m],y,b,w,x){h?o(f,y,w,x):YA(f,m)},commitMount(f,h,m,y){var b;const w=(b=f.__r3f)!=null?b:{};f.raycast&&w.handlers&&w.eventCount&&Ob(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Mp(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var h;const{attach:m,parent:y}=(h=f.__r3f)!=null?h:{};m&&y&&LF(y,f,m),f.isObject3D&&(f.visible=!1),Ep(f)},unhideInstance(f,h){var m;const{attach:y,parent:b}=(m=f.__r3f)!=null?m:{};y&&b&&XA(b,f,y),(f.isObject3D&&h.visible==null||h.visible)&&(f.visible=!0),Ep(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Up.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ar.fun(performance.now)?performance.now:Ar.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ar.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ar.fun(clearTimeout)?clearTimeout:void 0}),applyProps:YA}}var RF,kF;const qA=n=>"colorSpace"in n||"outputColorSpace"in n,hV=()=>{var n;return(n=kO.ColorManagement)!=null?n:null},pV=n=>n&&n.isOrthographicCamera,Hye=n=>n&&n.hasOwnProperty("current"),h0=typeof window<"u"&&((RF=window.document)!=null&&RF.createElement||((kF=window.navigator)==null?void 0:kF.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function mV(n){const e=z.useRef(n);return h0(()=>void(e.current=n),[n]),e}function Vye({set:n}){return h0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class gV extends z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gV.getDerivedStateFromError=()=>({error:!0});const vV="__default",jF=new Map,Wye=n=>n&&!!n.memoized&&!!n.changes;function yV(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const sv=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Ob(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ar={obj:n=>n===Object(n)&&!Ar.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ar.str(n)||Ar.num(n)||Ar.boo(n))return n===e;const a=Ar.obj(n);if(a&&r==="reference")return n===e;const s=Ar.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!Ar.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(Ar.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Gye(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function $ye(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Mp(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function TP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((a,s)=>a[s],n),{target:t,key:i}}else return{target:t,key:e}}const IF=/-\d+$/;function XA(n,e,t){if(Ar.str(t)){if(IF.test(t)){const a=t.replace(IF,""),{target:s,key:o}=TP(n,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=TP(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function LF(n,e,t){var r,i;if(Ar.str(t)){const{target:a,key:s}=TP(n,t),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function xV(n,{children:e,key:t,ref:r,...i},{children:a,key:s,ref:o,...l}={},u=!1){const f=n.__r3f,h=Object.entries(i),m=[];if(u){const b=Object.keys(l);for(let w=0;w<b.length;w++)i.hasOwnProperty(b[w])||h.unshift([b[w],vV+"remove"])}h.forEach(([b,w])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&b==="object"||Ar.equ(w,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return m.push([b,w,!0,[]]);let _=[];b.includes("-")&&(_=b.split("-")),m.push([b,w,!1,_]);for(const M in i){const E=i[M];M.startsWith(`${b}-`)&&m.push([M,E,!1,M.split("-")])}});const y={...i};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:m}}function YA(n,e){var t;const r=n.__r3f,i=r?.root,a=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:o}=Wye(e)?e:xV(n,e),l=r?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=s);for(let m=0;m<o.length;m++){let[y,b,w,x]=o[m];if(qA(n)){const A="srgb",R="srgb-linear";y==="encoding"?(y="colorSpace",b=b===3001?A:R):y==="outputEncoding"&&(y="outputColorSpace",b=b===3001?A:R)}let _=n,M=_[y];if(x.length&&(M=x.reduce((E,A)=>E[A],n),!(M&&M.set))){const[E,...A]=x.reverse();_=A.reverse().reduce((R,O)=>R[O],n),y=E}if(b===vV+"remove")if(_.constructor){let E=jF.get(_.constructor);E||(E=new _.constructor,jF.set(_.constructor,E)),b=E[y]}else b=0;if(w&&r)b?r.handlers[y]=b:delete r.handlers[y],r.eventCount=Object.keys(r.handlers).length;else if(M&&M.set&&(M.copy||M instanceof Sf)){if(Array.isArray(b))M.fromArray?M.fromArray(b):M.set(...b);else if(M.copy&&b&&b.constructor&&M.constructor===b.constructor)M.copy(b);else if(b!==void 0){var u;const E=(u=M)==null?void 0:u.isColor;!E&&M.setScalar?M.setScalar(b):M instanceof Sf&&b instanceof Sf?M.mask=b.mask:M.set(b),!hV()&&a&&!a.linear&&E&&M.convertSRGBToLinear()}}else{var f;if(_[y]=b,(f=_[y])!=null&&f.isTexture&&_[y].format===gi&&_[y].type===As&&a){const E=_[y];qA(E)&&qA(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}}Ep(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const m=Ob(n).getState().internal,y=m.interaction.indexOf(n);y>-1&&m.interaction.splice(y,1),r.eventCount&&m.interaction.push(n)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=n.__r3f)!=null&&t.parent&&AP(n),n}function Ep(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function AP(n){n.onUpdate==null||n.onUpdate(n)}function bV(n,e){n.manual||(pV(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function mb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function qye(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Up.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Up.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Up.ContinuousEventPriority;default:return Up.DefaultEventPriority}}function wV(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Xye(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{wV(t.capturedMap,e,r,i)})}function Yye(n){function e(l){const{internal:u}=n.getState(),f=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+f]}))}function r(l,u){const f=n.getState(),h=new Set,m=[],y=u?u(f.internal.interaction):f.internal.interaction;for(let _=0;_<y.length;_++){const M=sv(y[_]);M&&(M.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function b(_){const M=sv(_);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var E;M.events.compute==null||M.events.compute(l,M,(E=M.previousRoot)==null?void 0:E.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(_,!0):[]}let w=y.flatMap(b).sort((_,M)=>{const E=sv(_.object),A=sv(M.object);return!E||!A?_.distance-M.distance:A.events.priority-E.events.priority||_.distance-M.distance}).filter(_=>{const M=mb(_);return h.has(M)?!1:(h.add(M),!0)});f.events.filter&&(w=f.events.filter(w,f));for(const _ of w){let M=_.object;for(;M;){var x;(x=M.__r3f)!=null&&x.eventCount&&m.push({..._,eventObject:M}),M=M.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let _ of f.internal.capturedMap.get(l.pointerId).values())h.has(mb(_.intersection))||m.push(_.intersection);return m}function i(l,u,f,h){const m=n.getState();if(l.length){const y={stopped:!1};for(const b of l){const w=sv(b.object)||m,{raycaster:x,pointer:_,camera:M,internal:E}=w,A=new oe(_.x,_.y,0).unproject(M),R=j=>{var U,B;return(U=(B=E.capturedMap.get(j))==null?void 0:B.has(b.eventObject))!=null?U:!1},O=j=>{const U={intersection:b,target:u.target};E.capturedMap.has(j)?E.capturedMap.get(j).set(b.eventObject,U):E.capturedMap.set(j,new Map([[b.eventObject,U]])),u.target.setPointerCapture(j)},N=j=>{const U=E.capturedMap.get(j);U&&wV(E.capturedMap,b.eventObject,U,j)};let L={};for(let j in u){let U=u[j];typeof U!="function"&&(L[j]=U)}let T={...b,...L,pointer:_,intersections:l,stopped:y.stopped,delta:f,unprojectedPoint:A,ray:x.ray,camera:M,stopPropagation(){const j="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!j||j.has(b.eventObject))&&(T.stopped=y.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(U=>U.eventObject===b.eventObject))){const U=l.slice(0,l.indexOf(b));a([...U,b])}},target:{hasPointerCapture:R,setPointerCapture:O,releasePointerCapture:N},currentTarget:{hasPointerCapture:R,setPointerCapture:O,releasePointerCapture:N},nativeEvent:u};if(h(T),y.stopped===!0)break}}return l}function a(l){const{internal:u}=n.getState();for(const f of u.hovered.values())if(!l.length||!l.find(h=>h.object===f.object&&h.index===f.index&&h.instanceId===f.instanceId)){const m=f.eventObject.__r3f,y=m?.handlers;if(u.hovered.delete(mb(f)),m!=null&&m.eventCount){const b={...f,intersections:l};y.onPointerOut==null||y.onPointerOut(b),y.onPointerLeave==null||y.onPointerLeave(b)}}}function s(l,u){for(let f=0;f<u.length;f++){const h=u[f].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:f}=n.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),a([]))})}}return function(f){const{onPointerMissed:h,internal:m}=n.getState();m.lastEvent.current=f;const y=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(f,y?t:void 0),_=b?e(f):0;l==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=x.map(E=>E.eventObject)),b&&!x.length&&_<=2&&(s(f,m.interaction),h&&h(f)),y&&a(x);function M(E){const A=E.eventObject,R=A.__r3f,O=R?.handlers;if(R!=null&&R.eventCount)if(y){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const N=mb(E),L=m.hovered.get(N);L?L.stopped&&E.stopPropagation():(m.hovered.set(N,E),O.onPointerOver==null||O.onPointerOver(E),O.onPointerEnter==null||O.onPointerEnter(E))}O.onPointerMove==null||O.onPointerMove(E)}else{const N=O[l];N?(!b||m.initialHits.includes(A))&&(s(f,m.interaction.filter(L=>!m.initialHits.includes(L))),N(E)):b&&m.initialHits.includes(A)&&s(f,m.interaction.filter(L=>!m.initialHits.includes(L)))}}i(x,f,_,M)}}return{handlePointer:o}}const Kye=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],_V=n=>!!(n!=null&&n.render),jO=z.createContext(null),Zye=(n,e)=>{const t=cV((o,l)=>{const u=new oe,f=new oe,h=new oe;function m(_=l().camera,M=f,E=l().size){const{width:A,height:R,top:O,left:N}=E,L=A/R;M.isVector3?h.copy(M):h.set(...M);const T=_.getWorldPosition(u).distanceTo(h);if(pV(_))return{width:A/_.zoom,height:R/_.zoom,top:O,left:N,factor:1,distance:T,aspect:L};{const j=_.fov*Math.PI/180,U=2*Math.tan(j/2)*T,B=U*(A/R);return{width:B,height:U,top:O,left:N,factor:A/B,distance:T,aspect:L}}}let y;const b=_=>o(M=>({performance:{...M.performance,current:_}})),w=new Xe;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,M)=>e(_,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new CO,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();y&&clearTimeout(y),_.performance.current!==_.performance.min&&b(_.performance.min),y=setTimeout(()=>b(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>o(M=>({...M,events:{...M.events,..._}})),setSize:(_,M,E,A,R)=>{const O=l().camera,N={width:_,height:M,top:A||0,left:R||0,updateStyle:E};o(L=>({size:N,viewport:{...L.viewport,...m(O,f,N)}}))},setDpr:_=>o(M=>{const E=yV(_);return{viewport:{...M.viewport,dpr:E,initialDpr:M.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,_!=="never"&&(M.start(),M.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,M,E)=>{const A=l().internal;return A.priority=A.priority+(M>0?1:0),A.subscribers.push({ref:_,priority:M,store:E}),A.subscribers=A.subscribers.sort((R,O)=>R.priority-O.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(M>0?1:0),R.subscribers=R.subscribers.filter(O=>O.ref!==_))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:f,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var m;i=l,a=u.dpr,bV(o,l),f.setPixelRatio(u.dpr);const y=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,y)}o!==s&&(s=o,h(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let gb,Jye=new Set,Qye=new Set,e0e=new Set;function KA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ov(n,e){switch(n){case"before":return KA(Jye,e);case"after":return KA(Qye,e);case"tail":return KA(e0e,e)}}let ZA,JA;function QA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),ZA=e.internal.subscribers,gb=0;gb<ZA.length;gb++)JA=ZA[gb],JA.ref.current(JA.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function t0e(n){let e=!1,t=!1,r,i,a;function s(u){i=requestAnimationFrame(s),e=!0,r=0,ov("before",u),t=!0;for(const h of n.values()){var f;a=h.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((f=a.gl.xr)!=null&&f.isPresenting)&&(r+=QA(u,a))}if(t=!1,ov("after",u),r===0)return ov("tail",u),e=!1,cancelAnimationFrame(i)}function o(u,f=1){var h;if(!u)return n.forEach(m=>o(m.store.getState(),f));(h=u.gl.xr)!=null&&h.isPresenting||!u.internal.active||u.frameloop==="never"||(f>1?u.internal.frames=Math.min(60,u.internal.frames+f):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(u,f=!0,h,m){if(f&&ov("before",u),h)QA(u,h,m);else for(const y of n.values())QA(u,y.store.getState());f&&ov("after",u)}return{loop:s,invalidate:o,advance:l}}function IO(){const n=z.useContext(jO);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Hi(n=t=>t,e){return IO()(n,e)}function Bm(n,e=0){const t=IO(),r=t.getState().internal.subscribe,i=mV(n);return h0(()=>r(i,e,t),[e,r,t]),null}const DF=new WeakMap;function SV(n,e){return function(t,...r){let i=DF.get(t);return i||(i=new t,DF.set(t,i)),n&&n(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,l=>{l.scene&&Object.assign(l,Gye(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l?.message}`))))))}}function Em(n,e,t,r){const i=Array.isArray(e)?e:[e],a=Nye(SV(t,r),[n,...i],{equal:Ar.equ});return Array.isArray(e)?a:a[0]}Em.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Oye(SV(t),[n,...r])};Em.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Rye([n,...t])};const Tm=new Map,{invalidate:UF,advance:FF}=t0e(Tm),{reconciler:Hy,applyProps:_u}=Bye(Tm,qye),_p={objects:"shallow",strict:!1},n0e=(n,e)=>{const t=typeof n=="function"?n(e):n;return _V(t)?t:new Yw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function r0e(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=t}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function i0e(n){const e=Tm.get(n),t=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||Zye(UF,FF),s=t||Hy.createContainer(a,Up.ConcurrentRoot,null,!1,null,"",i,null);e||Tm.set(n,{fiber:s,store:a});let o,l=!1,u;return{configure(f={}){let{gl:h,size:m,scene:y,events:b,onCreated:w,shadows:x=!1,linear:_=!1,flat:M=!1,legacy:E=!1,orthographic:A=!1,frameloop:R="always",dpr:O=[1,2],performance:N,raycaster:L,camera:T,onPointerMissed:j}=f,U=a.getState(),B=U.gl;U.gl||U.set({gl:B=n0e(h,n)});let V=U.raycaster;V||U.set({raycaster:V=new RO});const{params:W,...Y}=L||{};if(Ar.equ(Y,V,_p)||_u(V,{...Y}),Ar.equ(W,V.params,_p)||_u(V,{params:{...V.params,...W}}),!U.camera||U.camera===u&&!Ar.equ(u,T,_p)){u=T;const Z=T instanceof i0,X=Z?T:A?new gc(0,0,0,0,.1,1e3):new ii(75,0,.1,1e3);Z||(X.position.z=5,T&&(_u(X,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(X.manual=!0,X.updateProjectionMatrix())),!U.camera&&!(T!=null&&T.rotation)&&X.lookAt(0,0,0)),U.set({camera:X}),V.camera=X}if(!U.scene){let Z;y!=null&&y.isScene?Z=y:(Z=new o0,y&&_u(Z,y)),U.set({scene:Mp(Z)})}if(!U.xr){var Q;const Z=(ce,le)=>{const be=a.getState();be.frameloop!=="never"&&FF(ce,!0,be,le)},X=()=>{const ce=a.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?Z:null),ce.gl.xr.isPresenting||UF(ce)},te={connect(){const ce=a.getState().gl;ce.xr.addEventListener("sessionstart",X),ce.xr.addEventListener("sessionend",X)},disconnect(){const ce=a.getState().gl;ce.xr.removeEventListener("sessionstart",X),ce.xr.removeEventListener("sessionend",X)}};typeof((Q=B.xr)==null?void 0:Q.addEventListener)=="function"&&te.connect(),U.set({xr:te})}if(B.shadowMap){const Z=B.shadowMap.enabled,X=B.shadowMap.type;if(B.shadowMap.enabled=!!x,Ar.boo(x))B.shadowMap.type=Av;else if(Ar.str(x)){var se;const te={basic:i8,percentage:Bw,soft:Av,variance:No};B.shadowMap.type=(se=te[x])!=null?se:Av}else Ar.obj(x)&&Object.assign(B.shadowMap,x);(Z!==B.shadowMap.enabled||X!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const G=hV();G&&("enabled"in G?G.enabled=!E:"legacyMode"in G&&(G.legacyMode=E)),l||_u(B,{outputEncoding:_?3e3:3001,toneMapping:M?cl:HN}),U.legacy!==E&&U.set(()=>({legacy:E})),U.linear!==_&&U.set(()=>({linear:_})),U.flat!==M&&U.set(()=>({flat:M})),h&&!Ar.fun(h)&&!_V(h)&&!Ar.equ(h,B,_p)&&_u(B,h),b&&!U.events.handlers&&U.set({events:b(a)});const J=r0e(n,m);return Ar.equ(J,U.size,_p)||U.setSize(J.width,J.height,J.updateStyle,J.top,J.left),O&&U.viewport.dpr!==yV(O)&&U.setDpr(O),U.frameloop!==R&&U.setFrameloop(R),U.onPointerMissed||U.set({onPointerMissed:j}),N&&!Ar.equ(N,U.performance,_p)&&U.set(Z=>({performance:{...Z.performance,...N}})),o=w,l=!0,this},render(f){return l||this.configure(),Hy.updateContainer(d.jsx(a0e,{store:a,children:f,onCreated:o,rootElement:n}),s,null,()=>{}),a},unmount(){MV(n)}}}function a0e({store:n,children:e,onCreated:t,rootElement:r}){return h0(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),d.jsx(jO.Provider,{value:n,children:e})}function MV(n,e){const t=Tm.get(n),r=t?.fiber;if(r){const i=t?.store.getState();i&&(i.internal.active=!1),Hy.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),$ye(i),Tm.delete(n)}catch{}},500)})}}function s0e(n,e,t){return d.jsx(o0e,{children:n,container:e,state:t},e.uuid)}function o0e({state:n={},children:e,container:t}){const{events:r,size:i,...a}=n,s=IO(),[o]=z.useState(()=>new RO),[l]=z.useState(()=>new Xe),u=z.useCallback((h,m)=>{const y={...h};Object.keys(h).forEach(w=>{(Kye.includes(w)||h[w]!==m[w]&&m[w])&&delete y[w]});let b;if(m&&i){const w=m.camera;b=h.viewport.getCurrentViewport(w,new oe,i),w!==h.camera&&bV(w,i)}return{...y,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...m?.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...b},...a}},[n]),[f]=z.useState(()=>{const h=s.getState();return cV((y,b)=>({...h,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...r},size:{...h.size,...i},...a,set:y,get:b,setEvents:w=>y(x=>({...x,events:{...x.events,...w}}))}))});return z.useEffect(()=>{const h=s.subscribe(m=>f.setState(y=>u(m,y)));return()=>{h()}},[u]),z.useEffect(()=>{f.setState(h=>u(s.getState(),h))},[u]),z.useEffect(()=>()=>{f.destroy()},[]),d.jsx(d.Fragment,{children:Hy.createPortal(d.jsx(jO.Provider,{value:f,children:e}),f,null)})}Hy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:z.version});const e2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function l0e(n){const{handlePointer:e}=Yye(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(e2).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:a}=n.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[l,u]=e2[s];t.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=e2[a];r.connected.removeEventListener(o,s)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}function zF(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function c0e({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,f=z.useRef(!1);z.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,m,y]=z.useMemo(()=>{const _=()=>{if(!o.current.element)return;const{left:M,top:E,width:A,height:R,bottom:O,right:N,x:L,y:T}=o.current.element.getBoundingClientRect(),j={left:M,top:E,width:A,height:R,bottom:O,right:N,x:L,y:T};o.current.element instanceof HTMLElement&&r&&(j.height=o.current.element.offsetHeight,j.width=o.current.element.offsetWidth),Object.freeze(j),f.current&&!h0e(o.current.lastBounds,j)&&s(o.current.lastBounds=j)};return[_,u?zF(_,u):_,l?zF(_,l):_]},[s,r,l,u]);function b(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function w(){o.current.element&&(o.current.resizeObserver=new i(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const x=_=>{!_||_===o.current.element||(b(),o.current.element=_,o.current.scrollContainers=EV(_),w())};return d0e(y,!!e),u0e(m),z.useEffect(()=>{b(),w()},[e,y,m]),z.useEffect(()=>b,[]),[x,a,h]}function u0e(n){z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function d0e(n,e){z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function EV(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...EV(n.parentElement)]}const f0e=["x","y","top","bottom","left","right","width","height"],h0e=(n,e)=>f0e.every(t=>n[t]===e[t]);var p0e=Object.defineProperty,m0e=Object.defineProperties,g0e=Object.getOwnPropertyDescriptors,BF=Object.getOwnPropertySymbols,v0e=Object.prototype.hasOwnProperty,y0e=Object.prototype.propertyIsEnumerable,HF=(n,e,t)=>e in n?p0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,VF=(n,e)=>{for(var t in e||(e={}))v0e.call(e,t)&&HF(n,t,e[t]);if(BF)for(var t of BF(e))y0e.call(e,t)&&HF(n,t,e[t]);return n},x0e=(n,e)=>m0e(n,g0e(e)),WF,GF;typeof window<"u"&&((WF=window.document)!=null&&WF.createElement||((GF=window.navigator)==null?void 0:GF.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function TV(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=TV(r,e,t);if(i)return i;r=r.sibling}}function AV(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const $F=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=$F;return}return $F.apply(this,arguments)};const LO=AV(z.createContext(null));class CV extends z.Component{render(){return z.createElement(LO.Provider,{value:this._reactInternals},this.props.children)}}function b0e(){const n=z.useContext(LO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const r of[n,n?.alternate]){if(!r)continue;const i=TV(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function w0e(){const n=b0e(),[e]=z.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==LO&&!e.has(i)&&e.set(i,z.useContext(AV(i)))}t=t.return}return e}function _0e(){const n=w0e();return z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>z.createElement(e,null,z.createElement(t.Provider,x0e(VF({},r),{value:n.get(t)}))),e=>z.createElement(CV,VF({},e))),[n])}const S0e=z.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:a,events:s=l0e,eventSource:o,eventPrefix:l,shadows:u,linear:f,flat:h,legacy:m,orthographic:y,frameloop:b,dpr:w,performance:x,raycaster:_,camera:M,scene:E,onPointerMissed:A,onCreated:R,...O},N){z.useMemo(()=>fV(Mye),[]);const L=_0e(),[T,j]=c0e({scroll:!0,debounce:{scroll:50,resize:0},...r}),U=z.useRef(null),B=z.useRef(null);z.useImperativeHandle(N,()=>U.current);const V=mV(A),[W,Y]=z.useState(!1),[Q,se]=z.useState(!1);if(W)throw W;if(Q)throw Q;const G=z.useRef(null);h0(()=>{const Z=U.current;j.width>0&&j.height>0&&Z&&(G.current||(G.current=i0e(Z)),G.current.configure({gl:a,events:s,shadows:u,linear:f,flat:h,legacy:m,orthographic:y,frameloop:b,dpr:w,performance:x,raycaster:_,camera:M,scene:E,size:j,onPointerMissed:(...X)=>V.current==null?void 0:V.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?Hye(o)?o.current:o:B.current),l&&X.setEvents({compute:(te,ce)=>{const le=te[l+"X"],be=te[l+"Y"];ce.pointer.set(le/ce.size.width*2-1,-(be/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),R?.(X)}}),G.current.render(d.jsx(L,{children:d.jsx(gV,{set:se,children:d.jsx(z.Suspense,{fallback:d.jsx(Vye,{set:Y}),children:e??null})})})))}),z.useEffect(()=>{const Z=U.current;if(Z)return()=>MV(Z)},[]);const J=o?"none":"auto";return d.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...i},...O,children:d.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:d.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),M0e=z.forwardRef(function(e,t){return d.jsx(CV,{children:d.jsx(S0e,{...e,ref:t})})}),PV=parseInt(e0.replace(/\D+/g,""));var Ks=Uint8Array,Nu=Uint16Array,CP=Uint32Array,NV=new Ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),OV=new Ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E0e=new Ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RV=function(n,e){for(var t=new Nu(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new CP(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return[t,i]},kV=RV(NV,2),jV=kV[0],T0e=kV[1];jV[28]=258,T0e[258]=28;var A0e=RV(OV,0),C0e=A0e[0],PP=new Nu(32768);for(var kr=0;kr<32768;++kr){var bu=(kr&43690)>>>1|(kr&21845)<<1;bu=(bu&52428)>>>2|(bu&13107)<<2,bu=(bu&61680)>>>4|(bu&3855)<<4,PP[kr]=((bu&65280)>>>8|(bu&255)<<8)>>>1}var kv=(function(n,e,t){for(var r=n.length,i=0,a=new Nu(e);i<r;++i)++a[n[i]-1];var s=new Nu(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new Nu(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],f=e-n[i],h=s[n[i]-1]++<<f,m=h|(1<<f)-1;h<=m;++h)o[PP[h]>>>l]=u}else for(o=new Nu(r),i=0;i<r;++i)n[i]&&(o[i]=PP[s[n[i]-1]++]>>>15-n[i]);return o}),p0=new Ks(288);for(var kr=0;kr<144;++kr)p0[kr]=8;for(var kr=144;kr<256;++kr)p0[kr]=9;for(var kr=256;kr<280;++kr)p0[kr]=7;for(var kr=280;kr<288;++kr)p0[kr]=8;var IV=new Ks(32);for(var kr=0;kr<32;++kr)IV[kr]=5;var P0e=kv(p0,9,1),N0e=kv(IV,5,1),t2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Po=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},n2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},O0e=function(n){return(n/8|0)+(n&7&&1)},R0e=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Nu?Nu:n instanceof CP?CP:Ks)(t-e);return r.set(n.subarray(e,t)),r},k0e=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ks(0);var i=!e||t,a=!t||t.i;t||(t={}),e||(e=new Ks(r*3));var s=function(Se){var Ie=e.length;if(Se>Ie){var qe=new Ks(Math.max(Ie*2,Se));qe.set(e),e=qe}},o=t.f||0,l=t.p||0,u=t.b||0,f=t.l,h=t.d,m=t.m,y=t.n,b=r*8;do{if(!f){t.f=o=Po(n,l,1);var w=Po(n,l+1,3);if(l+=3,w)if(w==1)f=P0e,h=N0e,m=9,y=5;else if(w==2){var E=Po(n,l,31)+257,A=Po(n,l+10,15)+4,R=E+Po(n,l+5,31)+1;l+=14;for(var O=new Ks(R),N=new Ks(19),L=0;L<A;++L)N[E0e[L]]=Po(n,l+L*3,7);l+=A*3;for(var T=t2(N),j=(1<<T)-1,U=kv(N,T,1),L=0;L<R;){var B=U[Po(n,l,j)];l+=B&15;var x=B>>>4;if(x<16)O[L++]=x;else{var V=0,W=0;for(x==16?(W=3+Po(n,l,3),l+=2,V=O[L-1]):x==17?(W=3+Po(n,l,7),l+=3):x==18&&(W=11+Po(n,l,127),l+=7);W--;)O[L++]=V}}var Y=O.subarray(0,E),Q=O.subarray(E);m=t2(Y),y=t2(Q),f=kv(Y,m,1),h=kv(Q,y,1)}else throw"invalid block type";else{var x=O0e(l)+4,_=n[x-4]|n[x-3]<<8,M=x+_;if(M>r){if(a)throw"unexpected EOF";break}i&&s(u+_),e.set(n.subarray(x,M),u),t.b=u+=_,t.p=l=M*8;continue}if(l>b){if(a)throw"unexpected EOF";break}}i&&s(u+131072);for(var se=(1<<m)-1,G=(1<<y)-1,J=l;;J=l){var V=f[n2(n,l)&se],Z=V>>>4;if(l+=V&15,l>b){if(a)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(Z<256)e[u++]=Z;else if(Z==256){J=l,f=null;break}else{var X=Z-254;if(Z>264){var L=Z-257,te=NV[L];X=Po(n,l,(1<<te)-1)+jV[L],l+=te}var ce=h[n2(n,l)&G],le=ce>>>4;if(!ce)throw"invalid distance";l+=ce&15;var Q=C0e[le];if(le>3){var te=OV[le];Q+=n2(n,l)&(1<<te)-1,l+=te}if(l>b){if(a)throw"unexpected EOF";break}i&&s(u+131072);for(var be=u+X;u<be;u+=4)e[u]=e[u-Q],e[u+1]=e[u+1-Q],e[u+2]=e[u+2-Q],e[u+3]=e[u+3-Q];u=be}}t.l=f,t.p=J,t.b=u,f&&(o=1,t.m=m,t.d=h,t.n=y)}while(!o);return u==e.length?e:R0e(e,0,u)},j0e=new Ks(0),I0e=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vb(n,e){return k0e((I0e(n),n.subarray(2,-4)),e)}var L0e=typeof TextDecoder<"u"&&new TextDecoder,D0e=0;try{L0e.decode(j0e,{stream:!0}),D0e=1}catch{}const U0e=n=>n&&n.isCubeTexture;class F0e extends Zr{constructor(e,t){var r,i;const a=U0e(e),o=((i=a?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),u=Math.pow(2,l),f=3*Math.max(u,112),h=4*u,m=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=m.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${PV>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},x=new c0(1,16),_=new Rs({uniforms:w,fragmentShader:b,vertexShader:y,side:Io});super(x,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var z0e=Object.defineProperty,B0e=(n,e,t)=>e in n?z0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H0e=(n,e,t)=>(B0e(n,e+"",t),t);class V0e{constructor(){H0e(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var W0e=Object.defineProperty,G0e=(n,e,t)=>e in n?W0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qt=(n,e,t)=>(G0e(n,typeof e!="symbol"?e+"":e,t),t);const yb=new qf,qF=new sc,$0e=Math.cos(70*(Math.PI/180)),XF=(n,e)=>(n%e+e)%e;let q0e=class extends V0e{constructor(e,t){super(),Qt(this,"object"),Qt(this,"domElement"),Qt(this,"enabled",!0),Qt(this,"target",new oe),Qt(this,"minDistance",0),Qt(this,"maxDistance",1/0),Qt(this,"minZoom",0),Qt(this,"maxZoom",1/0),Qt(this,"minPolarAngle",0),Qt(this,"maxPolarAngle",Math.PI),Qt(this,"minAzimuthAngle",-1/0),Qt(this,"maxAzimuthAngle",1/0),Qt(this,"enableDamping",!1),Qt(this,"dampingFactor",.05),Qt(this,"enableZoom",!0),Qt(this,"zoomSpeed",1),Qt(this,"enableRotate",!0),Qt(this,"rotateSpeed",1),Qt(this,"enablePan",!0),Qt(this,"panSpeed",1),Qt(this,"screenSpacePanning",!0),Qt(this,"keyPanSpeed",7),Qt(this,"zoomToCursor",!1),Qt(this,"autoRotate",!1),Qt(this,"autoRotateSpeed",2),Qt(this,"reverseOrbit",!1),Qt(this,"reverseHorizontalOrbit",!1),Qt(this,"reverseVerticalOrbit",!1),Qt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Qt(this,"mouseButtons",{LEFT:tf.ROTATE,MIDDLE:tf.DOLLY,RIGHT:tf.PAN}),Qt(this,"touches",{ONE:nf.ROTATE,TWO:nf.DOLLY_PAN}),Qt(this,"target0"),Qt(this,"position0"),Qt(this,"zoom0"),Qt(this,"_domElementKeyEvents",null),Qt(this,"getPolarAngle"),Qt(this,"getAzimuthalAngle"),Qt(this,"setPolarAngle"),Qt(this,"setAzimuthalAngle"),Qt(this,"getDistance"),Qt(this,"getZoomScale"),Qt(this,"listenToKeyEvents"),Qt(this,"stopListenToKeyEvents"),Qt(this,"saveState"),Qt(this,"reset"),Qt(this,"update"),Qt(this,"connect"),Qt(this,"dispose"),Qt(this,"dollyIn"),Qt(this,"dollyOut"),Qt(this,"getScale"),Qt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=me=>{let We=XF(me,2*Math.PI),lt=f.phi;lt<0&&(lt+=2*Math.PI),We<0&&(We+=2*Math.PI);let wt=Math.abs(We-lt);2*Math.PI-wt<wt&&(We<lt?We+=2*Math.PI:lt+=2*Math.PI),h.phi=We-lt,r.update()},this.setAzimuthalAngle=me=>{let We=XF(me,2*Math.PI),lt=f.theta;lt<0&&(lt+=2*Math.PI),We<0&&(We+=2*Math.PI);let wt=Math.abs(We-lt);2*Math.PI-wt<wt&&(We<lt?We+=2*Math.PI:lt+=2*Math.PI),h.theta=We-lt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=me=>{me.addEventListener("keydown",Ut),this._domElementKeyEvents=me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ut),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const me=new oe,We=new oe(0,1,0),lt=new va().setFromUnitVectors(e.up,We),wt=lt.clone().invert(),Ae=new oe,ge=new va,ot=2*Math.PI;return function(){const Gt=r.object.position;lt.setFromUnitVectors(e.up,We),wt.copy(lt).invert(),me.copy(Gt).sub(r.target),me.applyQuaternion(lt),f.setFromVector3(me),r.autoRotate&&l===o.NONE&&W(B()),r.enableDamping?(f.theta+=h.theta*r.dampingFactor,f.phi+=h.phi*r.dampingFactor):(f.theta+=h.theta,f.phi+=h.phi);let kt=r.minAzimuthAngle,xn=r.maxAzimuthAngle;isFinite(kt)&&isFinite(xn)&&(kt<-Math.PI?kt+=ot:kt>Math.PI&&(kt-=ot),xn<-Math.PI?xn+=ot:xn>Math.PI&&(xn-=ot),kt<=xn?f.theta=Math.max(kt,Math.min(xn,f.theta)):f.theta=f.theta>(kt+xn)/2?Math.max(kt,f.theta):Math.min(xn,f.theta)),f.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,f.phi)),f.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(y,r.dampingFactor):r.target.add(y),r.zoomToCursor&&T||r.object.isOrthographicCamera?f.radius=ce(f.radius):f.radius=ce(f.radius*m),me.setFromSpherical(f),me.applyQuaternion(wt),Gt.copy(r.target).add(me),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,y.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),y.set(0,0,0));let Pn=!1;if(r.zoomToCursor&&T){let Bn=null;if(r.object instanceof ii&&r.object.isPerspectiveCamera){const nr=me.length();Bn=ce(nr*m);const Mn=nr-Bn;r.object.position.addScaledVector(N,Mn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const nr=new oe(L.x,L.y,0);nr.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix(),Pn=!0;const Mn=new oe(L.x,L.y,0);Mn.unproject(r.object),r.object.position.sub(Mn).add(nr),r.object.updateMatrixWorld(),Bn=me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Bn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Bn).add(r.object.position):(yb.origin.copy(r.object.position),yb.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(yb.direction))<$0e?e.lookAt(r.target):(qF.setFromNormalAndCoplanarPoint(r.object.up,r.target),yb.intersectPlane(qF,r.target))))}else r.object instanceof gc&&r.object.isOrthographicCamera&&(Pn=m!==1,Pn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix()));return m=1,T=!1,Pn||Ae.distanceToSquared(r.object.position)>u||8*(1-ge.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ae.copy(r.object.position),ge.copy(r.object.quaternion),Pn=!1,!0):!1}})(),this.connect=me=>{r.domElement=me,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",mn),r.domElement.addEventListener("pointerdown",Ze),r.domElement.addEventListener("pointercancel",Ye),r.domElement.addEventListener("wheel",St)},this.dispose=()=>{var me,We,lt,wt,Ae,ge;r.domElement&&(r.domElement.style.touchAction="auto"),(me=r.domElement)==null||me.removeEventListener("contextmenu",mn),(We=r.domElement)==null||We.removeEventListener("pointerdown",Ze),(lt=r.domElement)==null||lt.removeEventListener("pointercancel",Ye),(wt=r.domElement)==null||wt.removeEventListener("wheel",St),(Ae=r.domElement)==null||Ae.ownerDocument.removeEventListener("pointermove",Je),(ge=r.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",Ye),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ut)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,f=new EP,h=new EP;let m=1;const y=new oe,b=new Xe,w=new Xe,x=new Xe,_=new Xe,M=new Xe,E=new Xe,A=new Xe,R=new Xe,O=new Xe,N=new oe,L=new Xe;let T=!1;const j=[],U={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function W(me){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=me:h.theta-=me}function Y(me){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=me:h.phi-=me}const Q=(()=>{const me=new oe;return function(lt,wt){me.setFromMatrixColumn(wt,0),me.multiplyScalar(-lt),y.add(me)}})(),se=(()=>{const me=new oe;return function(lt,wt){r.screenSpacePanning===!0?me.setFromMatrixColumn(wt,1):(me.setFromMatrixColumn(wt,0),me.crossVectors(r.object.up,me)),me.multiplyScalar(lt),y.add(me)}})(),G=(()=>{const me=new oe;return function(lt,wt){const Ae=r.domElement;if(Ae&&r.object instanceof ii&&r.object.isPerspectiveCamera){const ge=r.object.position;me.copy(ge).sub(r.target);let ot=me.length();ot*=Math.tan(r.object.fov/2*Math.PI/180),Q(2*lt*ot/Ae.clientHeight,r.object.matrix),se(2*wt*ot/Ae.clientHeight,r.object.matrix)}else Ae&&r.object instanceof gc&&r.object.isOrthographicCamera?(Q(lt*(r.object.right-r.object.left)/r.object.zoom/Ae.clientWidth,r.object.matrix),se(wt*(r.object.top-r.object.bottom)/r.object.zoom/Ae.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function J(me){r.object instanceof ii&&r.object.isPerspectiveCamera||r.object instanceof gc&&r.object.isOrthographicCamera?m=me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Z(me){J(m/me)}function X(me){J(m*me)}function te(me){if(!r.zoomToCursor||!r.domElement)return;T=!0;const We=r.domElement.getBoundingClientRect(),lt=me.clientX-We.left,wt=me.clientY-We.top,Ae=We.width,ge=We.height;L.x=lt/Ae*2-1,L.y=-(wt/ge)*2+1,N.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function ce(me){return Math.max(r.minDistance,Math.min(r.maxDistance,me))}function le(me){b.set(me.clientX,me.clientY)}function be(me){te(me),A.set(me.clientX,me.clientY)}function Se(me){_.set(me.clientX,me.clientY)}function Ie(me){w.set(me.clientX,me.clientY),x.subVectors(w,b).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(W(2*Math.PI*x.x/We.clientHeight),Y(2*Math.PI*x.y/We.clientHeight)),b.copy(w),r.update()}function qe(me){R.set(me.clientX,me.clientY),O.subVectors(R,A),O.y>0?Z(V()):O.y<0&&X(V()),A.copy(R),r.update()}function Pe(me){M.set(me.clientX,me.clientY),E.subVectors(M,_).multiplyScalar(r.panSpeed),G(E.x,E.y),_.copy(M),r.update()}function Fe(me){te(me),me.deltaY<0?X(V()):me.deltaY>0&&Z(V()),r.update()}function $e(me){let We=!1;switch(me.code){case r.keys.UP:G(0,r.keyPanSpeed),We=!0;break;case r.keys.BOTTOM:G(0,-r.keyPanSpeed),We=!0;break;case r.keys.LEFT:G(r.keyPanSpeed,0),We=!0;break;case r.keys.RIGHT:G(-r.keyPanSpeed,0),We=!0;break}We&&(me.preventDefault(),r.update())}function ne(){if(j.length==1)b.set(j[0].pageX,j[0].pageY);else{const me=.5*(j[0].pageX+j[1].pageX),We=.5*(j[0].pageY+j[1].pageY);b.set(me,We)}}function Ve(){if(j.length==1)_.set(j[0].pageX,j[0].pageY);else{const me=.5*(j[0].pageX+j[1].pageX),We=.5*(j[0].pageY+j[1].pageY);_.set(me,We)}}function Ne(){const me=j[0].pageX-j[1].pageX,We=j[0].pageY-j[1].pageY,lt=Math.sqrt(me*me+We*We);A.set(0,lt)}function Ke(){r.enableZoom&&Ne(),r.enablePan&&Ve()}function De(){r.enableZoom&&Ne(),r.enableRotate&&ne()}function vt(me){if(j.length==1)w.set(me.pageX,me.pageY);else{const lt=At(me),wt=.5*(me.pageX+lt.x),Ae=.5*(me.pageY+lt.y);w.set(wt,Ae)}x.subVectors(w,b).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(W(2*Math.PI*x.x/We.clientHeight),Y(2*Math.PI*x.y/We.clientHeight)),b.copy(w)}function dt(me){if(j.length==1)M.set(me.pageX,me.pageY);else{const We=At(me),lt=.5*(me.pageX+We.x),wt=.5*(me.pageY+We.y);M.set(lt,wt)}E.subVectors(M,_).multiplyScalar(r.panSpeed),G(E.x,E.y),_.copy(M)}function ie(me){const We=At(me),lt=me.pageX-We.x,wt=me.pageY-We.y,Ae=Math.sqrt(lt*lt+wt*wt);R.set(0,Ae),O.set(0,Math.pow(R.y/A.y,r.zoomSpeed)),Z(O.y),A.copy(R)}function ee(me){r.enableZoom&&ie(me),r.enablePan&&dt(me)}function Te(me){r.enableZoom&&ie(me),r.enableRotate&&vt(me)}function Ze(me){var We,lt;r.enabled!==!1&&(j.length===0&&((We=r.domElement)==null||We.ownerDocument.addEventListener("pointermove",Je),(lt=r.domElement)==null||lt.ownerDocument.addEventListener("pointerup",Ye)),hn(me),me.pointerType==="touch"?Yt(me):Tt(me))}function Je(me){r.enabled!==!1&&(me.pointerType==="touch"?Qe(me):pt(me))}function Ye(me){var We,lt,wt;$t(me),j.length===0&&((We=r.domElement)==null||We.releasePointerCapture(me.pointerId),(lt=r.domElement)==null||lt.ownerDocument.removeEventListener("pointermove",Je),(wt=r.domElement)==null||wt.ownerDocument.removeEventListener("pointerup",Ye)),r.dispatchEvent(s),l=o.NONE}function Tt(me){let We;switch(me.button){case 0:We=r.mouseButtons.LEFT;break;case 1:We=r.mouseButtons.MIDDLE;break;case 2:We=r.mouseButtons.RIGHT;break;default:We=-1}switch(We){case tf.DOLLY:if(r.enableZoom===!1)return;be(me),l=o.DOLLY;break;case tf.ROTATE:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enablePan===!1)return;Se(me),l=o.PAN}else{if(r.enableRotate===!1)return;le(me),l=o.ROTATE}break;case tf.PAN:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enableRotate===!1)return;le(me),l=o.ROTATE}else{if(r.enablePan===!1)return;Se(me),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function pt(me){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;Ie(me);break;case o.DOLLY:if(r.enableZoom===!1)return;qe(me);break;case o.PAN:if(r.enablePan===!1)return;Pe(me);break}}function St(me){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(me.preventDefault(),r.dispatchEvent(a),Fe(me),r.dispatchEvent(s))}function Ut(me){r.enabled===!1||r.enablePan===!1||$e(me)}function Yt(me){switch(Mt(me),j.length){case 1:switch(r.touches.ONE){case nf.ROTATE:if(r.enableRotate===!1)return;ne(),l=o.TOUCH_ROTATE;break;case nf.PAN:if(r.enablePan===!1)return;Ve(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case nf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ke(),l=o.TOUCH_DOLLY_PAN;break;case nf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;De(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function Qe(me){switch(Mt(me),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;vt(me),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;dt(me),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ee(me),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(me),r.update();break;default:l=o.NONE}}function mn(me){r.enabled!==!1&&me.preventDefault()}function hn(me){j.push(me)}function $t(me){delete U[me.pointerId];for(let We=0;We<j.length;We++)if(j[We].pointerId==me.pointerId){j.splice(We,1);return}}function Mt(me){let We=U[me.pointerId];We===void 0&&(We=new Xe,U[me.pointerId]=We),We.set(me.pageX,me.pageY)}function At(me){const We=me.pointerId===j[0].pointerId?j[1]:j[0];return U[We.pointerId]}this.dollyIn=(me=V())=>{X(me),r.update()},this.dollyOut=(me=V())=>{Z(me),r.update()},this.getScale=()=>m,this.setScale=me=>{J(me),r.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};class X0e extends EO{constructor(e){super(e),this.type=Oi}parse(e){const s=function(L,T){switch(L){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(T||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(T||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(T||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(T||""))}},h=function(L,T,j){T=T||1024;let B=L.pos,V=-1,W=0,Y="",Q=String.fromCharCode.apply(null,new Uint16Array(L.subarray(B,B+128)));for(;0>(V=Q.indexOf(`
`))&&W<T&&B<L.byteLength;)Y+=Q,W+=Q.length,B+=128,Q+=String.fromCharCode.apply(null,new Uint16Array(L.subarray(B,B+128)));return-1<V?(L.pos+=W+V+1,Y+Q.slice(0,V)):!1},m=function(L){const T=/^#\?(\S+)/,j=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Y,Q;for((L.pos>=L.byteLength||!(Y=h(L)))&&s(1,"no header found"),(Q=Y.match(T))||s(3,"bad initial token"),W.valid|=1,W.programtype=Q[1],W.string+=Y+`
`;Y=h(L),Y!==!1;){if(W.string+=Y+`
`,Y.charAt(0)==="#"){W.comments+=Y+`
`;continue}if((Q=Y.match(j))&&(W.gamma=parseFloat(Q[1])),(Q=Y.match(U))&&(W.exposure=parseFloat(Q[1])),(Q=Y.match(B))&&(W.valid|=2,W.format=Q[1]),(Q=Y.match(V))&&(W.valid|=4,W.height=parseInt(Q[1],10),W.width=parseInt(Q[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||s(3,"missing format specifier"),W.valid&4||s(3,"missing image size specifier"),W},y=function(L,T,j){const U=T;if(U<8||U>32767||L[0]!==2||L[1]!==2||L[2]&128)return new Uint8Array(L);U!==(L[2]<<8|L[3])&&s(3,"wrong scanline width");const B=new Uint8Array(4*T*j);B.length||s(4,"unable to allocate buffer space");let V=0,W=0;const Y=4*U,Q=new Uint8Array(4),se=new Uint8Array(Y);let G=j;for(;G>0&&W<L.byteLength;){W+4>L.byteLength&&s(1),Q[0]=L[W++],Q[1]=L[W++],Q[2]=L[W++],Q[3]=L[W++],(Q[0]!=2||Q[1]!=2||(Q[2]<<8|Q[3])!=U)&&s(3,"bad rgbe scanline format");let J=0,Z;for(;J<Y&&W<L.byteLength;){Z=L[W++];const te=Z>128;if(te&&(Z-=128),(Z===0||J+Z>Y)&&s(3,"bad scanline data"),te){const ce=L[W++];for(let le=0;le<Z;le++)se[J++]=ce}else se.set(L.subarray(W,W+Z),J),J+=Z,W+=Z}const X=U;for(let te=0;te<X;te++){let ce=0;B[V]=se[te+ce],ce+=U,B[V+1]=se[te+ce],ce+=U,B[V+2]=se[te+ce],ce+=U,B[V+3]=se[te+ce],V+=4}G--}return B},b=function(L,T,j,U){const B=L[T+3],V=Math.pow(2,B-128)/255;j[U+0]=L[T+0]*V,j[U+1]=L[T+1]*V,j[U+2]=L[T+2]*V,j[U+3]=1},w=function(L,T,j,U){const B=L[T+3],V=Math.pow(2,B-128)/255;j[U+0]=mf.toHalfFloat(Math.min(L[T+0]*V,65504)),j[U+1]=mf.toHalfFloat(Math.min(L[T+1]*V,65504)),j[U+2]=mf.toHalfFloat(Math.min(L[T+2]*V,65504)),j[U+3]=mf.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const _=m(x),M=_.width,E=_.height,A=y(x.subarray(x.pos),M,E);let R,O,N;switch(this.type){case ai:N=A.length/4;const L=new Float32Array(N*4);for(let j=0;j<N;j++)b(A,j*4,L,j*4);R=L,O=ai;break;case Oi:N=A.length/4;const T=new Uint16Array(N*4);for(let j=0;j<N;j++)w(A,j*4,T,j*4);R=T,O=Oi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:E,data:R,header:_.string,gamma:_.gamma,exposure:_.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){switch(s.type){case ai:case Oi:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Wn,s.magFilter=Wn,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,o)}return super.load(e,a,r,i)}}const lv=PV>=152;class Y0e extends EO{constructor(e){super(e),this.type=Oi}parse(e){const T=Math.pow(2.7182818,2.2);function j(q,re){for(var xe=0,$=0;$<65536;++$)($==0||q[$>>3]&1<<($&7))&&(re[xe++]=$);for(var ae=xe-1;xe<65536;)re[xe++]=0;return ae}function U(q){for(var re=0;re<16384;re++)q[re]={},q[re].len=0,q[re].lit=0,q[re].p=null}const B={l:0,c:0,lc:0};function V(q,re,xe,$,ae){for(;xe<q;)re=re<<8|At($,ae),xe+=8;xe-=q,B.l=re>>xe&(1<<q)-1,B.c=re,B.lc=xe}const W=new Array(59);function Y(q){for(var re=0;re<=58;++re)W[re]=0;for(var re=0;re<65537;++re)W[q[re]]+=1;for(var xe=0,re=58;re>0;--re){var $=xe+W[re]>>1;W[re]=xe,xe=$}for(var re=0;re<65537;++re){var ae=q[re];ae>0&&(q[re]=ae|W[ae]++<<6)}}function Q(q,re,xe,$,ae,ue,pe){for(var he=xe,je=0,Ue=0;ae<=ue;ae++){if(he.value-xe.value>$)return!1;V(6,je,Ue,q,he);var Be=B.l;if(je=B.c,Ue=B.lc,pe[ae]=Be,Be==63){if(he.value-xe.value>$)throw"Something wrong with hufUnpackEncTable";V(8,je,Ue,q,he);var Re=B.l+6;if(je=B.c,Ue=B.lc,ae+Re>ue+1)throw"Something wrong with hufUnpackEncTable";for(;Re--;)pe[ae++]=0;ae--}else if(Be>=59){var Re=Be-59+2;if(ae+Re>ue+1)throw"Something wrong with hufUnpackEncTable";for(;Re--;)pe[ae++]=0;ae--}}Y(pe)}function se(q){return q&63}function G(q){return q>>6}function J(q,re,xe,$){for(;re<=xe;re++){var ae=G(q[re]),ue=se(q[re]);if(ae>>ue)throw"Invalid table entry";if(ue>14){var pe=$[ae>>ue-14];if(pe.len)throw"Invalid table entry";if(pe.lit++,pe.p){var he=pe.p;pe.p=new Array(pe.lit);for(var je=0;je<pe.lit-1;++je)pe.p[je]=he[je]}else pe.p=new Array(1);pe.p[pe.lit-1]=re}else if(ue)for(var Ue=0,je=1<<14-ue;je>0;je--){var pe=$[(ae<<14-ue)+Ue];if(pe.len||pe.p)throw"Invalid table entry";pe.len=ue,pe.lit=re,Ue++}}return!0}const Z={c:0,lc:0};function X(q,re,xe,$){q=q<<8|At(xe,$),re+=8,Z.c=q,Z.lc=re}const te={c:0,lc:0};function ce(q,re,xe,$,ae,ue,pe,he,je,Ue){if(q==re){$<8&&(X(xe,$,ae,pe),xe=Z.c,$=Z.lc),$-=8;var Be=xe>>$,Be=new Uint8Array([Be])[0];if(je.value+Be>Ue)return!1;for(var Re=he[je.value-1];Be-- >0;)he[je.value++]=Re}else if(je.value<Ue)he[je.value++]=q;else return!1;te.c=xe,te.lc=$}function le(q){return q&65535}function be(q){var re=le(q);return re>32767?re-65536:re}const Se={a:0,b:0};function Ie(q,re){var xe=be(q),$=be(re),ae=$,ue=xe+(ae&1)+(ae>>1),pe=ue,he=ue-ae;Se.a=pe,Se.b=he}function qe(q,re){var xe=le(q),$=le(re),ae=xe-($>>1)&65535,ue=$+ae-32768&65535;Se.a=ue,Se.b=ae}function Pe(q,re,xe,$,ae,ue,pe){for(var he=pe<16384,je=xe>ae?ae:xe,Ue=1,Be;Ue<=je;)Ue<<=1;for(Ue>>=1,Be=Ue,Ue>>=1;Ue>=1;){for(var Re=0,Ct=Re+ue*(ae-Be),et=ue*Ue,it=ue*Be,Pt=$*Ue,Vt=$*Be,qt,nn,yt,mt;Re<=Ct;Re+=it){for(var tn=Re,Kt=Re+$*(xe-Be);tn<=Kt;tn+=Vt){var rn=tn+Pt,Yn=tn+et,vr=Yn+Pt;he?(Ie(q[tn+re],q[Yn+re]),qt=Se.a,yt=Se.b,Ie(q[rn+re],q[vr+re]),nn=Se.a,mt=Se.b,Ie(qt,nn),q[tn+re]=Se.a,q[rn+re]=Se.b,Ie(yt,mt),q[Yn+re]=Se.a,q[vr+re]=Se.b):(qe(q[tn+re],q[Yn+re]),qt=Se.a,yt=Se.b,qe(q[rn+re],q[vr+re]),nn=Se.a,mt=Se.b,qe(qt,nn),q[tn+re]=Se.a,q[rn+re]=Se.b,qe(yt,mt),q[Yn+re]=Se.a,q[vr+re]=Se.b)}if(xe&Ue){var Yn=tn+et;he?Ie(q[tn+re],q[Yn+re]):qe(q[tn+re],q[Yn+re]),qt=Se.a,q[Yn+re]=Se.b,q[tn+re]=qt}}if(ae&Ue)for(var tn=Re,Kt=Re+$*(xe-Be);tn<=Kt;tn+=Vt){var rn=tn+Pt;he?Ie(q[tn+re],q[rn+re]):qe(q[tn+re],q[rn+re]),qt=Se.a,q[rn+re]=Se.b,q[tn+re]=qt}Be=Ue,Ue>>=1}return Re}function Fe(q,re,xe,$,ae,ue,pe,he,je,Ue){for(var Be=0,Re=0,Ct=he,et=Math.trunc(ae.value+(ue+7)/8);ae.value<et;)for(X(Be,Re,xe,ae),Be=Z.c,Re=Z.lc;Re>=14;){var it=Be>>Re-14&16383,Pt=re[it];if(Pt.len)Re-=Pt.len,ce(Pt.lit,pe,Be,Re,xe,$,ae,je,Ue,Ct),Be=te.c,Re=te.lc;else{if(!Pt.p)throw"hufDecode issues";var Vt;for(Vt=0;Vt<Pt.lit;Vt++){for(var qt=se(q[Pt.p[Vt]]);Re<qt&&ae.value<et;)X(Be,Re,xe,ae),Be=Z.c,Re=Z.lc;if(Re>=qt&&G(q[Pt.p[Vt]])==(Be>>Re-qt&(1<<qt)-1)){Re-=qt,ce(Pt.p[Vt],pe,Be,Re,xe,$,ae,je,Ue,Ct),Be=te.c,Re=te.lc;break}}if(Vt==Pt.lit)throw"hufDecode issues"}}var nn=8-ue&7;for(Be>>=nn,Re-=nn;Re>0;){var Pt=re[Be<<14-Re&16383];if(Pt.len)Re-=Pt.len,ce(Pt.lit,pe,Be,Re,xe,$,ae,je,Ue,Ct),Be=te.c,Re=te.lc;else throw"hufDecode issues"}return!0}function $e(q,re,xe,$,ae,ue){var pe={value:0},he=xe.value,je=Mt(re,xe),Ue=Mt(re,xe);xe.value+=4;var Be=Mt(re,xe);if(xe.value+=4,je<0||je>=65537||Ue<0||Ue>=65537)throw"Something wrong with HUF_ENCSIZE";var Re=new Array(65537),Ct=new Array(16384);U(Ct);var et=$-(xe.value-he);if(Q(q,re,xe,et,je,Ue,Re),Be>8*($-(xe.value-he)))throw"Something wrong with hufUncompress";J(Re,je,Ue,Ct),Fe(Re,Ct,q,re,xe,Be,Ue,ue,ae,pe)}function ne(q,re,xe){for(var $=0;$<xe;++$)re[$]=q[re[$]]}function Ve(q){for(var re=1;re<q.length;re++){var xe=q[re-1]+q[re]-128;q[re]=xe}}function Ne(q,re){for(var xe=0,$=Math.floor((q.length+1)/2),ae=0,ue=q.length-1;!(ae>ue||(re[ae++]=q[xe++],ae>ue));)re[ae++]=q[$++]}function Ke(q){for(var re=q.byteLength,xe=new Array,$=0,ae=new DataView(q);re>0;){var ue=ae.getInt8($++);if(ue<0){var pe=-ue;re-=pe+1;for(var he=0;he<pe;he++)xe.push(ae.getUint8($++))}else{var pe=ue;re-=2;for(var je=ae.getUint8($++),he=0;he<pe+1;he++)xe.push(je)}}return xe}function De(q,re,xe,$,ae,ue){var rn=new DataView(ue.buffer),pe=xe[q.idx[0]].width,he=xe[q.idx[0]].height,je=3,Ue=Math.floor(pe/8),Be=Math.ceil(pe/8),Re=Math.ceil(he/8),Ct=pe-(Be-1)*8,et=he-(Re-1)*8,it={value:0},Pt=new Array(je),Vt=new Array(je),qt=new Array(je),nn=new Array(je),yt=new Array(je);for(let bn=0;bn<je;++bn)yt[bn]=re[q.idx[bn]],Pt[bn]=bn<1?0:Pt[bn-1]+Be*Re,Vt[bn]=new Float32Array(64),qt[bn]=new Uint16Array(64),nn[bn]=new Uint16Array(Be*64);for(let bn=0;bn<Re;++bn){var mt=8;bn==Re-1&&(mt=et);var tn=8;for(let gn=0;gn<Be;++gn){gn==Be-1&&(tn=Ct);for(let On=0;On<je;++On)qt[On].fill(0),qt[On][0]=ae[Pt[On]++],vt(it,$,qt[On]),dt(qt[On],Vt[On]),ie(Vt[On]);ee(Vt);for(let On=0;On<je;++On)Te(Vt[On],nn[On],gn*64)}let Pr=0;for(let gn=0;gn<je;++gn){const On=xe[q.idx[gn]].type;for(let ir=8*bn;ir<8*bn+mt;++ir){Pr=yt[gn][ir];for(let ra=0;ra<Ue;++ra){const Jr=ra*64+(ir&7)*8;rn.setUint16(Pr+0*On,nn[gn][Jr+0],!0),rn.setUint16(Pr+2*On,nn[gn][Jr+1],!0),rn.setUint16(Pr+4*On,nn[gn][Jr+2],!0),rn.setUint16(Pr+6*On,nn[gn][Jr+3],!0),rn.setUint16(Pr+8*On,nn[gn][Jr+4],!0),rn.setUint16(Pr+10*On,nn[gn][Jr+5],!0),rn.setUint16(Pr+12*On,nn[gn][Jr+6],!0),rn.setUint16(Pr+14*On,nn[gn][Jr+7],!0),Pr+=16*On}}if(Ue!=Be)for(let ir=8*bn;ir<8*bn+mt;++ir){const ra=yt[gn][ir]+8*Ue*2*On,Jr=Ue*64+(ir&7)*8;for(let js=0;js<tn;++js)rn.setUint16(ra+js*2*On,nn[gn][Jr+js],!0)}}}for(var Kt=new Uint16Array(pe),rn=new DataView(ue.buffer),Yn=0;Yn<je;++Yn){xe[q.idx[Yn]].decoded=!0;var vr=xe[q.idx[Yn]].type;if(xe[Yn].type==2)for(var rr=0;rr<he;++rr){const bn=yt[Yn][rr];for(var Nn=0;Nn<pe;++Nn)Kt[Nn]=rn.getUint16(bn+Nn*2*vr,!0);for(var Nn=0;Nn<pe;++Nn)rn.setFloat32(bn+Nn*2*vr,Ae(Kt[Nn]),!0)}}}function vt(q,re,xe){for(var $,ae=1;ae<64;)$=re[q.value],$==65280?ae=64:$>>8==255?ae+=$&255:(xe[ae]=$,ae++),q.value++}function dt(q,re){re[0]=Ae(q[0]),re[1]=Ae(q[1]),re[2]=Ae(q[5]),re[3]=Ae(q[6]),re[4]=Ae(q[14]),re[5]=Ae(q[15]),re[6]=Ae(q[27]),re[7]=Ae(q[28]),re[8]=Ae(q[2]),re[9]=Ae(q[4]),re[10]=Ae(q[7]),re[11]=Ae(q[13]),re[12]=Ae(q[16]),re[13]=Ae(q[26]),re[14]=Ae(q[29]),re[15]=Ae(q[42]),re[16]=Ae(q[3]),re[17]=Ae(q[8]),re[18]=Ae(q[12]),re[19]=Ae(q[17]),re[20]=Ae(q[25]),re[21]=Ae(q[30]),re[22]=Ae(q[41]),re[23]=Ae(q[43]),re[24]=Ae(q[9]),re[25]=Ae(q[11]),re[26]=Ae(q[18]),re[27]=Ae(q[24]),re[28]=Ae(q[31]),re[29]=Ae(q[40]),re[30]=Ae(q[44]),re[31]=Ae(q[53]),re[32]=Ae(q[10]),re[33]=Ae(q[19]),re[34]=Ae(q[23]),re[35]=Ae(q[32]),re[36]=Ae(q[39]),re[37]=Ae(q[45]),re[38]=Ae(q[52]),re[39]=Ae(q[54]),re[40]=Ae(q[20]),re[41]=Ae(q[22]),re[42]=Ae(q[33]),re[43]=Ae(q[38]),re[44]=Ae(q[46]),re[45]=Ae(q[51]),re[46]=Ae(q[55]),re[47]=Ae(q[60]),re[48]=Ae(q[21]),re[49]=Ae(q[34]),re[50]=Ae(q[37]),re[51]=Ae(q[47]),re[52]=Ae(q[50]),re[53]=Ae(q[56]),re[54]=Ae(q[59]),re[55]=Ae(q[61]),re[56]=Ae(q[35]),re[57]=Ae(q[36]),re[58]=Ae(q[48]),re[59]=Ae(q[49]),re[60]=Ae(q[57]),re[61]=Ae(q[58]),re[62]=Ae(q[62]),re[63]=Ae(q[63])}function ie(q){const re=.5*Math.cos(.7853975),xe=.5*Math.cos(3.14159/16),$=.5*Math.cos(3.14159/8),ae=.5*Math.cos(3*3.14159/16),ue=.5*Math.cos(5*3.14159/16),pe=.5*Math.cos(3*3.14159/8),he=.5*Math.cos(7*3.14159/16);for(var je=new Array(4),Ue=new Array(4),Be=new Array(4),Re=new Array(4),Ct=0;Ct<8;++Ct){var et=Ct*8;je[0]=$*q[et+2],je[1]=pe*q[et+2],je[2]=$*q[et+6],je[3]=pe*q[et+6],Ue[0]=xe*q[et+1]+ae*q[et+3]+ue*q[et+5]+he*q[et+7],Ue[1]=ae*q[et+1]-he*q[et+3]-xe*q[et+5]-ue*q[et+7],Ue[2]=ue*q[et+1]-xe*q[et+3]+he*q[et+5]+ae*q[et+7],Ue[3]=he*q[et+1]-ue*q[et+3]+ae*q[et+5]-xe*q[et+7],Be[0]=re*(q[et+0]+q[et+4]),Be[3]=re*(q[et+0]-q[et+4]),Be[1]=je[0]+je[3],Be[2]=je[1]-je[2],Re[0]=Be[0]+Be[1],Re[1]=Be[3]+Be[2],Re[2]=Be[3]-Be[2],Re[3]=Be[0]-Be[1],q[et+0]=Re[0]+Ue[0],q[et+1]=Re[1]+Ue[1],q[et+2]=Re[2]+Ue[2],q[et+3]=Re[3]+Ue[3],q[et+4]=Re[3]-Ue[3],q[et+5]=Re[2]-Ue[2],q[et+6]=Re[1]-Ue[1],q[et+7]=Re[0]-Ue[0]}for(var it=0;it<8;++it)je[0]=$*q[16+it],je[1]=pe*q[16+it],je[2]=$*q[48+it],je[3]=pe*q[48+it],Ue[0]=xe*q[8+it]+ae*q[24+it]+ue*q[40+it]+he*q[56+it],Ue[1]=ae*q[8+it]-he*q[24+it]-xe*q[40+it]-ue*q[56+it],Ue[2]=ue*q[8+it]-xe*q[24+it]+he*q[40+it]+ae*q[56+it],Ue[3]=he*q[8+it]-ue*q[24+it]+ae*q[40+it]-xe*q[56+it],Be[0]=re*(q[it]+q[32+it]),Be[3]=re*(q[it]-q[32+it]),Be[1]=je[0]+je[3],Be[2]=je[1]-je[2],Re[0]=Be[0]+Be[1],Re[1]=Be[3]+Be[2],Re[2]=Be[3]-Be[2],Re[3]=Be[0]-Be[1],q[0+it]=Re[0]+Ue[0],q[8+it]=Re[1]+Ue[1],q[16+it]=Re[2]+Ue[2],q[24+it]=Re[3]+Ue[3],q[32+it]=Re[3]-Ue[3],q[40+it]=Re[2]-Ue[2],q[48+it]=Re[1]-Ue[1],q[56+it]=Re[0]-Ue[0]}function ee(q){for(var re=0;re<64;++re){var xe=q[0][re],$=q[1][re],ae=q[2][re];q[0][re]=xe+1.5747*ae,q[1][re]=xe-.1873*$-.4682*ae,q[2][re]=xe+1.8556*$}}function Te(q,re,xe){for(var $=0;$<64;++$)re[xe+$]=mf.toHalfFloat(Ze(q[$]))}function Ze(q){return q<=1?Math.sign(q)*Math.pow(Math.abs(q),2.2):Math.sign(q)*Math.pow(T,Math.abs(q)-1)}function Je(q){return new DataView(q.array.buffer,q.offset.value,q.size)}function Ye(q){var re=q.viewer.buffer.slice(q.offset.value,q.offset.value+q.size),xe=new Uint8Array(Ke(re)),$=new Uint8Array(xe.length);return Ve(xe),Ne(xe,$),new DataView($.buffer)}function Tt(q){var re=q.array.slice(q.offset.value,q.offset.value+q.size),xe=vb(re),$=new Uint8Array(xe.length);return Ve(xe),Ne(xe,$),new DataView($.buffer)}function pt(q){for(var re=q.viewer,xe={value:q.offset.value},$=new Uint16Array(q.width*q.scanlineBlockSize*(q.channels*q.type)),ae=new Uint8Array(8192),ue=0,pe=new Array(q.channels),he=0;he<q.channels;he++)pe[he]={},pe[he].start=ue,pe[he].end=pe[he].start,pe[he].nx=q.width,pe[he].ny=q.lines,pe[he].size=q.type,ue+=pe[he].nx*pe[he].ny*pe[he].size;var je=ge(re,xe),Ue=ge(re,xe);if(Ue>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(je<=Ue)for(var he=0;he<Ue-je+1;he++)ae[he+je]=me(re,xe);var Be=new Uint16Array(65536),Re=j(ae,Be),Ct=Mt(re,xe);$e(q.array,re,xe,Ct,$,ue);for(var he=0;he<q.channels;++he)for(var et=pe[he],it=0;it<pe[he].size;++it)Pe($,et.start+it,et.nx,et.size,et.ny,et.nx*et.size,Re);ne(Be,$,ue);for(var Pt=0,Vt=new Uint8Array($.buffer.byteLength),qt=0;qt<q.lines;qt++)for(var nn=0;nn<q.channels;nn++){var et=pe[nn],yt=et.nx*et.size,mt=new Uint8Array($.buffer,et.end*2,yt*2);Vt.set(mt,Pt),Pt+=yt*2,et.end+=yt}return new DataView(Vt.buffer)}function St(q){var re=q.array.slice(q.offset.value,q.offset.value+q.size),xe=vb(re);const $=q.lines*q.channels*q.width,ae=q.type==1?new Uint16Array($):new Uint32Array($);let ue=0,pe=0;const he=new Array(4);for(let je=0;je<q.lines;je++)for(let Ue=0;Ue<q.channels;Ue++){let Be=0;switch(q.type){case 1:he[0]=ue,he[1]=he[0]+q.width,ue=he[1]+q.width;for(let Re=0;Re<q.width;++Re){const Ct=xe[he[0]++]<<8|xe[he[1]++];Be+=Ct,ae[pe]=Be,pe++}break;case 2:he[0]=ue,he[1]=he[0]+q.width,he[2]=he[1]+q.width,ue=he[2]+q.width;for(let Re=0;Re<q.width;++Re){const Ct=xe[he[0]++]<<24|xe[he[1]++]<<16|xe[he[2]++]<<8;Be+=Ct,ae[pe]=Be,pe++}break}}return new DataView(ae.buffer)}function Ut(q){var re=q.viewer,xe={value:q.offset.value},$=new Uint8Array(q.width*q.lines*(q.channels*q.type*2)),ae={version:We(re,xe),unknownUncompressedSize:We(re,xe),unknownCompressedSize:We(re,xe),acCompressedSize:We(re,xe),dcCompressedSize:We(re,xe),rleCompressedSize:We(re,xe),rleUncompressedSize:We(re,xe),rleRawSize:We(re,xe),totalAcUncompressedCount:We(re,xe),totalDcUncompressedCount:We(re,xe),acCompression:We(re,xe)};if(ae.version<2)throw"EXRLoader.parse: "+yi.compression+" version "+ae.version+" is unsupported";for(var ue=new Array,pe=ge(re,xe)-2;pe>0;){var he=Yt(re.buffer,xe),je=me(re,xe),Ue=je>>2&3,Be=(je>>4)-1,Re=new Int8Array([Be])[0],Ct=me(re,xe);ue.push({name:he,index:Re,type:Ct,compression:Ue}),pe-=he.length+3}for(var et=yi.channels,it=new Array(q.channels),Pt=0;Pt<q.channels;++Pt){var Vt=it[Pt]={},qt=et[Pt];Vt.name=qt.name,Vt.compression=0,Vt.decoded=!1,Vt.type=qt.pixelType,Vt.pLinear=qt.pLinear,Vt.width=q.width,Vt.height=q.lines}for(var nn={idx:new Array(3)},yt=0;yt<q.channels;++yt)for(var Vt=it[yt],Pt=0;Pt<ue.length;++Pt){var mt=ue[Pt];Vt.name==mt.name&&(Vt.compression=mt.compression,mt.index>=0&&(nn.idx[mt.index]=yt),Vt.offset=yt)}if(ae.acCompressedSize>0)switch(ae.acCompression){case 0:var rn=new Uint16Array(ae.totalAcUncompressedCount);$e(q.array,re,xe,ae.acCompressedSize,rn,ae.totalAcUncompressedCount);break;case 1:var tn=q.array.slice(xe.value,xe.value+ae.totalAcUncompressedCount),Kt=vb(tn),rn=new Uint16Array(Kt.buffer);xe.value+=ae.totalAcUncompressedCount;break}if(ae.dcCompressedSize>0){var Yn={array:q.array,offset:xe,size:ae.dcCompressedSize},vr=new Uint16Array(Tt(Yn).buffer);xe.value+=ae.dcCompressedSize}if(ae.rleRawSize>0){var tn=q.array.slice(xe.value,xe.value+ae.rleCompressedSize),Kt=vb(tn),rr=Ke(Kt.buffer);xe.value+=ae.rleCompressedSize}for(var Nn=0,bn=new Array(it.length),Pt=0;Pt<bn.length;++Pt)bn[Pt]=new Array;for(var Pr=0;Pr<q.lines;++Pr)for(var gn=0;gn<it.length;++gn)bn[gn].push(Nn),Nn+=it[gn].width*q.type*2;De(nn,bn,it,rn,vr,$);for(var Pt=0;Pt<it.length;++Pt){var Vt=it[Pt];if(!Vt.decoded)switch(Vt.compression){case 2:for(var On=0,ir=0,Pr=0;Pr<q.lines;++Pr){for(var ra=bn[Pt][On],Jr=0;Jr<Vt.width;++Jr){for(var js=0;js<2*Vt.type;++js)$[ra++]=rr[ir+js*Vt.width*Vt.height];ir++}On++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView($.buffer)}function Yt(q,re){for(var xe=new Uint8Array(q),$=0;xe[re.value+$]!=0;)$+=1;var ae=new TextDecoder().decode(xe.slice(re.value,re.value+$));return re.value=re.value+$+1,ae}function Qe(q,re,xe){var $=new TextDecoder().decode(new Uint8Array(q).slice(re.value,re.value+xe));return re.value=re.value+xe,$}function mn(q,re){var xe=$t(q,re),$=Mt(q,re);return[xe,$]}function hn(q,re){var xe=Mt(q,re),$=Mt(q,re);return[xe,$]}function $t(q,re){var xe=q.getInt32(re.value,!0);return re.value=re.value+4,xe}function Mt(q,re){var xe=q.getUint32(re.value,!0);return re.value=re.value+4,xe}function At(q,re){var xe=q[re.value];return re.value=re.value+1,xe}function me(q,re){var xe=q.getUint8(re.value);return re.value=re.value+1,xe}const We=function(q,re){let xe;return"getBigInt64"in DataView.prototype?xe=Number(q.getBigInt64(re.value,!0)):xe=q.getUint32(re.value+4,!0)+Number(q.getUint32(re.value,!0)<<32),re.value+=8,xe};function lt(q,re){var xe=q.getFloat32(re.value,!0);return re.value+=4,xe}function wt(q,re){return mf.toHalfFloat(lt(q,re))}function Ae(q){var re=(q&31744)>>10,xe=q&1023;return(q>>15?-1:1)*(re?re===31?xe?NaN:1/0:Math.pow(2,re-15)*(1+xe/1024):6103515625e-14*(xe/1024))}function ge(q,re){var xe=q.getUint16(re.value,!0);return re.value+=2,xe}function ot(q,re){return Ae(ge(q,re))}function gt(q,re,xe,$){for(var ae=xe.value,ue=[];xe.value<ae+$-1;){var pe=Yt(re,xe),he=$t(q,xe),je=me(q,xe);xe.value+=3;var Ue=$t(q,xe),Be=$t(q,xe);ue.push({name:pe,pixelType:he,pLinear:je,xSampling:Ue,ySampling:Be})}return xe.value+=1,ue}function Gt(q,re){var xe=lt(q,re),$=lt(q,re),ae=lt(q,re),ue=lt(q,re),pe=lt(q,re),he=lt(q,re),je=lt(q,re),Ue=lt(q,re);return{redX:xe,redY:$,greenX:ae,greenY:ue,blueX:pe,blueY:he,whiteX:je,whiteY:Ue}}function kt(q,re){var xe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],$=me(q,re);return xe[$]}function xn(q,re){var xe=Mt(q,re),$=Mt(q,re),ae=Mt(q,re),ue=Mt(q,re);return{xMin:xe,yMin:$,xMax:ae,yMax:ue}}function Pn(q,re){var xe=["INCREASING_Y"],$=me(q,re);return xe[$]}function Bn(q,re){var xe=lt(q,re),$=lt(q,re);return[xe,$]}function nr(q,re){var xe=lt(q,re),$=lt(q,re),ae=lt(q,re);return[xe,$,ae]}function Mn(q,re,xe,$,ae){if($==="string"||$==="stringvector"||$==="iccProfile")return Qe(re,xe,ae);if($==="chlist")return gt(q,re,xe,ae);if($==="chromaticities")return Gt(q,xe);if($==="compression")return kt(q,xe);if($==="box2i")return xn(q,xe);if($==="lineOrder")return Pn(q,xe);if($==="float")return lt(q,xe);if($==="v2f")return Bn(q,xe);if($==="v3f")return nr(q,xe);if($==="int")return $t(q,xe);if($==="rational")return mn(q,xe);if($==="timecode")return hn(q,xe);if($==="preview")return xe.value+=ae,"skipped";xe.value+=ae}function zr(q,re,xe){const $={};if(q.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";$.version=q.getUint8(4);const ae=q.getUint8(5);$.spec={singleTile:!!(ae&2),longName:!!(ae&4),deepFormat:!!(ae&8),multiPart:!!(ae&16)},xe.value=8;for(var ue=!0;ue;){var pe=Yt(re,xe);if(pe==0)ue=!1;else{var he=Yt(re,xe),je=Mt(q,xe),Ue=Mn(q,re,xe,he,je);Ue===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${he}'.`):$[pe]=Ue}}if((ae&-5)!=0)throw console.error("EXRHeader:",$),"THREE.EXRLoader: provided file is currently unsupported.";return $}function si(q,re,xe,$,ae){const ue={size:0,viewer:re,array:xe,offset:$,width:q.dataWindow.xMax-q.dataWindow.xMin+1,height:q.dataWindow.yMax-q.dataWindow.yMin+1,channels:q.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:q.channels[0].pixelType,uncompress:null,getter:null,format:null,[lv?"colorSpace":"encoding"]:null};switch(q.compression){case"NO_COMPRESSION":ue.lines=1,ue.uncompress=Je;break;case"RLE_COMPRESSION":ue.lines=1,ue.uncompress=Ye;break;case"ZIPS_COMPRESSION":ue.lines=1,ue.uncompress=Tt;break;case"ZIP_COMPRESSION":ue.lines=16,ue.uncompress=Tt;break;case"PIZ_COMPRESSION":ue.lines=32,ue.uncompress=pt;break;case"PXR24_COMPRESSION":ue.lines=16,ue.uncompress=St;break;case"DWAA_COMPRESSION":ue.lines=32,ue.uncompress=Ut;break;case"DWAB_COMPRESSION":ue.lines=256,ue.uncompress=Ut;break;default:throw"EXRLoader.parse: "+q.compression+" is unsupported"}if(ue.scanlineBlockSize=ue.lines,ue.type==1)switch(ae){case ai:ue.getter=ot,ue.inputSize=2;break;case Oi:ue.getter=ge,ue.inputSize=2;break}else if(ue.type==2)switch(ae){case ai:ue.getter=lt,ue.inputSize=4;break;case Oi:ue.getter=wt,ue.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ue.type+" for "+q.compression+".";ue.blockCount=(q.dataWindow.yMax+1)/ue.scanlineBlockSize;for(var pe=0;pe<ue.blockCount;pe++)We(re,$);ue.outputChannels=ue.channels==3?4:ue.channels;const he=ue.width*ue.height*ue.outputChannels;switch(ae){case ai:ue.byteArray=new Float32Array(he),ue.channels<ue.outputChannels&&ue.byteArray.fill(1,0,he);break;case Oi:ue.byteArray=new Uint16Array(he),ue.channels<ue.outputChannels&&ue.byteArray.fill(15360,0,he);break;default:console.error("THREE.EXRLoader: unsupported type: ",ae);break}return ue.bytesPerLine=ue.width*ue.inputSize*ue.channels,ue.outputChannels==4?ue.format=gi:ue.format=XN,lv?ue.colorSpace="srgb-linear":ue.encoding=3e3,ue}const ks=new DataView(e),ss=new Uint8Array(e),$i={value:0},yi=zr(ks,e,$i),cn=si(yi,ks,ss,$i,this.type),yl={value:0},Rc={R:0,G:1,B:2,A:3,Y:0};for(let q=0;q<cn.height/cn.scanlineBlockSize;q++){const re=Mt(ks,$i);cn.size=Mt(ks,$i),cn.lines=re+cn.scanlineBlockSize>cn.height?cn.height-re:cn.scanlineBlockSize;const $=cn.size<cn.lines*cn.bytesPerLine?cn.uncompress(cn):Je(cn);$i.value+=cn.size;for(let ae=0;ae<cn.scanlineBlockSize;ae++){const ue=ae+q*cn.scanlineBlockSize;if(ue>=cn.height)break;for(let pe=0;pe<cn.channels;pe++){const he=Rc[yi.channels[pe].name];for(let je=0;je<cn.width;je++){yl.value=(ae*(cn.channels*cn.width)+pe*cn.width+je)*cn.inputSize;const Ue=(cn.height-1-ue)*(cn.width*cn.outputChannels)+je*cn.outputChannels+he;cn.byteArray[Ue]=cn.getter($,yl)}}}}return{header:yi,width:cn.width,height:cn.height,data:cn.byteArray,format:cn.format,[lv?"colorSpace":"encoding"]:cn[lv?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){lv?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Wn,s.magFilter=Wn,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,o)}return super.load(e,a,r,i)}}function K0e(n,e,t){const r=Hi(m=>m.size),i=Hi(m=>m.viewport),a=typeof n=="number"?n:r.width*i.dpr,s=r.height*i.dpr,o=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...f}=o,h=z.useMemo(()=>{const m=new is(a,s,{minFilter:Wn,magFilter:Wn,type:Oi,...f});return u&&(m.depthTexture=new qw(a,s,ai)),m.samples=l,m},[]);return z.useLayoutEffect(()=>{h.setSize(a,s),l&&(h.samples=l)},[l,h,a,s]),z.useEffect(()=>()=>h.dispose(),[]),h}const Z0e=n=>typeof n=="function",J0e=z.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...a},s)=>{const o=Hi(({set:x})=>x),l=Hi(({camera:x})=>x),u=Hi(({size:x})=>x),f=z.useRef(null);z.useImperativeHandle(s,()=>f.current,[]);const h=z.useRef(null),m=K0e(e);z.useLayoutEffect(()=>{a.manual||(f.current.aspect=u.width/u.height)},[u,a]),z.useLayoutEffect(()=>{f.current.updateProjectionMatrix()});let y=0,b=null;const w=Z0e(i);return Bm(x=>{w&&(t===1/0||y<t)&&(h.current.visible=!1,x.gl.setRenderTarget(m),b=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,f.current),x.scene.background=b,x.gl.setRenderTarget(null),h.current.visible=!0,y++)}),z.useLayoutEffect(()=>{if(r){const x=l;return o(()=>({camera:f.current})),()=>o(()=>({camera:x}))}},[f,r,o]),z.createElement(z.Fragment,null,z.createElement("perspectiveCamera",jf({ref:f},a),!w&&i),z.createElement("group",{ref:h},w&&i(m.texture)))}),Q0e=z.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},f)=>{const h=Hi(O=>O.invalidate),m=Hi(O=>O.camera),y=Hi(O=>O.gl),b=Hi(O=>O.events),w=Hi(O=>O.setEvents),x=Hi(O=>O.set),_=Hi(O=>O.get),M=Hi(O=>O.performance),E=e||m,A=r||b.connected||y.domElement,R=z.useMemo(()=>new q0e(E),[E]);return Bm(()=>{R.enabled&&R.update()},-1),z.useEffect(()=>(a&&R.connect(a===!0?A:a),R.connect(A),()=>void R.dispose()),[a,A,t,R,h]),z.useEffect(()=>{const O=T=>{h(),t&&M.regress(),s&&s(T)},N=T=>{o&&o(T)},L=T=>{l&&l(T)};return R.addEventListener("change",O),R.addEventListener("start",N),R.addEventListener("end",L),()=>{R.removeEventListener("start",N),R.removeEventListener("end",L),R.removeEventListener("change",O)}},[s,o,l,R,h,w]),z.useEffect(()=>{if(n){const O=_().controls;return x({controls:R}),()=>x({controls:O})}},[n,R]),z.createElement("primitive",jf({ref:f,object:R,enableDamping:i},u))}),exe=3e3,txe=3001;var nxe=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class rxe extends wO{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${nxe}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const ixe=z.forwardRef(({speed:n=1,...e},t)=>{const[r]=z.useState(()=>new rxe);return Bm(i=>r&&(r.time=i.clock.elapsedTime*n)),z.createElement("primitive",jf({object:r,ref:t,attach:"material"},e))});function axe(n,e){const t=n+"Geometry";return z.forwardRef(({args:r,children:i,...a},s)=>{const o=z.useRef(null);return z.useImperativeHandle(s,()=>o.current),z.useLayoutEffect(()=>void e?.(o.current)),z.createElement("mesh",jf({ref:o},a),z.createElement(t,{attach:"geometry",args:r}),i)})}const sxe=axe("sphere"),LV=(n,e,t)=>{let r;switch(n){case As:r=new Uint8ClampedArray(e*t*4);break;case Oi:r=new Uint16Array(e*t*4);break;case al:r=new Uint32Array(e*t*4);break;case WN:r=new Int8Array(e*t*4);break;case GN:r=new Int16Array(e*t*4);break;case Vw:r=new Int32Array(e*t*4);break;case ai:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let xb;const oxe=(n,e,t,r)=>{if(xb!==void 0)return xb;const i=new is(1,1,r);e.setRenderTarget(i);const a=new Zr(new Yf,new Oc({color:16777215}));e.render(a,t),e.setRenderTarget(null);const s=LV(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),xb=s[0]!==0,xb};class DO{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:gi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:Wn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:Wn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:Dr,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:Dr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=DO.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new o0,this._camera=new gc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!oxe(this._type,this._renderer,this._camera,t)){let r;switch(this._type){case Oi:r=this._renderer.extensions.has("EXT_color_buffer_float")?ai:void 0;break}r!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ai}`),this._type=r):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Zr(new Yf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new is(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:Fu}static instantiateRenderer(){const e=new Yw;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=LV(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Uu(this.toArray(),this.width,this.height,gi,this._type,e?.mapping||Fu,e?.wrapS||Dr,e?.wrapT||Dr,e?.magFilter||Wn,e?.minFilter||Wn,e?.anisotropy||1,Os);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Rs&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof wr&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof wr&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class DV extends Error{}class UV extends Error{}const cv=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const a=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},lxe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const a=cv(i,"hdrgm:GainMapMin","0"),s=cv(i,"hdrgm:GainMapMax"),o=cv(i,"hdrgm:Gamma","1"),l=cv(i,"hdrgm:OffsetSDR","0.015625"),u=cv(i,"hdrgm:OffsetHDR","0.015625"),f=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),h=f?f[1]:"0",m=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!m)throw new Error("Incomplete gainmap metadata");const y=m[1];return{gainMapMin:Array.isArray(a)?a.map(b=>parseFloat(b)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(b=>parseFloat(b)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(b=>parseFloat(b)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(b=>parseFloat(b)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(b=>parseFloat(b)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class cxe{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,l=0,u;for(;o<s;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(a.getUint8(o)!==255){r(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(u=a.getUint8(o+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const f=o+4;if(a.getUint32(f)===1297106432){const h=f+4;let m;if(a.getUint16(h)===18761)m=!1;else if(a.getUint16(h)===19789)m=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(h+2,!m)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=a.getUint32(h+4,!m);if(y<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=h+y,w=a.getUint16(b,!m),x=b+2;let _=0;for(let R=x;R<x+12*w;R+=12)a.getUint16(R,!m)===45057&&(_=a.getUint32(R+8,!m));const E=b+2+w*12+4,A=[];for(let R=E;R<E+_*16;R+=16){const O={MPType:a.getUint32(R,!m),size:a.getUint32(R+4,!m),dataOffset:a.getUint32(R+8,!m),dependantImages:a.getUint32(R+12,!m),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=h+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,A.push(O)}if(this.options.extractNonFII&&A.length){const R=new Blob([a]),O=[];for(const N of A){if(N.isFII&&!this.options.extractFII)continue;const L=R.slice(N.start,N.end+1,"image/jpeg");O.push(L)}t(O)}}}o+=2+a.getUint16(o+2)}})}}const uxe=async n=>{const e=lxe(n);if(!e)throw new UV("Gain map XMP metadata not found");const r=await new cxe({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new DV("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},YF=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class dxe extends za{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new p_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new wr,sdr:new wr});return this._config.createQuadRenderer({width:16,height:16,type:Oi,colorSpace:Os,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,r){const i=t?new Blob([t],{type:"image/jpeg"}):void 0,a=new Blob([e],{type:"image/jpeg"});let s,o,l=!1;if(typeof createImageBitmap>"u"){const u=await Promise.all([i?YF(i):Promise.resolve(void 0),YF(a)]);o=u[0],s=u[1],l=r==="flipY"}else{const u=await Promise.all([i?createImageBitmap(i,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:r||"flipY"})]);o=u[0],s=u[1]}return{sdrImage:s,gainMapImage:o,needsFlip:l}}createTextures(e,t,r){const i=new wr(t||new ImageData(2,2),Fu,Dr,Dr,Wn,HC,gi,As,1,Os);i.flipY=r,i.needsUpdate=!0;const a=new wr(e,Fu,Dr,Dr,Wn,HC,gi,As,1,mi);return a.flipY=r,a.needsUpdate=!0,{gainMap:i,sdr:a}}updateQuadRenderer(e,t,r,i,a){e.width=t.width,e.height=t.height,e.material.gainMap=r,e.material.sdr=i,e.material.gainMapMin=a.gainMapMin,e.material.gainMapMax=a.gainMapMax,e.material.offsetHdr=a.offsetHdr,e.material.offsetSdr=a.offsetSdr,e.material.gamma=a.gamma,e.material.hdrCapacityMin=a.hdrCapacityMin,e.material.hdrCapacityMax=a.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),e.material.needsUpdate=!0}}const fxe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,hxe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class pxe extends Rs{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:l,sdr:u,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:fxe,fragmentShader:hxe,uniforms:{sdr:{value:u},gainMap:{value:f},gamma:{value:new oe(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new oe().fromArray(t)},offsetSdr:{value:new oe().fromArray(r)},gainMapMin:{value:new oe().fromArray(i)},gainMapMax:{value:new oe().fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(l-o)}},blending:ll,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class FV extends dxe{constructor(e,t){super({renderer:e,createMaterial:r=>new pxe(r),createQuadRenderer:r=>new DO(r)},t)}async render(e,t,r,i){const{sdrImage:a,gainMapImage:s,needsFlip:o}=await this.processImages(r,i,"flipY"),{gainMap:l,sdr:u}=this.createTextures(a,s,o);this.updateQuadRenderer(e,a,l,u,t),e.render()}}class mxe extends FV{load([e,t,r],i,a,s){const o=this.prepareQuadRenderer();let l,u,f;const h=async()=>{if(l&&u&&f){try{await this.render(o,f,l,u)}catch(T){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof s=="function"&&s(T),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),o.disposeOnDemandRenderer()}};let m=!0,y=0,b=0,w=!0,x=0,_=0,M=!0,E=0,A=0;const R=()=>{if(typeof a=="function"){const T=y+x+E,j=b+_+A,U=m&&w&&M;a(new ProgressEvent("progress",{lengthComputable:U,loaded:j,total:T}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const O=new Ps(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async T=>{if(typeof T=="string")throw new Error("Invalid sdr buffer");l=T,await h()},T=>{m=T.lengthComputable,b=T.loaded,y=T.total,R()},T=>{this.manager.itemError(e),typeof s=="function"&&s(T)});const N=new Ps(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(t,async T=>{if(typeof T=="string")throw new Error("Invalid gainmap buffer");u=T,await h()},T=>{w=T.lengthComputable,_=T.loaded,x=T.total,R()},T=>{this.manager.itemError(t),typeof s=="function"&&s(T)});const L=new Ps(this._internalLoadingManager);return L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(r,async T=>{if(typeof T!="string")throw new Error("Invalid metadata string");f=JSON.parse(T),await h()},T=>{M=T.lengthComputable,A=T.loaded,E=T.total,R()},T=>{this.manager.itemError(r),typeof s=="function"&&s(T)}),o}}class gxe extends FV{load(e,t,r,i){const a=this.prepareQuadRenderer(),s=new Ps(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let u,f,h;try{const m=await uxe(l);u=m.sdr,f=m.gainMap,h=m.metadata}catch(m){if(m instanceof UV||m instanceof DV)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw m}try{await this.render(a,h,u.buffer,f?.buffer)}catch(m){this.manager.itemError(e),typeof i=="function"&&i(m),a.disposeOnDemandRenderer();return}typeof t=="function"&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},r,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),a}}const Vy={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},zV="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Wp=n=>Array.isArray(n),UO=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function g_({files:n=UO,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let a=null,s=!1;t&&(FO(t),n=Vy[t],e=zV),s=Wp(n);const{extension:o,isCubemap:l}=zO(n);if(a=BO(o),!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Hi(y=>y.gl);z.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function y(){Em.clear(a,s?[n]:n)}u.domElement.addEventListener("webglcontextlost",y,{once:!0})},[n,u.domElement]);const f=Em(a,s?[n]:n,y=>{(o==="webp"||o==="jpg"||o==="jpeg")&&y.setRenderer(u),y.setPath==null||y.setPath(e),i&&i(y)});let h=s?f[0]:f;if(o==="jpg"||o==="jpeg"||o==="webp"){var m;h=(m=h.renderTarget)==null?void 0:m.texture}return h.mapping=l?hl:bm,"colorSpace"in h?h.colorSpace=r??l?"srgb":"srgb-linear":h.encoding=r??l?txe:exe,h}const vxe={files:UO,path:"",preset:void 0,extensions:void 0};g_.preload=n=>{const e={...vxe,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:a}=e;i&&(FO(i),t=Vy[i],r=zV);const{extension:s}=zO(t);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=BO(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);Em.preload(o,Wp(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),a&&a(l)})};const yxe={files:UO,preset:void 0};g_.clear=n=>{const e={...yxe,...n};let{files:t}=e;const{preset:r}=e;r&&(FO(r),t=Vy[r]);const{extension:i}=zO(t),a=BO(i);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Em.clear(a,Wp(t)?[t]:t)};function FO(n){if(!(n in Vy))throw new Error("Preset must be one of: "+Object.keys(Vy).join(", "))}function zO(n){var e;const t=Wp(n)&&n.length===6,r=Wp(n)&&n.length===3&&n.some(s=>s.endsWith("json")),i=Wp(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function BO(n){return n==="cube"?XH:n==="hdr"?X0e:n==="exr"?Y0e:n==="jpg"||n==="jpeg"?gxe:n==="webp"?mxe:null}const xxe=n=>n.current&&n.current.isScene,bxe=n=>xxe(n)?n.current:n;function HO(n,e,t,r,i={}){var a,s,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=bxe(e||t),f=u.background,h=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(a=(s=u.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(o=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),_u(u,i),()=>{n!=="only"&&(u.environment=h),n&&(u.background=f),_u(u,m)}}function VO({scene:n,background:e=!1,map:t,...r}){const i=Hi(a=>a.scene);return z.useLayoutEffect(()=>{if(t)return HO(e,n,i,t,r)}),null}function BV({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const u=g_(l),f=Hi(h=>h.scene);return z.useLayoutEffect(()=>HO(n,e,f,u,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),z.useEffect(()=>()=>{u.dispose()},[u]),null}function wxe({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:h,environmentRotation:m,scene:y,files:b,path:w,preset:x=void 0,extensions:_}){const M=Hi(L=>L.gl),E=Hi(L=>L.scene),A=z.useRef(null),[R]=z.useState(()=>new o0),O=z.useMemo(()=>{const L=new oO(r);return L.texture.type=Oi,L},[r]);z.useEffect(()=>()=>{O.dispose()},[O]),z.useLayoutEffect(()=>{if(i===1){const L=M.autoClear;M.autoClear=!0,A.current.update(M,R),M.autoClear=L}return HO(s,y,E,O.texture,{backgroundBlurriness:o??l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:h,environmentRotation:m})},[n,R,O.texture,y,E,s,i,M]);let N=1;return Bm(()=>{if(i===1/0||N<i){const L=M.autoClear;M.autoClear=!0,A.current.update(M,R),M.autoClear=L,N++}}),z.createElement(z.Fragment,null,s0e(z.createElement(z.Fragment,null,n,z.createElement("cubeCamera",{ref:A,args:[e,t,O]}),b||x?z.createElement(BV,{background:!0,files:b,preset:x,path:w,extensions:_}):a?z.createElement(VO,{background:!0,map:a,extensions:_}):null),R))}function _xe(n){var e,t,r,i;const a=g_(n),s=n.map||a;z.useMemo(()=>fV({GroundProjectedEnvImpl:F0e}),[]),z.useEffect(()=>()=>{a.dispose()},[a]);const o=z.useMemo(()=>[s],[s]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,f=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return z.createElement(z.Fragment,null,z.createElement(VO,jf({},n,{map:s})),z.createElement("groundProjectedEnvImpl",{args:o,scale:f,height:l,radius:u}))}function Sxe(n){return n.ground?z.createElement(_xe,n):n.map?z.createElement(VO,n):n.children?z.createElement(wxe,n):z.createElement(BV,n)}function Mxe({typing:n,...e}){const t=z.useRef(null),[r,i]=z.useState(!1);return Bm((a,s)=>{if(t.current)if(t.current.rotation.x+=s*.2,t.current.rotation.y+=s*.3,n){const o=1+Math.sin(a.clock.elapsedTime*3)*.1;t.current.scale.setScalar(o)}else t.current.scale.setScalar(1)}),d.jsx(sxe,{ref:t,args:[1,64,64],onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),...e,children:d.jsx(ixe,{color:r?"#4f46e5":"#6366f1",attach:"material",distort:.3,speed:2,roughness:.1,metalness:.8})})}function Exe({count:n=50}){const e=z.useRef([]);return Bm(t=>{e.current.forEach((r,i)=>{r&&(r.position.y=Math.sin(t.clock.elapsedTime+i)*.5,r.rotation.x+=.01,r.rotation.y+=.01)})}),d.jsx(d.Fragment,{children:Array.from({length:n}).map((t,r)=>d.jsxs("mesh",{ref:i=>e.current[r]=i,position:[(Math.random()-.5)*4,(Math.random()-.5)*4,(Math.random()-.5)*4],scale:Math.random()*.1+.05,children:[d.jsx("sphereGeometry",{args:[.1,8,8]}),d.jsx("meshStandardMaterial",{color:"#818cf8",emissive:"#6366f1",emissiveIntensity:.5,transparent:!0,opacity:.6})]},r))})}function Txe({typing:n,showParticles:e=!0}){return d.jsxs(d.Fragment,{children:[d.jsx(J0e,{makeDefault:!0,position:[0,0,5],fov:50}),d.jsx("ambientLight",{intensity:.5}),d.jsx("pointLight",{position:[10,10,10],intensity:1}),d.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#818cf8"}),d.jsx(Mxe,{typing:n,position:[0,0,0]}),e&&d.jsx(Exe,{count:30}),d.jsx(Q0e,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:1,minPolarAngle:Math.PI/3,maxPolarAngle:Math.PI/3}),d.jsx(Sxe,{preset:"sunset"})]})}const Axe=({typing:n=!1,showParticles:e=!0,className:t=""})=>d.jsx("div",{className:`relative ${t}`,style:{width:"100%",height:"100%"},children:d.jsx(M0e,{style:{background:"transparent"},gl:{alpha:!0,antialias:!0},children:d.jsx(Txe,{typing:n,showParticles:e})})}),Cxe=()=>{const{user:n}=Fr(),[e,t]=z.useState(!1),[r,i]=z.useState(!1),[a,s]=z.useState([]),[o,l]=z.useState(""),[u,f]=z.useState(null),[h,m]=z.useState(!1),[y,b]=z.useState(!1),[w,x]=z.useState(null),[_,M]=z.useState(!0),E=z.useRef(null),A=z.useRef(null);z.useEffect(()=>{e&&n&&(u||O())},[e,n]),z.useEffect(()=>{R()},[a]);const R=()=>{E.current?.scrollIntoView({behavior:"smooth"})},O=async()=>{try{m(!0),x(null);const U=await yf.createSession("web");f(U.session),s(U.messages||[])}catch(U){console.error("Failed to initialize chat session",U);const B=U?.message||U?.response?.data?.message||"Failed to initialize chat";x(B),ve.error(B)}finally{m(!1)}},N=async(U=null,B=[])=>{const V=U||o;if(!V?.trim()&&B.length===0||h)return;let W=u;if(!W)try{const Y=await yf.createSession("web");W=Y.session,f(W),Y.messages&&Y.messages.length>0&&s(Y.messages)}catch(Y){console.error("Failed to initialize session",Y);const Q=Y?.message||Y?.response?.data?.message||"Failed to initialize chat session";ve.error(Q);return}m(!0),b(!0);try{const Y=await yf.sendMessage(V?.trim()||"",W?.sessionId,B),Q=Y.userMessage||{sender:"user",content:V||"File attachment",createdAt:new Date},se=Y.botMessage||{sender:"bot",content:Y.content||"I received your message.",createdAt:new Date},G={sender:Q.sender||"user",content:Q.content||V||"File attachment",createdAt:Q.createdAt||new Date,attachments:Q.attachments||(B.length>0?B.map(Z=>({filename:Z.name,path:Z.name})):[])},J={sender:se.sender||"bot",content:se.content||Y.content||"I received your message.",createdAt:se.createdAt||new Date,quickActions:se.quickActions||Y.quickActions||[],metadata:se.metadata||Y.metadata||{}};s(Z=>[...Z,G,J]),l(""),b(!1)}catch(Y){console.error("Failed to send message",Y),ve.error(Y.message||"Failed to send message"),b(!1)}finally{m(!1)}},L=async U=>{switch(U){case"Create Ticket":case"Create Another Ticket":await N("create ticket");break;case"Check Status":await N("Show all my open tickets");break;case"Contact Support":await N("I want to speak with a technician");break;case"FAQ":await N("What are common support questions?");break;default:["Low","Medium","High","Urgent"].includes(U)?await N(U.toLowerCase()):await N(U)}},T=U=>{const B=Array.from(U.target.files);B.length>0&&N(null,B)},j=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),o.trim()&&!h&&N())};return n?d.jsxs(d.Fragment,{children:[!e&&d.jsxs("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 bg-primary-600 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-all z-[9998] flex items-center justify-center group","aria-label":"Open chat",style:{width:"56px",height:"56px"},children:[d.jsx(Ru,{size:24}),d.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-3 h-3 flex items-center justify-center animate-pulse",title:"3D Avatar Enabled",children:d.jsx("span",{className:"w-2 h-2 bg-white rounded-full"})}),d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"!"})]}),e&&d.jsxs("div",{className:`fixed bottom-6 right-6 bg-white rounded-lg shadow-2xl z-[9999] flex flex-col transition-all ${r?"w-80 h-14":"w-96 h-[600px] max-h-[600px]"}`,style:{boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxHeight:"calc(100vh - 48px)"},children:[d.jsxs("div",{className:"bg-primary-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ru,{size:20}),d.jsx("span",{className:"font-semibold",children:"Support Chat"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>M(!_),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":_?"Hide 3D Avatar":"Show 3D Avatar",title:_?"Hide 3D Avatar":"Show 3D Avatar",children:_?d.jsx(zb,{size:16}):d.jsx($p,{size:16})}),d.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":r?"Maximize":"Minimize",children:r?d.jsx(R$,{size:16}):d.jsx(j$,{size:16})}),d.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":"Close chat",children:d.jsx(Cf,{size:16})})]})]}),!r&&d.jsxs(d.Fragment,{children:[w&&d.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3 flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-2 text-red-800 text-sm",children:d.jsxs("span",{children:[" ",w]})}),d.jsx("button",{onClick:O,className:"text-red-600 hover:text-red-800 text-sm font-medium underline",children:"Retry"})]}),_&&d.jsxs("div",{className:"h-48 bg-gradient-to-b from-primary-50 to-gray-50 border-b border-gray-200 relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0",children:d.jsx(Axe,{typing:y,showParticles:!0})}),d.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-black/50 text-white text-xs px-3 py-1 rounded-full",children:y?"Thinking...":"Online"})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[a.length===0&&!h&&!w&&d.jsxs("div",{className:"text-center text-gray-500 py-8",children:[!_&&d.jsx(Ru,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),d.jsx("p",{children:"Start a conversation!"}),d.jsx("p",{className:"text-sm mt-2",children:"I can help you create tickets, check status, and answer questions."})]}),h&&a.length===0&&d.jsxs("div",{className:"text-center text-gray-500 py-8",children:[d.jsx("div",{className:"animate-spin mx-auto h-8 w-8 border-4 border-primary-600 border-t-transparent rounded-full mb-2"}),d.jsx("p",{children:"Initializing chat..."})]}),a.map((U,B)=>d.jsx("div",{className:`flex ${U.sender==="user"?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${U.sender==="user"?"bg-primary-600 text-white":U.sender==="technician"?"bg-blue-100 text-blue-900":"bg-white text-gray-900 border border-gray-200"}`,children:[U.attachments&&U.attachments.length>0&&d.jsx("div",{className:"mb-2 space-y-1",children:U.attachments.map((V,W)=>d.jsxs("a",{href:`/api/uploads/${V.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm underline block",children:[" ",V.filename]},W))}),d.jsx("p",{className:"text-sm whitespace-pre-wrap",children:U.content}),U.metadata?.ticketId&&d.jsx("div",{className:"mt-2 pt-2 border-t border-gray-300",children:d.jsxs("a",{href:`/tickets/${U.metadata.ticketId}`,className:"text-xs underline",children:["View Ticket #",U.metadata.ticketId]})}),d.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(U.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},B)),y&&d.jsx("div",{className:"flex justify-start",children:d.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),d.jsx("div",{ref:E})]}),a.length>0&&a[a.length-1]?.quickActions&&d.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-white",children:d.jsx("div",{className:"flex flex-wrap gap-2",children:a[a.length-1].quickActions.map((U,B)=>d.jsx("button",{onClick:()=>L(U),className:"text-xs bg-primary-50 text-primary-700 px-3 py-1 rounded-full hover:bg-primary-100 transition-colors",children:U},B))})}),d.jsx("div",{className:"p-4 border-t border-gray-200 bg-white rounded-b-lg",children:d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("input",{ref:A,type:"file",multiple:!0,className:"hidden",onChange:T,accept:"image/*,.pdf,.doc,.docx"}),d.jsx("button",{onClick:()=>A.current?.click(),className:"p-2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Attach file",children:d.jsx(Mz,{size:20})}),d.jsx("textarea",{value:o,onChange:U=>l(U.target.value),onKeyPress:j,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500",rows:1,disabled:h}),d.jsx("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),console.log("Send button clicked",{inputMessage:o,loading:h,session:u}),o.trim()&&!h&&N()},disabled:h||!o.trim(),className:"bg-primary-600 text-white p-2 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center","aria-label":"Send message",type:"button",children:d.jsx(IP,{size:20})})]})})]})]})]}):null};function Pxe(){return d.jsx(x$,{children:d.jsx(b$,{children:d.jsx(w$,{children:d.jsx(_G,{children:d.jsx(_$,{children:d.jsxs("div",{className:"App",children:[d.jsx(Cxe,{}),d.jsx(v$,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#ffffff",color:"#111827",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",padding:"12px 16px"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#ffffff"},style:{border:"1px solid #d1fae5",background:"#f0fdf4"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#ffffff"},style:{border:"1px solid #fee2e2",background:"#fef2f2"}}}}),d.jsxs(hG,{children:[d.jsx(Un,{path:"/login",element:d.jsx(G$,{})}),d.jsx(Un,{path:"/mfa-login",element:d.jsx(Q$,{})}),d.jsx(Un,{path:"/sso/azure",element:d.jsx($$,{})}),d.jsx(Un,{path:"/sso/google",element:d.jsx(q$,{})}),d.jsx(Un,{path:"/dashboard",element:d.jsx(pr,{children:d.jsx(nue,{})})}),d.jsx(Un,{path:"/tickets",element:d.jsx(pr,{children:d.jsx(rue,{})})}),d.jsx(Un,{path:"/tickets/search",element:d.jsx(pr,{children:d.jsx(iue,{})})}),d.jsx(Un,{path:"/tickets/new",element:d.jsx(pr,{children:d.jsx(due,{})})}),d.jsx(Un,{path:"/tickets/:id",element:d.jsx(pr,{children:d.jsx(fue,{})})}),d.jsx(Un,{path:"/profile",element:d.jsx(pr,{children:d.jsx(hue,{})})}),d.jsx(Un,{path:"/mfa-setup",element:d.jsx(pr,{children:d.jsx(J$,{})})}),d.jsx(Un,{path:"/settings",element:d.jsx(pr,{children:d.jsx(pue,{})})}),d.jsx(Un,{path:"/reports",element:d.jsx(pr,{children:d.jsx(Iue,{})})}),d.jsx(Un,{path:"/admin/organizations",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Sue,{})})}),d.jsx(Un,{path:"/admin/users",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(mue,{})})}),d.jsx(Un,{path:"/admin/categories",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Mue,{})})}),d.jsx(Un,{path:"/admin/roles",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(yue,{})})}),d.jsx(Un,{path:"/admin/sla",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Eue,{})})}),d.jsx(Un,{path:"/admin/departments",element:d.jsx(pr,{children:d.jsx(Tue,{})})}),d.jsx(Un,{path:"/admin/email",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(xue,{})})}),d.jsx(Un,{path:"/admin/email-templates",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(bue,{})})}),d.jsx(Un,{path:"/department-head/dashboard",element:d.jsx(pr,{children:d.jsx(Lue,{})})}),d.jsx(Un,{path:"/admin/sso",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(wue,{})})}),d.jsx(Un,{path:"/admin/logo",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(_ue,{})})}),d.jsx(Un,{path:"/admin/tickets/import",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Aue,{})})}),d.jsx(Un,{path:"/admin/analytics",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Cue,{})})}),d.jsx(Un,{path:"/admin/api-keys",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Pue,{})})}),d.jsx(Un,{path:"/admin/email-automation",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Nue,{})})}),d.jsx(Un,{path:"/admin/faq",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Rue,{})})}),d.jsx(Un,{path:"/admin/chat-history",element:d.jsx(pr,{children:d.jsx(kue,{})})}),d.jsx(Un,{path:"/admin/teams-integration",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(Oue,{})})}),d.jsx(Un,{path:"/admin/backup-restore",element:d.jsx(pr,{requireAdmin:!0,children:d.jsx(jue,{})})}),d.jsx(Un,{path:"/",element:d.jsx(kb,{to:"/dashboard",replace:!0})}),d.jsx(Un,{path:"*",element:d.jsx(kb,{to:"/dashboard",replace:!0})})]})]})})})})})})}_W.createRoot(document.getElementById("root")).render(d.jsx(ye.StrictMode,{children:d.jsx(Pxe,{})}));
